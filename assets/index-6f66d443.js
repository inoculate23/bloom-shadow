var R1=Object.defineProperty;var F1=(t,r,a)=>r in t?R1(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a;var dg=(t,r,a)=>(F1(t,typeof r!="symbol"?r+"":r,a),a),fg=(t,r,a)=>{if(!r.has(t))throw TypeError("Cannot "+a)};var xe=(t,r,a)=>(fg(t,r,"read from private field"),a?a.call(t):r.get(t)),$i=(t,r,a)=>{if(r.has(t))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(t):r.set(t,a)},Qr=(t,r,a,o)=>(fg(t,r,"write to private field"),o?o.call(t,a):r.set(t,a),a);function M1(t,r){for(var a=0;a<r.length;a++){const o=r[a];if(typeof o!="string"&&!Array.isArray(o)){for(const u in o)if(u!=="default"&&!(u in t)){const d=Object.getOwnPropertyDescriptor(o,u);d&&Object.defineProperty(t,u,d.get?d:{enumerable:!0,get:()=>o[u]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function a(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(u){if(u.ep)return;u.ep=!0;const d=a(u);fetch(u.href,d)}})();function Ys(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ey={exports:{}},bc={},Uy={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qs=Symbol.for("react.element"),O1=Symbol.for("react.portal"),N1=Symbol.for("react.fragment"),H1=Symbol.for("react.strict_mode"),G1=Symbol.for("react.profiler"),$1=Symbol.for("react.provider"),j1=Symbol.for("react.context"),V1=Symbol.for("react.forward_ref"),W1=Symbol.for("react.suspense"),Y1=Symbol.for("react.memo"),q1=Symbol.for("react.lazy"),hg=Symbol.iterator;function K1(t){return t===null||typeof t!="object"?null:(t=hg&&t[hg]||t["@@iterator"],typeof t=="function"?t:null)}var Cy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ay=Object.assign,Ty={};function xo(t,r,a){this.props=t,this.context=r,this.refs=Ty,this.updater=a||Cy}xo.prototype.isReactComponent={};xo.prototype.setState=function(t,r){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,r,"setState")};xo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Py(){}Py.prototype=xo.prototype;function vp(t,r,a){this.props=t,this.context=r,this.refs=Ty,this.updater=a||Cy}var _p=vp.prototype=new Py;_p.constructor=vp;Ay(_p,xo.prototype);_p.isPureReactComponent=!0;var pg=Array.isArray,Iy=Object.prototype.hasOwnProperty,yp={current:null},By={key:!0,ref:!0,__self:!0,__source:!0};function ky(t,r,a){var o,u={},d=null,h=null;if(r!=null)for(o in r.ref!==void 0&&(h=r.ref),r.key!==void 0&&(d=""+r.key),r)Iy.call(r,o)&&!By.hasOwnProperty(o)&&(u[o]=r[o]);var l=arguments.length-2;if(l===1)u.children=a;else if(1<l){for(var g=Array(l),y=0;y<l;y++)g[y]=arguments[y+2];u.children=g}if(t&&t.defaultProps)for(o in l=t.defaultProps,l)u[o]===void 0&&(u[o]=l[o]);return{$$typeof:qs,type:t,key:d,ref:h,props:u,_owner:yp.current}}function X1(t,r){return{$$typeof:qs,type:t.type,key:r,ref:t.ref,props:t.props,_owner:t._owner}}function bp(t){return typeof t=="object"&&t!==null&&t.$$typeof===qs}function Q1(t){var r={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(a){return r[a]})}var mg=/\/+/g;function Pd(t,r){return typeof t=="object"&&t!==null&&t.key!=null?Q1(""+t.key):r.toString(36)}function su(t,r,a,o,u){var d=typeof t;(d==="undefined"||d==="boolean")&&(t=null);var h=!1;if(t===null)h=!0;else switch(d){case"string":case"number":h=!0;break;case"object":switch(t.$$typeof){case qs:case O1:h=!0}}if(h)return h=t,u=u(h),t=o===""?"."+Pd(h,0):o,pg(u)?(a="",t!=null&&(a=t.replace(mg,"$&/")+"/"),su(u,r,a,"",function(y){return y})):u!=null&&(bp(u)&&(u=X1(u,a+(!u.key||h&&h.key===u.key?"":(""+u.key).replace(mg,"$&/")+"/")+t)),r.push(u)),1;if(h=0,o=o===""?".":o+":",pg(t))for(var l=0;l<t.length;l++){d=t[l];var g=o+Pd(d,l);h+=su(d,r,a,g,u)}else if(g=K1(t),typeof g=="function")for(t=g.call(t),l=0;!(d=t.next()).done;)d=d.value,g=o+Pd(d,l++),h+=su(d,r,a,g,u);else if(d==="object")throw r=String(t),Error("Objects are not valid as a React child (found: "+(r==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.");return h}function Al(t,r,a){if(t==null)return t;var o=[],u=0;return su(t,o,"","",function(d){return r.call(a,d,u++)}),o}function Z1(t){if(t._status===-1){var r=t._result;r=r(),r.then(function(a){(t._status===0||t._status===-1)&&(t._status=1,t._result=a)},function(a){(t._status===0||t._status===-1)&&(t._status=2,t._result=a)}),t._status===-1&&(t._status=0,t._result=r)}if(t._status===1)return t._result.default;throw t._result}var jt={current:null},lu={transition:null},J1={ReactCurrentDispatcher:jt,ReactCurrentBatchConfig:lu,ReactCurrentOwner:yp};me.Children={map:Al,forEach:function(t,r,a){Al(t,function(){r.apply(this,arguments)},a)},count:function(t){var r=0;return Al(t,function(){r++}),r},toArray:function(t){return Al(t,function(r){return r})||[]},only:function(t){if(!bp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};me.Component=xo;me.Fragment=N1;me.Profiler=G1;me.PureComponent=vp;me.StrictMode=H1;me.Suspense=W1;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J1;me.cloneElement=function(t,r,a){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var o=Ay({},t.props),u=t.key,d=t.ref,h=t._owner;if(r!=null){if(r.ref!==void 0&&(d=r.ref,h=yp.current),r.key!==void 0&&(u=""+r.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(g in r)Iy.call(r,g)&&!By.hasOwnProperty(g)&&(o[g]=r[g]===void 0&&l!==void 0?l[g]:r[g])}var g=arguments.length-2;if(g===1)o.children=a;else if(1<g){l=Array(g);for(var y=0;y<g;y++)l[y]=arguments[y+2];o.children=l}return{$$typeof:qs,type:t.type,key:u,ref:d,props:o,_owner:h}};me.createContext=function(t){return t={$$typeof:j1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:$1,_context:t},t.Consumer=t};me.createElement=ky;me.createFactory=function(t){var r=ky.bind(null,t);return r.type=t,r};me.createRef=function(){return{current:null}};me.forwardRef=function(t){return{$$typeof:V1,render:t}};me.isValidElement=bp;me.lazy=function(t){return{$$typeof:q1,_payload:{_status:-1,_result:t},_init:Z1}};me.memo=function(t,r){return{$$typeof:Y1,type:t,compare:r===void 0?null:r}};me.startTransition=function(t){var r=lu.transition;lu.transition={};try{t()}finally{lu.transition=r}};me.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};me.useCallback=function(t,r){return jt.current.useCallback(t,r)};me.useContext=function(t){return jt.current.useContext(t)};me.useDebugValue=function(){};me.useDeferredValue=function(t){return jt.current.useDeferredValue(t)};me.useEffect=function(t,r){return jt.current.useEffect(t,r)};me.useId=function(){return jt.current.useId()};me.useImperativeHandle=function(t,r,a){return jt.current.useImperativeHandle(t,r,a)};me.useInsertionEffect=function(t,r){return jt.current.useInsertionEffect(t,r)};me.useLayoutEffect=function(t,r){return jt.current.useLayoutEffect(t,r)};me.useMemo=function(t,r){return jt.current.useMemo(t,r)};me.useReducer=function(t,r,a){return jt.current.useReducer(t,r,a)};me.useRef=function(t){return jt.current.useRef(t)};me.useState=function(t){return jt.current.useState(t)};me.useSyncExternalStore=function(t,r,a){return jt.current.useSyncExternalStore(t,r,a)};me.useTransition=function(){return jt.current.useTransition()};me.version="18.2.0";Uy.exports=me;var C=Uy.exports;const ue=Ys(C),Sc=M1({__proto__:null,default:ue},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ex=C,tx=Symbol.for("react.element"),rx=Symbol.for("react.fragment"),ix=Object.prototype.hasOwnProperty,nx=ex.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ax={key:!0,ref:!0,__self:!0,__source:!0};function Dy(t,r,a){var o,u={},d=null,h=null;a!==void 0&&(d=""+a),r.key!==void 0&&(d=""+r.key),r.ref!==void 0&&(h=r.ref);for(o in r)ix.call(r,o)&&!ax.hasOwnProperty(o)&&(u[o]=r[o]);if(t&&t.defaultProps)for(o in r=t.defaultProps,r)u[o]===void 0&&(u[o]=r[o]);return{$$typeof:tx,type:t,key:d,ref:h,props:u,_owner:nx.current}}bc.Fragment=rx;bc.jsx=Dy;bc.jsxs=Dy;Ey.exports=bc;var j=Ey.exports,kf={},Ly={exports:{}},pr={},zy={exports:{}},Ry={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function r(I,L){var O=I.length;I.push(L);e:for(;0<O;){var k=O-1>>>1,$=I[k];if(0<u($,L))I[k]=L,I[O]=$,O=k;else break e}}function a(I){return I.length===0?null:I[0]}function o(I){if(I.length===0)return null;var L=I[0],O=I.pop();if(O!==L){I[0]=O;e:for(var k=0,$=I.length,J=$>>>1;k<J;){var ae=2*(k+1)-1,ce=I[ae],X=ae+1,ee=I[X];if(0>u(ce,O))X<$&&0>u(ee,ce)?(I[k]=ee,I[X]=O,k=X):(I[k]=ce,I[ae]=O,k=ae);else if(X<$&&0>u(ee,O))I[k]=ee,I[X]=O,k=X;else break e}}return L}function u(I,L){var O=I.sortIndex-L.sortIndex;return O!==0?O:I.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;t.unstable_now=function(){return d.now()}}else{var h=Date,l=h.now();t.unstable_now=function(){return h.now()-l}}var g=[],y=[],v=1,b=null,e=3,n=!1,s=!1,c=!1,f=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(I){for(var L=a(y);L!==null;){if(L.callback===null)o(y);else if(L.startTime<=I)o(y),L.sortIndex=L.expirationTime,r(g,L);else break;L=a(y)}}function S(I){if(c=!1,_(I),!s)if(a(g)!==null)s=!0,F(x);else{var L=a(y);L!==null&&M(S,L.startTime-I)}}function x(I,L){s=!1,c&&(c=!1,m(A),A=-1),n=!0;var O=e;try{for(_(L),b=a(g);b!==null&&(!(b.expirationTime>L)||I&&!P());){var k=b.callback;if(typeof k=="function"){b.callback=null,e=b.priorityLevel;var $=k(b.expirationTime<=L);L=t.unstable_now(),typeof $=="function"?b.callback=$:b===a(g)&&o(g),_(L)}else o(g);b=a(g)}if(b!==null)var J=!0;else{var ae=a(y);ae!==null&&M(S,ae.startTime-L),J=!1}return J}finally{b=null,e=O,n=!1}}var w=!1,U=null,A=-1,E=5,T=-1;function P(){return!(t.unstable_now()-T<E)}function z(){if(U!==null){var I=t.unstable_now();T=I;var L=!0;try{L=U(!0,I)}finally{L?R():(w=!1,U=null)}}else w=!1}var R;if(typeof p=="function")R=function(){p(z)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,B=D.port2;D.port1.onmessage=z,R=function(){B.postMessage(null)}}else R=function(){f(z,0)};function F(I){U=I,w||(w=!0,R())}function M(I,L){A=f(function(){I(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_continueExecution=function(){s||n||(s=!0,F(x))},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return e},t.unstable_getFirstCallbackNode=function(){return a(g)},t.unstable_next=function(I){switch(e){case 1:case 2:case 3:var L=3;break;default:L=e}var O=e;e=L;try{return I()}finally{e=O}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(I,L){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var O=e;e=I;try{return L()}finally{e=O}},t.unstable_scheduleCallback=function(I,L,O){var k=t.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?k+O:k):O=k,I){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=O+$,I={id:v++,callback:L,priorityLevel:I,startTime:O,expirationTime:$,sortIndex:-1},O>k?(I.sortIndex=O,r(y,I),a(g)===null&&I===a(y)&&(c?(m(A),A=-1):c=!0,M(S,O-k))):(I.sortIndex=$,r(g,I),s||n||(s=!0,F(x))),I},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(I){var L=e;return function(){var O=e;e=L;try{return I.apply(this,arguments)}finally{e=O}}}})(Ry);zy.exports=Ry;var ox=zy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fy=C,hr=ox;function N(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var My=new Set,ys={};function fa(t,r){uo(t,r),uo(t+"Capture",r)}function uo(t,r){for(ys[t]=r,t=0;t<r.length;t++)My.add(r[t])}var Bi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Df=Object.prototype.hasOwnProperty,sx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,gg={},vg={};function lx(t){return Df.call(vg,t)?!0:Df.call(gg,t)?!1:sx.test(t)?vg[t]=!0:(gg[t]=!0,!1)}function ux(t,r,a,o){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return o?!1:a!==null?!a.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function cx(t,r,a,o){if(r===null||typeof r>"u"||ux(t,r,a,o))return!0;if(o)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function Vt(t,r,a,o,u,d,h){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=o,this.attributeNamespace=u,this.mustUseProperty=a,this.propertyName=t,this.type=r,this.sanitizeURL=d,this.removeEmptyString=h}var Tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Tt[t]=new Vt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];Tt[r]=new Vt(r,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Tt[t]=new Vt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Tt[t]=new Vt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Tt[t]=new Vt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Tt[t]=new Vt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Tt[t]=new Vt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Tt[t]=new Vt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Tt[t]=new Vt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Sp=/[\-:]([a-z])/g;function wp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(Sp,wp);Tt[r]=new Vt(r,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(Sp,wp);Tt[r]=new Vt(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(Sp,wp);Tt[r]=new Vt(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Tt[t]=new Vt(t,1,!1,t.toLowerCase(),null,!1,!1)});Tt.xlinkHref=new Vt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Tt[t]=new Vt(t,1,!1,t.toLowerCase(),null,!0,!0)});function xp(t,r,a,o){var u=Tt.hasOwnProperty(r)?Tt[r]:null;(u!==null?u.type!==0:o||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(cx(r,a,u,o)&&(a=null),o||u===null?lx(r)&&(a===null?t.removeAttribute(r):t.setAttribute(r,""+a)):u.mustUseProperty?t[u.propertyName]=a===null?u.type===3?!1:"":a:(r=u.attributeName,o=u.attributeNamespace,a===null?t.removeAttribute(r):(u=u.type,a=u===3||u===4&&a===!0?"":""+a,o?t.setAttributeNS(o,r,a):t.setAttribute(r,a))))}var Ri=Fy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Tl=Symbol.for("react.element"),Ia=Symbol.for("react.portal"),Ba=Symbol.for("react.fragment"),Ep=Symbol.for("react.strict_mode"),Lf=Symbol.for("react.profiler"),Oy=Symbol.for("react.provider"),Ny=Symbol.for("react.context"),Up=Symbol.for("react.forward_ref"),zf=Symbol.for("react.suspense"),Rf=Symbol.for("react.suspense_list"),Cp=Symbol.for("react.memo"),Xi=Symbol.for("react.lazy"),Hy=Symbol.for("react.offscreen"),_g=Symbol.iterator;function Bo(t){return t===null||typeof t!="object"?null:(t=_g&&t[_g]||t["@@iterator"],typeof t=="function"?t:null)}var Ke=Object.assign,Id;function Yo(t){if(Id===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Id=r&&r[1]||""}return`
`+Id+t}var Bd=!1;function kd(t,r){if(!t||Bd)return"";Bd=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(y){var o=y}Reflect.construct(t,[],r)}else{try{r.call()}catch(y){o=y}t.call(r.prototype)}else{try{throw Error()}catch(y){o=y}t()}}catch(y){if(y&&o&&typeof y.stack=="string"){for(var u=y.stack.split(`
`),d=o.stack.split(`
`),h=u.length-1,l=d.length-1;1<=h&&0<=l&&u[h]!==d[l];)l--;for(;1<=h&&0<=l;h--,l--)if(u[h]!==d[l]){if(h!==1||l!==1)do if(h--,l--,0>l||u[h]!==d[l]){var g=`
`+u[h].replace(" at new "," at ");return t.displayName&&g.includes("<anonymous>")&&(g=g.replace("<anonymous>",t.displayName)),g}while(1<=h&&0<=l);break}}}finally{Bd=!1,Error.prepareStackTrace=a}return(t=t?t.displayName||t.name:"")?Yo(t):""}function dx(t){switch(t.tag){case 5:return Yo(t.type);case 16:return Yo("Lazy");case 13:return Yo("Suspense");case 19:return Yo("SuspenseList");case 0:case 2:case 15:return t=kd(t.type,!1),t;case 11:return t=kd(t.type.render,!1),t;case 1:return t=kd(t.type,!0),t;default:return""}}function Ff(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ba:return"Fragment";case Ia:return"Portal";case Lf:return"Profiler";case Ep:return"StrictMode";case zf:return"Suspense";case Rf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ny:return(t.displayName||"Context")+".Consumer";case Oy:return(t._context.displayName||"Context")+".Provider";case Up:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Cp:return r=t.displayName||null,r!==null?r:Ff(t.type)||"Memo";case Xi:r=t._payload,t=t._init;try{return Ff(t(r))}catch{}}return null}function fx(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ff(r);case 8:return r===Ep?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function bn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Gy(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function hx(t){var r=Gy(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),o=""+t[r];if(!t.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var u=a.get,d=a.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return u.call(this)},set:function(h){o=""+h,d.call(this,h)}}),Object.defineProperty(t,r,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(h){o=""+h},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Pl(t){t._valueTracker||(t._valueTracker=hx(t))}function $y(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),o="";return t&&(o=Gy(t)?t.checked?"true":"false":t.value),t=o,t!==a?(r.setValue(t),!0):!1}function Tu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Mf(t,r){var a=r.checked;return Ke({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??t._wrapperState.initialChecked})}function yg(t,r){var a=r.defaultValue==null?"":r.defaultValue,o=r.checked!=null?r.checked:r.defaultChecked;a=bn(r.value!=null?r.value:a),t._wrapperState={initialChecked:o,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function jy(t,r){r=r.checked,r!=null&&xp(t,"checked",r,!1)}function Of(t,r){jy(t,r);var a=bn(r.value),o=r.type;if(a!=null)o==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+a):t.value!==""+a&&(t.value=""+a);else if(o==="submit"||o==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?Nf(t,r.type,a):r.hasOwnProperty("defaultValue")&&Nf(t,r.type,bn(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function bg(t,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var o=r.type;if(!(o!=="submit"&&o!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,a||r===t.value||(t.value=r),t.defaultValue=r}a=t.name,a!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,a!==""&&(t.name=a)}function Nf(t,r,a){(r!=="number"||Tu(t.ownerDocument)!==t)&&(a==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+a&&(t.defaultValue=""+a))}var qo=Array.isArray;function Ka(t,r,a,o){if(t=t.options,r){r={};for(var u=0;u<a.length;u++)r["$"+a[u]]=!0;for(a=0;a<t.length;a++)u=r.hasOwnProperty("$"+t[a].value),t[a].selected!==u&&(t[a].selected=u),u&&o&&(t[a].defaultSelected=!0)}else{for(a=""+bn(a),r=null,u=0;u<t.length;u++){if(t[u].value===a){t[u].selected=!0,o&&(t[u].defaultSelected=!0);return}r!==null||t[u].disabled||(r=t[u])}r!==null&&(r.selected=!0)}}function Hf(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(N(91));return Ke({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Sg(t,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(N(92));if(qo(a)){if(1<a.length)throw Error(N(93));a=a[0]}r=a}r==null&&(r=""),a=r}t._wrapperState={initialValue:bn(a)}}function Vy(t,r){var a=bn(r.value),o=bn(r.defaultValue);a!=null&&(a=""+a,a!==t.value&&(t.value=a),r.defaultValue==null&&t.defaultValue!==a&&(t.defaultValue=a)),o!=null&&(t.defaultValue=""+o)}function wg(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function Wy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gf(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?Wy(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Il,Yy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,o,u){MSApp.execUnsafeLocalFunction(function(){return t(r,a,o,u)})}:t}(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(Il=Il||document.createElement("div"),Il.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Il.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function bs(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var as={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},px=["Webkit","ms","Moz","O"];Object.keys(as).forEach(function(t){px.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),as[r]=as[t]})});function qy(t,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||as.hasOwnProperty(t)&&as[t]?(""+r).trim():r+"px"}function Ky(t,r){t=t.style;for(var a in r)if(r.hasOwnProperty(a)){var o=a.indexOf("--")===0,u=qy(a,r[a],o);a==="float"&&(a="cssFloat"),o?t.setProperty(a,u):t[a]=u}}var mx=Ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $f(t,r){if(r){if(mx[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(N(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(N(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(N(61))}if(r.style!=null&&typeof r.style!="object")throw Error(N(62))}}function jf(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vf=null;function Ap(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wf=null,Xa=null,Qa=null;function xg(t){if(t=Qs(t)){if(typeof Wf!="function")throw Error(N(280));var r=t.stateNode;r&&(r=Cc(r),Wf(t.stateNode,t.type,r))}}function Xy(t){Xa?Qa?Qa.push(t):Qa=[t]:Xa=t}function Qy(){if(Xa){var t=Xa,r=Qa;if(Qa=Xa=null,xg(t),r)for(t=0;t<r.length;t++)xg(r[t])}}function Zy(t,r){return t(r)}function Jy(){}var Dd=!1;function e0(t,r,a){if(Dd)return t(r,a);Dd=!0;try{return Zy(t,r,a)}finally{Dd=!1,(Xa!==null||Qa!==null)&&(Jy(),Qy())}}function Ss(t,r){var a=t.stateNode;if(a===null)return null;var o=Cc(a);if(o===null)return null;a=o[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(N(231,r,typeof a));return a}var Yf=!1;if(Bi)try{var ko={};Object.defineProperty(ko,"passive",{get:function(){Yf=!0}}),window.addEventListener("test",ko,ko),window.removeEventListener("test",ko,ko)}catch{Yf=!1}function gx(t,r,a,o,u,d,h,l,g){var y=Array.prototype.slice.call(arguments,3);try{r.apply(a,y)}catch(v){this.onError(v)}}var os=!1,Pu=null,Iu=!1,qf=null,vx={onError:function(t){os=!0,Pu=t}};function _x(t,r,a,o,u,d,h,l,g){os=!1,Pu=null,gx.apply(vx,arguments)}function yx(t,r,a,o,u,d,h,l,g){if(_x.apply(this,arguments),os){if(os){var y=Pu;os=!1,Pu=null}else throw Error(N(198));Iu||(Iu=!0,qf=y)}}function ha(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,r.flags&4098&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function t0(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function Eg(t){if(ha(t)!==t)throw Error(N(188))}function bx(t){var r=t.alternate;if(!r){if(r=ha(t),r===null)throw Error(N(188));return r!==t?null:t}for(var a=t,o=r;;){var u=a.return;if(u===null)break;var d=u.alternate;if(d===null){if(o=u.return,o!==null){a=o;continue}break}if(u.child===d.child){for(d=u.child;d;){if(d===a)return Eg(u),t;if(d===o)return Eg(u),r;d=d.sibling}throw Error(N(188))}if(a.return!==o.return)a=u,o=d;else{for(var h=!1,l=u.child;l;){if(l===a){h=!0,a=u,o=d;break}if(l===o){h=!0,o=u,a=d;break}l=l.sibling}if(!h){for(l=d.child;l;){if(l===a){h=!0,a=d,o=u;break}if(l===o){h=!0,o=d,a=u;break}l=l.sibling}if(!h)throw Error(N(189))}}if(a.alternate!==o)throw Error(N(190))}if(a.tag!==3)throw Error(N(188));return a.stateNode.current===a?t:r}function r0(t){return t=bx(t),t!==null?i0(t):null}function i0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=i0(t);if(r!==null)return r;t=t.sibling}return null}var n0=hr.unstable_scheduleCallback,Ug=hr.unstable_cancelCallback,Sx=hr.unstable_shouldYield,wx=hr.unstable_requestPaint,it=hr.unstable_now,xx=hr.unstable_getCurrentPriorityLevel,Tp=hr.unstable_ImmediatePriority,a0=hr.unstable_UserBlockingPriority,Bu=hr.unstable_NormalPriority,Ex=hr.unstable_LowPriority,o0=hr.unstable_IdlePriority,wc=null,ni=null;function Ux(t){if(ni&&typeof ni.onCommitFiberRoot=="function")try{ni.onCommitFiberRoot(wc,t,void 0,(t.current.flags&128)===128)}catch{}}var Gr=Math.clz32?Math.clz32:Tx,Cx=Math.log,Ax=Math.LN2;function Tx(t){return t>>>=0,t===0?32:31-(Cx(t)/Ax|0)|0}var Bl=64,kl=4194304;function Ko(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ku(t,r){var a=t.pendingLanes;if(a===0)return 0;var o=0,u=t.suspendedLanes,d=t.pingedLanes,h=a&268435455;if(h!==0){var l=h&~u;l!==0?o=Ko(l):(d&=h,d!==0&&(o=Ko(d)))}else h=a&~u,h!==0?o=Ko(h):d!==0&&(o=Ko(d));if(o===0)return 0;if(r!==0&&r!==o&&!(r&u)&&(u=o&-o,d=r&-r,u>=d||u===16&&(d&4194240)!==0))return r;if(o&4&&(o|=a&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=o;0<r;)a=31-Gr(r),u=1<<a,o|=t[a],r&=~u;return o}function Px(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ix(t,r){for(var a=t.suspendedLanes,o=t.pingedLanes,u=t.expirationTimes,d=t.pendingLanes;0<d;){var h=31-Gr(d),l=1<<h,g=u[h];g===-1?(!(l&a)||l&o)&&(u[h]=Px(l,r)):g<=r&&(t.expiredLanes|=l),d&=~l}}function Kf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function s0(){var t=Bl;return Bl<<=1,!(Bl&4194240)&&(Bl=64),t}function Ld(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function Ks(t,r,a){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-Gr(r),t[r]=a}function Bx(t,r){var a=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var o=t.eventTimes;for(t=t.expirationTimes;0<a;){var u=31-Gr(a),d=1<<u;r[u]=0,o[u]=-1,t[u]=-1,a&=~d}}function Pp(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var o=31-Gr(a),u=1<<o;u&r|t[o]&r&&(t[o]|=r),a&=~u}}var Pe=0;function l0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var u0,Ip,c0,d0,f0,Xf=!1,Dl=[],un=null,cn=null,dn=null,ws=new Map,xs=new Map,Zi=[],kx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cg(t,r){switch(t){case"focusin":case"focusout":un=null;break;case"dragenter":case"dragleave":cn=null;break;case"mouseover":case"mouseout":dn=null;break;case"pointerover":case"pointerout":ws.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":xs.delete(r.pointerId)}}function Do(t,r,a,o,u,d){return t===null||t.nativeEvent!==d?(t={blockedOn:r,domEventName:a,eventSystemFlags:o,nativeEvent:d,targetContainers:[u]},r!==null&&(r=Qs(r),r!==null&&Ip(r)),t):(t.eventSystemFlags|=o,r=t.targetContainers,u!==null&&r.indexOf(u)===-1&&r.push(u),t)}function Dx(t,r,a,o,u){switch(r){case"focusin":return un=Do(un,t,r,a,o,u),!0;case"dragenter":return cn=Do(cn,t,r,a,o,u),!0;case"mouseover":return dn=Do(dn,t,r,a,o,u),!0;case"pointerover":var d=u.pointerId;return ws.set(d,Do(ws.get(d)||null,t,r,a,o,u)),!0;case"gotpointercapture":return d=u.pointerId,xs.set(d,Do(xs.get(d)||null,t,r,a,o,u)),!0}return!1}function h0(t){var r=qn(t.target);if(r!==null){var a=ha(r);if(a!==null){if(r=a.tag,r===13){if(r=t0(a),r!==null){t.blockedOn=r,f0(t.priority,function(){c0(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function uu(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=Qf(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);Vf=o,a.target.dispatchEvent(o),Vf=null}else return r=Qs(a),r!==null&&Ip(r),t.blockedOn=a,!1;r.shift()}return!0}function Ag(t,r,a){uu(t)&&a.delete(r)}function Lx(){Xf=!1,un!==null&&uu(un)&&(un=null),cn!==null&&uu(cn)&&(cn=null),dn!==null&&uu(dn)&&(dn=null),ws.forEach(Ag),xs.forEach(Ag)}function Lo(t,r){t.blockedOn===r&&(t.blockedOn=null,Xf||(Xf=!0,hr.unstable_scheduleCallback(hr.unstable_NormalPriority,Lx)))}function Es(t){function r(u){return Lo(u,t)}if(0<Dl.length){Lo(Dl[0],t);for(var a=1;a<Dl.length;a++){var o=Dl[a];o.blockedOn===t&&(o.blockedOn=null)}}for(un!==null&&Lo(un,t),cn!==null&&Lo(cn,t),dn!==null&&Lo(dn,t),ws.forEach(r),xs.forEach(r),a=0;a<Zi.length;a++)o=Zi[a],o.blockedOn===t&&(o.blockedOn=null);for(;0<Zi.length&&(a=Zi[0],a.blockedOn===null);)h0(a),a.blockedOn===null&&Zi.shift()}var Za=Ri.ReactCurrentBatchConfig,Du=!0;function zx(t,r,a,o){var u=Pe,d=Za.transition;Za.transition=null;try{Pe=1,Bp(t,r,a,o)}finally{Pe=u,Za.transition=d}}function Rx(t,r,a,o){var u=Pe,d=Za.transition;Za.transition=null;try{Pe=4,Bp(t,r,a,o)}finally{Pe=u,Za.transition=d}}function Bp(t,r,a,o){if(Du){var u=Qf(t,r,a,o);if(u===null)jd(t,r,o,Lu,a),Cg(t,o);else if(Dx(u,t,r,a,o))o.stopPropagation();else if(Cg(t,o),r&4&&-1<kx.indexOf(t)){for(;u!==null;){var d=Qs(u);if(d!==null&&u0(d),d=Qf(t,r,a,o),d===null&&jd(t,r,o,Lu,a),d===u)break;u=d}u!==null&&o.stopPropagation()}else jd(t,r,o,null,a)}}var Lu=null;function Qf(t,r,a,o){if(Lu=null,t=Ap(o),t=qn(t),t!==null)if(r=ha(t),r===null)t=null;else if(a=r.tag,a===13){if(t=t0(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return Lu=t,null}function p0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xx()){case Tp:return 1;case a0:return 4;case Bu:case Ex:return 16;case o0:return 536870912;default:return 16}default:return 16}}var nn=null,kp=null,cu=null;function m0(){if(cu)return cu;var t,r=kp,a=r.length,o,u="value"in nn?nn.value:nn.textContent,d=u.length;for(t=0;t<a&&r[t]===u[t];t++);var h=a-t;for(o=1;o<=h&&r[a-o]===u[d-o];o++);return cu=u.slice(t,1<o?1-o:void 0)}function du(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Ll(){return!0}function Tg(){return!1}function mr(t){function r(a,o,u,d,h){this._reactName=a,this._targetInst=u,this.type=o,this.nativeEvent=d,this.target=h,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(a=t[l],this[l]=a?a(d):d[l]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ll:Tg,this.isPropagationStopped=Tg,this}return Ke(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ll)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ll)},persist:function(){},isPersistent:Ll}),r}var Eo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dp=mr(Eo),Xs=Ke({},Eo,{view:0,detail:0}),Fx=mr(Xs),zd,Rd,zo,xc=Ke({},Xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==zo&&(zo&&t.type==="mousemove"?(zd=t.screenX-zo.screenX,Rd=t.screenY-zo.screenY):Rd=zd=0,zo=t),zd)},movementY:function(t){return"movementY"in t?t.movementY:Rd}}),Pg=mr(xc),Mx=Ke({},xc,{dataTransfer:0}),Ox=mr(Mx),Nx=Ke({},Xs,{relatedTarget:0}),Fd=mr(Nx),Hx=Ke({},Eo,{animationName:0,elapsedTime:0,pseudoElement:0}),Gx=mr(Hx),$x=Ke({},Eo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),jx=mr($x),Vx=Ke({},Eo,{data:0}),Ig=mr(Vx),Wx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kx(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=qx[t])?!!r[t]:!1}function Lp(){return Kx}var Xx=Ke({},Xs,{key:function(t){if(t.key){var r=Wx[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=du(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Yx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lp,charCode:function(t){return t.type==="keypress"?du(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?du(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Qx=mr(Xx),Zx=Ke({},xc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bg=mr(Zx),Jx=Ke({},Xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lp}),eE=mr(Jx),tE=Ke({},Eo,{propertyName:0,elapsedTime:0,pseudoElement:0}),rE=mr(tE),iE=Ke({},xc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),nE=mr(iE),aE=[9,13,27,32],zp=Bi&&"CompositionEvent"in window,ss=null;Bi&&"documentMode"in document&&(ss=document.documentMode);var oE=Bi&&"TextEvent"in window&&!ss,g0=Bi&&(!zp||ss&&8<ss&&11>=ss),kg=String.fromCharCode(32),Dg=!1;function v0(t,r){switch(t){case"keyup":return aE.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ka=!1;function sE(t,r){switch(t){case"compositionend":return _0(r);case"keypress":return r.which!==32?null:(Dg=!0,kg);case"textInput":return t=r.data,t===kg&&Dg?null:t;default:return null}}function lE(t,r){if(ka)return t==="compositionend"||!zp&&v0(t,r)?(t=m0(),cu=kp=nn=null,ka=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return g0&&r.locale!=="ko"?null:r.data;default:return null}}var uE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lg(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!uE[t.type]:r==="textarea"}function y0(t,r,a,o){Xy(o),r=zu(r,"onChange"),0<r.length&&(a=new Dp("onChange","change",null,a,o),t.push({event:a,listeners:r}))}var ls=null,Us=null;function cE(t){I0(t,0)}function Ec(t){var r=za(t);if($y(r))return t}function dE(t,r){if(t==="change")return r}var b0=!1;if(Bi){var Md;if(Bi){var Od="oninput"in document;if(!Od){var zg=document.createElement("div");zg.setAttribute("oninput","return;"),Od=typeof zg.oninput=="function"}Md=Od}else Md=!1;b0=Md&&(!document.documentMode||9<document.documentMode)}function Rg(){ls&&(ls.detachEvent("onpropertychange",S0),Us=ls=null)}function S0(t){if(t.propertyName==="value"&&Ec(Us)){var r=[];y0(r,Us,t,Ap(t)),e0(cE,r)}}function fE(t,r,a){t==="focusin"?(Rg(),ls=r,Us=a,ls.attachEvent("onpropertychange",S0)):t==="focusout"&&Rg()}function hE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ec(Us)}function pE(t,r){if(t==="click")return Ec(r)}function mE(t,r){if(t==="input"||t==="change")return Ec(r)}function gE(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Vr=typeof Object.is=="function"?Object.is:gE;function Cs(t,r){if(Vr(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),o=Object.keys(r);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var u=a[o];if(!Df.call(r,u)||!Vr(t[u],r[u]))return!1}return!0}function Fg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Mg(t,r){var a=Fg(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=r&&o>=r)return{node:a,offset:r-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Fg(a)}}function w0(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?w0(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function x0(){for(var t=window,r=Tu();r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=Tu(t.document)}return r}function Rp(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function vE(t){var r=x0(),a=t.focusedElem,o=t.selectionRange;if(r!==a&&a&&a.ownerDocument&&w0(a.ownerDocument.documentElement,a)){if(o!==null&&Rp(a)){if(r=o.start,t=o.end,t===void 0&&(t=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(t,a.value.length);else if(t=(r=a.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var u=a.textContent.length,d=Math.min(o.start,u);o=o.end===void 0?d:Math.min(o.end,u),!t.extend&&d>o&&(u=o,o=d,d=u),u=Mg(a,d);var h=Mg(a,o);u&&h&&(t.rangeCount!==1||t.anchorNode!==u.node||t.anchorOffset!==u.offset||t.focusNode!==h.node||t.focusOffset!==h.offset)&&(r=r.createRange(),r.setStart(u.node,u.offset),t.removeAllRanges(),d>o?(t.addRange(r),t.extend(h.node,h.offset)):(r.setEnd(h.node,h.offset),t.addRange(r)))}}for(r=[],t=a;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)t=r[a],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var _E=Bi&&"documentMode"in document&&11>=document.documentMode,Da=null,Zf=null,us=null,Jf=!1;function Og(t,r,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Jf||Da==null||Da!==Tu(o)||(o=Da,"selectionStart"in o&&Rp(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),us&&Cs(us,o)||(us=o,o=zu(Zf,"onSelect"),0<o.length&&(r=new Dp("onSelect","select",null,r,a),t.push({event:r,listeners:o}),r.target=Da)))}function zl(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var La={animationend:zl("Animation","AnimationEnd"),animationiteration:zl("Animation","AnimationIteration"),animationstart:zl("Animation","AnimationStart"),transitionend:zl("Transition","TransitionEnd")},Nd={},E0={};Bi&&(E0=document.createElement("div").style,"AnimationEvent"in window||(delete La.animationend.animation,delete La.animationiteration.animation,delete La.animationstart.animation),"TransitionEvent"in window||delete La.transitionend.transition);function Uc(t){if(Nd[t])return Nd[t];if(!La[t])return t;var r=La[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in E0)return Nd[t]=r[a];return t}var U0=Uc("animationend"),C0=Uc("animationiteration"),A0=Uc("animationstart"),T0=Uc("transitionend"),P0=new Map,Ng="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function En(t,r){P0.set(t,r),fa(r,[t])}for(var Hd=0;Hd<Ng.length;Hd++){var Gd=Ng[Hd],yE=Gd.toLowerCase(),bE=Gd[0].toUpperCase()+Gd.slice(1);En(yE,"on"+bE)}En(U0,"onAnimationEnd");En(C0,"onAnimationIteration");En(A0,"onAnimationStart");En("dblclick","onDoubleClick");En("focusin","onFocus");En("focusout","onBlur");En(T0,"onTransitionEnd");uo("onMouseEnter",["mouseout","mouseover"]);uo("onMouseLeave",["mouseout","mouseover"]);uo("onPointerEnter",["pointerout","pointerover"]);uo("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xo));function Hg(t,r,a){var o=t.type||"unknown-event";t.currentTarget=a,yx(o,r,void 0,t),t.currentTarget=null}function I0(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],u=o.event;o=o.listeners;e:{var d=void 0;if(r)for(var h=o.length-1;0<=h;h--){var l=o[h],g=l.instance,y=l.currentTarget;if(l=l.listener,g!==d&&u.isPropagationStopped())break e;Hg(u,l,y),d=g}else for(h=0;h<o.length;h++){if(l=o[h],g=l.instance,y=l.currentTarget,l=l.listener,g!==d&&u.isPropagationStopped())break e;Hg(u,l,y),d=g}}}if(Iu)throw t=qf,Iu=!1,qf=null,t}function Ne(t,r){var a=r[nh];a===void 0&&(a=r[nh]=new Set);var o=t+"__bubble";a.has(o)||(B0(r,t,2,!1),a.add(o))}function $d(t,r,a){var o=0;r&&(o|=4),B0(a,t,o,r)}var Rl="_reactListening"+Math.random().toString(36).slice(2);function As(t){if(!t[Rl]){t[Rl]=!0,My.forEach(function(a){a!=="selectionchange"&&(SE.has(a)||$d(a,!1,t),$d(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Rl]||(r[Rl]=!0,$d("selectionchange",!1,r))}}function B0(t,r,a,o){switch(p0(r)){case 1:var u=zx;break;case 4:u=Rx;break;default:u=Bp}a=u.bind(null,r,a,t),u=void 0,!Yf||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(u=!0),o?u!==void 0?t.addEventListener(r,a,{capture:!0,passive:u}):t.addEventListener(r,a,!0):u!==void 0?t.addEventListener(r,a,{passive:u}):t.addEventListener(r,a,!1)}function jd(t,r,a,o,u){var d=o;if(!(r&1)&&!(r&2)&&o!==null)e:for(;;){if(o===null)return;var h=o.tag;if(h===3||h===4){var l=o.stateNode.containerInfo;if(l===u||l.nodeType===8&&l.parentNode===u)break;if(h===4)for(h=o.return;h!==null;){var g=h.tag;if((g===3||g===4)&&(g=h.stateNode.containerInfo,g===u||g.nodeType===8&&g.parentNode===u))return;h=h.return}for(;l!==null;){if(h=qn(l),h===null)return;if(g=h.tag,g===5||g===6){o=d=h;continue e}l=l.parentNode}}o=o.return}e0(function(){var y=d,v=Ap(a),b=[];e:{var e=P0.get(t);if(e!==void 0){var n=Dp,s=t;switch(t){case"keypress":if(du(a)===0)break e;case"keydown":case"keyup":n=Qx;break;case"focusin":s="focus",n=Fd;break;case"focusout":s="blur",n=Fd;break;case"beforeblur":case"afterblur":n=Fd;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":n=Pg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":n=Ox;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":n=eE;break;case U0:case C0:case A0:n=Gx;break;case T0:n=rE;break;case"scroll":n=Fx;break;case"wheel":n=nE;break;case"copy":case"cut":case"paste":n=jx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":n=Bg}var c=(r&4)!==0,f=!c&&t==="scroll",m=c?e!==null?e+"Capture":null:e;c=[];for(var p=y,_;p!==null;){_=p;var S=_.stateNode;if(_.tag===5&&S!==null&&(_=S,m!==null&&(S=Ss(p,m),S!=null&&c.push(Ts(p,S,_)))),f)break;p=p.return}0<c.length&&(e=new n(e,s,null,a,v),b.push({event:e,listeners:c}))}}if(!(r&7)){e:{if(e=t==="mouseover"||t==="pointerover",n=t==="mouseout"||t==="pointerout",e&&a!==Vf&&(s=a.relatedTarget||a.fromElement)&&(qn(s)||s[ki]))break e;if((n||e)&&(e=v.window===v?v:(e=v.ownerDocument)?e.defaultView||e.parentWindow:window,n?(s=a.relatedTarget||a.toElement,n=y,s=s?qn(s):null,s!==null&&(f=ha(s),s!==f||s.tag!==5&&s.tag!==6)&&(s=null)):(n=null,s=y),n!==s)){if(c=Pg,S="onMouseLeave",m="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(c=Bg,S="onPointerLeave",m="onPointerEnter",p="pointer"),f=n==null?e:za(n),_=s==null?e:za(s),e=new c(S,p+"leave",n,a,v),e.target=f,e.relatedTarget=_,S=null,qn(v)===y&&(c=new c(m,p+"enter",s,a,v),c.target=_,c.relatedTarget=f,S=c),f=S,n&&s)t:{for(c=n,m=s,p=0,_=c;_;_=ba(_))p++;for(_=0,S=m;S;S=ba(S))_++;for(;0<p-_;)c=ba(c),p--;for(;0<_-p;)m=ba(m),_--;for(;p--;){if(c===m||m!==null&&c===m.alternate)break t;c=ba(c),m=ba(m)}c=null}else c=null;n!==null&&Gg(b,e,n,c,!1),s!==null&&f!==null&&Gg(b,f,s,c,!0)}}e:{if(e=y?za(y):window,n=e.nodeName&&e.nodeName.toLowerCase(),n==="select"||n==="input"&&e.type==="file")var x=dE;else if(Lg(e))if(b0)x=mE;else{x=hE;var w=fE}else(n=e.nodeName)&&n.toLowerCase()==="input"&&(e.type==="checkbox"||e.type==="radio")&&(x=pE);if(x&&(x=x(t,y))){y0(b,x,a,v);break e}w&&w(t,e,y),t==="focusout"&&(w=e._wrapperState)&&w.controlled&&e.type==="number"&&Nf(e,"number",e.value)}switch(w=y?za(y):window,t){case"focusin":(Lg(w)||w.contentEditable==="true")&&(Da=w,Zf=y,us=null);break;case"focusout":us=Zf=Da=null;break;case"mousedown":Jf=!0;break;case"contextmenu":case"mouseup":case"dragend":Jf=!1,Og(b,a,v);break;case"selectionchange":if(_E)break;case"keydown":case"keyup":Og(b,a,v)}var U;if(zp)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else ka?v0(t,a)&&(A="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(A="onCompositionStart");A&&(g0&&a.locale!=="ko"&&(ka||A!=="onCompositionStart"?A==="onCompositionEnd"&&ka&&(U=m0()):(nn=v,kp="value"in nn?nn.value:nn.textContent,ka=!0)),w=zu(y,A),0<w.length&&(A=new Ig(A,t,null,a,v),b.push({event:A,listeners:w}),U?A.data=U:(U=_0(a),U!==null&&(A.data=U)))),(U=oE?sE(t,a):lE(t,a))&&(y=zu(y,"onBeforeInput"),0<y.length&&(v=new Ig("onBeforeInput","beforeinput",null,a,v),b.push({event:v,listeners:y}),v.data=U))}I0(b,r)})}function Ts(t,r,a){return{instance:t,listener:r,currentTarget:a}}function zu(t,r){for(var a=r+"Capture",o=[];t!==null;){var u=t,d=u.stateNode;u.tag===5&&d!==null&&(u=d,d=Ss(t,a),d!=null&&o.unshift(Ts(t,d,u)),d=Ss(t,r),d!=null&&o.push(Ts(t,d,u))),t=t.return}return o}function ba(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Gg(t,r,a,o,u){for(var d=r._reactName,h=[];a!==null&&a!==o;){var l=a,g=l.alternate,y=l.stateNode;if(g!==null&&g===o)break;l.tag===5&&y!==null&&(l=y,u?(g=Ss(a,d),g!=null&&h.unshift(Ts(a,g,l))):u||(g=Ss(a,d),g!=null&&h.push(Ts(a,g,l)))),a=a.return}h.length!==0&&t.push({event:r,listeners:h})}var wE=/\r\n?/g,xE=/\u0000|\uFFFD/g;function $g(t){return(typeof t=="string"?t:""+t).replace(wE,`
`).replace(xE,"")}function Fl(t,r,a){if(r=$g(r),$g(t)!==r&&a)throw Error(N(425))}function Ru(){}var eh=null,th=null;function rh(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var ih=typeof setTimeout=="function"?setTimeout:void 0,EE=typeof clearTimeout=="function"?clearTimeout:void 0,jg=typeof Promise=="function"?Promise:void 0,UE=typeof queueMicrotask=="function"?queueMicrotask:typeof jg<"u"?function(t){return jg.resolve(null).then(t).catch(CE)}:ih;function CE(t){setTimeout(function(){throw t})}function Vd(t,r){var a=r,o=0;do{var u=a.nextSibling;if(t.removeChild(a),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(o===0){t.removeChild(u),Es(r);return}o--}else a!=="$"&&a!=="$?"&&a!=="$!"||o++;a=u}while(a);Es(r)}function fn(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function Vg(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return t;r--}else a==="/$"&&r++}t=t.previousSibling}return null}var Uo=Math.random().toString(36).slice(2),ti="__reactFiber$"+Uo,Ps="__reactProps$"+Uo,ki="__reactContainer$"+Uo,nh="__reactEvents$"+Uo,AE="__reactListeners$"+Uo,TE="__reactHandles$"+Uo;function qn(t){var r=t[ti];if(r)return r;for(var a=t.parentNode;a;){if(r=a[ki]||a[ti]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=Vg(t);t!==null;){if(a=t[ti])return a;t=Vg(t)}return r}t=a,a=t.parentNode}return null}function Qs(t){return t=t[ti]||t[ki],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function za(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(N(33))}function Cc(t){return t[Ps]||null}var ah=[],Ra=-1;function Un(t){return{current:t}}function He(t){0>Ra||(t.current=ah[Ra],ah[Ra]=null,Ra--)}function Oe(t,r){Ra++,ah[Ra]=t.current,t.current=r}var Sn={},Rt=Un(Sn),Jt=Un(!1),ia=Sn;function co(t,r){var a=t.type.contextTypes;if(!a)return Sn;var o=t.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===r)return o.__reactInternalMemoizedMaskedChildContext;var u={},d;for(d in a)u[d]=r[d];return o&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=u),u}function er(t){return t=t.childContextTypes,t!=null}function Fu(){He(Jt),He(Rt)}function Wg(t,r,a){if(Rt.current!==Sn)throw Error(N(168));Oe(Rt,r),Oe(Jt,a)}function k0(t,r,a){var o=t.stateNode;if(r=r.childContextTypes,typeof o.getChildContext!="function")return a;o=o.getChildContext();for(var u in o)if(!(u in r))throw Error(N(108,fx(t)||"Unknown",u));return Ke({},a,o)}function Mu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Sn,ia=Rt.current,Oe(Rt,t),Oe(Jt,Jt.current),!0}function Yg(t,r,a){var o=t.stateNode;if(!o)throw Error(N(169));a?(t=k0(t,r,ia),o.__reactInternalMemoizedMergedChildContext=t,He(Jt),He(Rt),Oe(Rt,t)):He(Jt),Oe(Jt,a)}var wi=null,Ac=!1,Wd=!1;function D0(t){wi===null?wi=[t]:wi.push(t)}function PE(t){Ac=!0,D0(t)}function Cn(){if(!Wd&&wi!==null){Wd=!0;var t=0,r=Pe;try{var a=wi;for(Pe=1;t<a.length;t++){var o=a[t];do o=o(!0);while(o!==null)}wi=null,Ac=!1}catch(u){throw wi!==null&&(wi=wi.slice(t+1)),n0(Tp,Cn),u}finally{Pe=r,Wd=!1}}return null}var Fa=[],Ma=0,Ou=null,Nu=0,Er=[],Ur=0,na=null,Ti=1,Pi="";function Mn(t,r){Fa[Ma++]=Nu,Fa[Ma++]=Ou,Ou=t,Nu=r}function L0(t,r,a){Er[Ur++]=Ti,Er[Ur++]=Pi,Er[Ur++]=na,na=t;var o=Ti;t=Pi;var u=32-Gr(o)-1;o&=~(1<<u),a+=1;var d=32-Gr(r)+u;if(30<d){var h=u-u%5;d=(o&(1<<h)-1).toString(32),o>>=h,u-=h,Ti=1<<32-Gr(r)+u|a<<u|o,Pi=d+t}else Ti=1<<d|a<<u|o,Pi=t}function Fp(t){t.return!==null&&(Mn(t,1),L0(t,1,0))}function Mp(t){for(;t===Ou;)Ou=Fa[--Ma],Fa[Ma]=null,Nu=Fa[--Ma],Fa[Ma]=null;for(;t===na;)na=Er[--Ur],Er[Ur]=null,Pi=Er[--Ur],Er[Ur]=null,Ti=Er[--Ur],Er[Ur]=null}var cr=null,lr=null,je=!1,Nr=null;function z0(t,r){var a=Cr(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=t,r=t.deletions,r===null?(t.deletions=[a],t.flags|=16):r.push(a)}function qg(t,r){switch(t.tag){case 5:var a=t.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,cr=t,lr=fn(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,cr=t,lr=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=na!==null?{id:Ti,overflow:Pi}:null,t.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=Cr(18,null,null,0),a.stateNode=r,a.return=t,t.child=a,cr=t,lr=null,!0):!1;default:return!1}}function oh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function sh(t){if(je){var r=lr;if(r){var a=r;if(!qg(t,r)){if(oh(t))throw Error(N(418));r=fn(a.nextSibling);var o=cr;r&&qg(t,r)?z0(o,a):(t.flags=t.flags&-4097|2,je=!1,cr=t)}}else{if(oh(t))throw Error(N(418));t.flags=t.flags&-4097|2,je=!1,cr=t}}}function Kg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;cr=t}function Ml(t){if(t!==cr)return!1;if(!je)return Kg(t),je=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!rh(t.type,t.memoizedProps)),r&&(r=lr)){if(oh(t))throw R0(),Error(N(418));for(;r;)z0(t,r),r=fn(r.nextSibling)}if(Kg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(N(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"){if(r===0){lr=fn(t.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}t=t.nextSibling}lr=null}}else lr=cr?fn(t.stateNode.nextSibling):null;return!0}function R0(){for(var t=lr;t;)t=fn(t.nextSibling)}function fo(){lr=cr=null,je=!1}function Op(t){Nr===null?Nr=[t]:Nr.push(t)}var IE=Ri.ReactCurrentBatchConfig;function Fr(t,r){if(t&&t.defaultProps){r=Ke({},r),t=t.defaultProps;for(var a in t)r[a]===void 0&&(r[a]=t[a]);return r}return r}var Hu=Un(null),Gu=null,Oa=null,Np=null;function Hp(){Np=Oa=Gu=null}function Gp(t){var r=Hu.current;He(Hu),t._currentValue=r}function lh(t,r,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,o!==null&&(o.childLanes|=r)):o!==null&&(o.childLanes&r)!==r&&(o.childLanes|=r),t===a)break;t=t.return}}function Ja(t,r){Gu=t,Np=Oa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&r&&(Qt=!0),t.firstContext=null)}function Ir(t){var r=t._currentValue;if(Np!==t)if(t={context:t,memoizedValue:r,next:null},Oa===null){if(Gu===null)throw Error(N(308));Oa=t,Gu.dependencies={lanes:0,firstContext:t}}else Oa=Oa.next=t;return r}var Kn=null;function $p(t){Kn===null?Kn=[t]:Kn.push(t)}function F0(t,r,a,o){var u=r.interleaved;return u===null?(a.next=a,$p(r)):(a.next=u.next,u.next=a),r.interleaved=a,Di(t,o)}function Di(t,r){t.lanes|=r;var a=t.alternate;for(a!==null&&(a.lanes|=r),a=t,t=t.return;t!==null;)t.childLanes|=r,a=t.alternate,a!==null&&(a.childLanes|=r),a=t,t=t.return;return a.tag===3?a.stateNode:null}var Qi=!1;function jp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function M0(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ii(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function hn(t,r,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,we&2){var u=o.pending;return u===null?r.next=r:(r.next=u.next,u.next=r),o.pending=r,Di(t,a)}return u=o.interleaved,u===null?(r.next=r,$p(o)):(r.next=u.next,u.next=r),o.interleaved=r,Di(t,a)}function fu(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var o=r.lanes;o&=t.pendingLanes,a|=o,r.lanes=a,Pp(t,a)}}function Xg(t,r){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var u=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var h={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};d===null?u=d=h:d=d.next=h,a=a.next}while(a!==null);d===null?u=d=r:d=d.next=r}else u=d=r;a={baseState:o.baseState,firstBaseUpdate:u,lastBaseUpdate:d,shared:o.shared,effects:o.effects},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}function $u(t,r,a,o){var u=t.updateQueue;Qi=!1;var d=u.firstBaseUpdate,h=u.lastBaseUpdate,l=u.shared.pending;if(l!==null){u.shared.pending=null;var g=l,y=g.next;g.next=null,h===null?d=y:h.next=y,h=g;var v=t.alternate;v!==null&&(v=v.updateQueue,l=v.lastBaseUpdate,l!==h&&(l===null?v.firstBaseUpdate=y:l.next=y,v.lastBaseUpdate=g))}if(d!==null){var b=u.baseState;h=0,v=y=g=null,l=d;do{var e=l.lane,n=l.eventTime;if((o&e)===e){v!==null&&(v=v.next={eventTime:n,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var s=t,c=l;switch(e=r,n=a,c.tag){case 1:if(s=c.payload,typeof s=="function"){b=s.call(n,b,e);break e}b=s;break e;case 3:s.flags=s.flags&-65537|128;case 0:if(s=c.payload,e=typeof s=="function"?s.call(n,b,e):s,e==null)break e;b=Ke({},b,e);break e;case 2:Qi=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,e=u.effects,e===null?u.effects=[l]:e.push(l))}else n={eventTime:n,lane:e,tag:l.tag,payload:l.payload,callback:l.callback,next:null},v===null?(y=v=n,g=b):v=v.next=n,h|=e;if(l=l.next,l===null){if(l=u.shared.pending,l===null)break;e=l,l=e.next,e.next=null,u.lastBaseUpdate=e,u.shared.pending=null}}while(1);if(v===null&&(g=b),u.baseState=g,u.firstBaseUpdate=y,u.lastBaseUpdate=v,r=u.shared.interleaved,r!==null){u=r;do h|=u.lane,u=u.next;while(u!==r)}else d===null&&(u.shared.lanes=0);oa|=h,t.lanes=h,t.memoizedState=b}}function Qg(t,r,a){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var o=t[r],u=o.callback;if(u!==null){if(o.callback=null,o=a,typeof u!="function")throw Error(N(191,u));u.call(o)}}}var O0=new Fy.Component().refs;function uh(t,r,a,o){r=t.memoizedState,a=a(o,r),a=a==null?r:Ke({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Tc={isMounted:function(t){return(t=t._reactInternals)?ha(t)===t:!1},enqueueSetState:function(t,r,a){t=t._reactInternals;var o=$t(),u=mn(t),d=Ii(o,u);d.payload=r,a!=null&&(d.callback=a),r=hn(t,d,u),r!==null&&($r(r,t,u,o),fu(r,t,u))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var o=$t(),u=mn(t),d=Ii(o,u);d.tag=1,d.payload=r,a!=null&&(d.callback=a),r=hn(t,d,u),r!==null&&($r(r,t,u,o),fu(r,t,u))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=$t(),o=mn(t),u=Ii(a,o);u.tag=2,r!=null&&(u.callback=r),r=hn(t,u,o),r!==null&&($r(r,t,o,a),fu(r,t,o))}};function Zg(t,r,a,o,u,d,h){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,d,h):r.prototype&&r.prototype.isPureReactComponent?!Cs(a,o)||!Cs(u,d):!0}function N0(t,r,a){var o=!1,u=Sn,d=r.contextType;return typeof d=="object"&&d!==null?d=Ir(d):(u=er(r)?ia:Rt.current,o=r.contextTypes,d=(o=o!=null)?co(t,u):Sn),r=new r(a,d),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Tc,t.stateNode=r,r._reactInternals=t,o&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=u,t.__reactInternalMemoizedMaskedChildContext=d),r}function Jg(t,r,a,o){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,o),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,o),r.state!==t&&Tc.enqueueReplaceState(r,r.state,null)}function ch(t,r,a,o){var u=t.stateNode;u.props=a,u.state=t.memoizedState,u.refs=O0,jp(t);var d=r.contextType;typeof d=="object"&&d!==null?u.context=Ir(d):(d=er(r)?ia:Rt.current,u.context=co(t,d)),u.state=t.memoizedState,d=r.getDerivedStateFromProps,typeof d=="function"&&(uh(t,r,d,a),u.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(r=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),r!==u.state&&Tc.enqueueReplaceState(u,u.state,null),$u(t,a,u,o),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308)}function Ro(t,r,a){if(t=a.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(N(309));var o=a.stateNode}if(!o)throw Error(N(147,t));var u=o,d=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===d?r.ref:(r=function(h){var l=u.refs;l===O0&&(l=u.refs={}),h===null?delete l[d]:l[d]=h},r._stringRef=d,r)}if(typeof t!="string")throw Error(N(284));if(!a._owner)throw Error(N(290,t))}return t}function Ol(t,r){throw t=Object.prototype.toString.call(r),Error(N(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function ev(t){var r=t._init;return r(t._payload)}function H0(t){function r(m,p){if(t){var _=m.deletions;_===null?(m.deletions=[p],m.flags|=16):_.push(p)}}function a(m,p){if(!t)return null;for(;p!==null;)r(m,p),p=p.sibling;return null}function o(m,p){for(m=new Map;p!==null;)p.key!==null?m.set(p.key,p):m.set(p.index,p),p=p.sibling;return m}function u(m,p){return m=gn(m,p),m.index=0,m.sibling=null,m}function d(m,p,_){return m.index=_,t?(_=m.alternate,_!==null?(_=_.index,_<p?(m.flags|=2,p):_):(m.flags|=2,p)):(m.flags|=1048576,p)}function h(m){return t&&m.alternate===null&&(m.flags|=2),m}function l(m,p,_,S){return p===null||p.tag!==6?(p=Jd(_,m.mode,S),p.return=m,p):(p=u(p,_),p.return=m,p)}function g(m,p,_,S){var x=_.type;return x===Ba?v(m,p,_.props.children,S,_.key):p!==null&&(p.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Xi&&ev(x)===p.type)?(S=u(p,_.props),S.ref=Ro(m,p,_),S.return=m,S):(S=_u(_.type,_.key,_.props,null,m.mode,S),S.ref=Ro(m,p,_),S.return=m,S)}function y(m,p,_,S){return p===null||p.tag!==4||p.stateNode.containerInfo!==_.containerInfo||p.stateNode.implementation!==_.implementation?(p=ef(_,m.mode,S),p.return=m,p):(p=u(p,_.children||[]),p.return=m,p)}function v(m,p,_,S,x){return p===null||p.tag!==7?(p=Jn(_,m.mode,S,x),p.return=m,p):(p=u(p,_),p.return=m,p)}function b(m,p,_){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Jd(""+p,m.mode,_),p.return=m,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Tl:return _=_u(p.type,p.key,p.props,null,m.mode,_),_.ref=Ro(m,null,p),_.return=m,_;case Ia:return p=ef(p,m.mode,_),p.return=m,p;case Xi:var S=p._init;return b(m,S(p._payload),_)}if(qo(p)||Bo(p))return p=Jn(p,m.mode,_,null),p.return=m,p;Ol(m,p)}return null}function e(m,p,_,S){var x=p!==null?p.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return x!==null?null:l(m,p,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Tl:return _.key===x?g(m,p,_,S):null;case Ia:return _.key===x?y(m,p,_,S):null;case Xi:return x=_._init,e(m,p,x(_._payload),S)}if(qo(_)||Bo(_))return x!==null?null:v(m,p,_,S,null);Ol(m,_)}return null}function n(m,p,_,S,x){if(typeof S=="string"&&S!==""||typeof S=="number")return m=m.get(_)||null,l(p,m,""+S,x);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Tl:return m=m.get(S.key===null?_:S.key)||null,g(p,m,S,x);case Ia:return m=m.get(S.key===null?_:S.key)||null,y(p,m,S,x);case Xi:var w=S._init;return n(m,p,_,w(S._payload),x)}if(qo(S)||Bo(S))return m=m.get(_)||null,v(p,m,S,x,null);Ol(p,S)}return null}function s(m,p,_,S){for(var x=null,w=null,U=p,A=p=0,E=null;U!==null&&A<_.length;A++){U.index>A?(E=U,U=null):E=U.sibling;var T=e(m,U,_[A],S);if(T===null){U===null&&(U=E);break}t&&U&&T.alternate===null&&r(m,U),p=d(T,p,A),w===null?x=T:w.sibling=T,w=T,U=E}if(A===_.length)return a(m,U),je&&Mn(m,A),x;if(U===null){for(;A<_.length;A++)U=b(m,_[A],S),U!==null&&(p=d(U,p,A),w===null?x=U:w.sibling=U,w=U);return je&&Mn(m,A),x}for(U=o(m,U);A<_.length;A++)E=n(U,m,A,_[A],S),E!==null&&(t&&E.alternate!==null&&U.delete(E.key===null?A:E.key),p=d(E,p,A),w===null?x=E:w.sibling=E,w=E);return t&&U.forEach(function(P){return r(m,P)}),je&&Mn(m,A),x}function c(m,p,_,S){var x=Bo(_);if(typeof x!="function")throw Error(N(150));if(_=x.call(_),_==null)throw Error(N(151));for(var w=x=null,U=p,A=p=0,E=null,T=_.next();U!==null&&!T.done;A++,T=_.next()){U.index>A?(E=U,U=null):E=U.sibling;var P=e(m,U,T.value,S);if(P===null){U===null&&(U=E);break}t&&U&&P.alternate===null&&r(m,U),p=d(P,p,A),w===null?x=P:w.sibling=P,w=P,U=E}if(T.done)return a(m,U),je&&Mn(m,A),x;if(U===null){for(;!T.done;A++,T=_.next())T=b(m,T.value,S),T!==null&&(p=d(T,p,A),w===null?x=T:w.sibling=T,w=T);return je&&Mn(m,A),x}for(U=o(m,U);!T.done;A++,T=_.next())T=n(U,m,A,T.value,S),T!==null&&(t&&T.alternate!==null&&U.delete(T.key===null?A:T.key),p=d(T,p,A),w===null?x=T:w.sibling=T,w=T);return t&&U.forEach(function(z){return r(m,z)}),je&&Mn(m,A),x}function f(m,p,_,S){if(typeof _=="object"&&_!==null&&_.type===Ba&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Tl:e:{for(var x=_.key,w=p;w!==null;){if(w.key===x){if(x=_.type,x===Ba){if(w.tag===7){a(m,w.sibling),p=u(w,_.props.children),p.return=m,m=p;break e}}else if(w.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Xi&&ev(x)===w.type){a(m,w.sibling),p=u(w,_.props),p.ref=Ro(m,w,_),p.return=m,m=p;break e}a(m,w);break}else r(m,w);w=w.sibling}_.type===Ba?(p=Jn(_.props.children,m.mode,S,_.key),p.return=m,m=p):(S=_u(_.type,_.key,_.props,null,m.mode,S),S.ref=Ro(m,p,_),S.return=m,m=S)}return h(m);case Ia:e:{for(w=_.key;p!==null;){if(p.key===w)if(p.tag===4&&p.stateNode.containerInfo===_.containerInfo&&p.stateNode.implementation===_.implementation){a(m,p.sibling),p=u(p,_.children||[]),p.return=m,m=p;break e}else{a(m,p);break}else r(m,p);p=p.sibling}p=ef(_,m.mode,S),p.return=m,m=p}return h(m);case Xi:return w=_._init,f(m,p,w(_._payload),S)}if(qo(_))return s(m,p,_,S);if(Bo(_))return c(m,p,_,S);Ol(m,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,p!==null&&p.tag===6?(a(m,p.sibling),p=u(p,_),p.return=m,m=p):(a(m,p),p=Jd(_,m.mode,S),p.return=m,m=p),h(m)):a(m,p)}return f}var ho=H0(!0),G0=H0(!1),Zs={},ai=Un(Zs),Is=Un(Zs),Bs=Un(Zs);function Xn(t){if(t===Zs)throw Error(N(174));return t}function Vp(t,r){switch(Oe(Bs,r),Oe(Is,t),Oe(ai,Zs),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:Gf(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=Gf(r,t)}He(ai),Oe(ai,r)}function po(){He(ai),He(Is),He(Bs)}function $0(t){Xn(Bs.current);var r=Xn(ai.current),a=Gf(r,t.type);r!==a&&(Oe(Is,t),Oe(ai,a))}function Wp(t){Is.current===t&&(He(ai),He(Is))}var Ye=Un(0);function ju(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Yd=[];function Yp(){for(var t=0;t<Yd.length;t++)Yd[t]._workInProgressVersionPrimary=null;Yd.length=0}var hu=Ri.ReactCurrentDispatcher,qd=Ri.ReactCurrentBatchConfig,aa=0,qe=null,dt=null,mt=null,Vu=!1,cs=!1,ks=0,BE=0;function kt(){throw Error(N(321))}function qp(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!Vr(t[a],r[a]))return!1;return!0}function Kp(t,r,a,o,u,d){if(aa=d,qe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,hu.current=t===null||t.memoizedState===null?zE:RE,t=a(o,u),cs){d=0;do{if(cs=!1,ks=0,25<=d)throw Error(N(301));d+=1,mt=dt=null,r.updateQueue=null,hu.current=FE,t=a(o,u)}while(cs)}if(hu.current=Wu,r=dt!==null&&dt.next!==null,aa=0,mt=dt=qe=null,Vu=!1,r)throw Error(N(300));return t}function Xp(){var t=ks!==0;return ks=0,t}function Jr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?qe.memoizedState=mt=t:mt=mt.next=t,mt}function Br(){if(dt===null){var t=qe.alternate;t=t!==null?t.memoizedState:null}else t=dt.next;var r=mt===null?qe.memoizedState:mt.next;if(r!==null)mt=r,dt=t;else{if(t===null)throw Error(N(310));dt=t,t={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},mt===null?qe.memoizedState=mt=t:mt=mt.next=t}return mt}function Ds(t,r){return typeof r=="function"?r(t):r}function Kd(t){var r=Br(),a=r.queue;if(a===null)throw Error(N(311));a.lastRenderedReducer=t;var o=dt,u=o.baseQueue,d=a.pending;if(d!==null){if(u!==null){var h=u.next;u.next=d.next,d.next=h}o.baseQueue=u=d,a.pending=null}if(u!==null){d=u.next,o=o.baseState;var l=h=null,g=null,y=d;do{var v=y.lane;if((aa&v)===v)g!==null&&(g=g.next={lane:0,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null}),o=y.hasEagerState?y.eagerState:t(o,y.action);else{var b={lane:v,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null};g===null?(l=g=b,h=o):g=g.next=b,qe.lanes|=v,oa|=v}y=y.next}while(y!==null&&y!==d);g===null?h=o:g.next=l,Vr(o,r.memoizedState)||(Qt=!0),r.memoizedState=o,r.baseState=h,r.baseQueue=g,a.lastRenderedState=o}if(t=a.interleaved,t!==null){u=t;do d=u.lane,qe.lanes|=d,oa|=d,u=u.next;while(u!==t)}else u===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function Xd(t){var r=Br(),a=r.queue;if(a===null)throw Error(N(311));a.lastRenderedReducer=t;var o=a.dispatch,u=a.pending,d=r.memoizedState;if(u!==null){a.pending=null;var h=u=u.next;do d=t(d,h.action),h=h.next;while(h!==u);Vr(d,r.memoizedState)||(Qt=!0),r.memoizedState=d,r.baseQueue===null&&(r.baseState=d),a.lastRenderedState=d}return[d,o]}function j0(){}function V0(t,r){var a=qe,o=Br(),u=r(),d=!Vr(o.memoizedState,u);if(d&&(o.memoizedState=u,Qt=!0),o=o.queue,Qp(q0.bind(null,a,o,t),[t]),o.getSnapshot!==r||d||mt!==null&&mt.memoizedState.tag&1){if(a.flags|=2048,Ls(9,Y0.bind(null,a,o,u,r),void 0,null),vt===null)throw Error(N(349));aa&30||W0(a,r,u)}return u}function W0(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=qe.updateQueue,r===null?(r={lastEffect:null,stores:null},qe.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function Y0(t,r,a,o){r.value=a,r.getSnapshot=o,K0(r)&&X0(t)}function q0(t,r,a){return a(function(){K0(r)&&X0(t)})}function K0(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!Vr(t,a)}catch{return!0}}function X0(t){var r=Di(t,1);r!==null&&$r(r,t,1,-1)}function tv(t){var r=Jr();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ds,lastRenderedState:t},r.queue=t,t=t.dispatch=LE.bind(null,qe,t),[r.memoizedState,t]}function Ls(t,r,a,o){return t={tag:t,create:r,destroy:a,deps:o,next:null},r=qe.updateQueue,r===null?(r={lastEffect:null,stores:null},qe.updateQueue=r,r.lastEffect=t.next=t):(a=r.lastEffect,a===null?r.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,r.lastEffect=t)),t}function Q0(){return Br().memoizedState}function pu(t,r,a,o){var u=Jr();qe.flags|=t,u.memoizedState=Ls(1|r,a,void 0,o===void 0?null:o)}function Pc(t,r,a,o){var u=Br();o=o===void 0?null:o;var d=void 0;if(dt!==null){var h=dt.memoizedState;if(d=h.destroy,o!==null&&qp(o,h.deps)){u.memoizedState=Ls(r,a,d,o);return}}qe.flags|=t,u.memoizedState=Ls(1|r,a,d,o)}function rv(t,r){return pu(8390656,8,t,r)}function Qp(t,r){return Pc(2048,8,t,r)}function Z0(t,r){return Pc(4,2,t,r)}function J0(t,r){return Pc(4,4,t,r)}function eb(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function tb(t,r,a){return a=a!=null?a.concat([t]):null,Pc(4,4,eb.bind(null,r,t),a)}function Zp(){}function rb(t,r){var a=Br();r=r===void 0?null:r;var o=a.memoizedState;return o!==null&&r!==null&&qp(r,o[1])?o[0]:(a.memoizedState=[t,r],t)}function ib(t,r){var a=Br();r=r===void 0?null:r;var o=a.memoizedState;return o!==null&&r!==null&&qp(r,o[1])?o[0]:(t=t(),a.memoizedState=[t,r],t)}function nb(t,r,a){return aa&21?(Vr(a,r)||(a=s0(),qe.lanes|=a,oa|=a,t.baseState=!0),r):(t.baseState&&(t.baseState=!1,Qt=!0),t.memoizedState=a)}function kE(t,r){var a=Pe;Pe=a!==0&&4>a?a:4,t(!0);var o=qd.transition;qd.transition={};try{t(!1),r()}finally{Pe=a,qd.transition=o}}function ab(){return Br().memoizedState}function DE(t,r,a){var o=mn(t);if(a={lane:o,action:a,hasEagerState:!1,eagerState:null,next:null},ob(t))sb(r,a);else if(a=F0(t,r,a,o),a!==null){var u=$t();$r(a,t,o,u),lb(a,r,o)}}function LE(t,r,a){var o=mn(t),u={lane:o,action:a,hasEagerState:!1,eagerState:null,next:null};if(ob(t))sb(r,u);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=r.lastRenderedReducer,d!==null))try{var h=r.lastRenderedState,l=d(h,a);if(u.hasEagerState=!0,u.eagerState=l,Vr(l,h)){var g=r.interleaved;g===null?(u.next=u,$p(r)):(u.next=g.next,g.next=u),r.interleaved=u;return}}catch{}finally{}a=F0(t,r,u,o),a!==null&&(u=$t(),$r(a,t,o,u),lb(a,r,o))}}function ob(t){var r=t.alternate;return t===qe||r!==null&&r===qe}function sb(t,r){cs=Vu=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function lb(t,r,a){if(a&4194240){var o=r.lanes;o&=t.pendingLanes,a|=o,r.lanes=a,Pp(t,a)}}var Wu={readContext:Ir,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useInsertionEffect:kt,useLayoutEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useMutableSource:kt,useSyncExternalStore:kt,useId:kt,unstable_isNewReconciler:!1},zE={readContext:Ir,useCallback:function(t,r){return Jr().memoizedState=[t,r===void 0?null:r],t},useContext:Ir,useEffect:rv,useImperativeHandle:function(t,r,a){return a=a!=null?a.concat([t]):null,pu(4194308,4,eb.bind(null,r,t),a)},useLayoutEffect:function(t,r){return pu(4194308,4,t,r)},useInsertionEffect:function(t,r){return pu(4,2,t,r)},useMemo:function(t,r){var a=Jr();return r=r===void 0?null:r,t=t(),a.memoizedState=[t,r],t},useReducer:function(t,r,a){var o=Jr();return r=a!==void 0?a(r):r,o.memoizedState=o.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},o.queue=t,t=t.dispatch=DE.bind(null,qe,t),[o.memoizedState,t]},useRef:function(t){var r=Jr();return t={current:t},r.memoizedState=t},useState:tv,useDebugValue:Zp,useDeferredValue:function(t){return Jr().memoizedState=t},useTransition:function(){var t=tv(!1),r=t[0];return t=kE.bind(null,t[1]),Jr().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,a){var o=qe,u=Jr();if(je){if(a===void 0)throw Error(N(407));a=a()}else{if(a=r(),vt===null)throw Error(N(349));aa&30||W0(o,r,a)}u.memoizedState=a;var d={value:a,getSnapshot:r};return u.queue=d,rv(q0.bind(null,o,d,t),[t]),o.flags|=2048,Ls(9,Y0.bind(null,o,d,a,r),void 0,null),a},useId:function(){var t=Jr(),r=vt.identifierPrefix;if(je){var a=Pi,o=Ti;a=(o&~(1<<32-Gr(o)-1)).toString(32)+a,r=":"+r+"R"+a,a=ks++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=BE++,r=":"+r+"r"+a.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},RE={readContext:Ir,useCallback:rb,useContext:Ir,useEffect:Qp,useImperativeHandle:tb,useInsertionEffect:Z0,useLayoutEffect:J0,useMemo:ib,useReducer:Kd,useRef:Q0,useState:function(){return Kd(Ds)},useDebugValue:Zp,useDeferredValue:function(t){var r=Br();return nb(r,dt.memoizedState,t)},useTransition:function(){var t=Kd(Ds)[0],r=Br().memoizedState;return[t,r]},useMutableSource:j0,useSyncExternalStore:V0,useId:ab,unstable_isNewReconciler:!1},FE={readContext:Ir,useCallback:rb,useContext:Ir,useEffect:Qp,useImperativeHandle:tb,useInsertionEffect:Z0,useLayoutEffect:J0,useMemo:ib,useReducer:Xd,useRef:Q0,useState:function(){return Xd(Ds)},useDebugValue:Zp,useDeferredValue:function(t){var r=Br();return dt===null?r.memoizedState=t:nb(r,dt.memoizedState,t)},useTransition:function(){var t=Xd(Ds)[0],r=Br().memoizedState;return[t,r]},useMutableSource:j0,useSyncExternalStore:V0,useId:ab,unstable_isNewReconciler:!1};function mo(t,r){try{var a="",o=r;do a+=dx(o),o=o.return;while(o);var u=a}catch(d){u=`
Error generating stack: `+d.message+`
`+d.stack}return{value:t,source:r,stack:u,digest:null}}function Qd(t,r,a){return{value:t,source:null,stack:a??null,digest:r??null}}function dh(t,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var ME=typeof WeakMap=="function"?WeakMap:Map;function ub(t,r,a){a=Ii(-1,a),a.tag=3,a.payload={element:null};var o=r.value;return a.callback=function(){qu||(qu=!0,Sh=o),dh(t,r)},a}function cb(t,r,a){a=Ii(-1,a),a.tag=3;var o=t.type.getDerivedStateFromError;if(typeof o=="function"){var u=r.value;a.payload=function(){return o(u)},a.callback=function(){dh(t,r)}}var d=t.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(a.callback=function(){dh(t,r),typeof o!="function"&&(pn===null?pn=new Set([this]):pn.add(this));var h=r.stack;this.componentDidCatch(r.value,{componentStack:h!==null?h:""})}),a}function iv(t,r,a){var o=t.pingCache;if(o===null){o=t.pingCache=new ME;var u=new Set;o.set(r,u)}else u=o.get(r),u===void 0&&(u=new Set,o.set(r,u));u.has(a)||(u.add(a),t=ZE.bind(null,t,r,a),r.then(t,t))}function nv(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function av(t,r,a,o,u){return t.mode&1?(t.flags|=65536,t.lanes=u,t):(t===r?t.flags|=65536:(t.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=Ii(-1,1),r.tag=2,hn(a,r,1))),a.lanes|=1),t)}var OE=Ri.ReactCurrentOwner,Qt=!1;function Ht(t,r,a,o){r.child=t===null?G0(r,null,a,o):ho(r,t.child,a,o)}function ov(t,r,a,o,u){a=a.render;var d=r.ref;return Ja(r,u),o=Kp(t,r,a,o,d,u),a=Xp(),t!==null&&!Qt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~u,Li(t,r,u)):(je&&a&&Fp(r),r.flags|=1,Ht(t,r,o,u),r.child)}function sv(t,r,a,o,u){if(t===null){var d=a.type;return typeof d=="function"&&!om(d)&&d.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=d,db(t,r,d,o,u)):(t=_u(a.type,null,o,r,r.mode,u),t.ref=r.ref,t.return=r,r.child=t)}if(d=t.child,!(t.lanes&u)){var h=d.memoizedProps;if(a=a.compare,a=a!==null?a:Cs,a(h,o)&&t.ref===r.ref)return Li(t,r,u)}return r.flags|=1,t=gn(d,o),t.ref=r.ref,t.return=r,r.child=t}function db(t,r,a,o,u){if(t!==null){var d=t.memoizedProps;if(Cs(d,o)&&t.ref===r.ref)if(Qt=!1,r.pendingProps=o=d,(t.lanes&u)!==0)t.flags&131072&&(Qt=!0);else return r.lanes=t.lanes,Li(t,r,u)}return fh(t,r,a,o,u)}function fb(t,r,a){var o=r.pendingProps,u=o.children,d=t!==null?t.memoizedState:null;if(o.mode==="hidden")if(!(r.mode&1))r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(Ha,or),or|=a;else{if(!(a&1073741824))return t=d!==null?d.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,Oe(Ha,or),or|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=d!==null?d.baseLanes:a,Oe(Ha,or),or|=o}else d!==null?(o=d.baseLanes|a,r.memoizedState=null):o=a,Oe(Ha,or),or|=o;return Ht(t,r,u,a),r.child}function hb(t,r){var a=r.ref;(t===null&&a!==null||t!==null&&t.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function fh(t,r,a,o,u){var d=er(a)?ia:Rt.current;return d=co(r,d),Ja(r,u),a=Kp(t,r,a,o,d,u),o=Xp(),t!==null&&!Qt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~u,Li(t,r,u)):(je&&o&&Fp(r),r.flags|=1,Ht(t,r,a,u),r.child)}function lv(t,r,a,o,u){if(er(a)){var d=!0;Mu(r)}else d=!1;if(Ja(r,u),r.stateNode===null)mu(t,r),N0(r,a,o),ch(r,a,o,u),o=!0;else if(t===null){var h=r.stateNode,l=r.memoizedProps;h.props=l;var g=h.context,y=a.contextType;typeof y=="object"&&y!==null?y=Ir(y):(y=er(a)?ia:Rt.current,y=co(r,y));var v=a.getDerivedStateFromProps,b=typeof v=="function"||typeof h.getSnapshotBeforeUpdate=="function";b||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(l!==o||g!==y)&&Jg(r,h,o,y),Qi=!1;var e=r.memoizedState;h.state=e,$u(r,o,h,u),g=r.memoizedState,l!==o||e!==g||Jt.current||Qi?(typeof v=="function"&&(uh(r,a,v,o),g=r.memoizedState),(l=Qi||Zg(r,a,l,o,e,g,y))?(b||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(r.flags|=4194308)):(typeof h.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=o,r.memoizedState=g),h.props=o,h.state=g,h.context=y,o=l):(typeof h.componentDidMount=="function"&&(r.flags|=4194308),o=!1)}else{h=r.stateNode,M0(t,r),l=r.memoizedProps,y=r.type===r.elementType?l:Fr(r.type,l),h.props=y,b=r.pendingProps,e=h.context,g=a.contextType,typeof g=="object"&&g!==null?g=Ir(g):(g=er(a)?ia:Rt.current,g=co(r,g));var n=a.getDerivedStateFromProps;(v=typeof n=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(l!==b||e!==g)&&Jg(r,h,o,g),Qi=!1,e=r.memoizedState,h.state=e,$u(r,o,h,u);var s=r.memoizedState;l!==b||e!==s||Jt.current||Qi?(typeof n=="function"&&(uh(r,a,n,o),s=r.memoizedState),(y=Qi||Zg(r,a,y,o,e,s,g)||!1)?(v||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(o,s,g),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(o,s,g)),typeof h.componentDidUpdate=="function"&&(r.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof h.componentDidUpdate!="function"||l===t.memoizedProps&&e===t.memoizedState||(r.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&e===t.memoizedState||(r.flags|=1024),r.memoizedProps=o,r.memoizedState=s),h.props=o,h.state=s,h.context=g,o=y):(typeof h.componentDidUpdate!="function"||l===t.memoizedProps&&e===t.memoizedState||(r.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&e===t.memoizedState||(r.flags|=1024),o=!1)}return hh(t,r,a,o,d,u)}function hh(t,r,a,o,u,d){hb(t,r);var h=(r.flags&128)!==0;if(!o&&!h)return u&&Yg(r,a,!1),Li(t,r,d);o=r.stateNode,OE.current=r;var l=h&&typeof a.getDerivedStateFromError!="function"?null:o.render();return r.flags|=1,t!==null&&h?(r.child=ho(r,t.child,null,d),r.child=ho(r,null,l,d)):Ht(t,r,l,d),r.memoizedState=o.state,u&&Yg(r,a,!0),r.child}function pb(t){var r=t.stateNode;r.pendingContext?Wg(t,r.pendingContext,r.pendingContext!==r.context):r.context&&Wg(t,r.context,!1),Vp(t,r.containerInfo)}function uv(t,r,a,o,u){return fo(),Op(u),r.flags|=256,Ht(t,r,a,o),r.child}var ph={dehydrated:null,treeContext:null,retryLane:0};function mh(t){return{baseLanes:t,cachePool:null,transitions:null}}function mb(t,r,a){var o=r.pendingProps,u=Ye.current,d=!1,h=(r.flags&128)!==0,l;if((l=h)||(l=t!==null&&t.memoizedState===null?!1:(u&2)!==0),l?(d=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(u|=1),Oe(Ye,u&1),t===null)return sh(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(r.mode&1?t.data==="$!"?r.lanes=8:r.lanes=1073741824:r.lanes=1,null):(h=o.children,t=o.fallback,d?(o=r.mode,d=r.child,h={mode:"hidden",children:h},!(o&1)&&d!==null?(d.childLanes=0,d.pendingProps=h):d=kc(h,o,0,null),t=Jn(t,o,a,null),d.return=r,t.return=r,d.sibling=t,r.child=d,r.child.memoizedState=mh(a),r.memoizedState=ph,t):Jp(r,h));if(u=t.memoizedState,u!==null&&(l=u.dehydrated,l!==null))return NE(t,r,h,o,l,u,a);if(d){d=o.fallback,h=r.mode,u=t.child,l=u.sibling;var g={mode:"hidden",children:o.children};return!(h&1)&&r.child!==u?(o=r.child,o.childLanes=0,o.pendingProps=g,r.deletions=null):(o=gn(u,g),o.subtreeFlags=u.subtreeFlags&14680064),l!==null?d=gn(l,d):(d=Jn(d,h,a,null),d.flags|=2),d.return=r,o.return=r,o.sibling=d,r.child=o,o=d,d=r.child,h=t.child.memoizedState,h=h===null?mh(a):{baseLanes:h.baseLanes|a,cachePool:null,transitions:h.transitions},d.memoizedState=h,d.childLanes=t.childLanes&~a,r.memoizedState=ph,o}return d=t.child,t=d.sibling,o=gn(d,{mode:"visible",children:o.children}),!(r.mode&1)&&(o.lanes=a),o.return=r,o.sibling=null,t!==null&&(a=r.deletions,a===null?(r.deletions=[t],r.flags|=16):a.push(t)),r.child=o,r.memoizedState=null,o}function Jp(t,r){return r=kc({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function Nl(t,r,a,o){return o!==null&&Op(o),ho(r,t.child,null,a),t=Jp(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function NE(t,r,a,o,u,d,h){if(a)return r.flags&256?(r.flags&=-257,o=Qd(Error(N(422))),Nl(t,r,h,o)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(d=o.fallback,u=r.mode,o=kc({mode:"visible",children:o.children},u,0,null),d=Jn(d,u,h,null),d.flags|=2,o.return=r,d.return=r,o.sibling=d,r.child=o,r.mode&1&&ho(r,t.child,null,h),r.child.memoizedState=mh(h),r.memoizedState=ph,d);if(!(r.mode&1))return Nl(t,r,h,null);if(u.data==="$!"){if(o=u.nextSibling&&u.nextSibling.dataset,o)var l=o.dgst;return o=l,d=Error(N(419)),o=Qd(d,o,void 0),Nl(t,r,h,o)}if(l=(h&t.childLanes)!==0,Qt||l){if(o=vt,o!==null){switch(h&-h){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=u&(o.suspendedLanes|h)?0:u,u!==0&&u!==d.retryLane&&(d.retryLane=u,Di(t,u),$r(o,t,u,-1))}return am(),o=Qd(Error(N(421))),Nl(t,r,h,o)}return u.data==="$?"?(r.flags|=128,r.child=t.child,r=JE.bind(null,t),u._reactRetry=r,null):(t=d.treeContext,lr=fn(u.nextSibling),cr=r,je=!0,Nr=null,t!==null&&(Er[Ur++]=Ti,Er[Ur++]=Pi,Er[Ur++]=na,Ti=t.id,Pi=t.overflow,na=r),r=Jp(r,o.children),r.flags|=4096,r)}function cv(t,r,a){t.lanes|=r;var o=t.alternate;o!==null&&(o.lanes|=r),lh(t.return,r,a)}function Zd(t,r,a,o,u){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:u}:(d.isBackwards=r,d.rendering=null,d.renderingStartTime=0,d.last=o,d.tail=a,d.tailMode=u)}function gb(t,r,a){var o=r.pendingProps,u=o.revealOrder,d=o.tail;if(Ht(t,r,o.children,a),o=Ye.current,o&2)o=o&1|2,r.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&cv(t,a,r);else if(t.tag===19)cv(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}if(Oe(Ye,o),!(r.mode&1))r.memoizedState=null;else switch(u){case"forwards":for(a=r.child,u=null;a!==null;)t=a.alternate,t!==null&&ju(t)===null&&(u=a),a=a.sibling;a=u,a===null?(u=r.child,r.child=null):(u=a.sibling,a.sibling=null),Zd(r,!1,u,a,d);break;case"backwards":for(a=null,u=r.child,r.child=null;u!==null;){if(t=u.alternate,t!==null&&ju(t)===null){r.child=u;break}t=u.sibling,u.sibling=a,a=u,u=t}Zd(r,!0,a,null,d);break;case"together":Zd(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function mu(t,r){!(r.mode&1)&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function Li(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),oa|=r.lanes,!(a&r.childLanes))return null;if(t!==null&&r.child!==t.child)throw Error(N(153));if(r.child!==null){for(t=r.child,a=gn(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=gn(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function HE(t,r,a){switch(r.tag){case 3:pb(r),fo();break;case 5:$0(r);break;case 1:er(r.type)&&Mu(r);break;case 4:Vp(r,r.stateNode.containerInfo);break;case 10:var o=r.type._context,u=r.memoizedProps.value;Oe(Hu,o._currentValue),o._currentValue=u;break;case 13:if(o=r.memoizedState,o!==null)return o.dehydrated!==null?(Oe(Ye,Ye.current&1),r.flags|=128,null):a&r.child.childLanes?mb(t,r,a):(Oe(Ye,Ye.current&1),t=Li(t,r,a),t!==null?t.sibling:null);Oe(Ye,Ye.current&1);break;case 19:if(o=(a&r.childLanes)!==0,t.flags&128){if(o)return gb(t,r,a);r.flags|=128}if(u=r.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),Oe(Ye,Ye.current),o)break;return null;case 22:case 23:return r.lanes=0,fb(t,r,a)}return Li(t,r,a)}var vb,gh,_b,yb;vb=function(t,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)t.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};gh=function(){};_b=function(t,r,a,o){var u=t.memoizedProps;if(u!==o){t=r.stateNode,Xn(ai.current);var d=null;switch(a){case"input":u=Mf(t,u),o=Mf(t,o),d=[];break;case"select":u=Ke({},u,{value:void 0}),o=Ke({},o,{value:void 0}),d=[];break;case"textarea":u=Hf(t,u),o=Hf(t,o),d=[];break;default:typeof u.onClick!="function"&&typeof o.onClick=="function"&&(t.onclick=Ru)}$f(a,o);var h;a=null;for(y in u)if(!o.hasOwnProperty(y)&&u.hasOwnProperty(y)&&u[y]!=null)if(y==="style"){var l=u[y];for(h in l)l.hasOwnProperty(h)&&(a||(a={}),a[h]="")}else y!=="dangerouslySetInnerHTML"&&y!=="children"&&y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(ys.hasOwnProperty(y)?d||(d=[]):(d=d||[]).push(y,null));for(y in o){var g=o[y];if(l=u!=null?u[y]:void 0,o.hasOwnProperty(y)&&g!==l&&(g!=null||l!=null))if(y==="style")if(l){for(h in l)!l.hasOwnProperty(h)||g&&g.hasOwnProperty(h)||(a||(a={}),a[h]="");for(h in g)g.hasOwnProperty(h)&&l[h]!==g[h]&&(a||(a={}),a[h]=g[h])}else a||(d||(d=[]),d.push(y,a)),a=g;else y==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,l=l?l.__html:void 0,g!=null&&l!==g&&(d=d||[]).push(y,g)):y==="children"?typeof g!="string"&&typeof g!="number"||(d=d||[]).push(y,""+g):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&(ys.hasOwnProperty(y)?(g!=null&&y==="onScroll"&&Ne("scroll",t),d||l===g||(d=[])):(d=d||[]).push(y,g))}a&&(d=d||[]).push("style",a);var y=d;(r.updateQueue=y)&&(r.flags|=4)}};yb=function(t,r,a,o){a!==o&&(r.flags|=4)};function Fo(t,r){if(!je)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function Dt(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(r)for(var u=t.child;u!==null;)a|=u.lanes|u.childLanes,o|=u.subtreeFlags&14680064,o|=u.flags&14680064,u.return=t,u=u.sibling;else for(u=t.child;u!==null;)a|=u.lanes|u.childLanes,o|=u.subtreeFlags,o|=u.flags,u.return=t,u=u.sibling;return t.subtreeFlags|=o,t.childLanes=a,r}function GE(t,r,a){var o=r.pendingProps;switch(Mp(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(r),null;case 1:return er(r.type)&&Fu(),Dt(r),null;case 3:return o=r.stateNode,po(),He(Jt),He(Rt),Yp(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(t===null||t.child===null)&&(Ml(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,Nr!==null&&(Eh(Nr),Nr=null))),gh(t,r),Dt(r),null;case 5:Wp(r);var u=Xn(Bs.current);if(a=r.type,t!==null&&r.stateNode!=null)_b(t,r,a,o,u),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!o){if(r.stateNode===null)throw Error(N(166));return Dt(r),null}if(t=Xn(ai.current),Ml(r)){o=r.stateNode,a=r.type;var d=r.memoizedProps;switch(o[ti]=r,o[Ps]=d,t=(r.mode&1)!==0,a){case"dialog":Ne("cancel",o),Ne("close",o);break;case"iframe":case"object":case"embed":Ne("load",o);break;case"video":case"audio":for(u=0;u<Xo.length;u++)Ne(Xo[u],o);break;case"source":Ne("error",o);break;case"img":case"image":case"link":Ne("error",o),Ne("load",o);break;case"details":Ne("toggle",o);break;case"input":yg(o,d),Ne("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!d.multiple},Ne("invalid",o);break;case"textarea":Sg(o,d),Ne("invalid",o)}$f(a,d),u=null;for(var h in d)if(d.hasOwnProperty(h)){var l=d[h];h==="children"?typeof l=="string"?o.textContent!==l&&(d.suppressHydrationWarning!==!0&&Fl(o.textContent,l,t),u=["children",l]):typeof l=="number"&&o.textContent!==""+l&&(d.suppressHydrationWarning!==!0&&Fl(o.textContent,l,t),u=["children",""+l]):ys.hasOwnProperty(h)&&l!=null&&h==="onScroll"&&Ne("scroll",o)}switch(a){case"input":Pl(o),bg(o,d,!0);break;case"textarea":Pl(o),wg(o);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(o.onclick=Ru)}o=u,r.updateQueue=o,o!==null&&(r.flags|=4)}else{h=u.nodeType===9?u:u.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Wy(a)),t==="http://www.w3.org/1999/xhtml"?a==="script"?(t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof o.is=="string"?t=h.createElement(a,{is:o.is}):(t=h.createElement(a),a==="select"&&(h=t,o.multiple?h.multiple=!0:o.size&&(h.size=o.size))):t=h.createElementNS(t,a),t[ti]=r,t[Ps]=o,vb(t,r,!1,!1),r.stateNode=t;e:{switch(h=jf(a,o),a){case"dialog":Ne("cancel",t),Ne("close",t),u=o;break;case"iframe":case"object":case"embed":Ne("load",t),u=o;break;case"video":case"audio":for(u=0;u<Xo.length;u++)Ne(Xo[u],t);u=o;break;case"source":Ne("error",t),u=o;break;case"img":case"image":case"link":Ne("error",t),Ne("load",t),u=o;break;case"details":Ne("toggle",t),u=o;break;case"input":yg(t,o),u=Mf(t,o),Ne("invalid",t);break;case"option":u=o;break;case"select":t._wrapperState={wasMultiple:!!o.multiple},u=Ke({},o,{value:void 0}),Ne("invalid",t);break;case"textarea":Sg(t,o),u=Hf(t,o),Ne("invalid",t);break;default:u=o}$f(a,u),l=u;for(d in l)if(l.hasOwnProperty(d)){var g=l[d];d==="style"?Ky(t,g):d==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,g!=null&&Yy(t,g)):d==="children"?typeof g=="string"?(a!=="textarea"||g!=="")&&bs(t,g):typeof g=="number"&&bs(t,""+g):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ys.hasOwnProperty(d)?g!=null&&d==="onScroll"&&Ne("scroll",t):g!=null&&xp(t,d,g,h))}switch(a){case"input":Pl(t),bg(t,o,!1);break;case"textarea":Pl(t),wg(t);break;case"option":o.value!=null&&t.setAttribute("value",""+bn(o.value));break;case"select":t.multiple=!!o.multiple,d=o.value,d!=null?Ka(t,!!o.multiple,d,!1):o.defaultValue!=null&&Ka(t,!!o.multiple,o.defaultValue,!0);break;default:typeof u.onClick=="function"&&(t.onclick=Ru)}switch(a){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Dt(r),null;case 6:if(t&&r.stateNode!=null)yb(t,r,t.memoizedProps,o);else{if(typeof o!="string"&&r.stateNode===null)throw Error(N(166));if(a=Xn(Bs.current),Xn(ai.current),Ml(r)){if(o=r.stateNode,a=r.memoizedProps,o[ti]=r,(d=o.nodeValue!==a)&&(t=cr,t!==null))switch(t.tag){case 3:Fl(o.nodeValue,a,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Fl(o.nodeValue,a,(t.mode&1)!==0)}d&&(r.flags|=4)}else o=(a.nodeType===9?a:a.ownerDocument).createTextNode(o),o[ti]=r,r.stateNode=o}return Dt(r),null;case 13:if(He(Ye),o=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(je&&lr!==null&&r.mode&1&&!(r.flags&128))R0(),fo(),r.flags|=98560,d=!1;else if(d=Ml(r),o!==null&&o.dehydrated!==null){if(t===null){if(!d)throw Error(N(318));if(d=r.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(N(317));d[ti]=r}else fo(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;Dt(r),d=!1}else Nr!==null&&(Eh(Nr),Nr=null),d=!0;if(!d)return r.flags&65536?r:null}return r.flags&128?(r.lanes=a,r):(o=o!==null,o!==(t!==null&&t.memoizedState!==null)&&o&&(r.child.flags|=8192,r.mode&1&&(t===null||Ye.current&1?ft===0&&(ft=3):am())),r.updateQueue!==null&&(r.flags|=4),Dt(r),null);case 4:return po(),gh(t,r),t===null&&As(r.stateNode.containerInfo),Dt(r),null;case 10:return Gp(r.type._context),Dt(r),null;case 17:return er(r.type)&&Fu(),Dt(r),null;case 19:if(He(Ye),d=r.memoizedState,d===null)return Dt(r),null;if(o=(r.flags&128)!==0,h=d.rendering,h===null)if(o)Fo(d,!1);else{if(ft!==0||t!==null&&t.flags&128)for(t=r.child;t!==null;){if(h=ju(t),h!==null){for(r.flags|=128,Fo(d,!1),o=h.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),r.subtreeFlags=0,o=a,a=r.child;a!==null;)d=a,t=o,d.flags&=14680066,h=d.alternate,h===null?(d.childLanes=0,d.lanes=t,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=h.childLanes,d.lanes=h.lanes,d.child=h.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=h.memoizedProps,d.memoizedState=h.memoizedState,d.updateQueue=h.updateQueue,d.type=h.type,t=h.dependencies,d.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),a=a.sibling;return Oe(Ye,Ye.current&1|2),r.child}t=t.sibling}d.tail!==null&&it()>go&&(r.flags|=128,o=!0,Fo(d,!1),r.lanes=4194304)}else{if(!o)if(t=ju(h),t!==null){if(r.flags|=128,o=!0,a=t.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),Fo(d,!0),d.tail===null&&d.tailMode==="hidden"&&!h.alternate&&!je)return Dt(r),null}else 2*it()-d.renderingStartTime>go&&a!==1073741824&&(r.flags|=128,o=!0,Fo(d,!1),r.lanes=4194304);d.isBackwards?(h.sibling=r.child,r.child=h):(a=d.last,a!==null?a.sibling=h:r.child=h,d.last=h)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=it(),r.sibling=null,a=Ye.current,Oe(Ye,o?a&1|2:a&1),r):(Dt(r),null);case 22:case 23:return nm(),o=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==o&&(r.flags|=8192),o&&r.mode&1?or&1073741824&&(Dt(r),r.subtreeFlags&6&&(r.flags|=8192)):Dt(r),null;case 24:return null;case 25:return null}throw Error(N(156,r.tag))}function $E(t,r){switch(Mp(r),r.tag){case 1:return er(r.type)&&Fu(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return po(),He(Jt),He(Rt),Yp(),t=r.flags,t&65536&&!(t&128)?(r.flags=t&-65537|128,r):null;case 5:return Wp(r),null;case 13:if(He(Ye),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(N(340));fo()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return He(Ye),null;case 4:return po(),null;case 10:return Gp(r.type._context),null;case 22:case 23:return nm(),null;case 24:return null;default:return null}}var Hl=!1,zt=!1,jE=typeof WeakSet=="function"?WeakSet:Set,G=null;function Na(t,r){var a=t.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(o){tt(t,r,o)}else a.current=null}function vh(t,r,a){try{a()}catch(o){tt(t,r,o)}}var dv=!1;function VE(t,r){if(eh=Du,t=x0(),Rp(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var u=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var h=0,l=-1,g=-1,y=0,v=0,b=t,e=null;t:for(;;){for(var n;b!==a||u!==0&&b.nodeType!==3||(l=h+u),b!==d||o!==0&&b.nodeType!==3||(g=h+o),b.nodeType===3&&(h+=b.nodeValue.length),(n=b.firstChild)!==null;)e=b,b=n;for(;;){if(b===t)break t;if(e===a&&++y===u&&(l=h),e===d&&++v===o&&(g=h),(n=b.nextSibling)!==null)break;b=e,e=b.parentNode}b=n}a=l===-1||g===-1?null:{start:l,end:g}}else a=null}a=a||{start:0,end:0}}else a=null;for(th={focusedElem:t,selectionRange:a},Du=!1,G=r;G!==null;)if(r=G,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,G=t;else for(;G!==null;){r=G;try{var s=r.alternate;if(r.flags&1024)switch(r.tag){case 0:case 11:case 15:break;case 1:if(s!==null){var c=s.memoizedProps,f=s.memoizedState,m=r.stateNode,p=m.getSnapshotBeforeUpdate(r.elementType===r.type?c:Fr(r.type,c),f);m.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var _=r.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(N(163))}}catch(S){tt(r,r.return,S)}if(t=r.sibling,t!==null){t.return=r.return,G=t;break}G=r.return}return s=dv,dv=!1,s}function ds(t,r,a){var o=r.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&t)===t){var d=u.destroy;u.destroy=void 0,d!==void 0&&vh(r,a,d)}u=u.next}while(u!==o)}}function Ic(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&t)===t){var o=a.create;a.destroy=o()}a=a.next}while(a!==r)}}function _h(t){var r=t.ref;if(r!==null){var a=t.stateNode;switch(t.tag){case 5:t=a;break;default:t=a}typeof r=="function"?r(t):r.current=t}}function bb(t){var r=t.alternate;r!==null&&(t.alternate=null,bb(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[ti],delete r[Ps],delete r[nh],delete r[AE],delete r[TE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Sb(t){return t.tag===5||t.tag===3||t.tag===4}function fv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Sb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yh(t,r,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(t,r):a.insertBefore(t,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(t,a)):(r=a,r.appendChild(t)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Ru));else if(o!==4&&(t=t.child,t!==null))for(yh(t,r,a),t=t.sibling;t!==null;)yh(t,r,a),t=t.sibling}function bh(t,r,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(o!==4&&(t=t.child,t!==null))for(bh(t,r,a),t=t.sibling;t!==null;)bh(t,r,a),t=t.sibling}var Et=null,Mr=!1;function ji(t,r,a){for(a=a.child;a!==null;)wb(t,r,a),a=a.sibling}function wb(t,r,a){if(ni&&typeof ni.onCommitFiberUnmount=="function")try{ni.onCommitFiberUnmount(wc,a)}catch{}switch(a.tag){case 5:zt||Na(a,r);case 6:var o=Et,u=Mr;Et=null,ji(t,r,a),Et=o,Mr=u,Et!==null&&(Mr?(t=Et,a=a.stateNode,t.nodeType===8?t.parentNode.removeChild(a):t.removeChild(a)):Et.removeChild(a.stateNode));break;case 18:Et!==null&&(Mr?(t=Et,a=a.stateNode,t.nodeType===8?Vd(t.parentNode,a):t.nodeType===1&&Vd(t,a),Es(t)):Vd(Et,a.stateNode));break;case 4:o=Et,u=Mr,Et=a.stateNode.containerInfo,Mr=!0,ji(t,r,a),Et=o,Mr=u;break;case 0:case 11:case 14:case 15:if(!zt&&(o=a.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){u=o=o.next;do{var d=u,h=d.destroy;d=d.tag,h!==void 0&&(d&2||d&4)&&vh(a,r,h),u=u.next}while(u!==o)}ji(t,r,a);break;case 1:if(!zt&&(Na(a,r),o=a.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=a.memoizedProps,o.state=a.memoizedState,o.componentWillUnmount()}catch(l){tt(a,r,l)}ji(t,r,a);break;case 21:ji(t,r,a);break;case 22:a.mode&1?(zt=(o=zt)||a.memoizedState!==null,ji(t,r,a),zt=o):ji(t,r,a);break;default:ji(t,r,a)}}function hv(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var a=t.stateNode;a===null&&(a=t.stateNode=new jE),r.forEach(function(o){var u=eU.bind(null,t,o);a.has(o)||(a.add(o),o.then(u,u))})}}function zr(t,r){var a=r.deletions;if(a!==null)for(var o=0;o<a.length;o++){var u=a[o];try{var d=t,h=r,l=h;e:for(;l!==null;){switch(l.tag){case 5:Et=l.stateNode,Mr=!1;break e;case 3:Et=l.stateNode.containerInfo,Mr=!0;break e;case 4:Et=l.stateNode.containerInfo,Mr=!0;break e}l=l.return}if(Et===null)throw Error(N(160));wb(d,h,u),Et=null,Mr=!1;var g=u.alternate;g!==null&&(g.return=null),u.return=null}catch(y){tt(u,r,y)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)xb(r,t),r=r.sibling}function xb(t,r){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zr(r,t),Zr(t),o&4){try{ds(3,t,t.return),Ic(3,t)}catch(c){tt(t,t.return,c)}try{ds(5,t,t.return)}catch(c){tt(t,t.return,c)}}break;case 1:zr(r,t),Zr(t),o&512&&a!==null&&Na(a,a.return);break;case 5:if(zr(r,t),Zr(t),o&512&&a!==null&&Na(a,a.return),t.flags&32){var u=t.stateNode;try{bs(u,"")}catch(c){tt(t,t.return,c)}}if(o&4&&(u=t.stateNode,u!=null)){var d=t.memoizedProps,h=a!==null?a.memoizedProps:d,l=t.type,g=t.updateQueue;if(t.updateQueue=null,g!==null)try{l==="input"&&d.type==="radio"&&d.name!=null&&jy(u,d),jf(l,h);var y=jf(l,d);for(h=0;h<g.length;h+=2){var v=g[h],b=g[h+1];v==="style"?Ky(u,b):v==="dangerouslySetInnerHTML"?Yy(u,b):v==="children"?bs(u,b):xp(u,v,b,y)}switch(l){case"input":Of(u,d);break;case"textarea":Vy(u,d);break;case"select":var e=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!d.multiple;var n=d.value;n!=null?Ka(u,!!d.multiple,n,!1):e!==!!d.multiple&&(d.defaultValue!=null?Ka(u,!!d.multiple,d.defaultValue,!0):Ka(u,!!d.multiple,d.multiple?[]:"",!1))}u[Ps]=d}catch(c){tt(t,t.return,c)}}break;case 6:if(zr(r,t),Zr(t),o&4){if(t.stateNode===null)throw Error(N(162));u=t.stateNode,d=t.memoizedProps;try{u.nodeValue=d}catch(c){tt(t,t.return,c)}}break;case 3:if(zr(r,t),Zr(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{Es(r.containerInfo)}catch(c){tt(t,t.return,c)}break;case 4:zr(r,t),Zr(t);break;case 13:zr(r,t),Zr(t),u=t.child,u.flags&8192&&(d=u.memoizedState!==null,u.stateNode.isHidden=d,!d||u.alternate!==null&&u.alternate.memoizedState!==null||(rm=it())),o&4&&hv(t);break;case 22:if(v=a!==null&&a.memoizedState!==null,t.mode&1?(zt=(y=zt)||v,zr(r,t),zt=y):zr(r,t),Zr(t),o&8192){if(y=t.memoizedState!==null,(t.stateNode.isHidden=y)&&!v&&t.mode&1)for(G=t,v=t.child;v!==null;){for(b=G=v;G!==null;){switch(e=G,n=e.child,e.tag){case 0:case 11:case 14:case 15:ds(4,e,e.return);break;case 1:Na(e,e.return);var s=e.stateNode;if(typeof s.componentWillUnmount=="function"){o=e,a=e.return;try{r=o,s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(c){tt(o,a,c)}}break;case 5:Na(e,e.return);break;case 22:if(e.memoizedState!==null){mv(b);continue}}n!==null?(n.return=e,G=n):mv(b)}v=v.sibling}e:for(v=null,b=t;;){if(b.tag===5){if(v===null){v=b;try{u=b.stateNode,y?(d=u.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(l=b.stateNode,g=b.memoizedProps.style,h=g!=null&&g.hasOwnProperty("display")?g.display:null,l.style.display=qy("display",h))}catch(c){tt(t,t.return,c)}}}else if(b.tag===6){if(v===null)try{b.stateNode.nodeValue=y?"":b.memoizedProps}catch(c){tt(t,t.return,c)}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===t)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===t)break e;for(;b.sibling===null;){if(b.return===null||b.return===t)break e;v===b&&(v=null),b=b.return}v===b&&(v=null),b.sibling.return=b.return,b=b.sibling}}break;case 19:zr(r,t),Zr(t),o&4&&hv(t);break;case 21:break;default:zr(r,t),Zr(t)}}function Zr(t){var r=t.flags;if(r&2){try{e:{for(var a=t.return;a!==null;){if(Sb(a)){var o=a;break e}a=a.return}throw Error(N(160))}switch(o.tag){case 5:var u=o.stateNode;o.flags&32&&(bs(u,""),o.flags&=-33);var d=fv(t);bh(t,d,u);break;case 3:case 4:var h=o.stateNode.containerInfo,l=fv(t);yh(t,l,h);break;default:throw Error(N(161))}}catch(g){tt(t,t.return,g)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function WE(t,r,a){G=t,Eb(t)}function Eb(t,r,a){for(var o=(t.mode&1)!==0;G!==null;){var u=G,d=u.child;if(u.tag===22&&o){var h=u.memoizedState!==null||Hl;if(!h){var l=u.alternate,g=l!==null&&l.memoizedState!==null||zt;l=Hl;var y=zt;if(Hl=h,(zt=g)&&!y)for(G=u;G!==null;)h=G,g=h.child,h.tag===22&&h.memoizedState!==null?gv(u):g!==null?(g.return=h,G=g):gv(u);for(;d!==null;)G=d,Eb(d),d=d.sibling;G=u,Hl=l,zt=y}pv(t)}else u.subtreeFlags&8772&&d!==null?(d.return=u,G=d):pv(t)}}function pv(t){for(;G!==null;){var r=G;if(r.flags&8772){var a=r.alternate;try{if(r.flags&8772)switch(r.tag){case 0:case 11:case 15:zt||Ic(5,r);break;case 1:var o=r.stateNode;if(r.flags&4&&!zt)if(a===null)o.componentDidMount();else{var u=r.elementType===r.type?a.memoizedProps:Fr(r.type,a.memoizedProps);o.componentDidUpdate(u,a.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var d=r.updateQueue;d!==null&&Qg(r,d,o);break;case 3:var h=r.updateQueue;if(h!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}Qg(r,h,a)}break;case 5:var l=r.stateNode;if(a===null&&r.flags&4){a=l;var g=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":g.autoFocus&&a.focus();break;case"img":g.src&&(a.src=g.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var y=r.alternate;if(y!==null){var v=y.memoizedState;if(v!==null){var b=v.dehydrated;b!==null&&Es(b)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(N(163))}zt||r.flags&512&&_h(r)}catch(e){tt(r,r.return,e)}}if(r===t){G=null;break}if(a=r.sibling,a!==null){a.return=r.return,G=a;break}G=r.return}}function mv(t){for(;G!==null;){var r=G;if(r===t){G=null;break}var a=r.sibling;if(a!==null){a.return=r.return,G=a;break}G=r.return}}function gv(t){for(;G!==null;){var r=G;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{Ic(4,r)}catch(g){tt(r,a,g)}break;case 1:var o=r.stateNode;if(typeof o.componentDidMount=="function"){var u=r.return;try{o.componentDidMount()}catch(g){tt(r,u,g)}}var d=r.return;try{_h(r)}catch(g){tt(r,d,g)}break;case 5:var h=r.return;try{_h(r)}catch(g){tt(r,h,g)}}}catch(g){tt(r,r.return,g)}if(r===t){G=null;break}var l=r.sibling;if(l!==null){l.return=r.return,G=l;break}G=r.return}}var YE=Math.ceil,Yu=Ri.ReactCurrentDispatcher,em=Ri.ReactCurrentOwner,Tr=Ri.ReactCurrentBatchConfig,we=0,vt=null,ot=null,Ct=0,or=0,Ha=Un(0),ft=0,zs=null,oa=0,Bc=0,tm=0,fs=null,Xt=null,rm=0,go=1/0,bi=null,qu=!1,Sh=null,pn=null,Gl=!1,an=null,Ku=0,hs=0,wh=null,gu=-1,vu=0;function $t(){return we&6?it():gu!==-1?gu:gu=it()}function mn(t){return t.mode&1?we&2&&Ct!==0?Ct&-Ct:IE.transition!==null?(vu===0&&(vu=s0()),vu):(t=Pe,t!==0||(t=window.event,t=t===void 0?16:p0(t.type)),t):1}function $r(t,r,a,o){if(50<hs)throw hs=0,wh=null,Error(N(185));Ks(t,a,o),(!(we&2)||t!==vt)&&(t===vt&&(!(we&2)&&(Bc|=a),ft===4&&Ji(t,Ct)),tr(t,o),a===1&&we===0&&!(r.mode&1)&&(go=it()+500,Ac&&Cn()))}function tr(t,r){var a=t.callbackNode;Ix(t,r);var o=ku(t,t===vt?Ct:0);if(o===0)a!==null&&Ug(a),t.callbackNode=null,t.callbackPriority=0;else if(r=o&-o,t.callbackPriority!==r){if(a!=null&&Ug(a),r===1)t.tag===0?PE(vv.bind(null,t)):D0(vv.bind(null,t)),UE(function(){!(we&6)&&Cn()}),a=null;else{switch(l0(o)){case 1:a=Tp;break;case 4:a=a0;break;case 16:a=Bu;break;case 536870912:a=o0;break;default:a=Bu}a=kb(a,Ub.bind(null,t))}t.callbackPriority=r,t.callbackNode=a}}function Ub(t,r){if(gu=-1,vu=0,we&6)throw Error(N(327));var a=t.callbackNode;if(eo()&&t.callbackNode!==a)return null;var o=ku(t,t===vt?Ct:0);if(o===0)return null;if(o&30||o&t.expiredLanes||r)r=Xu(t,o);else{r=o;var u=we;we|=2;var d=Ab();(vt!==t||Ct!==r)&&(bi=null,go=it()+500,Zn(t,r));do try{XE();break}catch(l){Cb(t,l)}while(1);Hp(),Yu.current=d,we=u,ot!==null?r=0:(vt=null,Ct=0,r=ft)}if(r!==0){if(r===2&&(u=Kf(t),u!==0&&(o=u,r=xh(t,u))),r===1)throw a=zs,Zn(t,0),Ji(t,o),tr(t,it()),a;if(r===6)Ji(t,o);else{if(u=t.current.alternate,!(o&30)&&!qE(u)&&(r=Xu(t,o),r===2&&(d=Kf(t),d!==0&&(o=d,r=xh(t,d))),r===1))throw a=zs,Zn(t,0),Ji(t,o),tr(t,it()),a;switch(t.finishedWork=u,t.finishedLanes=o,r){case 0:case 1:throw Error(N(345));case 2:On(t,Xt,bi);break;case 3:if(Ji(t,o),(o&130023424)===o&&(r=rm+500-it(),10<r)){if(ku(t,0)!==0)break;if(u=t.suspendedLanes,(u&o)!==o){$t(),t.pingedLanes|=t.suspendedLanes&u;break}t.timeoutHandle=ih(On.bind(null,t,Xt,bi),r);break}On(t,Xt,bi);break;case 4:if(Ji(t,o),(o&4194240)===o)break;for(r=t.eventTimes,u=-1;0<o;){var h=31-Gr(o);d=1<<h,h=r[h],h>u&&(u=h),o&=~d}if(o=u,o=it()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*YE(o/1960))-o,10<o){t.timeoutHandle=ih(On.bind(null,t,Xt,bi),o);break}On(t,Xt,bi);break;case 5:On(t,Xt,bi);break;default:throw Error(N(329))}}}return tr(t,it()),t.callbackNode===a?Ub.bind(null,t):null}function xh(t,r){var a=fs;return t.current.memoizedState.isDehydrated&&(Zn(t,r).flags|=256),t=Xu(t,r),t!==2&&(r=Xt,Xt=a,r!==null&&Eh(r)),t}function Eh(t){Xt===null?Xt=t:Xt.push.apply(Xt,t)}function qE(t){for(var r=t;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var o=0;o<a.length;o++){var u=a[o],d=u.getSnapshot;u=u.value;try{if(!Vr(d(),u))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ji(t,r){for(r&=~tm,r&=~Bc,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var a=31-Gr(r),o=1<<a;t[a]=-1,r&=~o}}function vv(t){if(we&6)throw Error(N(327));eo();var r=ku(t,0);if(!(r&1))return tr(t,it()),null;var a=Xu(t,r);if(t.tag!==0&&a===2){var o=Kf(t);o!==0&&(r=o,a=xh(t,o))}if(a===1)throw a=zs,Zn(t,0),Ji(t,r),tr(t,it()),a;if(a===6)throw Error(N(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,On(t,Xt,bi),tr(t,it()),null}function im(t,r){var a=we;we|=1;try{return t(r)}finally{we=a,we===0&&(go=it()+500,Ac&&Cn())}}function sa(t){an!==null&&an.tag===0&&!(we&6)&&eo();var r=we;we|=1;var a=Tr.transition,o=Pe;try{if(Tr.transition=null,Pe=1,t)return t()}finally{Pe=o,Tr.transition=a,we=r,!(we&6)&&Cn()}}function nm(){or=Ha.current,He(Ha)}function Zn(t,r){t.finishedWork=null,t.finishedLanes=0;var a=t.timeoutHandle;if(a!==-1&&(t.timeoutHandle=-1,EE(a)),ot!==null)for(a=ot.return;a!==null;){var o=a;switch(Mp(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&Fu();break;case 3:po(),He(Jt),He(Rt),Yp();break;case 5:Wp(o);break;case 4:po();break;case 13:He(Ye);break;case 19:He(Ye);break;case 10:Gp(o.type._context);break;case 22:case 23:nm()}a=a.return}if(vt=t,ot=t=gn(t.current,null),Ct=or=r,ft=0,zs=null,tm=Bc=oa=0,Xt=fs=null,Kn!==null){for(r=0;r<Kn.length;r++)if(a=Kn[r],o=a.interleaved,o!==null){a.interleaved=null;var u=o.next,d=a.pending;if(d!==null){var h=d.next;d.next=u,o.next=h}a.pending=o}Kn=null}return t}function Cb(t,r){do{var a=ot;try{if(Hp(),hu.current=Wu,Vu){for(var o=qe.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}Vu=!1}if(aa=0,mt=dt=qe=null,cs=!1,ks=0,em.current=null,a===null||a.return===null){ft=1,zs=r,ot=null;break}e:{var d=t,h=a.return,l=a,g=r;if(r=Ct,l.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){var y=g,v=l,b=v.tag;if(!(v.mode&1)&&(b===0||b===11||b===15)){var e=v.alternate;e?(v.updateQueue=e.updateQueue,v.memoizedState=e.memoizedState,v.lanes=e.lanes):(v.updateQueue=null,v.memoizedState=null)}var n=nv(h);if(n!==null){n.flags&=-257,av(n,h,l,d,r),n.mode&1&&iv(d,y,r),r=n,g=y;var s=r.updateQueue;if(s===null){var c=new Set;c.add(g),r.updateQueue=c}else s.add(g);break e}else{if(!(r&1)){iv(d,y,r),am();break e}g=Error(N(426))}}else if(je&&l.mode&1){var f=nv(h);if(f!==null){!(f.flags&65536)&&(f.flags|=256),av(f,h,l,d,r),Op(mo(g,l));break e}}d=g=mo(g,l),ft!==4&&(ft=2),fs===null?fs=[d]:fs.push(d),d=h;do{switch(d.tag){case 3:d.flags|=65536,r&=-r,d.lanes|=r;var m=ub(d,g,r);Xg(d,m);break e;case 1:l=g;var p=d.type,_=d.stateNode;if(!(d.flags&128)&&(typeof p.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(pn===null||!pn.has(_)))){d.flags|=65536,r&=-r,d.lanes|=r;var S=cb(d,l,r);Xg(d,S);break e}}d=d.return}while(d!==null)}Pb(a)}catch(x){r=x,ot===a&&a!==null&&(ot=a=a.return);continue}break}while(1)}function Ab(){var t=Yu.current;return Yu.current=Wu,t===null?Wu:t}function am(){(ft===0||ft===3||ft===2)&&(ft=4),vt===null||!(oa&268435455)&&!(Bc&268435455)||Ji(vt,Ct)}function Xu(t,r){var a=we;we|=2;var o=Ab();(vt!==t||Ct!==r)&&(bi=null,Zn(t,r));do try{KE();break}catch(u){Cb(t,u)}while(1);if(Hp(),we=a,Yu.current=o,ot!==null)throw Error(N(261));return vt=null,Ct=0,ft}function KE(){for(;ot!==null;)Tb(ot)}function XE(){for(;ot!==null&&!Sx();)Tb(ot)}function Tb(t){var r=Bb(t.alternate,t,or);t.memoizedProps=t.pendingProps,r===null?Pb(t):ot=r,em.current=null}function Pb(t){var r=t;do{var a=r.alternate;if(t=r.return,r.flags&32768){if(a=$E(a,r),a!==null){a.flags&=32767,ot=a;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ft=6,ot=null;return}}else if(a=GE(a,r,or),a!==null){ot=a;return}if(r=r.sibling,r!==null){ot=r;return}ot=r=t}while(r!==null);ft===0&&(ft=5)}function On(t,r,a){var o=Pe,u=Tr.transition;try{Tr.transition=null,Pe=1,QE(t,r,a,o)}finally{Tr.transition=u,Pe=o}return null}function QE(t,r,a,o){do eo();while(an!==null);if(we&6)throw Error(N(327));a=t.finishedWork;var u=t.finishedLanes;if(a===null)return null;if(t.finishedWork=null,t.finishedLanes=0,a===t.current)throw Error(N(177));t.callbackNode=null,t.callbackPriority=0;var d=a.lanes|a.childLanes;if(Bx(t,d),t===vt&&(ot=vt=null,Ct=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||Gl||(Gl=!0,kb(Bu,function(){return eo(),null})),d=(a.flags&15990)!==0,a.subtreeFlags&15990||d){d=Tr.transition,Tr.transition=null;var h=Pe;Pe=1;var l=we;we|=4,em.current=null,VE(t,a),xb(a,t),vE(th),Du=!!eh,th=eh=null,t.current=a,WE(a),wx(),we=l,Pe=h,Tr.transition=d}else t.current=a;if(Gl&&(Gl=!1,an=t,Ku=u),d=t.pendingLanes,d===0&&(pn=null),Ux(a.stateNode),tr(t,it()),r!==null)for(o=t.onRecoverableError,a=0;a<r.length;a++)u=r[a],o(u.value,{componentStack:u.stack,digest:u.digest});if(qu)throw qu=!1,t=Sh,Sh=null,t;return Ku&1&&t.tag!==0&&eo(),d=t.pendingLanes,d&1?t===wh?hs++:(hs=0,wh=t):hs=0,Cn(),null}function eo(){if(an!==null){var t=l0(Ku),r=Tr.transition,a=Pe;try{if(Tr.transition=null,Pe=16>t?16:t,an===null)var o=!1;else{if(t=an,an=null,Ku=0,we&6)throw Error(N(331));var u=we;for(we|=4,G=t.current;G!==null;){var d=G,h=d.child;if(G.flags&16){var l=d.deletions;if(l!==null){for(var g=0;g<l.length;g++){var y=l[g];for(G=y;G!==null;){var v=G;switch(v.tag){case 0:case 11:case 15:ds(8,v,d)}var b=v.child;if(b!==null)b.return=v,G=b;else for(;G!==null;){v=G;var e=v.sibling,n=v.return;if(bb(v),v===y){G=null;break}if(e!==null){e.return=n,G=e;break}G=n}}}var s=d.alternate;if(s!==null){var c=s.child;if(c!==null){s.child=null;do{var f=c.sibling;c.sibling=null,c=f}while(c!==null)}}G=d}}if(d.subtreeFlags&2064&&h!==null)h.return=d,G=h;else e:for(;G!==null;){if(d=G,d.flags&2048)switch(d.tag){case 0:case 11:case 15:ds(9,d,d.return)}var m=d.sibling;if(m!==null){m.return=d.return,G=m;break e}G=d.return}}var p=t.current;for(G=p;G!==null;){h=G;var _=h.child;if(h.subtreeFlags&2064&&_!==null)_.return=h,G=_;else e:for(h=p;G!==null;){if(l=G,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ic(9,l)}}catch(x){tt(l,l.return,x)}if(l===h){G=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,G=S;break e}G=l.return}}if(we=u,Cn(),ni&&typeof ni.onPostCommitFiberRoot=="function")try{ni.onPostCommitFiberRoot(wc,t)}catch{}o=!0}return o}finally{Pe=a,Tr.transition=r}}return!1}function _v(t,r,a){r=mo(a,r),r=ub(t,r,1),t=hn(t,r,1),r=$t(),t!==null&&(Ks(t,1,r),tr(t,r))}function tt(t,r,a){if(t.tag===3)_v(t,t,a);else for(;r!==null;){if(r.tag===3){_v(r,t,a);break}else if(r.tag===1){var o=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(pn===null||!pn.has(o))){t=mo(a,t),t=cb(r,t,1),r=hn(r,t,1),t=$t(),r!==null&&(Ks(r,1,t),tr(r,t));break}}r=r.return}}function ZE(t,r,a){var o=t.pingCache;o!==null&&o.delete(r),r=$t(),t.pingedLanes|=t.suspendedLanes&a,vt===t&&(Ct&a)===a&&(ft===4||ft===3&&(Ct&130023424)===Ct&&500>it()-rm?Zn(t,0):tm|=a),tr(t,r)}function Ib(t,r){r===0&&(t.mode&1?(r=kl,kl<<=1,!(kl&130023424)&&(kl=4194304)):r=1);var a=$t();t=Di(t,r),t!==null&&(Ks(t,r,a),tr(t,a))}function JE(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),Ib(t,a)}function eU(t,r){var a=0;switch(t.tag){case 13:var o=t.stateNode,u=t.memoizedState;u!==null&&(a=u.retryLane);break;case 19:o=t.stateNode;break;default:throw Error(N(314))}o!==null&&o.delete(r),Ib(t,a)}var Bb;Bb=function(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps||Jt.current)Qt=!0;else{if(!(t.lanes&a)&&!(r.flags&128))return Qt=!1,HE(t,r,a);Qt=!!(t.flags&131072)}else Qt=!1,je&&r.flags&1048576&&L0(r,Nu,r.index);switch(r.lanes=0,r.tag){case 2:var o=r.type;mu(t,r),t=r.pendingProps;var u=co(r,Rt.current);Ja(r,a),u=Kp(null,r,o,t,u,a);var d=Xp();return r.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,er(o)?(d=!0,Mu(r)):d=!1,r.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,jp(r),u.updater=Tc,r.stateNode=u,u._reactInternals=r,ch(r,o,t,a),r=hh(null,r,o,!0,d,a)):(r.tag=0,je&&d&&Fp(r),Ht(null,r,u,a),r=r.child),r;case 16:o=r.elementType;e:{switch(mu(t,r),t=r.pendingProps,u=o._init,o=u(o._payload),r.type=o,u=r.tag=rU(o),t=Fr(o,t),u){case 0:r=fh(null,r,o,t,a);break e;case 1:r=lv(null,r,o,t,a);break e;case 11:r=ov(null,r,o,t,a);break e;case 14:r=sv(null,r,o,Fr(o.type,t),a);break e}throw Error(N(306,o,""))}return r;case 0:return o=r.type,u=r.pendingProps,u=r.elementType===o?u:Fr(o,u),fh(t,r,o,u,a);case 1:return o=r.type,u=r.pendingProps,u=r.elementType===o?u:Fr(o,u),lv(t,r,o,u,a);case 3:e:{if(pb(r),t===null)throw Error(N(387));o=r.pendingProps,d=r.memoizedState,u=d.element,M0(t,r),$u(r,o,null,a);var h=r.memoizedState;if(o=h.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},r.updateQueue.baseState=d,r.memoizedState=d,r.flags&256){u=mo(Error(N(423)),r),r=uv(t,r,o,a,u);break e}else if(o!==u){u=mo(Error(N(424)),r),r=uv(t,r,o,a,u);break e}else for(lr=fn(r.stateNode.containerInfo.firstChild),cr=r,je=!0,Nr=null,a=G0(r,null,o,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(fo(),o===u){r=Li(t,r,a);break e}Ht(t,r,o,a)}r=r.child}return r;case 5:return $0(r),t===null&&sh(r),o=r.type,u=r.pendingProps,d=t!==null?t.memoizedProps:null,h=u.children,rh(o,u)?h=null:d!==null&&rh(o,d)&&(r.flags|=32),hb(t,r),Ht(t,r,h,a),r.child;case 6:return t===null&&sh(r),null;case 13:return mb(t,r,a);case 4:return Vp(r,r.stateNode.containerInfo),o=r.pendingProps,t===null?r.child=ho(r,null,o,a):Ht(t,r,o,a),r.child;case 11:return o=r.type,u=r.pendingProps,u=r.elementType===o?u:Fr(o,u),ov(t,r,o,u,a);case 7:return Ht(t,r,r.pendingProps,a),r.child;case 8:return Ht(t,r,r.pendingProps.children,a),r.child;case 12:return Ht(t,r,r.pendingProps.children,a),r.child;case 10:e:{if(o=r.type._context,u=r.pendingProps,d=r.memoizedProps,h=u.value,Oe(Hu,o._currentValue),o._currentValue=h,d!==null)if(Vr(d.value,h)){if(d.children===u.children&&!Jt.current){r=Li(t,r,a);break e}}else for(d=r.child,d!==null&&(d.return=r);d!==null;){var l=d.dependencies;if(l!==null){h=d.child;for(var g=l.firstContext;g!==null;){if(g.context===o){if(d.tag===1){g=Ii(-1,a&-a),g.tag=2;var y=d.updateQueue;if(y!==null){y=y.shared;var v=y.pending;v===null?g.next=g:(g.next=v.next,v.next=g),y.pending=g}}d.lanes|=a,g=d.alternate,g!==null&&(g.lanes|=a),lh(d.return,a,r),l.lanes|=a;break}g=g.next}}else if(d.tag===10)h=d.type===r.type?null:d.child;else if(d.tag===18){if(h=d.return,h===null)throw Error(N(341));h.lanes|=a,l=h.alternate,l!==null&&(l.lanes|=a),lh(h,a,r),h=d.sibling}else h=d.child;if(h!==null)h.return=d;else for(h=d;h!==null;){if(h===r){h=null;break}if(d=h.sibling,d!==null){d.return=h.return,h=d;break}h=h.return}d=h}Ht(t,r,u.children,a),r=r.child}return r;case 9:return u=r.type,o=r.pendingProps.children,Ja(r,a),u=Ir(u),o=o(u),r.flags|=1,Ht(t,r,o,a),r.child;case 14:return o=r.type,u=Fr(o,r.pendingProps),u=Fr(o.type,u),sv(t,r,o,u,a);case 15:return db(t,r,r.type,r.pendingProps,a);case 17:return o=r.type,u=r.pendingProps,u=r.elementType===o?u:Fr(o,u),mu(t,r),r.tag=1,er(o)?(t=!0,Mu(r)):t=!1,Ja(r,a),N0(r,o,u),ch(r,o,u,a),hh(null,r,o,!0,t,a);case 19:return gb(t,r,a);case 22:return fb(t,r,a)}throw Error(N(156,r.tag))};function kb(t,r){return n0(t,r)}function tU(t,r,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cr(t,r,a,o){return new tU(t,r,a,o)}function om(t){return t=t.prototype,!(!t||!t.isReactComponent)}function rU(t){if(typeof t=="function")return om(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Up)return 11;if(t===Cp)return 14}return 2}function gn(t,r){var a=t.alternate;return a===null?(a=Cr(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&14680064,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a}function _u(t,r,a,o,u,d){var h=2;if(o=t,typeof t=="function")om(t)&&(h=1);else if(typeof t=="string")h=5;else e:switch(t){case Ba:return Jn(a.children,u,d,r);case Ep:h=8,u|=8;break;case Lf:return t=Cr(12,a,r,u|2),t.elementType=Lf,t.lanes=d,t;case zf:return t=Cr(13,a,r,u),t.elementType=zf,t.lanes=d,t;case Rf:return t=Cr(19,a,r,u),t.elementType=Rf,t.lanes=d,t;case Hy:return kc(a,u,d,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Oy:h=10;break e;case Ny:h=9;break e;case Up:h=11;break e;case Cp:h=14;break e;case Xi:h=16,o=null;break e}throw Error(N(130,t==null?t:typeof t,""))}return r=Cr(h,a,r,u),r.elementType=t,r.type=o,r.lanes=d,r}function Jn(t,r,a,o){return t=Cr(7,t,o,r),t.lanes=a,t}function kc(t,r,a,o){return t=Cr(22,t,o,r),t.elementType=Hy,t.lanes=a,t.stateNode={isHidden:!1},t}function Jd(t,r,a){return t=Cr(6,t,null,r),t.lanes=a,t}function ef(t,r,a){return r=Cr(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function iU(t,r,a,o,u){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ld(0),this.expirationTimes=Ld(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ld(0),this.identifierPrefix=o,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function sm(t,r,a,o,u,d,h,l,g){return t=new iU(t,r,a,l,g),r===1?(r=1,d===!0&&(r|=8)):r=0,d=Cr(3,null,null,r),t.current=d,d.stateNode=t,d.memoizedState={element:o,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},jp(d),t}function nU(t,r,a){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ia,key:o==null?null:""+o,children:t,containerInfo:r,implementation:a}}function Db(t){if(!t)return Sn;t=t._reactInternals;e:{if(ha(t)!==t||t.tag!==1)throw Error(N(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(er(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(N(171))}if(t.tag===1){var a=t.type;if(er(a))return k0(t,a,r)}return r}function Lb(t,r,a,o,u,d,h,l,g){return t=sm(a,o,!0,t,u,d,h,l,g),t.context=Db(null),a=t.current,o=$t(),u=mn(a),d=Ii(o,u),d.callback=r??null,hn(a,d,u),t.current.lanes=u,Ks(t,u,o),tr(t,o),t}function Dc(t,r,a,o){var u=r.current,d=$t(),h=mn(u);return a=Db(a),r.context===null?r.context=a:r.pendingContext=a,r=Ii(d,h),r.payload={element:t},o=o===void 0?null:o,o!==null&&(r.callback=o),t=hn(u,r,h),t!==null&&($r(t,u,h,d),fu(t,u,h)),h}function Qu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function yv(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function lm(t,r){yv(t,r),(t=t.alternate)&&yv(t,r)}function aU(){return null}var zb=typeof reportError=="function"?reportError:function(t){console.error(t)};function um(t){this._internalRoot=t}Lc.prototype.render=um.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(N(409));Dc(t,r,null,null)};Lc.prototype.unmount=um.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;sa(function(){Dc(null,t,null,null)}),r[ki]=null}};function Lc(t){this._internalRoot=t}Lc.prototype.unstable_scheduleHydration=function(t){if(t){var r=d0();t={blockedOn:null,target:t,priority:r};for(var a=0;a<Zi.length&&r!==0&&r<Zi[a].priority;a++);Zi.splice(a,0,t),a===0&&h0(t)}};function cm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function zc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function bv(){}function oU(t,r,a,o,u){if(u){if(typeof o=="function"){var d=o;o=function(){var y=Qu(h);d.call(y)}}var h=Lb(r,o,t,0,null,!1,!1,"",bv);return t._reactRootContainer=h,t[ki]=h.current,As(t.nodeType===8?t.parentNode:t),sa(),h}for(;u=t.lastChild;)t.removeChild(u);if(typeof o=="function"){var l=o;o=function(){var y=Qu(g);l.call(y)}}var g=sm(t,0,!1,null,null,!1,!1,"",bv);return t._reactRootContainer=g,t[ki]=g.current,As(t.nodeType===8?t.parentNode:t),sa(function(){Dc(r,g,a,o)}),g}function Rc(t,r,a,o,u){var d=a._reactRootContainer;if(d){var h=d;if(typeof u=="function"){var l=u;u=function(){var g=Qu(h);l.call(g)}}Dc(r,h,t,u)}else h=oU(a,r,t,u,o);return Qu(h)}u0=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var a=Ko(r.pendingLanes);a!==0&&(Pp(r,a|1),tr(r,it()),!(we&6)&&(go=it()+500,Cn()))}break;case 13:sa(function(){var o=Di(t,1);if(o!==null){var u=$t();$r(o,t,1,u)}}),lm(t,1)}};Ip=function(t){if(t.tag===13){var r=Di(t,134217728);if(r!==null){var a=$t();$r(r,t,134217728,a)}lm(t,134217728)}};c0=function(t){if(t.tag===13){var r=mn(t),a=Di(t,r);if(a!==null){var o=$t();$r(a,t,r,o)}lm(t,r)}};d0=function(){return Pe};f0=function(t,r){var a=Pe;try{return Pe=t,r()}finally{Pe=a}};Wf=function(t,r,a){switch(r){case"input":if(Of(t,a),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var o=a[r];if(o!==t&&o.form===t.form){var u=Cc(o);if(!u)throw Error(N(90));$y(o),Of(o,u)}}}break;case"textarea":Vy(t,a);break;case"select":r=a.value,r!=null&&Ka(t,!!a.multiple,r,!1)}};Zy=im;Jy=sa;var sU={usingClientEntryPoint:!1,Events:[Qs,za,Cc,Xy,Qy,im]},Mo={findFiberByHostInstance:qn,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},lU={bundleType:Mo.bundleType,version:Mo.version,rendererPackageName:Mo.rendererPackageName,rendererConfig:Mo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ri.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=r0(t),t===null?null:t.stateNode},findFiberByHostInstance:Mo.findFiberByHostInstance||aU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$l.isDisabled&&$l.supportsFiber)try{wc=$l.inject(lU),ni=$l}catch{}}pr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sU;pr.createPortal=function(t,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cm(r))throw Error(N(200));return nU(t,r,null,a)};pr.createRoot=function(t,r){if(!cm(t))throw Error(N(299));var a=!1,o="",u=zb;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(u=r.onRecoverableError)),r=sm(t,1,!1,null,null,a,!1,o,u),t[ki]=r.current,As(t.nodeType===8?t.parentNode:t),new um(r)};pr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(N(188)):(t=Object.keys(t).join(","),Error(N(268,t)));return t=r0(r),t=t===null?null:t.stateNode,t};pr.flushSync=function(t){return sa(t)};pr.hydrate=function(t,r,a){if(!zc(r))throw Error(N(200));return Rc(null,t,r,!0,a)};pr.hydrateRoot=function(t,r,a){if(!cm(t))throw Error(N(405));var o=a!=null&&a.hydratedSources||null,u=!1,d="",h=zb;if(a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onRecoverableError!==void 0&&(h=a.onRecoverableError)),r=Lb(r,null,t,1,a??null,u,!1,d,h),t[ki]=r.current,As(t),o)for(t=0;t<o.length;t++)a=o[t],u=a._getVersion,u=u(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,u]:r.mutableSourceEagerHydrationData.push(a,u);return new Lc(r)};pr.render=function(t,r,a){if(!zc(r))throw Error(N(200));return Rc(null,t,r,!1,a)};pr.unmountComponentAtNode=function(t){if(!zc(t))throw Error(N(40));return t._reactRootContainer?(sa(function(){Rc(null,null,t,!1,function(){t._reactRootContainer=null,t[ki]=null})}),!0):!1};pr.unstable_batchedUpdates=im;pr.unstable_renderSubtreeIntoContainer=function(t,r,a,o){if(!zc(a))throw Error(N(200));if(t==null||t._reactInternals===void 0)throw Error(N(38));return Rc(t,r,a,!1,o)};pr.version="18.2.0-next-9e3b772b8-20220608";function Rb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Rb)}catch(t){console.error(t)}}Rb(),Ly.exports=pr;var Js=Ly.exports;const Fb=Ys(Js);var Sv=Js;kf.createRoot=Sv.createRoot,kf.hydrateRoot=Sv.hydrateRoot;function nt(t){"@babel/helpers - typeof";return nt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},nt(t)}function la(t){if(t===null||t===!0||t===!1)return NaN;var r=Number(t);return isNaN(r)?r:r<0?Math.ceil(r):Math.floor(r)}function Wt(t,r){if(r.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+r.length+" present")}function li(t){Wt(1,arguments);var r=Object.prototype.toString.call(t);return t instanceof Date||nt(t)==="object"&&r==="[object Date]"?new Date(t.getTime()):typeof t=="number"||r==="[object Number]"?new Date(t):((typeof t=="string"||r==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function uU(t,r){Wt(2,arguments);var a=li(t).getTime(),o=la(r);return new Date(a+o)}var cU={};function Fc(){return cU}function dU(t){var r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),t.getTime()-r.getTime()}function fU(t){return Wt(1,arguments),t instanceof Date||nt(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function hU(t){if(Wt(1,arguments),!fU(t)&&typeof t!="number")return!1;var r=li(t);return!isNaN(Number(r))}function pU(t,r){Wt(2,arguments);var a=la(r);return uU(t,-a)}var mU=864e5;function gU(t){Wt(1,arguments);var r=li(t),a=r.getTime();r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0);var o=r.getTime(),u=a-o;return Math.floor(u/mU)+1}function Zu(t){Wt(1,arguments);var r=1,a=li(t),o=a.getUTCDay(),u=(o<r?7:0)+o-r;return a.setUTCDate(a.getUTCDate()-u),a.setUTCHours(0,0,0,0),a}function Mb(t){Wt(1,arguments);var r=li(t),a=r.getUTCFullYear(),o=new Date(0);o.setUTCFullYear(a+1,0,4),o.setUTCHours(0,0,0,0);var u=Zu(o),d=new Date(0);d.setUTCFullYear(a,0,4),d.setUTCHours(0,0,0,0);var h=Zu(d);return r.getTime()>=u.getTime()?a+1:r.getTime()>=h.getTime()?a:a-1}function vU(t){Wt(1,arguments);var r=Mb(t),a=new Date(0);a.setUTCFullYear(r,0,4),a.setUTCHours(0,0,0,0);var o=Zu(a);return o}var _U=6048e5;function yU(t){Wt(1,arguments);var r=li(t),a=Zu(r).getTime()-vU(r).getTime();return Math.round(a/_U)+1}function Ju(t,r){var a,o,u,d,h,l,g,y;Wt(1,arguments);var v=Fc(),b=la((a=(o=(u=(d=r==null?void 0:r.weekStartsOn)!==null&&d!==void 0?d:r==null||(h=r.locale)===null||h===void 0||(l=h.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&u!==void 0?u:v.weekStartsOn)!==null&&o!==void 0?o:(g=v.locale)===null||g===void 0||(y=g.options)===null||y===void 0?void 0:y.weekStartsOn)!==null&&a!==void 0?a:0);if(!(b>=0&&b<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var e=li(t),n=e.getUTCDay(),s=(n<b?7:0)+n-b;return e.setUTCDate(e.getUTCDate()-s),e.setUTCHours(0,0,0,0),e}function Ob(t,r){var a,o,u,d,h,l,g,y;Wt(1,arguments);var v=li(t),b=v.getUTCFullYear(),e=Fc(),n=la((a=(o=(u=(d=r==null?void 0:r.firstWeekContainsDate)!==null&&d!==void 0?d:r==null||(h=r.locale)===null||h===void 0||(l=h.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&u!==void 0?u:e.firstWeekContainsDate)!==null&&o!==void 0?o:(g=e.locale)===null||g===void 0||(y=g.options)===null||y===void 0?void 0:y.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(n>=1&&n<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var s=new Date(0);s.setUTCFullYear(b+1,0,n),s.setUTCHours(0,0,0,0);var c=Ju(s,r),f=new Date(0);f.setUTCFullYear(b,0,n),f.setUTCHours(0,0,0,0);var m=Ju(f,r);return v.getTime()>=c.getTime()?b+1:v.getTime()>=m.getTime()?b:b-1}function bU(t,r){var a,o,u,d,h,l,g,y;Wt(1,arguments);var v=Fc(),b=la((a=(o=(u=(d=r==null?void 0:r.firstWeekContainsDate)!==null&&d!==void 0?d:r==null||(h=r.locale)===null||h===void 0||(l=h.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&u!==void 0?u:v.firstWeekContainsDate)!==null&&o!==void 0?o:(g=v.locale)===null||g===void 0||(y=g.options)===null||y===void 0?void 0:y.firstWeekContainsDate)!==null&&a!==void 0?a:1),e=Ob(t,r),n=new Date(0);n.setUTCFullYear(e,0,b),n.setUTCHours(0,0,0,0);var s=Ju(n,r);return s}var SU=6048e5;function wU(t,r){Wt(1,arguments);var a=li(t),o=Ju(a,r).getTime()-bU(a,r).getTime();return Math.round(o/SU)+1}function Te(t,r){for(var a=t<0?"-":"",o=Math.abs(t).toString();o.length<r;)o="0"+o;return a+o}var xU={y:function(r,a){var o=r.getUTCFullYear(),u=o>0?o:1-o;return Te(a==="yy"?u%100:u,a.length)},M:function(r,a){var o=r.getUTCMonth();return a==="M"?String(o+1):Te(o+1,2)},d:function(r,a){return Te(r.getUTCDate(),a.length)},a:function(r,a){var o=r.getUTCHours()/12>=1?"pm":"am";switch(a){case"a":case"aa":return o.toUpperCase();case"aaa":return o;case"aaaaa":return o[0];case"aaaa":default:return o==="am"?"a.m.":"p.m."}},h:function(r,a){return Te(r.getUTCHours()%12||12,a.length)},H:function(r,a){return Te(r.getUTCHours(),a.length)},m:function(r,a){return Te(r.getUTCMinutes(),a.length)},s:function(r,a){return Te(r.getUTCSeconds(),a.length)},S:function(r,a){var o=a.length,u=r.getUTCMilliseconds(),d=Math.floor(u*Math.pow(10,o-3));return Te(d,a.length)}};const Vi=xU;var Sa={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},EU={G:function(r,a,o){var u=r.getUTCFullYear()>0?1:0;switch(a){case"G":case"GG":case"GGG":return o.era(u,{width:"abbreviated"});case"GGGGG":return o.era(u,{width:"narrow"});case"GGGG":default:return o.era(u,{width:"wide"})}},y:function(r,a,o){if(a==="yo"){var u=r.getUTCFullYear(),d=u>0?u:1-u;return o.ordinalNumber(d,{unit:"year"})}return Vi.y(r,a)},Y:function(r,a,o,u){var d=Ob(r,u),h=d>0?d:1-d;if(a==="YY"){var l=h%100;return Te(l,2)}return a==="Yo"?o.ordinalNumber(h,{unit:"year"}):Te(h,a.length)},R:function(r,a){var o=Mb(r);return Te(o,a.length)},u:function(r,a){var o=r.getUTCFullYear();return Te(o,a.length)},Q:function(r,a,o){var u=Math.ceil((r.getUTCMonth()+1)/3);switch(a){case"Q":return String(u);case"QQ":return Te(u,2);case"Qo":return o.ordinalNumber(u,{unit:"quarter"});case"QQQ":return o.quarter(u,{width:"abbreviated",context:"formatting"});case"QQQQQ":return o.quarter(u,{width:"narrow",context:"formatting"});case"QQQQ":default:return o.quarter(u,{width:"wide",context:"formatting"})}},q:function(r,a,o){var u=Math.ceil((r.getUTCMonth()+1)/3);switch(a){case"q":return String(u);case"qq":return Te(u,2);case"qo":return o.ordinalNumber(u,{unit:"quarter"});case"qqq":return o.quarter(u,{width:"abbreviated",context:"standalone"});case"qqqqq":return o.quarter(u,{width:"narrow",context:"standalone"});case"qqqq":default:return o.quarter(u,{width:"wide",context:"standalone"})}},M:function(r,a,o){var u=r.getUTCMonth();switch(a){case"M":case"MM":return Vi.M(r,a);case"Mo":return o.ordinalNumber(u+1,{unit:"month"});case"MMM":return o.month(u,{width:"abbreviated",context:"formatting"});case"MMMMM":return o.month(u,{width:"narrow",context:"formatting"});case"MMMM":default:return o.month(u,{width:"wide",context:"formatting"})}},L:function(r,a,o){var u=r.getUTCMonth();switch(a){case"L":return String(u+1);case"LL":return Te(u+1,2);case"Lo":return o.ordinalNumber(u+1,{unit:"month"});case"LLL":return o.month(u,{width:"abbreviated",context:"standalone"});case"LLLLL":return o.month(u,{width:"narrow",context:"standalone"});case"LLLL":default:return o.month(u,{width:"wide",context:"standalone"})}},w:function(r,a,o,u){var d=wU(r,u);return a==="wo"?o.ordinalNumber(d,{unit:"week"}):Te(d,a.length)},I:function(r,a,o){var u=yU(r);return a==="Io"?o.ordinalNumber(u,{unit:"week"}):Te(u,a.length)},d:function(r,a,o){return a==="do"?o.ordinalNumber(r.getUTCDate(),{unit:"date"}):Vi.d(r,a)},D:function(r,a,o){var u=gU(r);return a==="Do"?o.ordinalNumber(u,{unit:"dayOfYear"}):Te(u,a.length)},E:function(r,a,o){var u=r.getUTCDay();switch(a){case"E":case"EE":case"EEE":return o.day(u,{width:"abbreviated",context:"formatting"});case"EEEEE":return o.day(u,{width:"narrow",context:"formatting"});case"EEEEEE":return o.day(u,{width:"short",context:"formatting"});case"EEEE":default:return o.day(u,{width:"wide",context:"formatting"})}},e:function(r,a,o,u){var d=r.getUTCDay(),h=(d-u.weekStartsOn+8)%7||7;switch(a){case"e":return String(h);case"ee":return Te(h,2);case"eo":return o.ordinalNumber(h,{unit:"day"});case"eee":return o.day(d,{width:"abbreviated",context:"formatting"});case"eeeee":return o.day(d,{width:"narrow",context:"formatting"});case"eeeeee":return o.day(d,{width:"short",context:"formatting"});case"eeee":default:return o.day(d,{width:"wide",context:"formatting"})}},c:function(r,a,o,u){var d=r.getUTCDay(),h=(d-u.weekStartsOn+8)%7||7;switch(a){case"c":return String(h);case"cc":return Te(h,a.length);case"co":return o.ordinalNumber(h,{unit:"day"});case"ccc":return o.day(d,{width:"abbreviated",context:"standalone"});case"ccccc":return o.day(d,{width:"narrow",context:"standalone"});case"cccccc":return o.day(d,{width:"short",context:"standalone"});case"cccc":default:return o.day(d,{width:"wide",context:"standalone"})}},i:function(r,a,o){var u=r.getUTCDay(),d=u===0?7:u;switch(a){case"i":return String(d);case"ii":return Te(d,a.length);case"io":return o.ordinalNumber(d,{unit:"day"});case"iii":return o.day(u,{width:"abbreviated",context:"formatting"});case"iiiii":return o.day(u,{width:"narrow",context:"formatting"});case"iiiiii":return o.day(u,{width:"short",context:"formatting"});case"iiii":default:return o.day(u,{width:"wide",context:"formatting"})}},a:function(r,a,o){var u=r.getUTCHours(),d=u/12>=1?"pm":"am";switch(a){case"a":case"aa":return o.dayPeriod(d,{width:"abbreviated",context:"formatting"});case"aaa":return o.dayPeriod(d,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return o.dayPeriod(d,{width:"narrow",context:"formatting"});case"aaaa":default:return o.dayPeriod(d,{width:"wide",context:"formatting"})}},b:function(r,a,o){var u=r.getUTCHours(),d;switch(u===12?d=Sa.noon:u===0?d=Sa.midnight:d=u/12>=1?"pm":"am",a){case"b":case"bb":return o.dayPeriod(d,{width:"abbreviated",context:"formatting"});case"bbb":return o.dayPeriod(d,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return o.dayPeriod(d,{width:"narrow",context:"formatting"});case"bbbb":default:return o.dayPeriod(d,{width:"wide",context:"formatting"})}},B:function(r,a,o){var u=r.getUTCHours(),d;switch(u>=17?d=Sa.evening:u>=12?d=Sa.afternoon:u>=4?d=Sa.morning:d=Sa.night,a){case"B":case"BB":case"BBB":return o.dayPeriod(d,{width:"abbreviated",context:"formatting"});case"BBBBB":return o.dayPeriod(d,{width:"narrow",context:"formatting"});case"BBBB":default:return o.dayPeriod(d,{width:"wide",context:"formatting"})}},h:function(r,a,o){if(a==="ho"){var u=r.getUTCHours()%12;return u===0&&(u=12),o.ordinalNumber(u,{unit:"hour"})}return Vi.h(r,a)},H:function(r,a,o){return a==="Ho"?o.ordinalNumber(r.getUTCHours(),{unit:"hour"}):Vi.H(r,a)},K:function(r,a,o){var u=r.getUTCHours()%12;return a==="Ko"?o.ordinalNumber(u,{unit:"hour"}):Te(u,a.length)},k:function(r,a,o){var u=r.getUTCHours();return u===0&&(u=24),a==="ko"?o.ordinalNumber(u,{unit:"hour"}):Te(u,a.length)},m:function(r,a,o){return a==="mo"?o.ordinalNumber(r.getUTCMinutes(),{unit:"minute"}):Vi.m(r,a)},s:function(r,a,o){return a==="so"?o.ordinalNumber(r.getUTCSeconds(),{unit:"second"}):Vi.s(r,a)},S:function(r,a){return Vi.S(r,a)},X:function(r,a,o,u){var d=u._originalDate||r,h=d.getTimezoneOffset();if(h===0)return"Z";switch(a){case"X":return xv(h);case"XXXX":case"XX":return Nn(h);case"XXXXX":case"XXX":default:return Nn(h,":")}},x:function(r,a,o,u){var d=u._originalDate||r,h=d.getTimezoneOffset();switch(a){case"x":return xv(h);case"xxxx":case"xx":return Nn(h);case"xxxxx":case"xxx":default:return Nn(h,":")}},O:function(r,a,o,u){var d=u._originalDate||r,h=d.getTimezoneOffset();switch(a){case"O":case"OO":case"OOO":return"GMT"+wv(h,":");case"OOOO":default:return"GMT"+Nn(h,":")}},z:function(r,a,o,u){var d=u._originalDate||r,h=d.getTimezoneOffset();switch(a){case"z":case"zz":case"zzz":return"GMT"+wv(h,":");case"zzzz":default:return"GMT"+Nn(h,":")}},t:function(r,a,o,u){var d=u._originalDate||r,h=Math.floor(d.getTime()/1e3);return Te(h,a.length)},T:function(r,a,o,u){var d=u._originalDate||r,h=d.getTime();return Te(h,a.length)}};function wv(t,r){var a=t>0?"-":"+",o=Math.abs(t),u=Math.floor(o/60),d=o%60;if(d===0)return a+String(u);var h=r||"";return a+String(u)+h+Te(d,2)}function xv(t,r){if(t%60===0){var a=t>0?"-":"+";return a+Te(Math.abs(t)/60,2)}return Nn(t,r)}function Nn(t,r){var a=r||"",o=t>0?"-":"+",u=Math.abs(t),d=Te(Math.floor(u/60),2),h=Te(u%60,2);return o+d+a+h}const UU=EU;var Ev=function(r,a){switch(r){case"P":return a.date({width:"short"});case"PP":return a.date({width:"medium"});case"PPP":return a.date({width:"long"});case"PPPP":default:return a.date({width:"full"})}},Nb=function(r,a){switch(r){case"p":return a.time({width:"short"});case"pp":return a.time({width:"medium"});case"ppp":return a.time({width:"long"});case"pppp":default:return a.time({width:"full"})}},CU=function(r,a){var o=r.match(/(P+)(p+)?/)||[],u=o[1],d=o[2];if(!d)return Ev(r,a);var h;switch(u){case"P":h=a.dateTime({width:"short"});break;case"PP":h=a.dateTime({width:"medium"});break;case"PPP":h=a.dateTime({width:"long"});break;case"PPPP":default:h=a.dateTime({width:"full"});break}return h.replace("{{date}}",Ev(u,a)).replace("{{time}}",Nb(d,a))},AU={p:Nb,P:CU};const TU=AU;var PU=["D","DD"],IU=["YY","YYYY"];function BU(t){return PU.indexOf(t)!==-1}function kU(t){return IU.indexOf(t)!==-1}function Uv(t,r,a){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(r,"`) for formatting years to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(r,"`) for formatting years to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(r,"`) for formatting days of the month to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(r,"`) for formatting days of the month to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var DU={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},LU=function(r,a,o){var u,d=DU[r];return typeof d=="string"?u=d:a===1?u=d.one:u=d.other.replace("{{count}}",a.toString()),o!=null&&o.addSuffix?o.comparison&&o.comparison>0?"in "+u:u+" ago":u};const zU=LU;function tf(t){return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=r.width?String(r.width):t.defaultWidth,o=t.formats[a]||t.formats[t.defaultWidth];return o}}var RU={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},FU={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},MU={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},OU={date:tf({formats:RU,defaultWidth:"full"}),time:tf({formats:FU,defaultWidth:"full"}),dateTime:tf({formats:MU,defaultWidth:"full"})};const NU=OU;var HU={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},GU=function(r,a,o,u){return HU[r]};const $U=GU;function Oo(t){return function(r,a){var o=a!=null&&a.context?String(a.context):"standalone",u;if(o==="formatting"&&t.formattingValues){var d=t.defaultFormattingWidth||t.defaultWidth,h=a!=null&&a.width?String(a.width):d;u=t.formattingValues[h]||t.formattingValues[d]}else{var l=t.defaultWidth,g=a!=null&&a.width?String(a.width):t.defaultWidth;u=t.values[g]||t.values[l]}var y=t.argumentCallback?t.argumentCallback(r):r;return u[y]}}var jU={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},VU={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},WU={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},YU={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},qU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},KU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},XU=function(r,a){var o=Number(r),u=o%100;if(u>20||u<10)switch(u%10){case 1:return o+"st";case 2:return o+"nd";case 3:return o+"rd"}return o+"th"},QU={ordinalNumber:XU,era:Oo({values:jU,defaultWidth:"wide"}),quarter:Oo({values:VU,defaultWidth:"wide",argumentCallback:function(r){return r-1}}),month:Oo({values:WU,defaultWidth:"wide"}),day:Oo({values:YU,defaultWidth:"wide"}),dayPeriod:Oo({values:qU,defaultWidth:"wide",formattingValues:KU,defaultFormattingWidth:"wide"})};const ZU=QU;function No(t){return function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.width,u=o&&t.matchPatterns[o]||t.matchPatterns[t.defaultMatchWidth],d=r.match(u);if(!d)return null;var h=d[0],l=o&&t.parsePatterns[o]||t.parsePatterns[t.defaultParseWidth],g=Array.isArray(l)?eC(l,function(b){return b.test(h)}):JU(l,function(b){return b.test(h)}),y;y=t.valueCallback?t.valueCallback(g):g,y=a.valueCallback?a.valueCallback(y):y;var v=r.slice(h.length);return{value:y,rest:v}}}function JU(t,r){for(var a in t)if(t.hasOwnProperty(a)&&r(t[a]))return a}function eC(t,r){for(var a=0;a<t.length;a++)if(r(t[a]))return a}function tC(t){return function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=r.match(t.matchPattern);if(!o)return null;var u=o[0],d=r.match(t.parsePattern);if(!d)return null;var h=t.valueCallback?t.valueCallback(d[0]):d[0];h=a.valueCallback?a.valueCallback(h):h;var l=r.slice(u.length);return{value:h,rest:l}}}var rC=/^(\d+)(th|st|nd|rd)?/i,iC=/\d+/i,nC={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},aC={any:[/^b/i,/^(a|c)/i]},oC={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},sC={any:[/1/i,/2/i,/3/i,/4/i]},lC={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},uC={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},cC={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},dC={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},fC={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},hC={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},pC={ordinalNumber:tC({matchPattern:rC,parsePattern:iC,valueCallback:function(r){return parseInt(r,10)}}),era:No({matchPatterns:nC,defaultMatchWidth:"wide",parsePatterns:aC,defaultParseWidth:"any"}),quarter:No({matchPatterns:oC,defaultMatchWidth:"wide",parsePatterns:sC,defaultParseWidth:"any",valueCallback:function(r){return r+1}}),month:No({matchPatterns:lC,defaultMatchWidth:"wide",parsePatterns:uC,defaultParseWidth:"any"}),day:No({matchPatterns:cC,defaultMatchWidth:"wide",parsePatterns:dC,defaultParseWidth:"any"}),dayPeriod:No({matchPatterns:fC,defaultMatchWidth:"any",parsePatterns:hC,defaultParseWidth:"any"})};const mC=pC;var gC={code:"en-US",formatDistance:zU,formatLong:NU,formatRelative:$U,localize:ZU,match:mC,options:{weekStartsOn:0,firstWeekContainsDate:1}};const vC=gC;var _C=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,yC=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,bC=/^'([^]*?)'?$/,SC=/''/g,wC=/[a-zA-Z]/;function xC(t,r,a){var o,u,d,h,l,g,y,v,b,e,n,s,c,f,m,p,_,S;Wt(2,arguments);var x=String(r),w=Fc(),U=(o=(u=a==null?void 0:a.locale)!==null&&u!==void 0?u:w.locale)!==null&&o!==void 0?o:vC,A=la((d=(h=(l=(g=a==null?void 0:a.firstWeekContainsDate)!==null&&g!==void 0?g:a==null||(y=a.locale)===null||y===void 0||(v=y.options)===null||v===void 0?void 0:v.firstWeekContainsDate)!==null&&l!==void 0?l:w.firstWeekContainsDate)!==null&&h!==void 0?h:(b=w.locale)===null||b===void 0||(e=b.options)===null||e===void 0?void 0:e.firstWeekContainsDate)!==null&&d!==void 0?d:1);if(!(A>=1&&A<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var E=la((n=(s=(c=(f=a==null?void 0:a.weekStartsOn)!==null&&f!==void 0?f:a==null||(m=a.locale)===null||m===void 0||(p=m.options)===null||p===void 0?void 0:p.weekStartsOn)!==null&&c!==void 0?c:w.weekStartsOn)!==null&&s!==void 0?s:(_=w.locale)===null||_===void 0||(S=_.options)===null||S===void 0?void 0:S.weekStartsOn)!==null&&n!==void 0?n:0);if(!(E>=0&&E<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!U.localize)throw new RangeError("locale must contain localize property");if(!U.formatLong)throw new RangeError("locale must contain formatLong property");var T=li(t);if(!hU(T))throw new RangeError("Invalid time value");var P=dU(T),z=pU(T,P),R={firstWeekContainsDate:A,weekStartsOn:E,locale:U,_originalDate:T},D=x.match(yC).map(function(B){var F=B[0];if(F==="p"||F==="P"){var M=TU[F];return M(B,U.formatLong)}return B}).join("").match(_C).map(function(B){if(B==="''")return"'";var F=B[0];if(F==="'")return EC(B);var M=UU[F];if(M)return!(a!=null&&a.useAdditionalWeekYearTokens)&&kU(B)&&Uv(B,r,String(t)),!(a!=null&&a.useAdditionalDayOfYearTokens)&&BU(B)&&Uv(B,r,String(t)),M(z,B,U.localize,R);if(F.match(wC))throw new RangeError("Format string contains an unescaped latin alphabet character `"+F+"`");return B}).join("");return D}function EC(t){var r=t.match(bC);return r?r[1].replace(SC,"'"):t}function Uh(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,o=new Array(r);a<r;a++)o[a]=t[a];return o}function dm(t,r){if(t){if(typeof t=="string")return Uh(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Uh(t,r)}}function Ch(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ah(t,r){return Ah=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,u){return o.__proto__=u,o},Ah(t,r)}function fm(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&Ah(t,r)}function ec(t){return ec=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},ec(t)}function UC(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function CC(t,r){if(r&&(nt(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ch(t)}function hm(t){var r=UC();return function(){var o=ec(t),u;if(r){var d=ec(this).constructor;u=Reflect.construct(o,arguments,d)}else u=o.apply(this,arguments);return CC(this,u)}}function pa(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function AC(t,r){if(nt(t)!=="object"||t===null)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var o=a.call(t,r||"default");if(nt(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Hb(t){var r=AC(t,"string");return nt(r)==="symbol"?r:String(r)}function Cv(t,r){for(var a=0;a<r.length;a++){var o=r[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,Hb(o.key),o)}}function ma(t,r,a){return r&&Cv(t.prototype,r),a&&Cv(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function le(t,r,a){return r=Hb(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var Gb={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var r={}.hasOwnProperty;function a(){for(var o=[],u=0;u<arguments.length;u++){var d=arguments[u];if(d){var h=typeof d;if(h==="string"||h==="number")o.push(d);else if(Array.isArray(d)){if(d.length){var l=a.apply(null,d);l&&o.push(l)}}else if(h==="object"){if(d.toString!==Object.prototype.toString&&!d.toString.toString().includes("[native code]")){o.push(d.toString());continue}for(var g in d)r.call(d,g)&&d[g]&&o.push(g)}}}return o.join(" ")}t.exports?(a.default=a,t.exports=a):window.classNames=a})()})(Gb);var TC=Gb.exports;const ht=Ys(TC);function si(){return si=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])}return t},si.apply(this,arguments)}var $b={exports:{}},Ie={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bt=typeof Symbol=="function"&&Symbol.for,pm=bt?Symbol.for("react.element"):60103,mm=bt?Symbol.for("react.portal"):60106,Mc=bt?Symbol.for("react.fragment"):60107,Oc=bt?Symbol.for("react.strict_mode"):60108,Nc=bt?Symbol.for("react.profiler"):60114,Hc=bt?Symbol.for("react.provider"):60109,Gc=bt?Symbol.for("react.context"):60110,gm=bt?Symbol.for("react.async_mode"):60111,$c=bt?Symbol.for("react.concurrent_mode"):60111,jc=bt?Symbol.for("react.forward_ref"):60112,Vc=bt?Symbol.for("react.suspense"):60113,PC=bt?Symbol.for("react.suspense_list"):60120,Wc=bt?Symbol.for("react.memo"):60115,Yc=bt?Symbol.for("react.lazy"):60116,IC=bt?Symbol.for("react.block"):60121,BC=bt?Symbol.for("react.fundamental"):60117,kC=bt?Symbol.for("react.responder"):60118,DC=bt?Symbol.for("react.scope"):60119;function gr(t){if(typeof t=="object"&&t!==null){var r=t.$$typeof;switch(r){case pm:switch(t=t.type,t){case gm:case $c:case Mc:case Nc:case Oc:case Vc:return t;default:switch(t=t&&t.$$typeof,t){case Gc:case jc:case Yc:case Wc:case Hc:return t;default:return r}}case mm:return r}}}function jb(t){return gr(t)===$c}Ie.AsyncMode=gm;Ie.ConcurrentMode=$c;Ie.ContextConsumer=Gc;Ie.ContextProvider=Hc;Ie.Element=pm;Ie.ForwardRef=jc;Ie.Fragment=Mc;Ie.Lazy=Yc;Ie.Memo=Wc;Ie.Portal=mm;Ie.Profiler=Nc;Ie.StrictMode=Oc;Ie.Suspense=Vc;Ie.isAsyncMode=function(t){return jb(t)||gr(t)===gm};Ie.isConcurrentMode=jb;Ie.isContextConsumer=function(t){return gr(t)===Gc};Ie.isContextProvider=function(t){return gr(t)===Hc};Ie.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===pm};Ie.isForwardRef=function(t){return gr(t)===jc};Ie.isFragment=function(t){return gr(t)===Mc};Ie.isLazy=function(t){return gr(t)===Yc};Ie.isMemo=function(t){return gr(t)===Wc};Ie.isPortal=function(t){return gr(t)===mm};Ie.isProfiler=function(t){return gr(t)===Nc};Ie.isStrictMode=function(t){return gr(t)===Oc};Ie.isSuspense=function(t){return gr(t)===Vc};Ie.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Mc||t===$c||t===Nc||t===Oc||t===Vc||t===PC||typeof t=="object"&&t!==null&&(t.$$typeof===Yc||t.$$typeof===Wc||t.$$typeof===Hc||t.$$typeof===Gc||t.$$typeof===jc||t.$$typeof===BC||t.$$typeof===kC||t.$$typeof===DC||t.$$typeof===IC)};Ie.typeOf=gr;$b.exports=Ie;var vm=$b.exports;function Th(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=[];return ue.Children.forEach(t,function(o){o==null&&!r.keepEmpty||(Array.isArray(o)?a=a.concat(Th(o)):vm.isFragment(o)&&o.props?a=a.concat(Th(o.props.children,r)):a.push(o))}),a}var Ph={},LC=function(r){};function zC(t,r){}function RC(t,r){}function FC(){Ph={}}function Vb(t,r,a){!r&&!Ph[a]&&(t(!1,a),Ph[a]=!0)}function qc(t,r){Vb(zC,t,r)}function MC(t,r){Vb(RC,t,r)}qc.preMessage=LC;qc.resetWarned=FC;qc.noteOnce=MC;function Av(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);r&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),a.push.apply(a,o)}return a}function Y(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Av(Object(a),!0).forEach(function(o){le(t,o,a[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Av(Object(a)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(a,o))})}return t}function _m(t,r,a){var o=C.useRef({});return(!("value"in o.current)||a(o.current.condition,r))&&(o.current.value=t(),o.current.condition=r),o.current.value}function ym(t,r){typeof t=="function"?t(r):nt(t)==="object"&&t&&"current"in t&&(t.current=r)}function Kc(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var o=r.filter(function(u){return u});return o.length<=1?o[0]:function(u){r.forEach(function(d){ym(d,u)})}}function Wb(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return _m(function(){return Kc.apply(void 0,r)},r,function(o,u){return o.length!==u.length||o.every(function(d,h){return d!==u[h]})})}function Xc(t){var r,a,o=vm.isMemo(t)?t.type.type:t.type;return!(typeof o=="function"&&!((r=o.prototype)!==null&&r!==void 0&&r.render)||typeof t=="function"&&!((a=t.prototype)!==null&&a!==void 0&&a.render))}function tc(t){return t instanceof HTMLElement||t instanceof SVGElement}function Ih(t){return tc(t)?t:t instanceof ue.Component?Fb.findDOMNode(t):null}var Yb=function(){if(typeof Map<"u")return Map;function t(r,a){var o=-1;return r.some(function(u,d){return u[0]===a?(o=d,!0):!1}),o}return function(){function r(){this.__entries__=[]}return Object.defineProperty(r.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),r.prototype.get=function(a){var o=t(this.__entries__,a),u=this.__entries__[o];return u&&u[1]},r.prototype.set=function(a,o){var u=t(this.__entries__,a);~u?this.__entries__[u][1]=o:this.__entries__.push([a,o])},r.prototype.delete=function(a){var o=this.__entries__,u=t(o,a);~u&&o.splice(u,1)},r.prototype.has=function(a){return!!~t(this.__entries__,a)},r.prototype.clear=function(){this.__entries__.splice(0)},r.prototype.forEach=function(a,o){o===void 0&&(o=null);for(var u=0,d=this.__entries__;u<d.length;u++){var h=d[u];a.call(o,h[1],h[0])}},r}()}(),Bh=typeof window<"u"&&typeof document<"u"&&window.document===document,rc=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),OC=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(rc):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),NC=2;function HC(t,r){var a=!1,o=!1,u=0;function d(){a&&(a=!1,t()),o&&l()}function h(){OC(d)}function l(){var g=Date.now();if(a){if(g-u<NC)return;o=!0}else a=!0,o=!1,setTimeout(h,r);u=g}return l}var GC=20,$C=["top","right","bottom","left","width","height","size","weight"],jC=typeof MutationObserver<"u",VC=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=HC(this.refresh.bind(this),GC)}return t.prototype.addObserver=function(r){~this.observers_.indexOf(r)||this.observers_.push(r),this.connected_||this.connect_()},t.prototype.removeObserver=function(r){var a=this.observers_,o=a.indexOf(r);~o&&a.splice(o,1),!a.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var r=this.updateObservers_();r&&this.refresh()},t.prototype.updateObservers_=function(){var r=this.observers_.filter(function(a){return a.gatherActive(),a.hasActive()});return r.forEach(function(a){return a.broadcastActive()}),r.length>0},t.prototype.connect_=function(){!Bh||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),jC?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!Bh||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(r){var a=r.propertyName,o=a===void 0?"":a,u=$C.some(function(d){return!!~o.indexOf(d)});u&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),qb=function(t,r){for(var a=0,o=Object.keys(r);a<o.length;a++){var u=o[a];Object.defineProperty(t,u,{value:r[u],enumerable:!1,writable:!1,configurable:!0})}return t},vo=function(t){var r=t&&t.ownerDocument&&t.ownerDocument.defaultView;return r||rc},Kb=Qc(0,0,0,0);function ic(t){return parseFloat(t)||0}function Tv(t){for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];return r.reduce(function(o,u){var d=t["border-"+u+"-width"];return o+ic(d)},0)}function WC(t){for(var r=["top","right","bottom","left"],a={},o=0,u=r;o<u.length;o++){var d=u[o],h=t["padding-"+d];a[d]=ic(h)}return a}function YC(t){var r=t.getBBox();return Qc(0,0,r.width,r.height)}function qC(t){var r=t.clientWidth,a=t.clientHeight;if(!r&&!a)return Kb;var o=vo(t).getComputedStyle(t),u=WC(o),d=u.left+u.right,h=u.top+u.bottom,l=ic(o.width),g=ic(o.height);if(o.boxSizing==="border-box"&&(Math.round(l+d)!==r&&(l-=Tv(o,"left","right")+d),Math.round(g+h)!==a&&(g-=Tv(o,"top","bottom")+h)),!XC(t)){var y=Math.round(l+d)-r,v=Math.round(g+h)-a;Math.abs(y)!==1&&(l-=y),Math.abs(v)!==1&&(g-=v)}return Qc(u.left,u.top,l,g)}var KC=function(){return typeof SVGGraphicsElement<"u"?function(t){return t instanceof vo(t).SVGGraphicsElement}:function(t){return t instanceof vo(t).SVGElement&&typeof t.getBBox=="function"}}();function XC(t){return t===vo(t).document.documentElement}function QC(t){return Bh?KC(t)?YC(t):qC(t):Kb}function ZC(t){var r=t.x,a=t.y,o=t.width,u=t.height,d=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,h=Object.create(d.prototype);return qb(h,{x:r,y:a,width:o,height:u,top:a,right:r+o,bottom:u+a,left:r}),h}function Qc(t,r,a,o){return{x:t,y:r,width:a,height:o}}var JC=function(){function t(r){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Qc(0,0,0,0),this.target=r}return t.prototype.isActive=function(){var r=QC(this.target);return this.contentRect_=r,r.width!==this.broadcastWidth||r.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var r=this.contentRect_;return this.broadcastWidth=r.width,this.broadcastHeight=r.height,r},t}(),e2=function(){function t(r,a){var o=ZC(a);qb(this,{target:r,contentRect:o})}return t}(),t2=function(){function t(r,a,o){if(this.activeObservations_=[],this.observations_=new Yb,typeof r!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=r,this.controller_=a,this.callbackCtx_=o}return t.prototype.observe=function(r){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(r instanceof vo(r).Element))throw new TypeError('parameter 1 is not of type "Element".');var a=this.observations_;a.has(r)||(a.set(r,new JC(r)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(r){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(r instanceof vo(r).Element))throw new TypeError('parameter 1 is not of type "Element".');var a=this.observations_;a.has(r)&&(a.delete(r),a.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var r=this;this.clearActive(),this.observations_.forEach(function(a){a.isActive()&&r.activeObservations_.push(a)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var r=this.callbackCtx_,a=this.activeObservations_.map(function(o){return new e2(o.target,o.broadcastRect())});this.callback_.call(r,a,r),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),Xb=typeof WeakMap<"u"?new WeakMap:new Yb,Qb=function(){function t(r){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var a=VC.getInstance(),o=new t2(r,a,this);Xb.set(this,o)}return t}();["observe","unobserve","disconnect"].forEach(function(t){Qb.prototype[t]=function(){var r;return(r=Xb.get(this))[t].apply(r,arguments)}});var r2=function(){return typeof rc.ResizeObserver<"u"?rc.ResizeObserver:Qb}(),on=new Map;function i2(t){t.forEach(function(r){var a,o=r.target;(a=on.get(o))===null||a===void 0||a.forEach(function(u){return u(o)})})}var Zb=new r2(i2);function n2(t,r){on.has(t)||(on.set(t,new Set),Zb.observe(t)),on.get(t).add(r)}function a2(t,r){on.has(t)&&(on.get(t).delete(r),on.get(t).size||(Zb.unobserve(t),on.delete(t)))}var o2=function(t){fm(a,t);var r=hm(a);function a(){return pa(this,a),r.apply(this,arguments)}return ma(a,[{key:"render",value:function(){return this.props.children}}]),a}(C.Component),kh=C.createContext(null);function s2(t){var r=t.children,a=t.onBatchResize,o=C.useRef(0),u=C.useRef([]),d=C.useContext(kh),h=C.useCallback(function(l,g,y){o.current+=1;var v=o.current;u.current.push({size:l,element:g,data:y}),Promise.resolve().then(function(){v===o.current&&(a==null||a(u.current),u.current=[])}),d==null||d(l,g,y)},[a,d]);return C.createElement(kh.Provider,{value:h},r)}function l2(t,r){var a=t.children,o=t.disabled,u=C.useRef(null),d=C.useRef(null),h=C.useContext(kh),l=typeof a=="function",g=l?a(u):a,y=C.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),v=!l&&C.isValidElement(g)&&Xc(g),b=v?g.ref:null,e=C.useMemo(function(){return Kc(b,u)},[b,u]),n=function(){return Ih(u.current)||Ih(d.current)};C.useImperativeHandle(r,function(){return n()});var s=C.useRef(t);s.current=t;var c=C.useCallback(function(f){var m=s.current,p=m.onResize,_=m.data,S=f.getBoundingClientRect(),x=S.width,w=S.height,U=f.offsetWidth,A=f.offsetHeight,E=Math.floor(x),T=Math.floor(w);if(y.current.width!==E||y.current.height!==T||y.current.offsetWidth!==U||y.current.offsetHeight!==A){var P={width:E,height:T,offsetWidth:U,offsetHeight:A};y.current=P;var z=U===Math.round(x)?x:U,R=A===Math.round(w)?w:A,D=Y(Y({},P),{},{offsetWidth:z,offsetHeight:R});h==null||h(D,f,_),p&&Promise.resolve().then(function(){p(D,f)})}},[]);return C.useEffect(function(){var f=n();return f&&!o&&n2(f,c),function(){return a2(f,c)}},[u.current,o]),C.createElement(o2,{ref:d},v?C.cloneElement(g,{ref:e}):g)}var u2=C.forwardRef(l2),c2="rc-observer-key";function d2(t,r){var a=t.children,o=typeof a=="function"?[a]:Th(a);return o.map(function(u,d){var h=(u==null?void 0:u.key)||"".concat(c2,"-").concat(d);return C.createElement(u2,si({},t,{key:h,ref:d===0?r:void 0}),u)})}var bm=C.forwardRef(d2);bm.Collection=s2;function f2(t){if(Array.isArray(t))return Uh(t)}function Jb(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function h2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function st(t){return f2(t)||Jb(t)||dm(t)||h2()}var eS=function(r){return+setTimeout(r,16)},tS=function(r){return clearTimeout(r)};typeof window<"u"&&"requestAnimationFrame"in window&&(eS=function(r){return window.requestAnimationFrame(r)},tS=function(r){return window.cancelAnimationFrame(r)});var Pv=0,Sm=new Map;function rS(t){Sm.delete(t)}var ua=function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;Pv+=1;var o=Pv;function u(d){if(d===0)rS(o),r();else{var h=eS(function(){u(d-1)});Sm.set(o,h)}}return u(a),o};ua.cancel=function(t){var r=Sm.get(t);return rS(r),tS(r)};function wm(t){for(var r=0,a,o=0,u=t.length;u>=4;++o,u-=4)a=t.charCodeAt(o)&255|(t.charCodeAt(++o)&255)<<8|(t.charCodeAt(++o)&255)<<16|(t.charCodeAt(++o)&255)<<24,a=(a&65535)*1540483477+((a>>>16)*59797<<16),a^=a>>>24,r=(a&65535)*1540483477+((a>>>16)*59797<<16)^(r&65535)*1540483477+((r>>>16)*59797<<16);switch(u){case 3:r^=(t.charCodeAt(o+2)&255)<<16;case 2:r^=(t.charCodeAt(o+1)&255)<<8;case 1:r^=t.charCodeAt(o)&255,r=(r&65535)*1540483477+((r>>>16)*59797<<16)}return r^=r>>>13,r=(r&65535)*1540483477+((r>>>16)*59797<<16),((r^r>>>15)>>>0).toString(36)}function p2(t,r){if(t==null)return{};var a={},o=Object.keys(t),u,d;for(d=0;d<o.length;d++)u=o[d],!(r.indexOf(u)>=0)&&(a[u]=t[u]);return a}function ca(t,r){if(t==null)return{};var a=p2(t,r),o,u;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(t);for(u=0;u<d.length;u++)o=d[u],!(r.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(a[o]=t[o])}return a}function iS(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=new Set;function u(d,h){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,g=o.has(d);if(qc(!g,"Warning: There may be circular references"),g)return!1;if(d===h)return!0;if(a&&l>1)return!1;o.add(d);var y=l+1;if(Array.isArray(d)){if(!Array.isArray(h)||d.length!==h.length)return!1;for(var v=0;v<d.length;v++)if(!u(d[v],h[v],y))return!1;return!0}if(d&&h&&nt(d)==="object"&&nt(h)==="object"){var b=Object.keys(d);return b.length!==Object.keys(h).length?!1:b.every(function(e){return u(d[e],h[e],y)})}return!1}return u(t,r)}var Iv="%",m2=function(){function t(r){pa(this,t),le(this,"instanceId",void 0),le(this,"cache",new Map),this.instanceId=r}return ma(t,[{key:"get",value:function(a){return this.cache.get(a.join(Iv))||null}},{key:"update",value:function(a,o){var u=a.join(Iv),d=this.cache.get(u),h=o(d);h===null?this.cache.delete(u):this.cache.set(u,h)}}]),t}(),Dh="data-token-hash",ea="data-css-hash",Ga="__cssinjs_instance__";function g2(){var t=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){var r=document.body.querySelectorAll("style[".concat(ea,"]"))||[],a=document.head.firstChild;Array.from(r).forEach(function(u){u[Ga]=u[Ga]||t,u[Ga]===t&&document.head.insertBefore(u,a)});var o={};Array.from(document.querySelectorAll("style[".concat(ea,"]"))).forEach(function(u){var d=u.getAttribute(ea);if(o[d]){if(u[Ga]===t){var h;(h=u.parentNode)===null||h===void 0||h.removeChild(u)}}else o[d]=!0})}return new m2(t)}var v2=C.createContext({hashPriority:"low",cache:g2(),defaultCache:!0});const xm=v2;function rr(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function _2(t,r){if(!t)return!1;if(t.contains)return t.contains(r);for(var a=r;a;){if(a===t)return!0;a=a.parentNode}return!1}var Bv="data-rc-order",kv="data-rc-priority",y2="rc-util-key",Lh=new Map;function nS(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.mark;return r?r.startsWith("data-")?r:"data-".concat(r):y2}function Zc(t){if(t.attachTo)return t.attachTo;var r=document.querySelector("head");return r||document.body}function b2(t){return t==="queue"?"prependQueue":t?"prepend":"append"}function aS(t){return Array.from((Lh.get(t)||t).children).filter(function(r){return r.tagName==="STYLE"})}function oS(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!rr())return null;var a=r.csp,o=r.prepend,u=r.priority,d=u===void 0?0:u,h=b2(o),l=h==="prependQueue",g=document.createElement("style");g.setAttribute(Bv,h),l&&d&&g.setAttribute(kv,"".concat(d)),a!=null&&a.nonce&&(g.nonce=a==null?void 0:a.nonce),g.innerHTML=t;var y=Zc(r),v=y.firstChild;if(o){if(l){var b=aS(y).filter(function(e){if(!["prepend","prependQueue"].includes(e.getAttribute(Bv)))return!1;var n=Number(e.getAttribute(kv)||0);return d>=n});if(b.length)return y.insertBefore(g,b[b.length-1].nextSibling),g}y.insertBefore(g,v)}else y.appendChild(g);return g}function sS(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=Zc(r);return aS(a).find(function(o){return o.getAttribute(nS(r))===t})}function nc(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=sS(t,r);if(a){var o=Zc(r);o.removeChild(a)}}function S2(t,r){var a=Lh.get(t);if(!a||!_2(document,a)){var o=oS("",r),u=o.parentNode;Lh.set(t,u),t.removeChild(o)}}function Rs(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=Zc(a);S2(o,a);var u=sS(r,a);if(u){var d,h;if((d=a.csp)!==null&&d!==void 0&&d.nonce&&u.nonce!==((h=a.csp)===null||h===void 0?void 0:h.nonce)){var l;u.nonce=(l=a.csp)===null||l===void 0?void 0:l.nonce}return u.innerHTML!==t&&(u.innerHTML=t),u}var g=oS(t,a);return g.setAttribute(nS(a),r),g}function lS(t){if(Array.isArray(t))return t}function w2(t,r){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var o,u,d,h,l=[],g=!0,y=!1;try{if(d=(a=a.call(t)).next,r===0){if(Object(a)!==a)return;g=!1}else for(;!(g=(o=d.call(a)).done)&&(l.push(o.value),l.length!==r);g=!0);}catch(v){y=!0,u=v}finally{try{if(!g&&a.return!=null&&(h=a.return(),Object(h)!==h))return}finally{if(y)throw u}}return l}}function uS(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W(t,r){return lS(t)||w2(t,r)||dm(t,r)||uS()}function x2(t,r){if(t.length!==r.length)return!1;for(var a=0;a<t.length;a++)if(t[a]!==r[a])return!1;return!0}var Em=function(){function t(){pa(this,t),le(this,"cache",void 0),le(this,"keys",void 0),le(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return ma(t,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(a){var o,u,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,h={map:this.cache};return a.forEach(function(l){if(!h)h=void 0;else{var g,y;h=(g=h)===null||g===void 0||(y=g.map)===null||y===void 0?void 0:y.get(l)}}),(o=h)!==null&&o!==void 0&&o.value&&d&&(h.value[1]=this.cacheCallTimes++),(u=h)===null||u===void 0?void 0:u.value}},{key:"get",value:function(a){var o;return(o=this.internalGet(a,!0))===null||o===void 0?void 0:o[0]}},{key:"has",value:function(a){return!!this.internalGet(a)}},{key:"set",value:function(a,o){var u=this;if(!this.has(a)){if(this.size()+1>t.MAX_CACHE_SIZE+t.MAX_CACHE_OFFSET){var d=this.keys.reduce(function(y,v){var b=W(y,2),e=b[1];return u.internalGet(v)[1]<e?[v,u.internalGet(v)[1]]:y},[this.keys[0],this.cacheCallTimes]),h=W(d,1),l=h[0];this.delete(l)}this.keys.push(a)}var g=this.cache;a.forEach(function(y,v){if(v===a.length-1)g.set(y,{value:[o,u.cacheCallTimes++]});else{var b=g.get(y);b?b.map||(b.map=new Map):g.set(y,{map:new Map}),g=g.get(y).map}})}},{key:"deleteByPath",value:function(a,o){var u=a.get(o[0]);if(o.length===1){var d;return u.map?a.set(o[0],{map:u.map}):a.delete(o[0]),(d=u.value)===null||d===void 0?void 0:d[0]}var h=this.deleteByPath(u.map,o.slice(1));return(!u.map||u.map.size===0)&&!u.value&&a.delete(o[0]),h}},{key:"delete",value:function(a){if(this.has(a))return this.keys=this.keys.filter(function(o){return!x2(o,a)}),this.deleteByPath(this.cache,a)}}]),t}();le(Em,"MAX_CACHE_SIZE",20);le(Em,"MAX_CACHE_OFFSET",5);var Dv=0,cS=function(){function t(r){pa(this,t),le(this,"derivatives",void 0),le(this,"id",void 0),this.derivatives=Array.isArray(r)?r:[r],this.id=Dv,r.length===0&&(r.length>0,void 0),Dv+=1}return ma(t,[{key:"getDerivativeToken",value:function(a){return this.derivatives.reduce(function(o,u){return u(a,o)},void 0)}}]),t}(),rf=new Em;function zh(t){var r=Array.isArray(t)?t:[t];return rf.has(r)||rf.set(r,new cS(r)),rf.get(r)}var Lv=new WeakMap;function ac(t){var r=Lv.get(t)||"";return r||(Object.keys(t).forEach(function(a){var o=t[a];r+=a,o instanceof cS?r+=o.id:o&&nt(o)==="object"?r+=ac(o):r+=o}),Lv.set(t,r)),r}function E2(t,r){return wm("".concat(r,"_").concat(ac(t)))}var ps="random-".concat(Date.now(),"-").concat(Math.random()).replace(/\./g,""),dS="_bAmBoO_";function U2(t,r,a){if(rr()){var o,u;Rs(t,ps);var d=document.createElement("div");d.style.position="fixed",d.style.left="0",d.style.top="0",r==null||r(d),document.body.appendChild(d);var h=a?a(d):(o=getComputedStyle(d).content)===null||o===void 0?void 0:o.includes(dS);return(u=d.parentNode)===null||u===void 0||u.removeChild(d),nc(ps),h}return!1}var nf=void 0;function C2(){return nf===void 0&&(nf=U2("@layer ".concat(ps," { .").concat(ps,' { content: "').concat(dS,'"!important; } }'),function(t){t.className=ps})),nf}var zv=rr()?C.useLayoutEffect:C.useEffect,Gt=function(r,a){var o=C.useRef(!0);zv(function(){return r(o.current)},a),zv(function(){return o.current=!1,function(){o.current=!0}},[])},Rv=function(r,a){Gt(function(o){if(!o)return r()},a)},A2=Y({},Sc),Fv=A2.useInsertionEffect,T2=function(r,a,o){C.useMemo(r,o),Gt(function(){return a(!0)},o)},P2=Fv?function(t,r,a){return Fv(function(){return t(),r()},a)}:T2;const I2=P2;var B2=Y({},Sc),k2=B2.useInsertionEffect,D2=function(r){var a=[],o=!1;function u(d){o||a.push(d)}return C.useEffect(function(){return o=!1,function(){o=!0,a.length&&a.forEach(function(d){return d()})}},r),u},L2=function(){return function(r){r()}},z2=typeof k2<"u"?D2:L2;const R2=z2;function fS(t,r,a,o,u){var d=C.useContext(xm),h=d.cache,l=[t].concat(st(r)),g=l.join("_"),y=R2([g]),v=function(s){h.update(l,function(c){var f=c||[],m=W(f,2),p=m[0],_=p===void 0?0:p,S=m[1],x=S,w=x||a(),U=[_,w];return s?s(U):U})};C.useMemo(function(){v()},[g]);var b=h.get(l),e=b[1];return I2(function(){u==null||u(e)},function(n){return v(function(s){var c=W(s,2),f=c[0],m=c[1];return n&&f===0&&(u==null||u(e)),[f+1,m]}),function(){h.update(l,function(s){var c=s||[],f=W(c,2),m=f[0],p=m===void 0?0:m,_=f[1],S=p-1;return S===0?(y(function(){return o==null?void 0:o(_,!1)}),null):[p-1,_]})}},[g]),e}var F2={},M2="css",Vn=new Map;function O2(t){Vn.set(t,(Vn.get(t)||0)+1)}function N2(t,r){if(typeof document<"u"){var a=document.querySelectorAll("style[".concat(Dh,'="').concat(t,'"]'));a.forEach(function(o){if(o[Ga]===r){var u;(u=o.parentNode)===null||u===void 0||u.removeChild(o)}})}}var H2=0;function G2(t,r){Vn.set(t,(Vn.get(t)||0)-1);var a=Array.from(Vn.keys()),o=a.filter(function(u){var d=Vn.get(u)||0;return d<=0});a.length-o.length>H2&&o.forEach(function(u){N2(u,r),Vn.delete(u)})}var $2=function(r,a,o,u){var d=o.getDerivativeToken(r),h=Y(Y({},d),a);return u&&(h=u(h)),h};function j2(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=C.useContext(xm),u=o.cache.instanceId,d=a.salt,h=d===void 0?"":d,l=a.override,g=l===void 0?F2:l,y=a.formatToken,v=a.getComputedToken,b=C.useMemo(function(){return Object.assign.apply(Object,[{}].concat(st(r)))},[r]),e=C.useMemo(function(){return ac(b)},[b]),n=C.useMemo(function(){return ac(g)},[g]),s=fS("token",[h,t.id,e,n],function(){var c=v?v(b,g,t):$2(b,g,t,y),f=E2(c,h);c._tokenKey=f,O2(f);var m="".concat(M2,"-").concat(wm(f));return c._hashId=m,[c,m]},function(c){G2(c[0]._tokenKey,u)});return s}var V2={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hS="comm",pS="rule",mS="decl",W2="@import",Y2="@keyframes",q2="@layer",K2=Math.abs,Um=String.fromCharCode;function gS(t){return t.trim()}function yu(t,r,a){return t.replace(r,a)}function X2(t,r){return t.indexOf(r)}function Fs(t,r){return t.charCodeAt(r)|0}function Ms(t,r,a){return t.slice(r,a)}function xi(t){return t.length}function Q2(t){return t.length}function jl(t,r){return r.push(t),t}var Jc=1,_o=1,vS=0,kr=0,at=0,Co="";function Cm(t,r,a,o,u,d,h,l){return{value:t,root:r,parent:a,type:o,props:u,children:d,line:Jc,column:_o,length:h,return:"",siblings:l}}function Z2(){return at}function J2(){return at=kr>0?Fs(Co,--kr):0,_o--,at===10&&(_o=1,Jc--),at}function jr(){return at=kr<vS?Fs(Co,kr++):0,_o++,at===10&&(_o=1,Jc++),at}function ta(){return Fs(Co,kr)}function bu(){return kr}function ed(t,r){return Ms(Co,t,r)}function Rh(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function eA(t){return Jc=_o=1,vS=xi(Co=t),kr=0,[]}function tA(t){return Co="",t}function af(t){return gS(ed(kr-1,Fh(t===91?t+2:t===40?t+1:t)))}function rA(t){for(;(at=ta())&&at<33;)jr();return Rh(t)>2||Rh(at)>3?"":" "}function iA(t,r){for(;--r&&jr()&&!(at<48||at>102||at>57&&at<65||at>70&&at<97););return ed(t,bu()+(r<6&&ta()==32&&jr()==32))}function Fh(t){for(;jr();)switch(at){case t:return kr;case 34:case 39:t!==34&&t!==39&&Fh(at);break;case 40:t===41&&Fh(t);break;case 92:jr();break}return kr}function nA(t,r){for(;jr()&&t+at!==47+10;)if(t+at===42+42&&ta()===47)break;return"/*"+ed(r,kr-1)+"*"+Um(t===47?t:jr())}function aA(t){for(;!Rh(ta());)jr();return ed(t,kr)}function oA(t){return tA(Su("",null,null,null,[""],t=eA(t),0,[0],t))}function Su(t,r,a,o,u,d,h,l,g){for(var y=0,v=0,b=h,e=0,n=0,s=0,c=1,f=1,m=1,p=0,_="",S=u,x=d,w=o,U=_;f;)switch(s=p,p=jr()){case 40:if(s!=108&&Fs(U,b-1)==58){X2(U+=yu(af(p),"&","&\f"),"&\f")!=-1&&(m=-1);break}case 34:case 39:case 91:U+=af(p);break;case 9:case 10:case 13:case 32:U+=rA(s);break;case 92:U+=iA(bu()-1,7);continue;case 47:switch(ta()){case 42:case 47:jl(sA(nA(jr(),bu()),r,a,g),g);break;default:U+="/"}break;case 123*c:l[y++]=xi(U)*m;case 125*c:case 59:case 0:switch(p){case 0:case 125:f=0;case 59+v:m==-1&&(U=yu(U,/\f/g,"")),n>0&&xi(U)-b&&jl(n>32?Ov(U+";",o,a,b-1,g):Ov(yu(U," ","")+";",o,a,b-2,g),g);break;case 59:U+=";";default:if(jl(w=Mv(U,r,a,y,v,u,l,_,S=[],x=[],b,d),d),p===123)if(v===0)Su(U,r,w,w,S,d,b,l,x);else switch(e===99&&Fs(U,3)===110?100:e){case 100:case 108:case 109:case 115:Su(t,w,w,o&&jl(Mv(t,w,w,0,0,u,l,_,u,S=[],b,x),x),u,x,b,l,o?S:x);break;default:Su(U,w,w,w,[""],x,0,l,x)}}y=v=n=0,c=m=1,_=U="",b=h;break;case 58:b=1+xi(U),n=s;default:if(c<1){if(p==123)--c;else if(p==125&&c++==0&&J2()==125)continue}switch(U+=Um(p),p*c){case 38:m=v>0?1:(U+="\f",-1);break;case 44:l[y++]=(xi(U)-1)*m,m=1;break;case 64:ta()===45&&(U+=af(jr())),e=ta(),v=b=xi(_=U+=aA(bu())),p++;break;case 45:s===45&&xi(U)==2&&(c=0)}}return d}function Mv(t,r,a,o,u,d,h,l,g,y,v,b){for(var e=u-1,n=u===0?d:[""],s=Q2(n),c=0,f=0,m=0;c<o;++c)for(var p=0,_=Ms(t,e+1,e=K2(f=h[c])),S=t;p<s;++p)(S=gS(f>0?n[p]+" "+_:yu(_,/&\f/g,n[p])))&&(g[m++]=S);return Cm(t,r,a,u===0?pS:l,g,y,v,b)}function sA(t,r,a,o){return Cm(t,r,a,hS,Um(Z2()),Ms(t,2,-2),0,o)}function Ov(t,r,a,o,u){return Cm(t,r,a,mS,Ms(t,0,o),Ms(t,o+1,-1),o,u)}function Mh(t,r){for(var a="",o=0;o<t.length;o++)a+=r(t[o],o,t,r)||"";return a}function lA(t,r,a,o){switch(t.type){case q2:if(t.children.length)break;case W2:case mS:return t.return=t.return||t.value;case hS:return"";case Y2:return t.return=t.value+"{"+Mh(t.children,o)+"}";case pS:if(!xi(t.value=t.props.join(",")))return""}return xi(a=Mh(t.children,o))?t.return=t.value+"{"+a+"}":""}var Nv="data-ant-cssinjs-cache-path",_S="_FILE_STYLE__",ra,yS=!0;function uA(){if(!ra&&(ra={},rr())){var t=document.createElement("div");t.className=Nv,t.style.position="fixed",t.style.visibility="hidden",t.style.top="-9999px",document.body.appendChild(t);var r=getComputedStyle(t).content||"";r=r.replace(/^"/,"").replace(/"$/,""),r.split(";").forEach(function(u){var d=u.split(":"),h=W(d,2),l=h[0],g=h[1];ra[l]=g});var a=document.querySelector("style[".concat(Nv,"]"));if(a){var o;yS=!1,(o=a.parentNode)===null||o===void 0||o.removeChild(a)}document.body.removeChild(t)}}function cA(t){return uA(),!!ra[t]}function dA(t){var r=ra[t],a=null;if(r&&rr())if(yS)a=_S;else{var o=document.querySelector("style[".concat(ea,'="').concat(ra[t],'"]'));o?a=o.innerHTML:delete ra[t]}return[a,r]}var Hv=rr(),fA="_skip_check_",bS="_multi_value_";function Gv(t){var r=Mh(oA(t),lA);return r.replace(/\{%%%\:[^;];}/g,";")}function hA(t){return nt(t)==="object"&&t&&(fA in t||bS in t)}function pA(t,r,a){if(!r)return t;var o=".".concat(r),u=a==="low"?":where(".concat(o,")"):o,d=t.split(",").map(function(h){var l,g=h.trim().split(/\s+/),y=g[0]||"",v=((l=y.match(/^\w+/))===null||l===void 0?void 0:l[0])||"";return y="".concat(v).concat(u).concat(y.slice(v.length)),[y].concat(st(g.slice(1))).join(" ")});return d.join(",")}var mA=function t(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},u=o.root,d=o.injectHash,h=o.parentSelectors,l=a.hashId,g=a.layer;a.path;var y=a.hashPriority,v=a.transformers,b=v===void 0?[]:v;a.linters;var e="",n={};function s(_){var S=_.getName(l);if(!n[S]){var x=t(_.style,a,{root:!1,parentSelectors:h}),w=W(x,1),U=w[0];n[S]="@keyframes ".concat(_.getName(l)).concat(U)}}function c(_){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return _.forEach(function(x){Array.isArray(x)?c(x,S):x&&S.push(x)}),S}var f=c(Array.isArray(r)?r:[r]);if(f.forEach(function(_){var S=typeof _=="string"&&!u?{}:_;if(typeof S=="string")e+="".concat(S,`
`);else if(S._keyframe)s(S);else{var x=b.reduce(function(w,U){var A;return(U==null||(A=U.visit)===null||A===void 0?void 0:A.call(U,w))||w},S);Object.keys(x).forEach(function(w){var U=x[w];if(nt(U)==="object"&&U&&(w!=="animationName"||!U._keyframe)&&!hA(U)){var A=!1,E=w.trim(),T=!1;(u||d)&&l?E.startsWith("@")?A=!0:E=pA(w,l,y):u&&!l&&(E==="&"||E==="")&&(E="",T=!0);var P=t(U,a,{root:T,injectHash:A,parentSelectors:[].concat(st(h),[E])}),z=W(P,2),R=z[0],D=z[1];n=Y(Y({},n),D),e+="".concat(E).concat(R)}else{let I=function(L,O){var k=L.replace(/[A-Z]/g,function(J){return"-".concat(J.toLowerCase())}),$=O;!V2[L]&&typeof $=="number"&&$!==0&&($="".concat($,"px")),L==="animationName"&&O!==null&&O!==void 0&&O._keyframe&&(s(O),$=O.getName(l)),e+="".concat(k,":").concat($,";")};var M=I,B,F=(B=U==null?void 0:U.value)!==null&&B!==void 0?B:U;nt(U)==="object"&&U!==null&&U!==void 0&&U[bS]&&Array.isArray(F)?F.forEach(function(L){I(w,L)}):I(w,F)}})}}),!u)e="{".concat(e,"}");else if(g&&C2()){var m=g.split(","),p=m[m.length-1].trim();e="@layer ".concat(p," {").concat(e,"}"),m.length>1&&(e="@layer ".concat(g,"{%%%:%}").concat(e))}return[e,n]};function gA(t,r){return wm("".concat(t.join("%")).concat(r))}function vA(){return null}function Oh(t,r){var a=t.token,o=t.path,u=t.hashId,d=t.layer,h=t.nonce,l=t.clientOnly,g=t.order,y=g===void 0?0:g,v=C.useContext(xm),b=v.autoClear;v.mock;var e=v.defaultCache,n=v.hashPriority,s=v.container,c=v.ssrInline,f=v.transformers,m=v.linters,p=v.cache,_=a._tokenKey,S=[_].concat(st(o)),x=Hv,w=fS("style",S,function(){var P=S.join("|");if(cA(P)){var z=dA(P),R=W(z,2),D=R[0],B=R[1];if(D)return[D,_,B,{},l,y]}var F=r(),M=mA(F,{hashId:u,hashPriority:n,layer:d,path:o.join("-"),transformers:f,linters:m}),I=W(M,2),L=I[0],O=I[1],k=Gv(L),$=gA(S,k);return[k,_,$,O,l,y]},function(P,z){var R=W(P,3),D=R[2];(z||b)&&Hv&&nc(D,{mark:ea})},function(P){var z=W(P,4),R=z[0];z[1];var D=z[2],B=z[3];if(x&&R!==_S){var F={mark:ea,prepend:"queue",attachTo:s,priority:y},M=typeof h=="function"?h():h;M&&(F.csp={nonce:M});var I=Rs(R,D,F);I[Ga]=p.instanceId,I.setAttribute(Dh,_),Object.keys(B).forEach(function(L){Rs(Gv(B[L]),"_effect-".concat(L),F)})}}),U=W(w,3),A=U[0],E=U[1],T=U[2];return function(P){var z;if(!c||x||!e)z=C.createElement(vA,null);else{var R;z=C.createElement("style",si({},(R={},le(R,Dh,E),le(R,ea,T),R),{dangerouslySetInnerHTML:{__html:A}}))}return C.createElement(C.Fragment,null,z,P)}}var Dr=function(){function t(r,a){pa(this,t),le(this,"name",void 0),le(this,"style",void 0),le(this,"_keyframe",!0),this.name=r,this.style=a}return ma(t,[{key:"getName",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return a?"".concat(a,"-").concat(this.name):this.name}}]),t}();function wa(t){return t.notSplit=!0,t}wa(["borderTop","borderBottom"]),wa(["borderTop"]),wa(["borderBottom"]),wa(["borderLeft","borderRight"]),wa(["borderLeft"]),wa(["borderRight"]);var _A=C.createContext({});const yA=_A;function bA(t){return lS(t)||Jb(t)||dm(t)||uS()}function Nh(t,r){for(var a=t,o=0;o<r.length;o+=1){if(a==null)return;a=a[r[o]]}return a}function SS(t,r,a,o){if(!r.length)return a;var u=bA(r),d=u[0],h=u.slice(1),l;return!t&&typeof d=="number"?l=[]:Array.isArray(t)?l=st(t):l=Y({},t),o&&a===void 0&&h.length===1?delete l[d][h[0]]:l[d]=SS(l[d],h,a,o),l}function of(t,r,a){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return r.length&&o&&a===void 0&&!Nh(t,r.slice(0,-1))?t:SS(t,r,a,o)}function SA(t){return nt(t)==="object"&&t!==null&&Object.getPrototypeOf(t)===Object.prototype}function $v(t){return Array.isArray(t)?[]:{}}var wA=typeof Reflect>"u"?Object.keys:Reflect.ownKeys;function xA(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var o=$v(r[0]);return r.forEach(function(u){function d(h,l){var g=new Set(l),y=Nh(u,h),v=Array.isArray(y);if(v||SA(y)){if(!g.has(y)){g.add(y);var b=Nh(o,h);v?o=of(o,h,[]):(!b||nt(b)!=="object")&&(o=of(o,h,$v(y))),wA(y).forEach(function(e){d([].concat(st(h),[e]),g)})}}else o=of(o,h,y)}d([])}),o}function EA(){}const UA=()=>{const t=()=>{};return t.deprecated=EA,t},CA=C.createContext(void 0),AA={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"};var TA={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"};const PA={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},wS=PA,IA={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},TA),timePickerLocale:Object.assign({},wS)},jv=IA,nr="${label} is not a valid ${type}",BA={locale:"en",Pagination:AA,DatePicker:jv,TimePicker:wS,Calendar:jv,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:nr,method:nr,array:nr,object:nr,number:nr,date:nr,boolean:nr,integer:nr,float:nr,regexp:nr,email:nr,url:nr,hex:nr},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh"},ColorPicker:{presetEmpty:"Empty"}},td=BA;Object.assign({},td.Modal);let wu=[];const Vv=()=>wu.reduce((t,r)=>Object.assign(Object.assign({},t),r),td.Modal);function kA(t){if(t){const r=Object.assign({},t);return wu.push(r),Vv(),()=>{wu=wu.filter(a=>a!==r),Vv()}}Object.assign({},td.Modal)}const DA=C.createContext(void 0),xS=DA,LA="internalMark",zA=t=>{const{locale:r={},children:a,_ANT_MARK__:o}=t;C.useEffect(()=>kA(r&&r.Modal),[r]);const u=C.useMemo(()=>Object.assign(Object.assign({},r),{exist:!0}),[r]);return C.createElement(xS.Provider,{value:u},a)},RA=zA;function At(t,r){FA(t)&&(t="100%");var a=MA(t);return t=r===360?t:Math.min(r,Math.max(0,parseFloat(t))),a&&(t=parseInt(String(t*r),10)/100),Math.abs(t-r)<1e-6?1:(r===360?t=(t<0?t%r+r:t%r)/parseFloat(String(r)):t=t%r/parseFloat(String(r)),t)}function Vl(t){return Math.min(1,Math.max(0,t))}function FA(t){return typeof t=="string"&&t.indexOf(".")!==-1&&parseFloat(t)===1}function MA(t){return typeof t=="string"&&t.indexOf("%")!==-1}function ES(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function Wl(t){return t<=1?"".concat(Number(t)*100,"%"):t}function Qn(t){return t.length===1?"0"+t:String(t)}function OA(t,r,a){return{r:At(t,255)*255,g:At(r,255)*255,b:At(a,255)*255}}function Wv(t,r,a){t=At(t,255),r=At(r,255),a=At(a,255);var o=Math.max(t,r,a),u=Math.min(t,r,a),d=0,h=0,l=(o+u)/2;if(o===u)h=0,d=0;else{var g=o-u;switch(h=l>.5?g/(2-o-u):g/(o+u),o){case t:d=(r-a)/g+(r<a?6:0);break;case r:d=(a-t)/g+2;break;case a:d=(t-r)/g+4;break}d/=6}return{h:d,s:h,l}}function sf(t,r,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?t+(r-t)*(6*a):a<1/2?r:a<2/3?t+(r-t)*(2/3-a)*6:t}function NA(t,r,a){var o,u,d;if(t=At(t,360),r=At(r,100),a=At(a,100),r===0)u=a,d=a,o=a;else{var h=a<.5?a*(1+r):a+r-a*r,l=2*a-h;o=sf(l,h,t+1/3),u=sf(l,h,t),d=sf(l,h,t-1/3)}return{r:o*255,g:u*255,b:d*255}}function Hh(t,r,a){t=At(t,255),r=At(r,255),a=At(a,255);var o=Math.max(t,r,a),u=Math.min(t,r,a),d=0,h=o,l=o-u,g=o===0?0:l/o;if(o===u)d=0;else{switch(o){case t:d=(r-a)/l+(r<a?6:0);break;case r:d=(a-t)/l+2;break;case a:d=(t-r)/l+4;break}d/=6}return{h:d,s:g,v:h}}function HA(t,r,a){t=At(t,360)*6,r=At(r,100),a=At(a,100);var o=Math.floor(t),u=t-o,d=a*(1-r),h=a*(1-u*r),l=a*(1-(1-u)*r),g=o%6,y=[a,h,d,d,l,a][g],v=[l,a,a,h,d,d][g],b=[d,d,l,a,a,h][g];return{r:y*255,g:v*255,b:b*255}}function Gh(t,r,a,o){var u=[Qn(Math.round(t).toString(16)),Qn(Math.round(r).toString(16)),Qn(Math.round(a).toString(16))];return o&&u[0].startsWith(u[0].charAt(1))&&u[1].startsWith(u[1].charAt(1))&&u[2].startsWith(u[2].charAt(1))?u[0].charAt(0)+u[1].charAt(0)+u[2].charAt(0):u.join("")}function GA(t,r,a,o,u){var d=[Qn(Math.round(t).toString(16)),Qn(Math.round(r).toString(16)),Qn(Math.round(a).toString(16)),Qn($A(o))];return u&&d[0].startsWith(d[0].charAt(1))&&d[1].startsWith(d[1].charAt(1))&&d[2].startsWith(d[2].charAt(1))&&d[3].startsWith(d[3].charAt(1))?d[0].charAt(0)+d[1].charAt(0)+d[2].charAt(0)+d[3].charAt(0):d.join("")}function $A(t){return Math.round(parseFloat(t)*255).toString(16)}function Yv(t){return ar(t)/255}function ar(t){return parseInt(t,16)}function jA(t){return{r:t>>16,g:(t&65280)>>8,b:t&255}}var $h={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Aa(t){var r={r:0,g:0,b:0},a=1,o=null,u=null,d=null,h=!1,l=!1;return typeof t=="string"&&(t=YA(t)),typeof t=="object"&&(vi(t.r)&&vi(t.g)&&vi(t.b)?(r=OA(t.r,t.g,t.b),h=!0,l=String(t.r).substr(-1)==="%"?"prgb":"rgb"):vi(t.h)&&vi(t.s)&&vi(t.v)?(o=Wl(t.s),u=Wl(t.v),r=HA(t.h,o,u),h=!0,l="hsv"):vi(t.h)&&vi(t.s)&&vi(t.l)&&(o=Wl(t.s),d=Wl(t.l),r=NA(t.h,o,d),h=!0,l="hsl"),Object.prototype.hasOwnProperty.call(t,"a")&&(a=t.a)),a=ES(a),{ok:h,format:t.format||l,r:Math.min(255,Math.max(r.r,0)),g:Math.min(255,Math.max(r.g,0)),b:Math.min(255,Math.max(r.b,0)),a}}var VA="[-\\+]?\\d+%?",WA="[-\\+]?\\d*\\.\\d+%?",sn="(?:".concat(WA,")|(?:").concat(VA,")"),lf="[\\s|\\(]+(".concat(sn,")[,|\\s]+(").concat(sn,")[,|\\s]+(").concat(sn,")\\s*\\)?"),uf="[\\s|\\(]+(".concat(sn,")[,|\\s]+(").concat(sn,")[,|\\s]+(").concat(sn,")[,|\\s]+(").concat(sn,")\\s*\\)?"),Rr={CSS_UNIT:new RegExp(sn),rgb:new RegExp("rgb"+lf),rgba:new RegExp("rgba"+uf),hsl:new RegExp("hsl"+lf),hsla:new RegExp("hsla"+uf),hsv:new RegExp("hsv"+lf),hsva:new RegExp("hsva"+uf),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function YA(t){if(t=t.trim().toLowerCase(),t.length===0)return!1;var r=!1;if($h[t])t=$h[t],r=!0;else if(t==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var a=Rr.rgb.exec(t);return a?{r:a[1],g:a[2],b:a[3]}:(a=Rr.rgba.exec(t),a?{r:a[1],g:a[2],b:a[3],a:a[4]}:(a=Rr.hsl.exec(t),a?{h:a[1],s:a[2],l:a[3]}:(a=Rr.hsla.exec(t),a?{h:a[1],s:a[2],l:a[3],a:a[4]}:(a=Rr.hsv.exec(t),a?{h:a[1],s:a[2],v:a[3]}:(a=Rr.hsva.exec(t),a?{h:a[1],s:a[2],v:a[3],a:a[4]}:(a=Rr.hex8.exec(t),a?{r:ar(a[1]),g:ar(a[2]),b:ar(a[3]),a:Yv(a[4]),format:r?"name":"hex8"}:(a=Rr.hex6.exec(t),a?{r:ar(a[1]),g:ar(a[2]),b:ar(a[3]),format:r?"name":"hex"}:(a=Rr.hex4.exec(t),a?{r:ar(a[1]+a[1]),g:ar(a[2]+a[2]),b:ar(a[3]+a[3]),a:Yv(a[4]+a[4]),format:r?"name":"hex8"}:(a=Rr.hex3.exec(t),a?{r:ar(a[1]+a[1]),g:ar(a[2]+a[2]),b:ar(a[3]+a[3]),format:r?"name":"hex"}:!1)))))))))}function vi(t){return!!Rr.CSS_UNIT.exec(String(t))}var Zt=function(){function t(r,a){r===void 0&&(r=""),a===void 0&&(a={});var o;if(r instanceof t)return r;typeof r=="number"&&(r=jA(r)),this.originalInput=r;var u=Aa(r);this.originalInput=r,this.r=u.r,this.g=u.g,this.b=u.b,this.a=u.a,this.roundA=Math.round(100*this.a)/100,this.format=(o=a.format)!==null&&o!==void 0?o:u.format,this.gradientType=a.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=u.ok}return t.prototype.isDark=function(){return this.getBrightness()<128},t.prototype.isLight=function(){return!this.isDark()},t.prototype.getBrightness=function(){var r=this.toRgb();return(r.r*299+r.g*587+r.b*114)/1e3},t.prototype.getLuminance=function(){var r=this.toRgb(),a,o,u,d=r.r/255,h=r.g/255,l=r.b/255;return d<=.03928?a=d/12.92:a=Math.pow((d+.055)/1.055,2.4),h<=.03928?o=h/12.92:o=Math.pow((h+.055)/1.055,2.4),l<=.03928?u=l/12.92:u=Math.pow((l+.055)/1.055,2.4),.2126*a+.7152*o+.0722*u},t.prototype.getAlpha=function(){return this.a},t.prototype.setAlpha=function(r){return this.a=ES(r),this.roundA=Math.round(100*this.a)/100,this},t.prototype.isMonochrome=function(){var r=this.toHsl().s;return r===0},t.prototype.toHsv=function(){var r=Hh(this.r,this.g,this.b);return{h:r.h*360,s:r.s,v:r.v,a:this.a}},t.prototype.toHsvString=function(){var r=Hh(this.r,this.g,this.b),a=Math.round(r.h*360),o=Math.round(r.s*100),u=Math.round(r.v*100);return this.a===1?"hsv(".concat(a,", ").concat(o,"%, ").concat(u,"%)"):"hsva(".concat(a,", ").concat(o,"%, ").concat(u,"%, ").concat(this.roundA,")")},t.prototype.toHsl=function(){var r=Wv(this.r,this.g,this.b);return{h:r.h*360,s:r.s,l:r.l,a:this.a}},t.prototype.toHslString=function(){var r=Wv(this.r,this.g,this.b),a=Math.round(r.h*360),o=Math.round(r.s*100),u=Math.round(r.l*100);return this.a===1?"hsl(".concat(a,", ").concat(o,"%, ").concat(u,"%)"):"hsla(".concat(a,", ").concat(o,"%, ").concat(u,"%, ").concat(this.roundA,")")},t.prototype.toHex=function(r){return r===void 0&&(r=!1),Gh(this.r,this.g,this.b,r)},t.prototype.toHexString=function(r){return r===void 0&&(r=!1),"#"+this.toHex(r)},t.prototype.toHex8=function(r){return r===void 0&&(r=!1),GA(this.r,this.g,this.b,this.a,r)},t.prototype.toHex8String=function(r){return r===void 0&&(r=!1),"#"+this.toHex8(r)},t.prototype.toHexShortString=function(r){return r===void 0&&(r=!1),this.a===1?this.toHexString(r):this.toHex8String(r)},t.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},t.prototype.toRgbString=function(){var r=Math.round(this.r),a=Math.round(this.g),o=Math.round(this.b);return this.a===1?"rgb(".concat(r,", ").concat(a,", ").concat(o,")"):"rgba(".concat(r,", ").concat(a,", ").concat(o,", ").concat(this.roundA,")")},t.prototype.toPercentageRgb=function(){var r=function(a){return"".concat(Math.round(At(a,255)*100),"%")};return{r:r(this.r),g:r(this.g),b:r(this.b),a:this.a}},t.prototype.toPercentageRgbString=function(){var r=function(a){return Math.round(At(a,255)*100)};return this.a===1?"rgb(".concat(r(this.r),"%, ").concat(r(this.g),"%, ").concat(r(this.b),"%)"):"rgba(".concat(r(this.r),"%, ").concat(r(this.g),"%, ").concat(r(this.b),"%, ").concat(this.roundA,")")},t.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var r="#"+Gh(this.r,this.g,this.b,!1),a=0,o=Object.entries($h);a<o.length;a++){var u=o[a],d=u[0],h=u[1];if(r===h)return d}return!1},t.prototype.toString=function(r){var a=!!r;r=r??this.format;var o=!1,u=this.a<1&&this.a>=0,d=!a&&u&&(r.startsWith("hex")||r==="name");return d?r==="name"&&this.a===0?this.toName():this.toRgbString():(r==="rgb"&&(o=this.toRgbString()),r==="prgb"&&(o=this.toPercentageRgbString()),(r==="hex"||r==="hex6")&&(o=this.toHexString()),r==="hex3"&&(o=this.toHexString(!0)),r==="hex4"&&(o=this.toHex8String(!0)),r==="hex8"&&(o=this.toHex8String()),r==="name"&&(o=this.toName()),r==="hsl"&&(o=this.toHslString()),r==="hsv"&&(o=this.toHsvString()),o||this.toHexString())},t.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},t.prototype.clone=function(){return new t(this.toString())},t.prototype.lighten=function(r){r===void 0&&(r=10);var a=this.toHsl();return a.l+=r/100,a.l=Vl(a.l),new t(a)},t.prototype.brighten=function(r){r===void 0&&(r=10);var a=this.toRgb();return a.r=Math.max(0,Math.min(255,a.r-Math.round(255*-(r/100)))),a.g=Math.max(0,Math.min(255,a.g-Math.round(255*-(r/100)))),a.b=Math.max(0,Math.min(255,a.b-Math.round(255*-(r/100)))),new t(a)},t.prototype.darken=function(r){r===void 0&&(r=10);var a=this.toHsl();return a.l-=r/100,a.l=Vl(a.l),new t(a)},t.prototype.tint=function(r){return r===void 0&&(r=10),this.mix("white",r)},t.prototype.shade=function(r){return r===void 0&&(r=10),this.mix("black",r)},t.prototype.desaturate=function(r){r===void 0&&(r=10);var a=this.toHsl();return a.s-=r/100,a.s=Vl(a.s),new t(a)},t.prototype.saturate=function(r){r===void 0&&(r=10);var a=this.toHsl();return a.s+=r/100,a.s=Vl(a.s),new t(a)},t.prototype.greyscale=function(){return this.desaturate(100)},t.prototype.spin=function(r){var a=this.toHsl(),o=(a.h+r)%360;return a.h=o<0?360+o:o,new t(a)},t.prototype.mix=function(r,a){a===void 0&&(a=50);var o=this.toRgb(),u=new t(r).toRgb(),d=a/100,h={r:(u.r-o.r)*d+o.r,g:(u.g-o.g)*d+o.g,b:(u.b-o.b)*d+o.b,a:(u.a-o.a)*d+o.a};return new t(h)},t.prototype.analogous=function(r,a){r===void 0&&(r=6),a===void 0&&(a=30);var o=this.toHsl(),u=360/a,d=[this];for(o.h=(o.h-(u*r>>1)+720)%360;--r;)o.h=(o.h+u)%360,d.push(new t(o));return d},t.prototype.complement=function(){var r=this.toHsl();return r.h=(r.h+180)%360,new t(r)},t.prototype.monochromatic=function(r){r===void 0&&(r=6);for(var a=this.toHsv(),o=a.h,u=a.s,d=a.v,h=[],l=1/r;r--;)h.push(new t({h:o,s:u,v:d})),d=(d+l)%1;return h},t.prototype.splitcomplement=function(){var r=this.toHsl(),a=r.h;return[this,new t({h:(a+72)%360,s:r.s,l:r.l}),new t({h:(a+216)%360,s:r.s,l:r.l})]},t.prototype.onBackground=function(r){var a=this.toRgb(),o=new t(r).toRgb(),u=a.a+o.a*(1-a.a);return new t({r:(a.r*a.a+o.r*o.a*(1-a.a))/u,g:(a.g*a.a+o.g*o.a*(1-a.a))/u,b:(a.b*a.a+o.b*o.a*(1-a.a))/u,a:u})},t.prototype.triad=function(){return this.polyad(3)},t.prototype.tetrad=function(){return this.polyad(4)},t.prototype.polyad=function(r){for(var a=this.toHsl(),o=a.h,u=[this],d=360/r,h=1;h<r;h++)u.push(new t({h:(o+h*d)%360,s:a.s,l:a.l}));return u},t.prototype.equals=function(r){return this.toRgbString()===new t(r).toRgbString()},t}(),Yl=2,qv=.16,qA=.05,KA=.05,XA=.15,US=5,CS=4,QA=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function Kv(t){var r=t.r,a=t.g,o=t.b,u=Hh(r,a,o);return{h:u.h*360,s:u.s,v:u.v}}function ql(t){var r=t.r,a=t.g,o=t.b;return"#".concat(Gh(r,a,o,!1))}function ZA(t,r,a){var o=a/100,u={r:(r.r-t.r)*o+t.r,g:(r.g-t.g)*o+t.g,b:(r.b-t.b)*o+t.b};return u}function Xv(t,r,a){var o;return Math.round(t.h)>=60&&Math.round(t.h)<=240?o=a?Math.round(t.h)-Yl*r:Math.round(t.h)+Yl*r:o=a?Math.round(t.h)+Yl*r:Math.round(t.h)-Yl*r,o<0?o+=360:o>=360&&(o-=360),o}function Qv(t,r,a){if(t.h===0&&t.s===0)return t.s;var o;return a?o=t.s-qv*r:r===CS?o=t.s+qv:o=t.s+qA*r,o>1&&(o=1),a&&r===US&&o>.1&&(o=.1),o<.06&&(o=.06),Number(o.toFixed(2))}function Zv(t,r,a){var o;return a?o=t.v+KA*r:o=t.v-XA*r,o>1&&(o=1),Number(o.toFixed(2))}function yo(t){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=[],o=Aa(t),u=US;u>0;u-=1){var d=Kv(o),h=ql(Aa({h:Xv(d,u,!0),s:Qv(d,u,!0),v:Zv(d,u,!0)}));a.push(h)}a.push(ql(o));for(var l=1;l<=CS;l+=1){var g=Kv(o),y=ql(Aa({h:Xv(g,l),s:Qv(g,l),v:Zv(g,l)}));a.push(y)}return r.theme==="dark"?QA.map(function(v){var b=v.index,e=v.opacity,n=ql(ZA(Aa(r.backgroundColor||"#141414"),Aa(a[b]),e*100));return n}):a}var cf={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},df={},ff={};Object.keys(cf).forEach(function(t){df[t]=yo(cf[t]),df[t].primary=df[t][5],ff[t]=yo(cf[t],{theme:"dark",backgroundColor:"#141414"}),ff[t].primary=ff[t][5]});const JA=t=>{const{controlHeight:r}=t;return{controlHeightSM:r*.75,controlHeightXS:r*.5,controlHeightLG:r*1.25}},eT=JA;function tT(t){const{sizeUnit:r,sizeStep:a}=t;return{sizeXXL:r*(a+8),sizeXL:r*(a+4),sizeLG:r*(a+2),sizeMD:r*(a+1),sizeMS:r*a,size:r*a,sizeSM:r*(a-1),sizeXS:r*(a-2),sizeXXS:r*(a-3)}}const AS={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},rT=Object.assign(Object.assign({},AS),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0}),rd=rT;function iT(t,r){let{generateColorPalettes:a,generateNeutralColorPalettes:o}=r;const{colorSuccess:u,colorWarning:d,colorError:h,colorInfo:l,colorPrimary:g,colorBgBase:y,colorTextBase:v}=t,b=a(g),e=a(u),n=a(d),s=a(h),c=a(l),f=o(y,v),m=t.colorLink||t.colorInfo,p=a(m);return Object.assign(Object.assign({},f),{colorPrimaryBg:b[1],colorPrimaryBgHover:b[2],colorPrimaryBorder:b[3],colorPrimaryBorderHover:b[4],colorPrimaryHover:b[5],colorPrimary:b[6],colorPrimaryActive:b[7],colorPrimaryTextHover:b[8],colorPrimaryText:b[9],colorPrimaryTextActive:b[10],colorSuccessBg:e[1],colorSuccessBgHover:e[2],colorSuccessBorder:e[3],colorSuccessBorderHover:e[4],colorSuccessHover:e[4],colorSuccess:e[6],colorSuccessActive:e[7],colorSuccessTextHover:e[8],colorSuccessText:e[9],colorSuccessTextActive:e[10],colorErrorBg:s[1],colorErrorBgHover:s[2],colorErrorBorder:s[3],colorErrorBorderHover:s[4],colorErrorHover:s[5],colorError:s[6],colorErrorActive:s[7],colorErrorTextHover:s[8],colorErrorText:s[9],colorErrorTextActive:s[10],colorWarningBg:n[1],colorWarningBgHover:n[2],colorWarningBorder:n[3],colorWarningBorderHover:n[4],colorWarningHover:n[4],colorWarning:n[6],colorWarningActive:n[7],colorWarningTextHover:n[8],colorWarningText:n[9],colorWarningTextActive:n[10],colorInfoBg:c[1],colorInfoBgHover:c[2],colorInfoBorder:c[3],colorInfoBorderHover:c[4],colorInfoHover:c[4],colorInfo:c[6],colorInfoActive:c[7],colorInfoTextHover:c[8],colorInfoText:c[9],colorInfoTextActive:c[10],colorLinkHover:p[4],colorLink:p[6],colorLinkActive:p[7],colorBgMask:new Zt("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}const nT=t=>{let r=t,a=t,o=t,u=t;return t<6&&t>=5?r=t+1:t<16&&t>=6?r=t+2:t>=16&&(r=16),t<7&&t>=5?a=4:t<8&&t>=7?a=5:t<14&&t>=8?a=6:t<16&&t>=14?a=7:t>=16&&(a=8),t<6&&t>=2?o=1:t>=6&&(o=2),t>4&&t<8?u=4:t>=8&&(u=6),{borderRadius:t>16?16:t,borderRadiusXS:o,borderRadiusSM:a,borderRadiusLG:r,borderRadiusOuter:u}},aT=nT;function oT(t){const{motionUnit:r,motionBase:a,borderRadius:o,lineWidth:u}=t;return Object.assign({motionDurationFast:`${(a+r).toFixed(1)}s`,motionDurationMid:`${(a+r*2).toFixed(1)}s`,motionDurationSlow:`${(a+r*3).toFixed(1)}s`,lineWidthBold:u+1},aT(o))}const _i=(t,r)=>new Zt(t).setAlpha(r).toRgbString(),Ho=(t,r)=>new Zt(t).darken(r).toHexString(),sT=t=>{const r=yo(t);return{1:r[0],2:r[1],3:r[2],4:r[3],5:r[4],6:r[5],7:r[6],8:r[4],9:r[5],10:r[6]}},lT=(t,r)=>{const a=t||"#fff",o=r||"#000";return{colorBgBase:a,colorTextBase:o,colorText:_i(o,.88),colorTextSecondary:_i(o,.65),colorTextTertiary:_i(o,.45),colorTextQuaternary:_i(o,.25),colorFill:_i(o,.15),colorFillSecondary:_i(o,.06),colorFillTertiary:_i(o,.04),colorFillQuaternary:_i(o,.02),colorBgLayout:Ho(a,4),colorBgContainer:Ho(a,0),colorBgElevated:Ho(a,0),colorBgSpotlight:_i(o,.85),colorBorder:Ho(a,15),colorBorderSecondary:Ho(a,6)}};function uT(t){const r=new Array(10).fill(null).map((a,o)=>{const u=o-1,d=t*Math.pow(2.71828,u/5),h=o>1?Math.floor(d):Math.ceil(d);return Math.floor(h/2)*2});return r[1]=t,r.map(a=>{const o=a+8;return{size:a,lineHeight:o/a}})}const cT=t=>{const r=uT(t),a=r.map(u=>u.size),o=r.map(u=>u.lineHeight);return{fontSizeSM:a[0],fontSize:a[1],fontSizeLG:a[2],fontSizeXL:a[3],fontSizeHeading1:a[6],fontSizeHeading2:a[5],fontSizeHeading3:a[4],fontSizeHeading4:a[3],fontSizeHeading5:a[2],lineHeight:o[1],lineHeightLG:o[2],lineHeightSM:o[0],lineHeightHeading1:o[6],lineHeightHeading2:o[5],lineHeightHeading3:o[4],lineHeightHeading4:o[3],lineHeightHeading5:o[2]}},dT=cT;function fT(t){const r=Object.keys(AS).map(a=>{const o=yo(t[a]);return new Array(10).fill(1).reduce((u,d,h)=>(u[`${a}-${h+1}`]=o[h],u[`${a}${h+1}`]=o[h],u),{})}).reduce((a,o)=>(a=Object.assign(Object.assign({},a),o),a),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},t),r),iT(t,{generateColorPalettes:sT,generateNeutralColorPalettes:lT})),dT(t.fontSize)),tT(t)),eT(t)),oT(t))}const TS=zh(fT),PS={token:rd,hashed:!0},IS=ue.createContext(PS),oc=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"],hT="5.9.1";function hf(t){return t>=0&&t<=255}function Kl(t,r){const{r:a,g:o,b:u,a:d}=new Zt(t).toRgb();if(d<1)return t;const{r:h,g:l,b:g}=new Zt(r).toRgb();for(let y=.01;y<=1;y+=.01){const v=Math.round((a-h*(1-y))/y),b=Math.round((o-l*(1-y))/y),e=Math.round((u-g*(1-y))/y);if(hf(v)&&hf(b)&&hf(e))return new Zt({r:v,g:b,b:e,a:Math.round(y*100)/100}).toRgbString()}return new Zt({r:a,g:o,b:u,a:1}).toRgbString()}var pT=globalThis&&globalThis.__rest||function(t,r){var a={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&r.indexOf(o)<0&&(a[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(t);u<o.length;u++)r.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(t,o[u])&&(a[o[u]]=t[o[u]]);return a};function BS(t){const{override:r}=t,a=pT(t,["override"]),o=Object.assign({},r);Object.keys(rd).forEach(e=>{delete o[e]});const u=Object.assign(Object.assign({},a),o),d=480,h=576,l=768,g=992,y=1200,v=1600;if(u.motion===!1){const e="0s";u.motionDurationFast=e,u.motionDurationMid=e,u.motionDurationSlow=e}return Object.assign(Object.assign(Object.assign({},u),{colorFillContent:u.colorFillSecondary,colorFillContentHover:u.colorFill,colorFillAlter:u.colorFillQuaternary,colorBgContainerDisabled:u.colorFillTertiary,colorBorderBg:u.colorBgContainer,colorSplit:Kl(u.colorBorderSecondary,u.colorBgContainer),colorTextPlaceholder:u.colorTextQuaternary,colorTextDisabled:u.colorTextQuaternary,colorTextHeading:u.colorText,colorTextLabel:u.colorTextSecondary,colorTextDescription:u.colorTextTertiary,colorTextLightSolid:u.colorWhite,colorHighlight:u.colorError,colorBgTextHover:u.colorFillSecondary,colorBgTextActive:u.colorFill,colorIcon:u.colorTextTertiary,colorIconHover:u.colorText,colorErrorOutline:Kl(u.colorErrorBg,u.colorBgContainer),colorWarningOutline:Kl(u.colorWarningBg,u.colorBgContainer),fontSizeIcon:u.fontSizeSM,lineWidthFocus:u.lineWidth*4,lineWidth:u.lineWidth,controlOutlineWidth:u.lineWidth*2,controlInteractiveSize:u.controlHeight/2,controlItemBgHover:u.colorFillTertiary,controlItemBgActive:u.colorPrimaryBg,controlItemBgActiveHover:u.colorPrimaryBgHover,controlItemBgActiveDisabled:u.colorFill,controlTmpOutline:u.colorFillQuaternary,controlOutline:Kl(u.colorPrimaryBg,u.colorBgContainer),lineType:u.lineType,borderRadius:u.borderRadius,borderRadiusXS:u.borderRadiusXS,borderRadiusSM:u.borderRadiusSM,borderRadiusLG:u.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:u.sizeXXS,paddingXS:u.sizeXS,paddingSM:u.sizeSM,padding:u.size,paddingMD:u.sizeMD,paddingLG:u.sizeLG,paddingXL:u.sizeXL,paddingContentHorizontalLG:u.sizeLG,paddingContentVerticalLG:u.sizeMS,paddingContentHorizontal:u.sizeMS,paddingContentVertical:u.sizeSM,paddingContentHorizontalSM:u.size,paddingContentVerticalSM:u.sizeXS,marginXXS:u.sizeXXS,marginXS:u.sizeXS,marginSM:u.sizeSM,margin:u.size,marginMD:u.sizeMD,marginLG:u.sizeLG,marginXL:u.sizeXL,marginXXL:u.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:d,screenXSMin:d,screenXSMax:h-1,screenSM:h,screenSMMin:h,screenSMMax:l-1,screenMD:l,screenMDMin:l,screenMDMax:g-1,screenLG:g,screenLGMin:g,screenLGMax:y-1,screenXL:y,screenXLMin:y,screenXLMax:v-1,screenXXL:v,screenXXLMin:v,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new Zt("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new Zt("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new Zt("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),o)}var Jv=globalThis&&globalThis.__rest||function(t,r){var a={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&r.indexOf(o)<0&&(a[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(t);u<o.length;u++)r.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(t,o[u])&&(a[o[u]]=t[o[u]]);return a};const kS=(t,r,a)=>{const o=a.getDerivativeToken(t),{override:u}=r,d=Jv(r,["override"]);let h=Object.assign(Object.assign({},o),{override:u});return h=BS(h),d&&Object.entries(d).forEach(l=>{let[g,y]=l;const{theme:v}=y,b=Jv(y,["theme"]);let e=b;v&&(e=kS(Object.assign(Object.assign({},h),b),{override:b},v)),h[g]=e}),h};function id(){const{token:t,hashed:r,theme:a,components:o}=ue.useContext(IS),u=`${hT}-${r||""}`,d=a||TS,[h,l]=j2(d,[rd,t],{salt:u,override:Object.assign({override:t},o),getComputedToken:kS,formatToken:BS});return[d,h,r?l:""]}function Ei(t){var r=C.useRef();r.current=t;var a=C.useCallback(function(){for(var o,u=arguments.length,d=new Array(u),h=0;h<u;h++)d[h]=arguments[h];return(o=r.current)===null||o===void 0?void 0:o.call.apply(o,[r].concat(d))},[]);return a}function to(t){var r=C.useRef(!1),a=C.useState(t),o=W(a,2),u=o[0],d=o[1];C.useEffect(function(){return r.current=!1,function(){r.current=!0}},[]);function h(l,g){g&&r.current||d(l)}return[u,h]}function pf(t){return t!==void 0}function DS(t,r){var a=r||{},o=a.defaultValue,u=a.value,d=a.onChange,h=a.postState,l=to(function(){return pf(u)?u:pf(o)?typeof o=="function"?o():o:typeof t=="function"?t():t}),g=W(l,2),y=g[0],v=g[1],b=u!==void 0?u:y,e=h?h(b):b,n=Ei(d),s=to([b]),c=W(s,2),f=c[0],m=c[1];Rv(function(){var _=f[0];y!==_&&n(y,_)},[f]),Rv(function(){pf(u)||v(u)},[u]);var p=Ei(function(_,S){v(_,S),m([b],S)});return[e,p]}const LS="anticon",mT=(t,r)=>r||(t?`ant-${t}`:"ant"),ga=C.createContext({getPrefixCls:mT,iconPrefixCls:LS}),gT=(t,r,a,o,u)=>{const d=t/2,h=0,l=d,g=a*1/Math.sqrt(2),y=d-a*(1-1/Math.sqrt(2)),v=d-r*(1/Math.sqrt(2)),b=a*(Math.sqrt(2)-1)+r*(1/Math.sqrt(2)),e=2*d-v,n=b,s=2*d-g,c=y,f=2*d-h,m=l,p=d*Math.sqrt(2)+a*(Math.sqrt(2)-2),_=a*(Math.sqrt(2)-1);return{pointerEvents:"none",width:t,height:t,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:t,height:t/2,background:o,clipPath:{_multi_value_:!0,value:[`polygon(${_}px 100%, 50% ${_}px, ${2*d-_}px 100%, ${_}px 100%)`,`path('M ${h} ${l} A ${a} ${a} 0 0 0 ${g} ${y} L ${v} ${b} A ${r} ${r} 0 0 1 ${e} ${n} L ${s} ${c} A ${a} ${a} 0 0 0 ${f} ${m} Z')`]},content:'""'},"&::after":{content:'""',position:"absolute",width:p,height:p,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${r}px 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:u,zIndex:0,background:"transparent"}}},zS=t=>({boxSizing:"border-box",margin:0,padding:0,color:t.colorText,fontSize:t.fontSize,lineHeight:t.lineHeight,listStyle:"none",fontFamily:t.fontFamily}),vT=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),_T=t=>({a:{color:t.colorLink,textDecoration:t.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${t.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:t.colorLinkHover},"&:active":{color:t.colorLinkActive},"&:active,\n  &:hover":{textDecoration:t.linkHoverDecoration,outline:0},"&:focus":{textDecoration:t.linkFocusDecoration,outline:0},"&[disabled]":{color:t.colorTextDisabled,cursor:"not-allowed"}}}),yT=(t,r)=>{const{fontFamily:a,fontSize:o}=t,u=`[class^="${r}"], [class*=" ${r}"]`;return{[u]:{fontFamily:a,fontSize:o,boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"},[u]:{boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}}}}},RS=typeof CSSINJS_STATISTIC<"u";let jh=!0;function Os(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(!RS)return Object.assign.apply(Object,[{}].concat(r));jh=!1;const o={};return r.forEach(u=>{Object.keys(u).forEach(h=>{Object.defineProperty(o,h,{configurable:!0,enumerable:!0,get:()=>u[h]})})}),jh=!0,o}const e_={};function bT(){}function ST(t){let r,a=t,o=bT;return RS&&(r=new Set,a=new Proxy(t,{get(u,d){return jh&&r.add(d),u[d]}}),o=(u,d)=>{var h;e_[u]={global:Array.from(r),component:Object.assign(Object.assign({},(h=e_[u])===null||h===void 0?void 0:h.component),d)}}),{token:a,keys:r,flush:o}}const wT=(t,r)=>{const[a,o]=id();return Oh({theme:a,token:o,hashId:"",path:["ant-design-icons",t],nonce:()=>r==null?void 0:r.nonce},()=>[{[`.${t}`]:Object.assign(Object.assign({},vT()),{[`.${t} .${t}-icon`]:{display:"block"}})}])},FS=wT;function MS(t,r,a){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const u=Array.isArray(t)?t:[t,t],[d]=u,h=u.join("-");return l=>{const[g,y,v]=id(),{getPrefixCls:b,iconPrefixCls:e,csp:n}=C.useContext(ga),s=b(),c={theme:g,token:y,hashId:v,nonce:()=>n==null?void 0:n.nonce,clientOnly:o.clientOnly,order:o.order||-999};return Oh(Object.assign(Object.assign({},c),{clientOnly:!1,path:["Shared",s]}),()=>[{"&":_T(y)}]),FS(e),[Oh(Object.assign(Object.assign({},c),{path:[h,l,e]}),()=>{const{token:f,flush:m}=ST(y),p=Object.assign({},y[d]);if(o.deprecatedTokens){const{deprecatedTokens:A}=o;A.forEach(E=>{let[T,P]=E;var z;(p!=null&&p[T]||p!=null&&p[P])&&((z=p[P])!==null&&z!==void 0||(p[P]=p==null?void 0:p[T]))})}const _=typeof a=="function"?a(Os(f,p??{})):a,S=Object.assign(Object.assign({},_),p),x=`.${l}`,w=Os(f,{componentCls:x,prefixCls:l,iconCls:`.${e}`,antCls:`.${s}`},S),U=r(w,{hashId:v,prefixCls:l,rootPrefixCls:s,iconPrefixCls:e,overrideComponentToken:p});return m(d,S),[o.resetStyle===!1?null:yT(y,l),U]}),v]}}function xT(t,r){return oc.reduce((a,o)=>{const u=t[`${o}1`],d=t[`${o}3`],h=t[`${o}6`],l=t[`${o}7`];return Object.assign(Object.assign({},a),r(o,{lightColor:u,lightBorderColor:d,darkColor:h,textColor:l}))},{})}const ET=`-ant-${Date.now()}-${Math.random()}`;function UT(t,r){const a={},o=(h,l)=>{let g=h.clone();return g=(l==null?void 0:l(g))||g,g.toRgbString()},u=(h,l)=>{const g=new Zt(h),y=yo(g.toRgbString());a[`${l}-color`]=o(g),a[`${l}-color-disabled`]=y[1],a[`${l}-color-hover`]=y[4],a[`${l}-color-active`]=y[6],a[`${l}-color-outline`]=g.clone().setAlpha(.2).toRgbString(),a[`${l}-color-deprecated-bg`]=y[0],a[`${l}-color-deprecated-border`]=y[2]};if(r.primaryColor){u(r.primaryColor,"primary");const h=new Zt(r.primaryColor),l=yo(h.toRgbString());l.forEach((y,v)=>{a[`primary-${v+1}`]=y}),a["primary-color-deprecated-l-35"]=o(h,y=>y.lighten(35)),a["primary-color-deprecated-l-20"]=o(h,y=>y.lighten(20)),a["primary-color-deprecated-t-20"]=o(h,y=>y.tint(20)),a["primary-color-deprecated-t-50"]=o(h,y=>y.tint(50)),a["primary-color-deprecated-f-12"]=o(h,y=>y.setAlpha(y.getAlpha()*.12));const g=new Zt(l[0]);a["primary-color-active-deprecated-f-30"]=o(g,y=>y.setAlpha(y.getAlpha()*.3)),a["primary-color-active-deprecated-d-02"]=o(g,y=>y.darken(2))}return r.successColor&&u(r.successColor,"success"),r.warningColor&&u(r.warningColor,"warning"),r.errorColor&&u(r.errorColor,"error"),r.infoColor&&u(r.infoColor,"info"),`
  :root {
    ${Object.keys(a).map(h=>`--${t}-${h}: ${a[h]};`).join(`
`)}
  }
  `.trim()}function CT(t,r){const a=UT(t,r);rr()&&Rs(a,`${ET}-dynamic-theme`)}const Vh=C.createContext(!1),AT=t=>{let{children:r,disabled:a}=t;const o=C.useContext(Vh);return C.createElement(Vh.Provider,{value:a??o},r)},OS=Vh,Wh=C.createContext(void 0),TT=t=>{let{children:r,size:a}=t;const o=C.useContext(Wh);return C.createElement(Wh.Provider,{value:a||o},r)},Am=Wh;function PT(){const t=C.useContext(OS),r=C.useContext(Am);return{componentDisabled:t,componentSize:r}}function IT(t,r){const a=t||{},o=a.inherit===!1||!r?PS:r;return _m(()=>{if(!t)return r;const u=Object.assign({},o.components);return Object.keys(t.components||{}).forEach(d=>{u[d]=Object.assign(Object.assign({},u[d]),t.components[d])}),Object.assign(Object.assign(Object.assign({},o),a),{token:Object.assign(Object.assign({},o.token),a.token),components:u})},[a,o],(u,d)=>u.some((h,l)=>{const g=d[l];return!iS(h,g,!0)}))}var BT=["children"],NS=C.createContext({});function kT(t){var r=t.children,a=ca(t,BT);return C.createElement(NS.Provider,{value:a},r)}var DT=function(t){fm(a,t);var r=hm(a);function a(){return pa(this,a),r.apply(this,arguments)}return ma(a,[{key:"render",value:function(){return this.props.children}}]),a}(C.Component),Hn="none",Xl="appear",Ql="enter",Zl="leave",t_="none",Or="prepare",$a="start",ja="active",Tm="end",HS="prepared";function r_(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit".concat(t)]="webkit".concat(r),a["Moz".concat(t)]="moz".concat(r),a["ms".concat(t)]="MS".concat(r),a["O".concat(t)]="o".concat(r.toLowerCase()),a}function LT(t,r){var a={animationend:r_("Animation","AnimationEnd"),transitionend:r_("Transition","TransitionEnd")};return t&&("AnimationEvent"in r||delete a.animationend.animation,"TransitionEvent"in r||delete a.transitionend.transition),a}var zT=LT(rr(),typeof window<"u"?window:{}),GS={};if(rr()){var RT=document.createElement("div");GS=RT.style}var Jl={};function $S(t){if(Jl[t])return Jl[t];var r=zT[t];if(r)for(var a=Object.keys(r),o=a.length,u=0;u<o;u+=1){var d=a[u];if(Object.prototype.hasOwnProperty.call(r,d)&&d in GS)return Jl[t]=r[d],Jl[t]}return""}var jS=$S("animationend"),VS=$S("transitionend"),WS=!!(jS&&VS),i_=jS||"animationend",n_=VS||"transitionend";function a_(t,r){if(!t)return null;if(nt(t)==="object"){var a=r.replace(/-\w/g,function(o){return o[1].toUpperCase()});return t[a]}return"".concat(t,"-").concat(r)}const FT=function(t){var r=C.useRef(),a=C.useRef(t);a.current=t;var o=C.useCallback(function(h){a.current(h)},[]);function u(h){h&&(h.removeEventListener(n_,o),h.removeEventListener(i_,o))}function d(h){r.current&&r.current!==h&&u(r.current),h&&h!==r.current&&(h.addEventListener(n_,o),h.addEventListener(i_,o),r.current=h)}return C.useEffect(function(){return function(){u(r.current)}},[]),[d,u]};var YS=rr()?C.useLayoutEffect:C.useEffect;const MT=function(){var t=C.useRef(null);function r(){ua.cancel(t.current)}function a(o){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;r();var d=ua(function(){u<=1?o({isCanceled:function(){return d!==t.current}}):a(o,u-1)});t.current=d}return C.useEffect(function(){return function(){r()}},[]),[a,r]};var OT=[Or,$a,ja,Tm],NT=[Or,HS],qS=!1,HT=!0;function KS(t){return t===ja||t===Tm}const GT=function(t,r,a){var o=to(t_),u=W(o,2),d=u[0],h=u[1],l=MT(),g=W(l,2),y=g[0],v=g[1];function b(){h(Or,!0)}var e=r?NT:OT;return YS(function(){if(d!==t_&&d!==Tm){var n=e.indexOf(d),s=e[n+1],c=a(d);c===qS?h(s,!0):s&&y(function(f){function m(){f.isCanceled()||h(s,!0)}c===!0?m():Promise.resolve(c).then(m)})}},[t,d]),C.useEffect(function(){return function(){v()}},[]),[b,d]};function $T(t,r,a,o){var u=o.motionEnter,d=u===void 0?!0:u,h=o.motionAppear,l=h===void 0?!0:h,g=o.motionLeave,y=g===void 0?!0:g,v=o.motionDeadline,b=o.motionLeaveImmediately,e=o.onAppearPrepare,n=o.onEnterPrepare,s=o.onLeavePrepare,c=o.onAppearStart,f=o.onEnterStart,m=o.onLeaveStart,p=o.onAppearActive,_=o.onEnterActive,S=o.onLeaveActive,x=o.onAppearEnd,w=o.onEnterEnd,U=o.onLeaveEnd,A=o.onVisibleChanged,E=to(),T=W(E,2),P=T[0],z=T[1],R=to(Hn),D=W(R,2),B=D[0],F=D[1],M=to(null),I=W(M,2),L=I[0],O=I[1],k=C.useRef(!1),$=C.useRef(null);function J(){return a()}var ae=C.useRef(!1);function ce(){F(Hn,!0),O(null,!0)}function X(Q){var te=J();if(!(Q&&!Q.deadline&&Q.target!==te)){var ve=ae.current,Qe;B===Xl&&ve?Qe=x==null?void 0:x(te,Q):B===Ql&&ve?Qe=w==null?void 0:w(te,Q):B===Zl&&ve&&(Qe=U==null?void 0:U(te,Q)),B!==Hn&&ve&&Qe!==!1&&ce()}}var ee=FT(X),be=W(ee,1),de=be[0],_e=function(te){var ve,Qe,pt;switch(te){case Xl:return ve={},le(ve,Or,e),le(ve,$a,c),le(ve,ja,p),ve;case Ql:return Qe={},le(Qe,Or,n),le(Qe,$a,f),le(Qe,ja,_),Qe;case Zl:return pt={},le(pt,Or,s),le(pt,$a,m),le(pt,ja,S),pt;default:return{}}},Ee=C.useMemo(function(){return _e(B)},[B]),Xe=GT(B,!t,function(Q){if(Q===Or){var te=Ee[Or];return te?te(J()):qS}if(fe in Ee){var ve;O(((ve=Ee[fe])===null||ve===void 0?void 0:ve.call(Ee,J(),null))||null)}return fe===ja&&(de(J()),v>0&&(clearTimeout($.current),$.current=setTimeout(function(){X({deadline:!0})},v))),fe===HS&&ce(),HT}),ge=W(Xe,2),ze=ge[0],fe=ge[1],Be=KS(fe);ae.current=Be,YS(function(){z(r);var Q=k.current;k.current=!0;var te;!Q&&r&&l&&(te=Xl),Q&&r&&d&&(te=Ql),(Q&&!r&&y||!Q&&b&&!r&&y)&&(te=Zl);var ve=_e(te);te&&(t||ve[Or])?(F(te),ze()):F(Hn)},[r]),C.useEffect(function(){(B===Xl&&!l||B===Ql&&!d||B===Zl&&!y)&&F(Hn)},[l,d,y]),C.useEffect(function(){return function(){k.current=!1,clearTimeout($.current)}},[]);var ye=C.useRef(!1);C.useEffect(function(){P&&(ye.current=!0),P!==void 0&&B===Hn&&((ye.current||P)&&(A==null||A(P)),ye.current=!0)},[P,B]);var ie=L;return Ee[Or]&&fe===$a&&(ie=Y({transition:"none"},ie)),[B,fe,ie,P??r]}function jT(t){var r=t;nt(t)==="object"&&(r=t.transitionSupport);function a(u,d){return!!(u.motionName&&r&&d!==!1)}var o=C.forwardRef(function(u,d){var h=u.visible,l=h===void 0?!0:h,g=u.removeOnLeave,y=g===void 0?!0:g,v=u.forceRender,b=u.children,e=u.motionName,n=u.leavedClassName,s=u.eventProps,c=C.useContext(NS),f=c.motion,m=a(u,f),p=C.useRef(),_=C.useRef();function S(){try{return p.current instanceof HTMLElement?p.current:Ih(_.current)}catch{return null}}var x=$T(m,l,S,u),w=W(x,4),U=w[0],A=w[1],E=w[2],T=w[3],P=C.useRef(T);T&&(P.current=!0);var z=C.useCallback(function(O){p.current=O,ym(d,O)},[d]),R,D=Y(Y({},s),{},{visible:l});if(!b)R=null;else if(U===Hn)T?R=b(Y({},D),z):!y&&P.current&&n?R=b(Y(Y({},D),{},{className:n}),z):v||!y&&!n?R=b(Y(Y({},D),{},{style:{display:"none"}}),z):R=null;else{var B,F;A===Or?F="prepare":KS(A)?F="active":A===$a&&(F="start");var M=a_(e,"".concat(U,"-").concat(F));R=b(Y(Y({},D),{},{className:ht(a_(e,U),(B={},le(B,M,M&&F),le(B,e,typeof e=="string"),B)),style:E}),z)}if(C.isValidElement(R)&&Xc(R)){var I=R,L=I.ref;L||(R=C.cloneElement(R,{ref:z}))}return C.createElement(DT,{ref:_},R)});return o.displayName="CSSMotion",o}const Pm=jT(WS);var Yh="add",qh="keep",Kh="remove",mf="removed";function VT(t){var r;return t&&nt(t)==="object"&&"key"in t?r=t:r={key:t},Y(Y({},r),{},{key:String(r.key)})}function Xh(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return t.map(VT)}function WT(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=[],o=0,u=r.length,d=Xh(t),h=Xh(r);d.forEach(function(y){for(var v=!1,b=o;b<u;b+=1){var e=h[b];if(e.key===y.key){o<b&&(a=a.concat(h.slice(o,b).map(function(n){return Y(Y({},n),{},{status:Yh})})),o=b),a.push(Y(Y({},e),{},{status:qh})),o+=1,v=!0;break}}v||a.push(Y(Y({},y),{},{status:Kh}))}),o<u&&(a=a.concat(h.slice(o).map(function(y){return Y(Y({},y),{},{status:Yh})})));var l={};a.forEach(function(y){var v=y.key;l[v]=(l[v]||0)+1});var g=Object.keys(l).filter(function(y){return l[y]>1});return g.forEach(function(y){a=a.filter(function(v){var b=v.key,e=v.status;return b!==y||e!==Kh}),a.forEach(function(v){v.key===y&&(v.status=qh)})}),a}var YT=["component","children","onVisibleChanged","onAllRemoved"],qT=["status"],KT=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function XT(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Pm,a=function(o){fm(d,o);var u=hm(d);function d(){var h;pa(this,d);for(var l=arguments.length,g=new Array(l),y=0;y<l;y++)g[y]=arguments[y];return h=u.call.apply(u,[this].concat(g)),le(Ch(h),"state",{keyEntities:[]}),le(Ch(h),"removeKey",function(v){var b=h.state.keyEntities,e=b.map(function(n){return n.key!==v?n:Y(Y({},n),{},{status:mf})});return h.setState({keyEntities:e}),e.filter(function(n){var s=n.status;return s!==mf}).length}),h}return ma(d,[{key:"render",value:function(){var l=this,g=this.state.keyEntities,y=this.props,v=y.component,b=y.children,e=y.onVisibleChanged,n=y.onAllRemoved,s=ca(y,YT),c=v||C.Fragment,f={};return KT.forEach(function(m){f[m]=s[m],delete s[m]}),delete s.keys,C.createElement(c,s,g.map(function(m,p){var _=m.status,S=ca(m,qT),x=_===Yh||_===qh;return C.createElement(r,si({},f,{key:S.key,visible:x,eventProps:S,onVisibleChanged:function(U){if(e==null||e(U,{key:S.key}),!U){var A=l.removeKey(S.key);A===0&&n&&n()}}}),function(w,U){return b(Y(Y({},w),{},{index:p}),U)})}))}}],[{key:"getDerivedStateFromProps",value:function(l,g){var y=l.keys,v=g.keyEntities,b=Xh(y),e=WT(v,b);return{keyEntities:e.filter(function(n){var s=v.find(function(c){var f=c.key;return n.key===f});return!(s&&s.status===mf&&n.status===Kh)})}}}]),d}(C.Component);return le(a,"defaultProps",{component:"div"}),a}XT(WS);function QT(t){const{children:r}=t,[,a]=id(),{motion:o}=a,u=C.useRef(!1);return u.current=u.current||o===!1,u.current?C.createElement(kT,{motion:o},r):r}const ZT=()=>null;var JT=globalThis&&globalThis.__rest||function(t,r){var a={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&r.indexOf(o)<0&&(a[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(t);u<o.length;u++)r.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(t,o[u])&&(a[o[u]]=t[o[u]]);return a};const eP=["getTargetContainer","getPopupContainer","renderEmpty","pageHeader","input","pagination","form","select","button"],tP="ant";let XS;function rP(){return XS||tP}function iP(t){return Object.keys(t).some(r=>r.endsWith("Color"))}const nP=t=>{let{prefixCls:r,iconPrefixCls:a,theme:o}=t;r!==void 0&&(XS=r),o&&iP(o)&&CT(rP(),o)},aP=t=>{const{children:r,csp:a,autoInsertSpaceInButton:o,alert:u,anchor:d,form:h,locale:l,componentSize:g,direction:y,space:v,virtual:b,dropdownMatchSelectWidth:e,popupMatchSelectWidth:n,popupOverflow:s,legacyLocale:c,parentContext:f,iconPrefixCls:m,theme:p,componentDisabled:_,segmented:S,statistic:x,spin:w,calendar:U,carousel:A,cascader:E,collapse:T,typography:P,checkbox:z,descriptions:R,divider:D,drawer:B,skeleton:F,steps:M,image:I,layout:L,list:O,mentions:k,modal:$,progress:J,result:ae,slider:ce,breadcrumb:X,menu:ee,pagination:be,input:de,empty:_e,badge:Ee,radio:Xe,rate:ge,switch:ze,transfer:fe,avatar:Be,message:ye,tag:ie,table:Q,card:te,tabs:ve,timeline:Qe,timePicker:pt,upload:Lr,notification:Pt,tree:Tn,colorPicker:ui,datePicker:Ze,wave:It}=t,Ve=C.useCallback((Re,Ce)=>{const{prefixCls:ne}=t;if(Ce)return Ce;const he=ne||f.getPrefixCls("");return Re?`${he}-${Re}`:he},[f.getPrefixCls,t.prefixCls]),Ft=m||f.iconPrefixCls||LS,St=a||f.csp;FS(Ft,St);const Yt=IT(p,f.theme),lt={csp:St,autoInsertSpaceInButton:o,alert:u,anchor:d,locale:l||c,direction:y,space:v,virtual:b,popupMatchSelectWidth:n??e,popupOverflow:s,getPrefixCls:Ve,iconPrefixCls:Ft,theme:Yt,segmented:S,statistic:x,spin:w,calendar:U,carousel:A,cascader:E,collapse:T,typography:P,checkbox:z,descriptions:R,divider:D,drawer:B,skeleton:F,steps:M,image:I,input:de,layout:L,list:O,mentions:k,modal:$,progress:J,result:ae,slider:ce,breadcrumb:X,menu:ee,pagination:be,empty:_e,badge:Ee,radio:Xe,rate:ge,switch:ze,transfer:fe,avatar:Be,message:ye,tag:ie,table:Q,card:te,tabs:ve,timeline:Qe,timePicker:pt,upload:Lr,notification:Pt,tree:Tn,colorPicker:ui,datePicker:Ze,wave:It},Bt=Object.assign({},f);Object.keys(lt).forEach(Re=>{lt[Re]!==void 0&&(Bt[Re]=lt[Re])}),eP.forEach(Re=>{const Ce=t[Re];Ce&&(Bt[Re]=Ce)});const Yr=_m(()=>Bt,Bt,(Re,Ce)=>{const ne=Object.keys(Re),he=Object.keys(Ce);return ne.length!==he.length||ne.some(Je=>Re[Je]!==Ce[Je])}),Fi=C.useMemo(()=>({prefixCls:Ft,csp:St}),[Ft,St]);let Ue=C.createElement(C.Fragment,null,C.createElement(ZT,{dropdownMatchSelectWidth:e}),r);const ut=C.useMemo(()=>{var Re,Ce,ne,he;return xA(((Re=td.Form)===null||Re===void 0?void 0:Re.defaultValidateMessages)||{},((ne=(Ce=Yr.locale)===null||Ce===void 0?void 0:Ce.Form)===null||ne===void 0?void 0:ne.defaultValidateMessages)||{},((he=Yr.form)===null||he===void 0?void 0:he.validateMessages)||{},(h==null?void 0:h.validateMessages)||{})},[Yr,h==null?void 0:h.validateMessages]);Object.keys(ut).length>0&&(Ue=C.createElement(CA.Provider,{value:ut},Ue)),l&&(Ue=C.createElement(RA,{locale:l,_ANT_MARK__:LA},Ue)),(Ft||St)&&(Ue=C.createElement(yA.Provider,{value:Fi},Ue)),g&&(Ue=C.createElement(TT,{size:g},Ue)),Ue=C.createElement(QT,null,Ue);const ci=C.useMemo(()=>{const Re=Yt||{},{algorithm:Ce,token:ne,components:he}=Re,Je=JT(Re,["algorithm","token","components"]),vr=Ce&&(!Array.isArray(Ce)||Ce.length>0)?zh(Ce):TS,_r={};return Object.entries(he||{}).forEach(di=>{let[wt,fi]=di;const Ge=Object.assign({},fi);"algorithm"in Ge&&(Ge.algorithm===!0?Ge.theme=vr:(Array.isArray(Ge.algorithm)||typeof Ge.algorithm=="function")&&(Ge.theme=zh(Ge.algorithm)),delete Ge.algorithm),_r[wt]=Ge}),Object.assign(Object.assign({},Je),{theme:vr,token:Object.assign(Object.assign({},rd),ne),components:_r})},[Yt]);return p&&(Ue=C.createElement(IS.Provider,{value:ci},Ue)),_!==void 0&&(Ue=C.createElement(AT,{disabled:_},Ue)),C.createElement(ga.Provider,{value:Yr},Ue)},el=t=>{const r=C.useContext(ga),a=C.useContext(xS);return C.createElement(aP,Object.assign({parentContext:r,legacyLocale:a},t))};el.ConfigContext=ga;el.SizeContext=Am;el.config=nP;el.useConfig=PT;Object.defineProperty(el,"SizeContext",{get:()=>Am});function QS(t){var r;return t==null||(r=t.getRootNode)===null||r===void 0?void 0:r.call(t)}function oP(t){return QS(t)instanceof ShadowRoot}function Qh(t){return oP(t)?QS(t):null}const{isValidElement:Im}=Sc;function sP(t){return t&&Im(t)&&t.type===C.Fragment}function lP(t,r,a){return Im(t)?C.cloneElement(t,typeof a=="function"?a(t.props||{}):a):r}function ZS(t,r){return lP(t,t,r)}var q={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(r){var a=r.keyCode;if(r.altKey&&!r.ctrlKey||r.metaKey||a>=q.F1&&a<=q.F12)return!1;switch(a){case q.ALT:case q.CAPS_LOCK:case q.CONTEXT_MENU:case q.CTRL:case q.DOWN:case q.END:case q.ESC:case q.HOME:case q.INSERT:case q.LEFT:case q.MAC_FF_META:case q.META:case q.NUMLOCK:case q.NUM_CENTER:case q.PAGE_DOWN:case q.PAGE_UP:case q.PAUSE:case q.PRINT_SCREEN:case q.RIGHT:case q.SHIFT:case q.UP:case q.WIN_KEY:case q.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(r){if(r>=q.ZERO&&r<=q.NINE||r>=q.NUM_ZERO&&r<=q.NUM_MULTIPLY||r>=q.A&&r<=q.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&r===0)return!0;switch(r){case q.SPACE:case q.QUESTION_MARK:case q.NUM_PLUS:case q.NUM_MINUS:case q.NUM_PERIOD:case q.NUM_DIVISION:case q.SEMICOLON:case q.DASH:case q.EQUALS:case q.COMMA:case q.PERIOD:case q.SLASH:case q.APOSTROPHE:case q.SINGLE_QUOTE:case q.OPEN_SQUARE_BRACKET:case q.BACKSLASH:case q.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};const uP=(t,r,a)=>a!==void 0?a:`${t}-${r}`,cP=function(t){if(!t)return!1;if(t instanceof Element){if(t.offsetParent)return!0;if(t.getBBox){var r=t.getBBox(),a=r.width,o=r.height;if(a||o)return!0}if(t.getBoundingClientRect){var u=t.getBoundingClientRect(),d=u.width,h=u.height;if(d||h)return!0}}return!1};globalThis&&globalThis.__rest;const dP=C.createContext(null),fP=t=>{let{children:r}=t;return C.createElement(dP.Provider,{value:null},r)};var JS=C.createContext(null),o_=[];function hP(t,r){var a=C.useState(function(){if(!rr())return null;var s=document.createElement("div");return s}),o=W(a,1),u=o[0],d=C.useRef(!1),h=C.useContext(JS),l=C.useState(o_),g=W(l,2),y=g[0],v=g[1],b=h||(d.current?void 0:function(s){v(function(c){var f=[s].concat(st(c));return f})});function e(){u.parentElement||document.body.appendChild(u),d.current=!0}function n(){var s;(s=u.parentElement)===null||s===void 0||s.removeChild(u),d.current=!1}return Gt(function(){return t?h?h(e):e():n(),n},[t]),Gt(function(){y.length&&(y.forEach(function(s){return s()}),v(o_))},[y]),[u,b]}var gf;function pP(t){if(typeof document>"u")return 0;if(t||gf===void 0){var r=document.createElement("div");r.style.width="100%",r.style.height="200px";var a=document.createElement("div"),o=a.style;o.position="absolute",o.top="0",o.left="0",o.pointerEvents="none",o.visibility="hidden",o.width="200px",o.height="150px",o.overflow="hidden",a.appendChild(r),document.body.appendChild(a);var u=r.offsetWidth;a.style.overflow="scroll";var d=r.offsetWidth;u===d&&(d=a.clientWidth),document.body.removeChild(a),gf=u-d}return gf}function s_(t){var r=t.match(/^(.*)px$/),a=Number(r==null?void 0:r[1]);return Number.isNaN(a)?pP():a}function mP(t){if(typeof document>"u"||!t||!(t instanceof Element))return{width:0,height:0};var r=getComputedStyle(t,"::-webkit-scrollbar"),a=r.width,o=r.height;return{width:s_(a),height:s_(o)}}function gP(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var vP="rc-util-locker-".concat(Date.now()),l_=0;function _P(t){var r=!!t,a=C.useState(function(){return l_+=1,"".concat(vP,"_").concat(l_)}),o=W(a,1),u=o[0];Gt(function(){if(r){var d=mP(document.body).width,h=gP();Rs(`
html body {
  overflow-y: hidden;
  `.concat(h?"width: calc(100% - ".concat(d,"px);"):"",`
}`),u)}else nc(u);return function(){nc(u)}},[r,u])}var u_=!1;function yP(t){return typeof t=="boolean"&&(u_=t),u_}var c_=function(r){return r===!1?!1:!rr()||!r?null:typeof r=="string"?document.querySelector(r):typeof r=="function"?r():r},ew=C.forwardRef(function(t,r){var a=t.open,o=t.autoLock,u=t.getContainer;t.debug;var d=t.autoDestroy,h=d===void 0?!0:d,l=t.children,g=C.useState(a),y=W(g,2),v=y[0],b=y[1],e=v||a;C.useEffect(function(){(h||a)&&b(a)},[a,h]);var n=C.useState(function(){return c_(u)}),s=W(n,2),c=s[0],f=s[1];C.useEffect(function(){var P=c_(u);f(P??null)});var m=hP(e&&!c),p=W(m,2),_=p[0],S=p[1],x=c??_;_P(o&&a&&rr()&&(x===_||x===document.body));var w=null;if(l&&Xc(l)&&r){var U=l;w=U.ref}var A=Wb(w,r);if(!e||!rr()||c===void 0)return null;var E=x===!1||yP(),T=l;return r&&(T=C.cloneElement(l,{ref:A})),C.createElement(JS.Provider,{value:S},E?T:Js.createPortal(T,x))});function bP(){var t=Y({},Sc);return t.useId}var d_=0;function SP(t){var r=C.useState("ssr-id"),a=W(r,2),o=a[0],u=a[1],d=bP(),h=d==null?void 0:d();return C.useEffect(function(){if(!d){var l=d_;d_+=1,u("rc_unique_".concat(l))}},[]),t||h||o}const wP=t=>({animationDuration:t,animationFillMode:"both"}),xP=t=>({animationDuration:t,animationFillMode:"both"}),EP=function(t,r,a,o){const d=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${d}${t}-enter,
      ${d}${t}-appear
    `]:Object.assign(Object.assign({},wP(o)),{animationPlayState:"paused"}),[`${d}${t}-leave`]:Object.assign(Object.assign({},xP(o)),{animationPlayState:"paused"}),[`
      ${d}${t}-enter${t}-enter-active,
      ${d}${t}-appear${t}-appear-active
    `]:{animationName:r,animationPlayState:"running"},[`${d}${t}-leave${t}-leave-active`]:{animationName:a,animationPlayState:"running",pointerEvents:"none"}}},UP=new Dr("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),CP=new Dr("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),f_=new Dr("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),h_=new Dr("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),AP=new Dr("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),TP=new Dr("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),PP=new Dr("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),IP=new Dr("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),BP=new Dr("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),kP=new Dr("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),DP=new Dr("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),LP=new Dr("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),zP={zoom:{inKeyframes:UP,outKeyframes:CP},"zoom-big":{inKeyframes:f_,outKeyframes:h_},"zoom-big-fast":{inKeyframes:f_,outKeyframes:h_},"zoom-left":{inKeyframes:PP,outKeyframes:IP},"zoom-right":{inKeyframes:BP,outKeyframes:kP},"zoom-up":{inKeyframes:AP,outKeyframes:TP},"zoom-down":{inKeyframes:DP,outKeyframes:LP}},RP=(t,r)=>{const{antCls:a}=t,o=`${a}-${r}`,{inKeyframes:u,outKeyframes:d}=zP[r];return[EP(o,u,d,r==="zoom-big-fast"?t.motionDurationFast:t.motionDurationMid),{[`
        ${o}-enter,
        ${o}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:t.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${o}-leave`]:{animationTimingFunction:t.motionEaseInOutCirc}}]},FP=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(t==null?void 0:t.substr(0,4))};var p_=C.createContext(null);function m_(t){return t?Array.isArray(t)?t:[t]:[]}function MP(t,r,a,o){return C.useMemo(function(){var u=m_(a??r),d=m_(o??r),h=new Set(u),l=new Set(d);return t&&(h.has("hover")&&(h.delete("hover"),h.add("click")),l.has("hover")&&(l.delete("hover"),l.add("click"))),[h,l]},[t,r,a,o])}function OP(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0;return a?t[0]===r[0]:t[0]===r[0]&&t[1]===r[1]}function NP(t,r,a,o){for(var u=a.points,d=Object.keys(t),h=0;h<d.length;h+=1){var l,g=d[h];if(OP((l=t[g])===null||l===void 0?void 0:l.points,u,o))return"".concat(r,"-placement-").concat(g)}return""}function g_(t,r,a,o){return r||(a?{motionName:"".concat(t,"-").concat(a)}:o?{motionName:o}:null)}function tl(t){return t.ownerDocument.defaultView}function Zh(t){for(var r=[],a=t==null?void 0:t.parentElement,o=["hidden","scroll","clip","auto"];a;){var u=tl(a).getComputedStyle(a),d=u.overflowX,h=u.overflowY,l=u.overflow;[d,h,l].some(function(g){return o.includes(g)})&&r.push(a),a=a.parentElement}return r}function Ns(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(t)?r:t}function Go(t){return Ns(parseFloat(t),0)}function v_(t,r){var a=Y({},t);return(r||[]).forEach(function(o){if(!(o instanceof HTMLBodyElement||o instanceof HTMLHtmlElement)){var u=tl(o).getComputedStyle(o),d=u.overflow,h=u.overflowClipMargin,l=u.borderTopWidth,g=u.borderBottomWidth,y=u.borderLeftWidth,v=u.borderRightWidth,b=o.getBoundingClientRect(),e=o.offsetHeight,n=o.clientHeight,s=o.offsetWidth,c=o.clientWidth,f=Go(l),m=Go(g),p=Go(y),_=Go(v),S=Ns(Math.round(b.width/s*1e3)/1e3),x=Ns(Math.round(b.height/e*1e3)/1e3),w=(s-c-p-_)*S,U=(e-n-f-m)*x,A=f*x,E=m*x,T=p*S,P=_*S,z=0,R=0;if(d==="clip"){var D=Go(h);z=D*S,R=D*x}var B=b.x+T-z,F=b.y+A-R,M=B+b.width+2*z-T-P-w,I=F+b.height+2*R-A-E-U;a.left=Math.max(a.left,B),a.top=Math.max(a.top,F),a.right=Math.min(a.right,M),a.bottom=Math.min(a.bottom,I)}}),a}function __(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a="".concat(r),o=a.match(/^(.*)\%$/);return o?t*(parseFloat(o[1])/100):parseFloat(a)}function y_(t,r){var a=r||[],o=W(a,2),u=o[0],d=o[1];return[__(t.width,u),__(t.height,d)]}function b_(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[t[0],t[1]]}function xa(t,r){var a=r[0],o=r[1],u,d;return a==="t"?d=t.y:a==="b"?d=t.y+t.height:d=t.y+t.height/2,o==="l"?u=t.x:o==="r"?u=t.x+t.width:u=t.x+t.width/2,{x:u,y:d}}function Wi(t,r){var a={t:"b",b:"t",l:"r",r:"l"};return t.map(function(o,u){return u===r?a[o]||"c":o}).join("")}function HP(t,r,a,o,u,d,h){var l=C.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:u[o]||{}}),g=W(l,2),y=g[0],v=g[1],b=C.useRef(0),e=C.useMemo(function(){return r?Zh(r):[]},[r]),n=C.useRef({}),s=function(){n.current={}};t||s();var c=Ei(function(){if(r&&a&&t){let ir=function(Io,gi){var Rn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Q,xl=L.x+Io,El=L.y+gi,Cd=xl+be,Ad=El+ee,V=Math.max(xl,Rn.left),oe=Math.max(El,Rn.top),$e=Math.min(Cd,Rn.right),rt=Math.min(Ad,Rn.bottom);return Math.max(0,($e-V)*(rt-oe))},zn=function(){Ae=L.y+he,pe=Ae+ee,Z=L.x+ne,Fe=Z+be};var Ln=ir,ug=zn,p,_,S=r,x=S.ownerDocument,w=tl(S),U=w.getComputedStyle(S),A=U.width,E=U.height,T=U.position,P=S.style.left,z=S.style.top,R=S.style.right,D=S.style.bottom,B=Y(Y({},u[o]),d),F=x.createElement("div");(p=S.parentElement)===null||p===void 0||p.appendChild(F),F.style.left="".concat(S.offsetLeft,"px"),F.style.top="".concat(S.offsetTop,"px"),F.style.position=T,F.style.height="".concat(S.offsetHeight,"px"),F.style.width="".concat(S.offsetWidth,"px"),S.style.left="0",S.style.top="0",S.style.right="auto",S.style.bottom="auto";var M;if(Array.isArray(a))M={x:a[0],y:a[1],width:0,height:0};else{var I=a.getBoundingClientRect();M={x:I.x,y:I.y,width:I.width,height:I.height}}var L=S.getBoundingClientRect(),O=x.documentElement,k=O.clientWidth,$=O.clientHeight,J=O.scrollWidth,ae=O.scrollHeight,ce=O.scrollTop,X=O.scrollLeft,ee=L.height,be=L.width,de=M.height,_e=M.width,Ee={left:0,top:0,right:k,bottom:$},Xe={left:-X,top:-ce,right:J-X,bottom:ae-ce},ge=B.htmlRegion,ze="visible",fe="visibleFirst";ge!=="scroll"&&ge!==fe&&(ge=ze);var Be=ge===fe,ye=v_(Xe,e),ie=v_(Ee,e),Q=ge===ze?ie:ye,te=Be?ie:Q;S.style.left="auto",S.style.top="auto",S.style.right="0",S.style.bottom="0";var ve=S.getBoundingClientRect();S.style.left=P,S.style.top=z,S.style.right=R,S.style.bottom=D,(_=S.parentElement)===null||_===void 0||_.removeChild(F);var Qe=Ns(Math.round(be/parseFloat(A)*1e3)/1e3),pt=Ns(Math.round(ee/parseFloat(E)*1e3)/1e3);if(Qe===0||pt===0||tc(a)&&!cP(a))return;var Lr=B.offset,Pt=B.targetOffset,Tn=y_(L,Lr),ui=W(Tn,2),Ze=ui[0],It=ui[1],Ve=y_(M,Pt),Ft=W(Ve,2),St=Ft[0],Yt=Ft[1];M.x-=St,M.y-=Yt;var lt=B.points||[],Bt=W(lt,2),Yr=Bt[0],Fi=Bt[1],Ue=b_(Fi),ut=b_(Yr),ci=xa(M,Ue),Re=xa(L,ut),Ce=Y({},B),ne=ci.x-Re.x+Ze,he=ci.y-Re.y+It,Je=ir(ne,he),vr=ir(ne,he,ie),_r=xa(M,["t","l"]),di=xa(L,["t","l"]),wt=xa(M,["b","r"]),fi=xa(L,["b","r"]),Ge=B.overflow||{},Pn=Ge.adjustX,In=Ge.adjustY,Bn=Ge.shiftX,Mi=Ge.shiftY,Oi=function(gi){return typeof gi=="boolean"?gi:gi>=0},Ae,pe,Z,Fe;zn();var De=Oi(In),qt=ut[0]===Ue[0];if(De&&ut[0]==="t"&&(pe>te.bottom||n.current.bt)){var Mt=he;qt?Mt-=ee-de:Mt=_r.y-fi.y-It;var We=ir(ne,Mt),hi=ir(ne,Mt,ie);We>Je||We===Je&&(!Be||hi>=vr)?(n.current.bt=!0,he=Mt,It=-It,Ce.points=[Wi(ut,0),Wi(Ue,0)]):n.current.bt=!1}if(De&&ut[0]==="b"&&(Ae<te.top||n.current.tb)){var qr=he;qt?qr+=ee-de:qr=wt.y-di.y-It;var kn=ir(ne,qr),pi=ir(ne,qr,ie);kn>Je||kn===Je&&(!Be||pi>=vr)?(n.current.tb=!0,he=qr,It=-It,Ce.points=[Wi(ut,0),Wi(Ue,0)]):n.current.tb=!1}var _a=Oi(Pn),ml=ut[1]===Ue[1];if(_a&&ut[1]==="l"&&(Fe>te.right||n.current.rl)){var Dn=ne;ml?Dn-=be-_e:Dn=_r.x-fi.x-Ze;var gl=ir(Dn,he),md=ir(Dn,he,ie);gl>Je||gl===Je&&(!Be||md>=vr)?(n.current.rl=!0,ne=Dn,Ze=-Ze,Ce.points=[Wi(ut,1),Wi(Ue,1)]):n.current.rl=!1}if(_a&&ut[1]==="r"&&(Z<te.left||n.current.lr)){var Kr=ne;ml?Kr+=be-_e:Kr=wt.x-di.x-Ze;var ya=ir(Kr,he),gd=ir(Kr,he,ie);ya>Je||ya===Je&&(!Be||gd>=vr)?(n.current.lr=!0,ne=Kr,Ze=-Ze,Ce.points=[Wi(ut,1),Wi(Ue,1)]):n.current.lr=!1}zn();var Ni=Bn===!0?0:Bn;typeof Ni=="number"&&(Z<ie.left&&(ne-=Z-ie.left-Ze,M.x+_e<ie.left+Ni&&(ne+=M.x-ie.left+_e-Ni)),Fe>ie.right&&(ne-=Fe-ie.right-Ze,M.x>ie.right-Ni&&(ne+=M.x-ie.right+Ni)));var Xr=Mi===!0?0:Mi;typeof Xr=="number"&&(Ae<ie.top&&(he-=Ae-ie.top-It,M.y+de<ie.top+Xr&&(he+=M.y-ie.top+de-Xr)),pe>ie.bottom&&(he-=pe-ie.bottom-It,M.y>ie.bottom-Xr&&(he+=M.y-ie.bottom+Xr)));var mi=L.x+ne,vl=mi+be,Hi=L.y+he,Gi=Hi+ee,_l=M.x,vd=_l+_e,yl=M.y,bl=yl+de,_d=Math.max(mi,_l),yd=Math.min(vl,vd),bd=(_d+yd)/2,Sl=bd-mi,Sd=Math.max(Hi,yl),wd=Math.min(Gi,bl),wl=(Sd+wd)/2,xd=wl-Hi;h==null||h(r,Ce);var Ed=ve.right-L.x-(ne+L.width),Ud=ve.bottom-L.y-(he+L.height);v({ready:!0,offsetX:ne/Qe,offsetY:he/pt,offsetR:Ed/Qe,offsetB:Ud/pt,arrowX:Sl/Qe,arrowY:xd/pt,scaleX:Qe,scaleY:pt,align:Ce})}}),f=function(){b.current+=1;var _=b.current;Promise.resolve().then(function(){b.current===_&&c()})},m=function(){v(function(_){return Y(Y({},_),{},{ready:!1})})};return Gt(m,[o]),Gt(function(){t||m()},[t]),[y.ready,y.offsetX,y.offsetY,y.offsetR,y.offsetB,y.arrowX,y.arrowY,y.scaleX,y.scaleY,y.align,f]}function GP(t,r,a,o,u){Gt(function(){if(t&&r&&a){let e=function(){o(),u()};var b=e,d=r,h=a,l=Zh(d),g=Zh(h),y=tl(h),v=new Set([y].concat(st(l),st(g)));return v.forEach(function(n){n.addEventListener("scroll",e,{passive:!0})}),y.addEventListener("resize",e,{passive:!0}),o(),function(){v.forEach(function(n){n.removeEventListener("scroll",e),y.removeEventListener("resize",e)})}}},[t,r,a])}function $P(t,r,a,o,u,d,h,l){var g=C.useRef(t),y=C.useRef(!1);g.current!==t&&(y.current=!0,g.current=t),C.useEffect(function(){var v=ua(function(){y.current=!1});return function(){ua.cancel(v)}},[t]),C.useEffect(function(){if(r&&o&&(!u||d)){var v=function(){var w=!1,U=function(T){var P=T.target;w=h(P)},A=function(T){var P=T.target;!y.current&&g.current&&!w&&!h(P)&&l(!1)};return[U,A]},b=v(),e=W(b,2),n=e[0],s=e[1],c=v(),f=W(c,2),m=f[0],p=f[1],_=tl(o);_.addEventListener("mousedown",n,!0),_.addEventListener("click",s,!0),_.addEventListener("contextmenu",s,!0);var S=Qh(a);return S&&(S.addEventListener("mousedown",m,!0),S.addEventListener("click",p,!0),S.addEventListener("contextmenu",p,!0)),function(){_.removeEventListener("mousedown",n,!0),_.removeEventListener("click",s,!0),_.removeEventListener("contextmenu",s,!0),S&&(S.removeEventListener("mousedown",m,!0),S.removeEventListener("click",p,!0),S.removeEventListener("contextmenu",p,!0))}}},[r,a,o,u,d])}function jP(t){var r=t.prefixCls,a=t.align,o=t.arrow,u=t.arrowPos,d=o||{},h=d.className,l=d.content,g=u.x,y=g===void 0?0:g,v=u.y,b=v===void 0?0:v,e=C.useRef();if(!a||!a.points)return null;var n={position:"absolute"};if(a.autoArrow!==!1){var s=a.points[0],c=a.points[1],f=s[0],m=s[1],p=c[0],_=c[1];f===p||!["t","b"].includes(f)?n.top=b:f==="t"?n.top=0:n.bottom=0,m===_||!["l","r"].includes(m)?n.left=y:m==="l"?n.left=0:n.right=0}return C.createElement("div",{ref:e,className:ht("".concat(r,"-arrow"),h),style:n},l)}function VP(t){var r=t.prefixCls,a=t.open,o=t.zIndex,u=t.mask,d=t.motion;return u?C.createElement(Pm,si({},d,{motionAppear:!0,visible:a,removeOnLeave:!0}),function(h){var l=h.className;return C.createElement("div",{style:{zIndex:o},className:ht("".concat(r,"-mask"),l)})}):null}var WP=C.memo(function(t){var r=t.children;return r},function(t,r){return r.cache}),YP=C.forwardRef(function(t,r){var a=t.popup,o=t.className,u=t.prefixCls,d=t.style,h=t.target,l=t.onVisibleChanged,g=t.open,y=t.keepDom,v=t.onClick,b=t.mask,e=t.arrow,n=t.arrowPos,s=t.align,c=t.motion,f=t.maskMotion,m=t.forceRender,p=t.getPopupContainer,_=t.autoDestroy,S=t.portal,x=t.zIndex,w=t.onMouseEnter,U=t.onMouseLeave,A=t.onPointerEnter,E=t.ready,T=t.offsetX,P=t.offsetY,z=t.offsetR,R=t.offsetB,D=t.onAlign,B=t.onPrepare,F=t.stretch,M=t.targetWidth,I=t.targetHeight,L=typeof a=="function"?a():a,O=g||y,k=(p==null?void 0:p.length)>0,$=C.useState(!p||!k),J=W($,2),ae=J[0],ce=J[1];if(Gt(function(){!ae&&k&&h&&ce(!0)},[ae,k,h]),!ae)return null;var X="auto",ee={left:"-1000vw",top:"-1000vh",right:X,bottom:X};if(E||!g){var be=s.points,de=s._experimental,_e=de==null?void 0:de.dynamicInset,Ee=_e&&be[0][1]==="r",Xe=_e&&be[0][0]==="b";Ee?(ee.right=z,ee.left=X):(ee.left=T,ee.right=X),Xe?(ee.bottom=R,ee.top=X):(ee.top=P,ee.bottom=X)}var ge={};return F&&(F.includes("height")&&I?ge.height=I:F.includes("minHeight")&&I&&(ge.minHeight=I),F.includes("width")&&M?ge.width=M:F.includes("minWidth")&&M&&(ge.minWidth=M)),g||(ge.pointerEvents="none"),C.createElement(S,{open:m||O,getContainer:p&&function(){return p(h)},autoDestroy:_},C.createElement(VP,{prefixCls:u,open:g,zIndex:x,mask:b,motion:f}),C.createElement(bm,{onResize:D,disabled:!g},function(ze){return C.createElement(Pm,si({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:m,leavedClassName:"".concat(u,"-hidden")},c,{onAppearPrepare:B,onEnterPrepare:B,visible:g,onVisibleChanged:function(Be){var ye;c==null||(ye=c.onVisibleChanged)===null||ye===void 0||ye.call(c,Be),l(Be)}}),function(fe,Be){var ye=fe.className,ie=fe.style,Q=ht(u,ye,o);return C.createElement("div",{ref:Kc(ze,r,Be),className:Q,style:Y(Y(Y(Y({"--arrow-x":"".concat(n.x||0,"px"),"--arrow-y":"".concat(n.y||0,"px")},ee),ge),ie),{},{boxSizing:"border-box",zIndex:x},d),onMouseEnter:w,onMouseLeave:U,onPointerEnter:A,onClick:v},e&&C.createElement(jP,{prefixCls:u,arrow:e,arrowPos:n,align:s}),C.createElement(WP,{cache:!g},L))})}))}),qP=C.forwardRef(function(t,r){var a=t.children,o=t.getTriggerDOMNode,u=Xc(a),d=C.useCallback(function(l){ym(r,o?o(l):l)},[o]),h=Wb(d,a.ref);return u?C.cloneElement(a,{ref:h}):a}),KP=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function XP(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ew,r=C.forwardRef(function(a,o){var u=a.prefixCls,d=u===void 0?"rc-trigger-popup":u,h=a.children,l=a.action,g=l===void 0?"hover":l,y=a.showAction,v=a.hideAction,b=a.popupVisible,e=a.defaultPopupVisible,n=a.onPopupVisibleChange,s=a.afterPopupVisibleChange,c=a.mouseEnterDelay,f=a.mouseLeaveDelay,m=f===void 0?.1:f,p=a.focusDelay,_=a.blurDelay,S=a.mask,x=a.maskClosable,w=x===void 0?!0:x,U=a.getPopupContainer,A=a.forceRender,E=a.autoDestroy,T=a.destroyPopupOnHide,P=a.popup,z=a.popupClassName,R=a.popupStyle,D=a.popupPlacement,B=a.builtinPlacements,F=B===void 0?{}:B,M=a.popupAlign,I=a.zIndex,L=a.stretch,O=a.getPopupClassNameFromAlign,k=a.alignPoint,$=a.onPopupClick,J=a.onPopupAlign,ae=a.arrow,ce=a.popupMotion,X=a.maskMotion,ee=a.popupTransitionName,be=a.popupAnimation,de=a.maskTransitionName,_e=a.maskAnimation,Ee=a.className,Xe=a.getTriggerDOMNode,ge=ca(a,KP),ze=E||T||!1,fe=C.useState(!1),Be=W(fe,2),ye=Be[0],ie=Be[1];Gt(function(){ie(FP())},[]);var Q=C.useRef({}),te=C.useContext(p_),ve=C.useMemo(function(){return{registerSubPopup:function(oe,$e){Q.current[oe]=$e,te==null||te.registerSubPopup(oe,$e)}}},[te]),Qe=SP(),pt=C.useState(null),Lr=W(pt,2),Pt=Lr[0],Tn=Lr[1],ui=Ei(function(V){tc(V)&&Pt!==V&&Tn(V),te==null||te.registerSubPopup(Qe,V)}),Ze=C.useState(null),It=W(Ze,2),Ve=It[0],Ft=It[1],St=Ei(function(V){tc(V)&&Ve!==V&&Ft(V)}),Yt=C.Children.only(h),lt=(Yt==null?void 0:Yt.props)||{},Bt={},Yr=Ei(function(V){var oe,$e,rt=Ve;return(rt==null?void 0:rt.contains(V))||((oe=Qh(rt))===null||oe===void 0?void 0:oe.host)===V||V===rt||(Pt==null?void 0:Pt.contains(V))||(($e=Qh(Pt))===null||$e===void 0?void 0:$e.host)===V||V===Pt||Object.values(Q.current).some(function(et){return(et==null?void 0:et.contains(V))||V===et})}),Fi=g_(d,ce,be,ee),Ue=g_(d,X,_e,de),ut=C.useState(e||!1),ci=W(ut,2),Re=ci[0],Ce=ci[1],ne=b??Re,he=Ei(function(V){b===void 0&&Ce(V)});Gt(function(){Ce(b||!1)},[b]);var Je=C.useRef(ne);Je.current=ne;var vr=Ei(function(V){Js.flushSync(function(){ne!==V&&(he(V),n==null||n(V))})}),_r=C.useRef(),di=function(){clearTimeout(_r.current)},wt=function(oe){var $e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;di(),$e===0?vr(oe):_r.current=setTimeout(function(){vr(oe)},$e*1e3)};C.useEffect(function(){return di},[]);var fi=C.useState(!1),Ge=W(fi,2),Pn=Ge[0],In=Ge[1];Gt(function(V){(!V||ne)&&In(!0)},[ne]);var Bn=C.useState(null),Mi=W(Bn,2),Oi=Mi[0],Ae=Mi[1],pe=C.useState([0,0]),Z=W(pe,2),Fe=Z[0],De=Z[1],qt=function(oe){De([oe.clientX,oe.clientY])},Mt=HP(ne,Pt,k?Fe:Ve,D,F,M,J),We=W(Mt,11),hi=We[0],qr=We[1],kn=We[2],pi=We[3],_a=We[4],ml=We[5],Dn=We[6],gl=We[7],md=We[8],Kr=We[9],ya=We[10],gd=MP(ye,g,y,v),Ni=W(gd,2),Xr=Ni[0],mi=Ni[1],vl=Xr.has("click"),Hi=mi.has("click")||mi.has("contextMenu"),Gi=Ei(function(){Pn||ya()}),_l=function(){Je.current&&k&&Hi&&wt(!1)};GP(ne,Ve,Pt,Gi,_l),Gt(function(){Gi()},[Fe,D]),Gt(function(){ne&&!(F!=null&&F[D])&&Gi()},[JSON.stringify(M)]);var vd=C.useMemo(function(){var V=NP(F,d,Kr,k);return ht(V,O==null?void 0:O(Kr))},[Kr,O,F,d,k]);C.useImperativeHandle(o,function(){return{forceAlign:Gi}});var yl=C.useState(0),bl=W(yl,2),_d=bl[0],yd=bl[1],bd=C.useState(0),Sl=W(bd,2),Sd=Sl[0],wd=Sl[1],wl=function(){if(L&&Ve){var oe=Ve.getBoundingClientRect();yd(oe.width),wd(oe.height)}},xd=function(){wl(),Gi()},Ed=function(oe){In(!1),ya(),s==null||s(oe)},Ud=function(){return new Promise(function(oe){wl(),Ae(function(){return oe})})};Gt(function(){Oi&&(ya(),Oi(),Ae(null))},[Oi]);function Ln(V,oe,$e,rt){Bt[V]=function(et){var Ul;rt==null||rt(et),wt(oe,$e);for(var Td=arguments.length,cg=new Array(Td>1?Td-1:0),Cl=1;Cl<Td;Cl++)cg[Cl-1]=arguments[Cl];(Ul=lt[V])===null||Ul===void 0||Ul.call.apply(Ul,[lt,et].concat(cg))}}(vl||Hi)&&(Bt.onClick=function(V){var oe;Je.current&&Hi?wt(!1):!Je.current&&vl&&(qt(V),wt(!0));for(var $e=arguments.length,rt=new Array($e>1?$e-1:0),et=1;et<$e;et++)rt[et-1]=arguments[et];(oe=lt.onClick)===null||oe===void 0||oe.call.apply(oe,[lt,V].concat(rt))}),$P(ne,Hi,Ve,Pt,S,w,Yr,wt);var ug=Xr.has("hover"),ir=mi.has("hover"),zn,Io;ug&&(Ln("onMouseEnter",!0,c,function(V){qt(V)}),Ln("onPointerEnter",!0,c,function(V){qt(V)}),zn=function(){(ne||Pn)&&wt(!0,c)},k&&(Bt.onMouseMove=function(V){var oe;(oe=lt.onMouseMove)===null||oe===void 0||oe.call(lt,V)})),ir&&(Ln("onMouseLeave",!1,m),Ln("onPointerLeave",!1,m),Io=function(){wt(!1,m)}),Xr.has("focus")&&Ln("onFocus",!0,p),mi.has("focus")&&Ln("onBlur",!1,_),Xr.has("contextMenu")&&(Bt.onContextMenu=function(V){var oe;Je.current&&mi.has("contextMenu")?wt(!1):(qt(V),wt(!0)),V.preventDefault();for(var $e=arguments.length,rt=new Array($e>1?$e-1:0),et=1;et<$e;et++)rt[et-1]=arguments[et];(oe=lt.onContextMenu)===null||oe===void 0||oe.call.apply(oe,[lt,V].concat(rt))}),Ee&&(Bt.className=ht(lt.className,Ee));var gi=Y(Y({},lt),Bt),Rn={},xl=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];xl.forEach(function(V){ge[V]&&(Rn[V]=function(){for(var oe,$e=arguments.length,rt=new Array($e),et=0;et<$e;et++)rt[et]=arguments[et];(oe=gi[V])===null||oe===void 0||oe.call.apply(oe,[gi].concat(rt)),ge[V].apply(ge,rt)})});var El=C.cloneElement(Yt,Y(Y({},gi),Rn)),Cd={x:ml,y:Dn},Ad=ae?Y({},ae!==!0?ae:{}):null;return C.createElement(C.Fragment,null,C.createElement(bm,{disabled:!ne,ref:St,onResize:xd},C.createElement(qP,{getTriggerDOMNode:Xe},El)),C.createElement(p_.Provider,{value:ve},C.createElement(YP,{portal:t,ref:ui,prefixCls:d,popup:P,className:ht(z,vd),style:R,target:Ve,onMouseEnter:zn,onMouseLeave:Io,onPointerEnter:zn,zIndex:I,open:ne,keepDom:Pn,onClick:$,mask:S,motion:Fi,maskMotion:Ue,onVisibleChanged:Ed,onPrepare:Ud,forceRender:A,autoDestroy:ze,getPopupContainer:U,align:Kr,arrow:Ad,arrowPos:Cd,ready:hi,offsetX:qr,offsetY:kn,offsetR:pi,offsetB:_a,onAlign:Gi,stretch:L,targetWidth:_d/gl,targetHeight:Sd/md})))});return r}const QP=XP(ew);var Ea={shiftX:64,adjustY:1},Ua={adjustX:1,shiftY:!0},yr=[0,0],ZP={left:{points:["cr","cl"],overflow:Ua,offset:[-4,0],targetOffset:yr},right:{points:["cl","cr"],overflow:Ua,offset:[4,0],targetOffset:yr},top:{points:["bc","tc"],overflow:Ea,offset:[0,-4],targetOffset:yr},bottom:{points:["tc","bc"],overflow:Ea,offset:[0,4],targetOffset:yr},topLeft:{points:["bl","tl"],overflow:Ea,offset:[0,-4],targetOffset:yr},leftTop:{points:["tr","tl"],overflow:Ua,offset:[-4,0],targetOffset:yr},topRight:{points:["br","tr"],overflow:Ea,offset:[0,-4],targetOffset:yr},rightTop:{points:["tl","tr"],overflow:Ua,offset:[4,0],targetOffset:yr},bottomRight:{points:["tr","br"],overflow:Ea,offset:[0,4],targetOffset:yr},rightBottom:{points:["bl","br"],overflow:Ua,offset:[4,0],targetOffset:yr},bottomLeft:{points:["tl","bl"],overflow:Ea,offset:[0,4],targetOffset:yr},leftBottom:{points:["br","bl"],overflow:Ua,offset:[-4,0],targetOffset:yr}};function tw(t){var r=t.children,a=t.prefixCls,o=t.id,u=t.overlayInnerStyle,d=t.className,h=t.style;return C.createElement("div",{className:ht("".concat(a,"-content"),d),style:h},C.createElement("div",{className:"".concat(a,"-inner"),id:o,role:"tooltip",style:u},typeof r=="function"?r():r))}var JP=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],eI=function(r,a){var o=r.overlayClassName,u=r.trigger,d=u===void 0?["hover"]:u,h=r.mouseEnterDelay,l=h===void 0?0:h,g=r.mouseLeaveDelay,y=g===void 0?.1:g,v=r.overlayStyle,b=r.prefixCls,e=b===void 0?"rc-tooltip":b,n=r.children,s=r.onVisibleChange,c=r.afterVisibleChange,f=r.transitionName,m=r.animation,p=r.motion,_=r.placement,S=_===void 0?"right":_,x=r.align,w=x===void 0?{}:x,U=r.destroyTooltipOnHide,A=U===void 0?!1:U,E=r.defaultVisible,T=r.getTooltipContainer,P=r.overlayInnerStyle;r.arrowContent;var z=r.overlay,R=r.id,D=r.showArrow,B=D===void 0?!0:D,F=ca(r,JP),M=C.useRef(null);C.useImperativeHandle(a,function(){return M.current});var I=Y({},F);"visible"in r&&(I.popupVisible=r.visible);var L=function(){return C.createElement(tw,{key:"content",prefixCls:e,id:R,overlayInnerStyle:P},z)};return C.createElement(QP,si({popupClassName:o,prefixCls:e,popup:L,action:d,builtinPlacements:ZP,popupPlacement:S,ref:M,popupAlign:w,getPopupContainer:T,onPopupVisibleChange:s,afterPopupVisibleChange:c,popupTransitionName:f,popupAnimation:m,popupMotion:p,defaultPopupVisible:E,autoDestroy:A,mouseLeaveDelay:y,popupStyle:v,mouseEnterDelay:l,arrow:B},I),n)};const tI=C.forwardRef(eI),rw=8;function iw(t){const r=rw,{contentRadius:a,limitVerticalRadius:o}=t,u=a>12?a+2:12;return{dropdownArrowOffset:u,dropdownArrowOffsetVertical:o?r:u}}function eu(t,r){return t?r:{}}function rI(t,r){const{componentCls:a,sizePopupArrow:o,borderRadiusXS:u,borderRadiusOuter:d,boxShadowPopoverArrow:h}=t,{colorBg:l,contentRadius:g=t.borderRadiusLG,limitVerticalRadius:y,arrowDistance:v=0,arrowPlacement:b={left:!0,right:!0,top:!0,bottom:!0}}=r,{dropdownArrowOffsetVertical:e,dropdownArrowOffset:n}=iw({contentRadius:g,limitVerticalRadius:y});return{[a]:Object.assign(Object.assign(Object.assign(Object.assign({[`${a}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},gT(o,u,d,l,h)),{"&:before":{background:l}})]},eu(!!b.top,{[[`&-placement-top ${a}-arrow`,`&-placement-topLeft ${a}-arrow`,`&-placement-topRight ${a}-arrow`].join(",")]:{bottom:v,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top ${a}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},[`&-placement-topLeft ${a}-arrow`]:{left:{_skip_check_:!0,value:n}},[`&-placement-topRight ${a}-arrow`]:{right:{_skip_check_:!0,value:n}}})),eu(!!b.bottom,{[[`&-placement-bottom ${a}-arrow`,`&-placement-bottomLeft ${a}-arrow`,`&-placement-bottomRight ${a}-arrow`].join(",")]:{top:v,transform:"translateY(-100%)"},[`&-placement-bottom ${a}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},[`&-placement-bottomLeft ${a}-arrow`]:{left:{_skip_check_:!0,value:n}},[`&-placement-bottomRight ${a}-arrow`]:{right:{_skip_check_:!0,value:n}}})),eu(!!b.left,{[[`&-placement-left ${a}-arrow`,`&-placement-leftTop ${a}-arrow`,`&-placement-leftBottom ${a}-arrow`].join(",")]:{right:{_skip_check_:!0,value:v},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left ${a}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop ${a}-arrow`]:{top:e},[`&-placement-leftBottom ${a}-arrow`]:{bottom:e}})),eu(!!b.right,{[[`&-placement-right ${a}-arrow`,`&-placement-rightTop ${a}-arrow`,`&-placement-rightBottom ${a}-arrow`].join(",")]:{left:{_skip_check_:!0,value:v},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right ${a}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop ${a}-arrow`]:{top:e},[`&-placement-rightBottom ${a}-arrow`]:{bottom:e}}))}}function iI(t,r,a,o){if(o===!1)return{adjustX:!1,adjustY:!1};const u=o&&typeof o=="object"?o:{},d={};switch(t){case"top":case"bottom":d.shiftX=r.dropdownArrowOffset*2+a;break;case"left":case"right":d.shiftY=r.dropdownArrowOffsetVertical*2+a;break}const h=Object.assign(Object.assign({},d),u);return h.shiftX||(h.adjustX=!0),h.shiftY||(h.adjustY=!0),h}const S_={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},nI={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},aI=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function oI(t){const{arrowWidth:r,autoAdjustOverflow:a,arrowPointAtCenter:o,offset:u,borderRadius:d,visibleFirst:h}=t,l=r/2,g={};return Object.keys(S_).forEach(y=>{const v=o&&nI[y]||S_[y],b=Object.assign(Object.assign({},v),{offset:[0,0]});switch(g[y]=b,aI.has(y)&&(b.autoArrow=!1),y){case"top":case"topLeft":case"topRight":b.offset[1]=-l-u;break;case"bottom":case"bottomLeft":case"bottomRight":b.offset[1]=l+u;break;case"left":case"leftTop":case"leftBottom":b.offset[0]=-l-u;break;case"right":case"rightTop":case"rightBottom":b.offset[0]=l+u;break}const e=iw({contentRadius:d,limitVerticalRadius:!0});if(o)switch(y){case"topLeft":case"bottomLeft":b.offset[0]=-e.dropdownArrowOffset-l;break;case"topRight":case"bottomRight":b.offset[0]=e.dropdownArrowOffset+l;break;case"leftTop":case"rightTop":b.offset[1]=-e.dropdownArrowOffset-l;break;case"leftBottom":case"rightBottom":b.offset[1]=e.dropdownArrowOffset+l;break}b.overflow=iI(y,e,r,a),h&&(b.htmlRegion="visibleFirst")}),g}const sI=t=>{const{componentCls:r,tooltipMaxWidth:a,tooltipColor:o,tooltipBg:u,tooltipBorderRadius:d,zIndexPopup:h,controlHeight:l,boxShadowSecondary:g,paddingSM:y,paddingXS:v,tooltipRadiusOuter:b}=t;return[{[r]:Object.assign(Object.assign(Object.assign(Object.assign({},zS(t)),{position:"absolute",zIndex:h,display:"block",width:"max-content",maxWidth:a,visibility:"visible",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","&-hidden":{display:"none"},"--antd-arrow-background-color":u,[`${r}-inner`]:{minWidth:l,minHeight:l,padding:`${y/2}px ${v}px`,color:o,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:u,borderRadius:d,boxShadow:g,boxSizing:"border-box"},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${r}-inner`]:{borderRadius:Math.min(d,rw)}},[`${r}-content`]:{position:"relative"}}),xT(t,(e,n)=>{let{darkColor:s}=n;return{[`&${r}-${e}`]:{[`${r}-inner`]:{backgroundColor:s},[`${r}-arrow`]:{"--antd-arrow-background-color":s}}}})),{"&-rtl":{direction:"rtl"}})},rI(Os(t,{borderRadiusOuter:b}),{colorBg:"var(--antd-arrow-background-color)",contentRadius:d,limitVerticalRadius:!0}),{[`${r}-pure`]:{position:"relative",maxWidth:"none",margin:t.sizePopupArrow}}]},nw=(t,r)=>MS("Tooltip",o=>{if(r===!1)return[];const{borderRadius:u,colorTextLightSolid:d,colorBgDefault:h,borderRadiusOuter:l}=o,g=Os(o,{tooltipMaxWidth:250,tooltipColor:d,tooltipBorderRadius:u,tooltipBg:h,tooltipRadiusOuter:l>4?4:l});return[sI(g),RP(o,"zoom-big-fast")]},o=>{let{zIndexPopupBase:u,colorBgSpotlight:d}=o;return{zIndexPopup:u+70,colorBgDefault:d}},{resetStyle:!1})(t),lI=oc.map(t=>`${t}-inverse`);function uI(t){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat(st(lI),st(oc)).includes(t):oc.includes(t)}function aw(t,r){const a=uI(r),o=ht({[`${t}-${r}`]:r&&a}),u={},d={};return r&&!a&&(u.background=r,d["--antd-arrow-background-color"]=r),{className:o,overlayStyle:u,arrowStyle:d}}const cI=t=>{const{prefixCls:r,className:a,placement:o="top",title:u,color:d,overlayInnerStyle:h}=t,{getPrefixCls:l}=C.useContext(ga),g=l("tooltip",r),[y,v]=nw(g,!0),b=aw(g,d),e=b.arrowStyle,n=Object.assign(Object.assign({},h),b.overlayStyle),s=ht(v,g,`${g}-pure`,`${g}-placement-${o}`,a,b.className);return y(C.createElement("div",{className:s,style:e},C.createElement("div",{className:`${g}-arrow`}),C.createElement(tw,Object.assign({},t,{className:v,prefixCls:g,overlayInnerStyle:n}),u)))},dI=cI;var fI=globalThis&&globalThis.__rest||function(t,r){var a={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&r.indexOf(o)<0&&(a[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(t);u<o.length;u++)r.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(t,o[u])&&(a[o[u]]=t[o[u]]);return a};const hI=(t,r)=>{const a={},o=Object.assign({},t);return r.forEach(u=>{t&&u in t&&(a[u]=t[u],delete o[u])}),{picked:a,omitted:o}};function pI(t,r){const a=t.type;if((a.__ANT_BUTTON===!0||t.type==="button")&&t.props.disabled||a.__ANT_SWITCH===!0&&(t.props.disabled||t.props.loading)||a.__ANT_RADIO===!0&&t.props.disabled){const{picked:o,omitted:u}=hI(t.props.style,["position","left","right","top","bottom","float","display","zIndex"]),d=Object.assign(Object.assign({display:"inline-block"},o),{cursor:"not-allowed",width:t.props.block?"100%":void 0}),h=Object.assign(Object.assign({},u),{pointerEvents:"none"}),l=ZS(t,{style:h,className:null});return C.createElement("span",{style:d,className:ht(t.props.className,`${r}-disabled-compatible-wrapper`)},l)}return t}const ow=C.forwardRef((t,r)=>{var a,o;const{prefixCls:u,openClassName:d,getTooltipContainer:h,overlayClassName:l,color:g,overlayInnerStyle:y,children:v,afterOpenChange:b,afterVisibleChange:e,destroyTooltipOnHide:n,arrow:s=!0,title:c,overlay:f,builtinPlacements:m,arrowPointAtCenter:p=!1,autoAdjustOverflow:_=!0}=t,S=!!s,[,x]=id(),{getPopupContainer:w,getPrefixCls:U,direction:A}=C.useContext(ga),E=UA(),T=C.useRef(null),P=()=>{var Q;(Q=T.current)===null||Q===void 0||Q.forceAlign()};C.useImperativeHandle(r,()=>({forceAlign:P,forcePopupAlign:()=>{E.deprecated(!1,"forcePopupAlign","forceAlign"),P()}}));const[z,R]=DS(!1,{value:(a=t.open)!==null&&a!==void 0?a:t.visible,defaultValue:(o=t.defaultOpen)!==null&&o!==void 0?o:t.defaultVisible}),D=!c&&!f&&c!==0,B=Q=>{var te,ve;R(D?!1:Q),D||((te=t.onOpenChange)===null||te===void 0||te.call(t,Q),(ve=t.onVisibleChange)===null||ve===void 0||ve.call(t,Q))},F=C.useMemo(()=>{var Q,te;let ve=p;return typeof s=="object"&&(ve=(te=(Q=s.pointAtCenter)!==null&&Q!==void 0?Q:s.arrowPointAtCenter)!==null&&te!==void 0?te:p),m||oI({arrowPointAtCenter:ve,autoAdjustOverflow:_,arrowWidth:S?x.sizePopupArrow:0,borderRadius:x.borderRadius,offset:x.marginXXS,visibleFirst:!0})},[p,s,m,x]),M=C.useMemo(()=>c===0?c:f||c||"",[f,c]),I=C.createElement(fP,null,typeof M=="function"?M():M),{getPopupContainer:L,placement:O="top",mouseEnterDelay:k=.1,mouseLeaveDelay:$=.1,overlayStyle:J,rootClassName:ae}=t,ce=fI(t,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),X=U("tooltip",u),ee=U(),be=t["data-popover-inject"];let de=z;!("open"in t)&&!("visible"in t)&&D&&(de=!1);const _e=pI(Im(v)&&!sP(v)?v:C.createElement("span",null,v),X),Ee=_e.props,Xe=!Ee.className||typeof Ee.className=="string"?ht(Ee.className,d||`${X}-open`):Ee.className,[ge,ze]=nw(X,!be),fe=aw(X,g),Be=fe.arrowStyle,ye=Object.assign(Object.assign({},y),fe.overlayStyle),ie=ht(l,{[`${X}-rtl`]:A==="rtl"},fe.className,ae,ze);return ge(C.createElement(tI,Object.assign({},ce,{showArrow:S,placement:O,mouseEnterDelay:k,mouseLeaveDelay:$,prefixCls:X,overlayClassName:ie,overlayStyle:Object.assign(Object.assign({},Be),J),getTooltipContainer:L||h||w,ref:T,builtinPlacements:F,overlay:I,visible:de,onVisibleChange:B,afterVisibleChange:b??e,overlayInnerStyle:ye,arrowContent:C.createElement("span",{className:`${X}-arrow-content`}),motion:{motionName:uP(ee,"zoom-big-fast",t.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!n}),de?ZS(_e,{className:Xe}):_e))});ow._InternalPanelDoNotUseOrYouWillBeFired=dI;const mI=ow;var va=C.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0,keyboard:!0});function Jh(t,r,a){return(t-r)/(a-r)}function Bm(t,r,a,o){var u=Jh(r,a,o),d={};switch(t){case"rtl":d.right="".concat(u*100,"%"),d.transform="translateX(50%)";break;case"btt":d.bottom="".concat(u*100,"%"),d.transform="translateY(50%)";break;case"ttb":d.top="".concat(u*100,"%"),d.transform="translateY(-50%)";break;default:d.left="".concat(u*100,"%"),d.transform="translateX(-50%)";break}return d}function Va(t,r){return Array.isArray(t)?t[r]:t}var gI=["prefixCls","value","valueIndex","onStartMove","style","render","dragging","onOffsetChange"],vI=C.forwardRef(function(t,r){var a,o,u=t.prefixCls,d=t.value,h=t.valueIndex,l=t.onStartMove,g=t.style,y=t.render,v=t.dragging,b=t.onOffsetChange,e=ca(t,gI),n=C.useContext(va),s=n.min,c=n.max,f=n.direction,m=n.disabled,p=n.keyboard,_=n.range,S=n.tabIndex,x=n.ariaLabelForHandle,w=n.ariaLabelledByForHandle,U=n.ariaValueTextFormatterForHandle,A="".concat(u,"-handle"),E=function(D){m||l(D,h)},T=function(D){if(!m&&p){var B=null;switch(D.which||D.keyCode){case q.LEFT:B=f==="ltr"||f==="btt"?-1:1;break;case q.RIGHT:B=f==="ltr"||f==="btt"?1:-1;break;case q.UP:B=f!=="ttb"?1:-1;break;case q.DOWN:B=f!=="ttb"?-1:1;break;case q.HOME:B="min";break;case q.END:B="max";break;case q.PAGE_UP:B=2;break;case q.PAGE_DOWN:B=-2;break}B!==null&&(D.preventDefault(),b(B,h))}},P=Bm(f,d,s,c),z=C.createElement("div",si({ref:r,className:ht(A,(a={},le(a,"".concat(A,"-").concat(h+1),_),le(a,"".concat(A,"-dragging"),v),a)),style:Y(Y({},P),g),onMouseDown:E,onTouchStart:E,onKeyDown:T,tabIndex:m?null:Va(S,h),role:"slider","aria-valuemin":s,"aria-valuemax":c,"aria-valuenow":d,"aria-disabled":m,"aria-label":Va(x,h),"aria-labelledby":Va(w,h),"aria-valuetext":(o=Va(U,h))===null||o===void 0?void 0:o(d),"aria-orientation":f==="ltr"||f==="rtl"?"horizontal":"vertical"},e));return y&&(z=y(z,{index:h,prefixCls:u,value:d,dragging:v})),z}),_I=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","draggingIndex"],yI=C.forwardRef(function(t,r){var a=t.prefixCls,o=t.style,u=t.onStartMove,d=t.onOffsetChange,h=t.values,l=t.handleRender,g=t.draggingIndex,y=ca(t,_I),v=C.useRef({});return C.useImperativeHandle(r,function(){return{focus:function(e){var n;(n=v.current[e])===null||n===void 0||n.focus()}}}),C.createElement(C.Fragment,null,h.map(function(b,e){return C.createElement(vI,si({ref:function(s){s?v.current[e]=s:delete v.current[e]},dragging:g===e,prefixCls:a,style:Va(o,e),key:e,value:b,valueIndex:e,onStartMove:u,onOffsetChange:d,render:l},y))}))});function w_(t){var r="touches"in t?t.touches[0]:t;return{pageX:r.pageX,pageY:r.pageY}}function bI(t,r,a,o,u,d,h,l,g){var y=C.useState(null),v=W(y,2),b=v[0],e=v[1],n=C.useState(-1),s=W(n,2),c=s[0],f=s[1],m=C.useState(a),p=W(m,2),_=p[0],S=p[1],x=C.useState(a),w=W(x,2),U=w[0],A=w[1],E=C.useRef(null),T=C.useRef(null);C.useEffect(function(){c===-1&&S(a)},[a,c]),C.useEffect(function(){return function(){document.removeEventListener("mousemove",E.current),document.removeEventListener("mouseup",T.current),document.removeEventListener("touchmove",E.current),document.removeEventListener("touchend",T.current)}},[]);var P=function(M,I){_.some(function(L,O){return L!==M[O]})&&(I!==void 0&&e(I),S(M),h(M))},z=function(M,I){if(M===-1){var L=U[0],O=U[U.length-1],k=o-L,$=u-O,J=I*(u-o);J=Math.max(J,k),J=Math.min(J,$);var ae=d(L+J);J=ae-L;var ce=U.map(function(de){return de+J});P(ce)}else{var X=(u-o)*I,ee=st(_);ee[M]=U[M];var be=g(ee,X,M,"dist");P(be.values,be.value)}},R=C.useRef(z);R.current=z;var D=function(M,I){M.stopPropagation();var L=a[I];f(I),e(L),A(a);var O=w_(M),k=O.pageX,$=O.pageY,J=function(X){X.preventDefault();var ee=w_(X),be=ee.pageX,de=ee.pageY,_e=be-k,Ee=de-$,Xe=t.current.getBoundingClientRect(),ge=Xe.width,ze=Xe.height,fe;switch(r){case"btt":fe=-Ee/ze;break;case"ttb":fe=Ee/ze;break;case"rtl":fe=-_e/ge;break;default:fe=_e/ge}R.current(I,fe)},ae=function ce(X){X.preventDefault(),document.removeEventListener("mouseup",ce),document.removeEventListener("mousemove",J),document.removeEventListener("touchend",ce),document.removeEventListener("touchmove",J),E.current=null,T.current=null,f(-1),l()};document.addEventListener("mouseup",ae),document.addEventListener("mousemove",J),document.addEventListener("touchend",ae),document.addEventListener("touchmove",J),E.current=J,T.current=ae},B=C.useMemo(function(){var F=st(a).sort(function(I,L){return I-L}),M=st(_).sort(function(I,L){return I-L});return F.every(function(I,L){return I===M[L]})?_:a},[a,_]);return[c,b,B,D]}function SI(t){var r,a=t.prefixCls,o=t.style,u=t.start,d=t.end,h=t.index,l=t.onStartMove,g=C.useContext(va),y=g.direction,v=g.min,b=g.max,e=g.disabled,n=g.range,s="".concat(a,"-track"),c=Jh(u,v,b),f=Jh(d,v,b),m=function(S){!e&&l&&l(S,-1)},p={};switch(y){case"rtl":p.right="".concat(c*100,"%"),p.width="".concat(f*100-c*100,"%");break;case"btt":p.bottom="".concat(c*100,"%"),p.height="".concat(f*100-c*100,"%");break;case"ttb":p.top="".concat(c*100,"%"),p.height="".concat(f*100-c*100,"%");break;default:p.left="".concat(c*100,"%"),p.width="".concat(f*100-c*100,"%")}return C.createElement("div",{className:ht(s,(r={},le(r,"".concat(s,"-").concat(h+1),n),le(r,"".concat(a,"-track-draggable"),l),r)),style:Y(Y({},p),o),onMouseDown:m,onTouchStart:m})}function wI(t){var r=t.prefixCls,a=t.style,o=t.values,u=t.startPoint,d=t.onStartMove,h=C.useContext(va),l=h.included,g=h.range,y=h.min,v=C.useMemo(function(){if(!g){if(o.length===0)return[];var b=u??y,e=o[0];return[{start:Math.min(b,e),end:Math.max(b,e)}]}for(var n=[],s=0;s<o.length-1;s+=1)n.push({start:o[s],end:o[s+1]});return n},[o,g,u,y]);return l?v.map(function(b,e){var n=b.start,s=b.end;return C.createElement(SI,{index:e,prefixCls:r,style:Va(a,e),start:n,end:s,key:e,onStartMove:d})}):null}function xI(t){var r=t.prefixCls,a=t.style,o=t.children,u=t.value,d=t.onClick,h=C.useContext(va),l=h.min,g=h.max,y=h.direction,v=h.includedStart,b=h.includedEnd,e=h.included,n="".concat(r,"-text"),s=Bm(y,u,l,g);return C.createElement("span",{className:ht(n,le({},"".concat(n,"-active"),e&&v<=u&&u<=b)),style:Y(Y({},s),a),onMouseDown:function(f){f.stopPropagation()},onClick:function(){d(u)}},o)}function EI(t){var r=t.prefixCls,a=t.marks,o=t.onClick,u="".concat(r,"-mark");return a.length?C.createElement("div",{className:u},a.map(function(d){var h=d.value,l=d.style,g=d.label;return C.createElement(xI,{key:h,prefixCls:u,style:l,value:h,onClick:o},g)})):null}function UI(t){var r=t.prefixCls,a=t.value,o=t.style,u=t.activeStyle,d=C.useContext(va),h=d.min,l=d.max,g=d.direction,y=d.included,v=d.includedStart,b=d.includedEnd,e="".concat(r,"-dot"),n=y&&v<=a&&a<=b,s=Y(Y({},Bm(g,a,h,l)),typeof o=="function"?o(a):o);return n&&(s=Y(Y({},s),typeof u=="function"?u(a):u)),C.createElement("span",{className:ht(e,le({},"".concat(e,"-active"),n)),style:s})}function CI(t){var r=t.prefixCls,a=t.marks,o=t.dots,u=t.style,d=t.activeStyle,h=C.useContext(va),l=h.min,g=h.max,y=h.step,v=C.useMemo(function(){var b=new Set;if(a.forEach(function(n){b.add(n.value)}),o&&y!==null)for(var e=l;e<=g;)b.add(e),e+=y;return Array.from(b)},[l,g,y,o,a]);return C.createElement("div",{className:"".concat(r,"-step")},v.map(function(b){return C.createElement(UI,{prefixCls:r,key:b,value:b,style:u,activeStyle:d})}))}function AI(t,r,a,o,u,d){var h=C.useCallback(function(n){var s=isFinite(n)?n:t;return s=Math.min(r,n),s=Math.max(t,s),s},[t,r]),l=C.useCallback(function(n){if(a!==null){var s=t+Math.round((h(n)-t)/a)*a,c=function(_){return(String(_).split(".")[1]||"").length},f=Math.max(c(a),c(r),c(t)),m=Number(s.toFixed(f));return t<=m&&m<=r?m:null}return null},[a,t,r,h]),g=C.useCallback(function(n){var s=h(n),c=o.map(function(p){return p.value});a!==null&&c.push(l(n)),c.push(t,r);var f=c[0],m=r-t;return c.forEach(function(p){var _=Math.abs(s-p);_<=m&&(f=p,m=_)}),f},[t,r,o,a,h,l]),y=function n(s,c,f){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit";if(typeof c=="number"){var p,_=s[f],S=_+c,x=[];o.forEach(function(T){x.push(T.value)}),x.push(t,r),x.push(l(_));var w=c>0?1:-1;m==="unit"?x.push(l(_+w*a)):x.push(l(S)),x=x.filter(function(T){return T!==null}).filter(function(T){return c<0?T<=_:T>=_}),m==="unit"&&(x=x.filter(function(T){return T!==_}));var U=m==="unit"?_:S;p=x[0];var A=Math.abs(p-U);if(x.forEach(function(T){var P=Math.abs(T-U);P<A&&(p=T,A=P)}),p===void 0)return c<0?t:r;if(m==="dist")return p;if(Math.abs(c)>1){var E=st(s);return E[f]=p,n(E,c-w,f,m)}return p}else{if(c==="min")return t;if(c==="max")return r}},v=function(s,c,f){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",p=s[f],_=y(s,c,f,m);return{value:_,changed:_!==p}},b=function(s){return d===null&&s===0||typeof d=="number"&&s<d},e=function(s,c,f){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",p=s.map(g),_=p[f],S=y(p,c,f,m);if(p[f]=S,u===!1){var x=d||0;f>0&&p[f-1]!==_&&(p[f]=Math.max(p[f],p[f-1]+x)),f<p.length-1&&p[f+1]!==_&&(p[f]=Math.min(p[f],p[f+1]-x))}else if(typeof d=="number"||d===null){for(var w=f+1;w<p.length;w+=1)for(var U=!0;b(p[w]-p[w-1])&&U;){var A=v(p,1,w);p[w]=A.value,U=A.changed}for(var E=f;E>0;E-=1)for(var T=!0;b(p[E]-p[E-1])&&T;){var P=v(p,-1,E-1);p[E-1]=P.value,T=P.changed}for(var z=p.length-1;z>0;z-=1)for(var R=!0;b(p[z]-p[z-1])&&R;){var D=v(p,-1,z-1);p[z-1]=D.value,R=D.changed}for(var B=0;B<p.length-1;B+=1)for(var F=!0;b(p[B+1]-p[B])&&F;){var M=v(p,1,B+1);p[B+1]=M.value,F=M.changed}}return{value:p[f],values:p}};return[g,e]}var TI=C.forwardRef(function(t,r){var a,o=t.prefixCls,u=o===void 0?"rc-slider":o,d=t.className,h=t.style,l=t.disabled,g=l===void 0?!1:l,y=t.keyboard,v=y===void 0?!0:y,b=t.autoFocus,e=t.onFocus,n=t.onBlur,s=t.min,c=s===void 0?0:s,f=t.max,m=f===void 0?100:f,p=t.step,_=p===void 0?1:p,S=t.value,x=t.defaultValue,w=t.range,U=t.count,A=t.onChange,E=t.onBeforeChange,T=t.onAfterChange,P=t.allowCross,z=P===void 0?!0:P,R=t.pushable,D=R===void 0?!1:R,B=t.draggableTrack,F=t.reverse,M=t.vertical,I=t.included,L=I===void 0?!0:I,O=t.startPoint,k=t.trackStyle,$=t.handleStyle,J=t.railStyle,ae=t.dotStyle,ce=t.activeDotStyle,X=t.marks,ee=t.dots,be=t.handleRender,de=t.tabIndex,_e=de===void 0?0:de,Ee=t.ariaLabelForHandle,Xe=t.ariaLabelledByForHandle,ge=t.ariaValueTextFormatterForHandle,ze=C.useRef(),fe=C.useRef(),Be=C.useMemo(function(){return M?F?"ttb":"btt":F?"rtl":"ltr"},[F,M]),ye=C.useMemo(function(){return isFinite(c)?c:0},[c]),ie=C.useMemo(function(){return isFinite(m)?m:100},[m]),Q=C.useMemo(function(){return _!==null&&_<=0?1:_},[_]),te=C.useMemo(function(){return typeof D=="boolean"?D?Q:!1:D>=0?D:!1},[D,Q]),ve=C.useMemo(function(){var Ae=Object.keys(X||{});return Ae.map(function(pe){var Z=X[pe],Fe={value:Number(pe)};return Z&&nt(Z)==="object"&&!C.isValidElement(Z)&&("label"in Z||"style"in Z)?(Fe.style=Z.style,Fe.label=Z.label):Fe.label=Z,Fe}).filter(function(pe){var Z=pe.label;return Z||typeof Z=="number"}).sort(function(pe,Z){return pe.value-Z.value})},[X]),Qe=AI(ye,ie,Q,ve,z,te),pt=W(Qe,2),Lr=pt[0],Pt=pt[1],Tn=DS(x,{value:S}),ui=W(Tn,2),Ze=ui[0],It=ui[1],Ve=C.useMemo(function(){var Ae=Ze==null?[]:Array.isArray(Ze)?Ze:[Ze],pe=W(Ae,1),Z=pe[0],Fe=Z===void 0?ye:Z,De=Ze===null?[]:[Fe];if(w){if(De=st(Ae),U||Ze===void 0){var qt=U>=0?U+1:2;for(De=De.slice(0,qt);De.length<qt;){var Mt;De.push((Mt=De[De.length-1])!==null&&Mt!==void 0?Mt:ye)}}De.sort(function(We,hi){return We-hi})}return De.forEach(function(We,hi){De[hi]=Lr(We)}),De},[Ze,w,ye,U,Lr]),Ft=C.useRef(Ve);Ft.current=Ve;var St=function(pe){return w?pe:pe[0]},Yt=function(pe){var Z=st(pe).sort(function(Fe,De){return Fe-De});A&&!iS(Z,Ft.current,!0)&&A(St(Z)),It(Z)},lt=function(pe){if(!g){var Z=0,Fe=ie-ye;Ve.forEach(function(qt,Mt){var We=Math.abs(pe-qt);We<=Fe&&(Fe=We,Z=Mt)});var De=st(Ve);De[Z]=pe,w&&!Ve.length&&U===void 0&&De.push(pe),E==null||E(St(De)),Yt(De),T==null||T(St(De))}},Bt=function(pe){pe.preventDefault();var Z=fe.current.getBoundingClientRect(),Fe=Z.width,De=Z.height,qt=Z.left,Mt=Z.top,We=Z.bottom,hi=Z.right,qr=pe.clientX,kn=pe.clientY,pi;switch(Be){case"btt":pi=(We-kn)/De;break;case"ttb":pi=(kn-Mt)/De;break;case"rtl":pi=(hi-qr)/Fe;break;default:pi=(qr-qt)/Fe}var _a=ye+pi*(ie-ye);lt(Lr(_a))},Yr=C.useState(null),Fi=W(Yr,2),Ue=Fi[0],ut=Fi[1],ci=function(pe,Z){if(!g){var Fe=Pt(Ve,pe,Z);E==null||E(St(Ve)),Yt(Fe.values),T==null||T(St(Fe.values)),ut(Fe.value)}};C.useEffect(function(){if(Ue!==null){var Ae=Ve.indexOf(Ue);Ae>=0&&ze.current.focus(Ae)}ut(null)},[Ue]);var Re=C.useMemo(function(){return B&&Q===null?!1:B},[B,Q]),Ce=function(){T==null||T(St(Ft.current))},ne=bI(fe,Be,Ve,ye,ie,Lr,Yt,Ce,Pt),he=W(ne,4),Je=he[0],vr=he[1],_r=he[2],di=he[3],wt=function(pe,Z){di(pe,Z),E==null||E(St(Ft.current))},fi=Je!==-1;C.useEffect(function(){if(!fi){var Ae=Ve.lastIndexOf(vr);ze.current.focus(Ae)}},[fi]);var Ge=C.useMemo(function(){return st(_r).sort(function(Ae,pe){return Ae-pe})},[_r]),Pn=C.useMemo(function(){return w?[Ge[0],Ge[Ge.length-1]]:[ye,Ge[0]]},[Ge,w,ye]),In=W(Pn,2),Bn=In[0],Mi=In[1];C.useImperativeHandle(r,function(){return{focus:function(){ze.current.focus(0)},blur:function(){var pe=document,Z=pe.activeElement;fe.current.contains(Z)&&(Z==null||Z.blur())}}}),C.useEffect(function(){b&&ze.current.focus(0)},[]);var Oi=C.useMemo(function(){return{min:ye,max:ie,direction:Be,disabled:g,keyboard:v,step:Q,included:L,includedStart:Bn,includedEnd:Mi,range:w,tabIndex:_e,ariaLabelForHandle:Ee,ariaLabelledByForHandle:Xe,ariaValueTextFormatterForHandle:ge}},[ye,ie,Be,g,v,Q,L,Bn,Mi,w,_e,Ee,Xe,ge]);return C.createElement(va.Provider,{value:Oi},C.createElement("div",{ref:fe,className:ht(u,d,(a={},le(a,"".concat(u,"-disabled"),g),le(a,"".concat(u,"-vertical"),M),le(a,"".concat(u,"-horizontal"),!M),le(a,"".concat(u,"-with-marks"),ve.length),a)),style:h,onMouseDown:Bt},C.createElement("div",{className:"".concat(u,"-rail"),style:J}),C.createElement(wI,{prefixCls:u,style:k,values:Ge,startPoint:O,onStartMove:Re?wt:null}),C.createElement(CI,{prefixCls:u,marks:ve,dots:ee,style:ae,activeStyle:ce}),C.createElement(yI,{ref:ze,prefixCls:u,style:$,values:_r,draggingIndex:Je,onStartMove:wt,onOffsetChange:ci,onFocus:e,onBlur:n,handleRender:be}),C.createElement(EI,{prefixCls:u,marks:ve,onClick:lt})))});const PI=C.forwardRef((t,r)=>{const{open:a}=t,o=C.useRef(null),u=C.useRef(null);function d(){ua.cancel(u.current),u.current=null}function h(){u.current=ua(()=>{var l;(l=o.current)===null||l===void 0||l.forceAlign(),u.current=null})}return C.useEffect(()=>(a?h():d(),d),[a,t.title]),C.createElement(mI,Object.assign({ref:Kc(o,r)},t))}),II=PI,BI=t=>{const{componentCls:r,antCls:a,controlSize:o,dotSize:u,marginFull:d,marginPart:h,colorFillContentHover:l}=t;return{[r]:Object.assign(Object.assign({},zS(t)),{position:"relative",height:o,margin:`${h}px ${d}px`,padding:0,cursor:"pointer",touchAction:"none","&-vertical":{margin:`${d}px ${h}px`},[`${r}-rail`]:{position:"absolute",backgroundColor:t.railBg,borderRadius:t.borderRadiusXS,transition:`background-color ${t.motionDurationMid}`},[`${r}-track`]:{position:"absolute",backgroundColor:t.trackBg,borderRadius:t.borderRadiusXS,transition:`background-color ${t.motionDurationMid}`},[`${r}-track-draggable`]:{boxSizing:"content-box",backgroundClip:"content-box",border:"solid rgba(0,0,0,0)"},"&:hover":{[`${r}-rail`]:{backgroundColor:t.railHoverBg},[`${r}-track`]:{backgroundColor:t.trackHoverBg},[`${r}-dot`]:{borderColor:l},[`${r}-handle::after`]:{boxShadow:`0 0 0 ${t.handleLineWidth}px ${t.colorPrimaryBorderHover}`},[`${r}-dot-active`]:{borderColor:t.dotActiveBorderColor}},[`${r}-handle`]:{position:"absolute",width:t.handleSize,height:t.handleSize,outline:"none",[`${r}-dragging`]:{zIndex:1},"&::before":{content:'""',position:"absolute",insetInlineStart:-t.handleLineWidth,insetBlockStart:-t.handleLineWidth,width:t.handleSize+t.handleLineWidth*2,height:t.handleSize+t.handleLineWidth*2,backgroundColor:"transparent"},"&::after":{content:'""',position:"absolute",insetBlockStart:0,insetInlineStart:0,width:t.handleSize,height:t.handleSize,backgroundColor:t.colorBgElevated,boxShadow:`0 0 0 ${t.handleLineWidth}px ${t.handleColor}`,borderRadius:"50%",cursor:"pointer",transition:`
            inset-inline-start ${t.motionDurationMid},
            inset-block-start ${t.motionDurationMid},
            width ${t.motionDurationMid},
            height ${t.motionDurationMid},
            box-shadow ${t.motionDurationMid}
          `},"&:hover, &:active, &:focus":{"&::before":{insetInlineStart:-((t.handleSizeHover-t.handleSize)/2+t.handleLineWidthHover),insetBlockStart:-((t.handleSizeHover-t.handleSize)/2+t.handleLineWidthHover),width:t.handleSizeHover+t.handleLineWidthHover*2,height:t.handleSizeHover+t.handleLineWidthHover*2},"&::after":{boxShadow:`0 0 0 ${t.handleLineWidthHover}px ${t.handleActiveColor}`,width:t.handleSizeHover,height:t.handleSizeHover,insetInlineStart:(t.handleSize-t.handleSizeHover)/2,insetBlockStart:(t.handleSize-t.handleSizeHover)/2}}},[`${r}-mark`]:{position:"absolute",fontSize:t.fontSize},[`${r}-mark-text`]:{position:"absolute",display:"inline-block",color:t.colorTextDescription,textAlign:"center",wordBreak:"keep-all",cursor:"pointer",userSelect:"none","&-active":{color:t.colorText}},[`${r}-step`]:{position:"absolute",background:"transparent",pointerEvents:"none"},[`${r}-dot`]:{position:"absolute",width:u,height:u,backgroundColor:t.colorBgElevated,border:`${t.handleLineWidth}px solid ${t.dotBorderColor}`,borderRadius:"50%",cursor:"pointer",transition:`border-color ${t.motionDurationSlow}`,pointerEvents:"auto","&-active":{borderColor:t.dotActiveBorderColor}},[`&${r}-disabled`]:{cursor:"not-allowed",[`${r}-rail`]:{backgroundColor:`${t.railBg} !important`},[`${r}-track`]:{backgroundColor:`${t.trackBgDisabled} !important`},[`
          ${r}-dot
        `]:{backgroundColor:t.colorBgElevated,borderColor:t.trackBgDisabled,boxShadow:"none",cursor:"not-allowed"},[`${r}-handle::after`]:{backgroundColor:t.colorBgElevated,cursor:"not-allowed",width:t.handleSize,height:t.handleSize,boxShadow:`0 0 0 ${t.handleLineWidth}px ${new Zt(t.colorTextDisabled).onBackground(t.colorBgContainer).toHexShortString()}`,insetInlineStart:0,insetBlockStart:0},[`
          ${r}-mark-text,
          ${r}-dot
        `]:{cursor:"not-allowed !important"}},[`&-tooltip ${a}-tooltip-inner`]:{minWidth:"unset"}})}},sw=(t,r)=>{const{componentCls:a,railSize:o,handleSize:u,dotSize:d}=t,h=r?"paddingBlock":"paddingInline",l=r?"width":"height",g=r?"height":"width",y=r?"insetBlockStart":"insetInlineStart",v=r?"top":"insetInlineStart",b=(o*3-u)/2,e=(u-o)/2,n=r?{borderWidth:`${e}px 0`,transform:`translateY(-${e}px)`}:{borderWidth:`0 ${e}px`,transform:`translateX(-${e}px)`};return{[h]:o,[g]:o*3,[`${a}-rail`]:{[l]:"100%",[g]:o},[`${a}-track`]:{[g]:o},[`${a}-track-draggable`]:Object.assign({},n),[`${a}-handle`]:{[y]:b},[`${a}-mark`]:{insetInlineStart:0,top:0,[v]:o*3+(r?0:t.marginFull),[l]:"100%"},[`${a}-step`]:{insetInlineStart:0,top:0,[v]:o,[l]:"100%",[g]:o},[`${a}-dot`]:{position:"absolute",[y]:(o-d)/2}}},kI=t=>{const{componentCls:r,marginPartWithMark:a}=t;return{[`${r}-horizontal`]:Object.assign(Object.assign({},sw(t,!0)),{[`&${r}-with-marks`]:{marginBottom:a}})}},DI=t=>{const{componentCls:r}=t;return{[`${r}-vertical`]:Object.assign(Object.assign({},sw(t,!1)),{height:"100%"})}},LI=MS("Slider",t=>{const r=Os(t,{marginPart:(t.controlHeight-t.controlSize)/2,marginFull:t.controlSize/2,marginPartWithMark:t.controlHeightLG-t.controlSize});return[BI(r),kI(r),DI(r)]},t=>{const a=t.controlHeightLG/4,o=t.controlHeightSM/2,u=t.lineWidth+1,d=t.lineWidth+1*3;return{controlSize:a,railSize:4,handleSize:a,handleSizeHover:o,dotSize:8,handleLineWidth:u,handleLineWidthHover:d,railBg:t.colorFillTertiary,railHoverBg:t.colorFillSecondary,trackBg:t.colorPrimaryBorder,trackHoverBg:t.colorPrimaryBorderHover,handleColor:t.colorPrimaryBorder,handleActiveColor:t.colorPrimary,dotBorderColor:t.colorBorderSecondary,dotActiveBorderColor:t.colorPrimaryBorder,trackBgDisabled:t.colorBgContainerDisabled}});var zI=globalThis&&globalThis.__rest||function(t,r){var a={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&r.indexOf(o)<0&&(a[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(t);u<o.length;u++)r.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(t,o[u])&&(a[o[u]]=t[o[u]]);return a};const RI=t=>typeof t=="number"?t.toString():"",FI=ue.forwardRef((t,r)=>{const{prefixCls:a,range:o,className:u,rootClassName:d,style:h,disabled:l,tooltipPrefixCls:g,tipFormatter:y,tooltipVisible:v,getTooltipPopupContainer:b,tooltipPlacement:e}=t,n=zI(t,["prefixCls","range","className","rootClassName","style","disabled","tooltipPrefixCls","tipFormatter","tooltipVisible","getTooltipPopupContainer","tooltipPlacement"]),{direction:s,slider:c,getPrefixCls:f,getPopupContainer:m}=ue.useContext(ga),p=ue.useContext(OS),_=l??p,[S,x]=ue.useState({}),w=(F,M)=>{x(I=>Object.assign(Object.assign({},I),{[F]:M}))},U=(F,M)=>F||(M?s==="rtl"?"left":"right":"top"),A=f("slider",a),[E,T]=LI(A),P=ht(u,c==null?void 0:c.className,d,{[`${A}-rtl`]:s==="rtl"},T);s==="rtl"&&!n.vertical&&(n.reverse=!n.reverse);const[z,R]=ue.useMemo(()=>o?typeof o=="object"?[!0,o.draggableTrack]:[!0,!1]:[!1],[o]),D=(F,M)=>{var I;const{index:L,dragging:O}=M,{tooltip:k={},vertical:$}=t,J=Object.assign({},k),{open:ae,placement:ce,getPopupContainer:X,prefixCls:ee,formatter:be}=J;let de;be||be===null?de=be:y||y===null?de=y:de=RI;const _e=de?S[L]||O:!1,Ee=(I=ae??v)!==null&&I!==void 0?I:ae===void 0&&_e,Xe=Object.assign(Object.assign({},F.props),{onMouseEnter:()=>w(L,!0),onMouseLeave:()=>w(L,!1)}),ge=f("tooltip",ee??g);return ue.createElement(II,Object.assign({},J,{prefixCls:ge,title:de?de(M.value):"",open:Ee,placement:U(ce??e,$),key:L,overlayClassName:`${A}-tooltip`,getPopupContainer:X||b||m}),ue.cloneElement(F,Xe))},B=Object.assign(Object.assign({},c==null?void 0:c.style),h);return E(ue.createElement(TI,Object.assign({},n,{step:n.step,range:z,draggableTrack:R,className:P,style:B,disabled:_,ref:r,prefixCls:A,handleRender:D})))}),MI=FI;var OI=Object.defineProperty,NI=(t,r,a)=>r in t?OI(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a,ro=(t,r,a)=>(NI(t,typeof r!="symbol"?r+"":r,a),a),km=(t,r,a)=>{if(!r.has(t))throw TypeError("Cannot "+a)},se=(t,r,a)=>(km(t,r,"read from private field"),a?a.call(t):r.get(t)),sr=(t,r,a)=>{if(r.has(t))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(t):r.set(t,a)},ri=(t,r,a,o)=>(km(t,r,"write to private field"),o?o.call(t,a):r.set(t,a),a),sc=(t,r,a)=>(km(t,r,"access private method"),a),HI=Object.defineProperty,GI=(t,r,a)=>r in t?HI(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a,Lt=(t,r,a)=>(GI(t,typeof r!="symbol"?r+"":r,a),a),Dm=(t,r,a)=>{if(!r.has(t))throw TypeError("Cannot "+a)},Me=(t,r,a)=>(Dm(t,r,"read from private field"),a?a.call(t):r.get(t)),Si=(t,r,a)=>{if(r.has(t))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(t):r.set(t,a)},Ui=(t,r,a,o)=>(Dm(t,r,"write to private field"),o?o.call(t,a):r.set(t,a),a),$I=(t,r,a)=>(Dm(t,r,"access private method"),a);let Qo=1;const x_={debug:(...t)=>{Qo<=0&&console.debug(...t)},info:(...t)=>{Qo<=1&&console.info(...t)},warn:(...t)=>{Qo<=2&&console.warn(...t)},error:(...t)=>{Qo<=3&&console.error(...t)}},rl=new Map,oi={setLogLevel:t=>{Qo=rl.get(t)??1},...x_,create:t=>Object.fromEntries(Object.entries(x_).map(([r,a])=>[r,(...o)=>a(t,...o)]))};rl.set(oi.debug,0);rl.set(oi.info,1);rl.set(oi.warn,2);rl.set(oi.error,3);const jI=()=>{let t,r=16.6;self.onmessage=a=>{a.data.event==="start"&&(self.clearInterval(t),t=self.setInterval(()=>{self.postMessage({})},r)),a.data.event==="stop"&&self.clearInterval(t)}},VI=()=>{const t=new Blob([`(${jI.toString()})()`]),r=URL.createObjectURL(t);return new Worker(r)},WI=new Map;let E_=1;const YI=VI();YI.onmessage=()=>{E_+=1;for(const[t,r]of WI.entries())E_%t===0&&r.forEach(a=>a())};function qI(t){return Array(t.numberOfChannels).fill(0).map((r,a)=>t.getChannelData(a))}function U_(t,r,a){const o=a-r,u=new Float32Array(o);let d=0;for(;d<o;)u[d]=t[(r+d)%t.length],d+=1;return u}var KI={};(function(t){var r=function(){var e=new Date,n=4,s=3,c=2,f=1,m=n,p={setLogLevel:function(_){_==this.debug?m=f:_==this.info?m=c:_==this.warn?m=s:(_==this.error,m=n)},debug:function(_,S){console.debug===void 0&&(console.debug=console.log),f>=m&&console.debug("["+r.getDurationString(new Date-e,1e3)+"]","["+_+"]",S)},log:function(_,S){this.debug(_.msg)},info:function(_,S){c>=m&&console.info("["+r.getDurationString(new Date-e,1e3)+"]","["+_+"]",S)},warn:function(_,S){s>=m&&console.warn("["+r.getDurationString(new Date-e,1e3)+"]","["+_+"]",S)},error:function(_,S){n>=m&&console.error("["+r.getDurationString(new Date-e,1e3)+"]","["+_+"]",S)}};return p}();r.getDurationString=function(e,n){var s;function c(x,w){for(var U=""+x,A=U.split(".");A[0].length<w;)A[0]="0"+A[0];return A.join(".")}e<0?(s=!0,e=-e):s=!1;var f=n||1,m=e/f,p=Math.floor(m/3600);m-=p*3600;var _=Math.floor(m/60);m-=_*60;var S=m*1e3;return m=Math.floor(m),S-=m*1e3,S=Math.floor(S),(s?"-":"")+p+":"+c(_,2)+":"+c(m,2)+"."+c(S,3)},r.printRanges=function(e){var n=e.length;if(n>0){for(var s="",c=0;c<n;c++)c>0&&(s+=","),s+="["+r.getDurationString(e.start(c))+","+r.getDurationString(e.end(c))+"]";return s}else return"(empty)"},t.Log=r;var a=function(e){if(e instanceof ArrayBuffer)this.buffer=e,this.dataview=new DataView(e);else throw"Needs an array buffer";this.position=0};a.prototype.getPosition=function(){return this.position},a.prototype.getEndPosition=function(){return this.buffer.byteLength},a.prototype.getLength=function(){return this.buffer.byteLength},a.prototype.seek=function(e){var n=Math.max(0,Math.min(this.buffer.byteLength,e));return this.position=isNaN(n)||!isFinite(n)?0:n,!0},a.prototype.isEos=function(){return this.getPosition()>=this.getEndPosition()},a.prototype.readAnyInt=function(e,n){var s=0;if(this.position+e<=this.buffer.byteLength){switch(e){case 1:n?s=this.dataview.getInt8(this.position):s=this.dataview.getUint8(this.position);break;case 2:n?s=this.dataview.getInt16(this.position):s=this.dataview.getUint16(this.position);break;case 3:if(n)throw"No method for reading signed 24 bits values";s=this.dataview.getUint8(this.position)<<16,s|=this.dataview.getUint8(this.position+1)<<8,s|=this.dataview.getUint8(this.position+2);break;case 4:n?s=this.dataview.getInt32(this.position):s=this.dataview.getUint32(this.position);break;case 8:if(n)throw"No method for reading signed 64 bits values";s=this.dataview.getUint32(this.position)<<32,s|=this.dataview.getUint32(this.position+4);break;default:throw"readInt method not implemented for size: "+e}return this.position+=e,s}else throw"Not enough bytes in buffer"},a.prototype.readUint8=function(){return this.readAnyInt(1,!1)},a.prototype.readUint16=function(){return this.readAnyInt(2,!1)},a.prototype.readUint24=function(){return this.readAnyInt(3,!1)},a.prototype.readUint32=function(){return this.readAnyInt(4,!1)},a.prototype.readUint64=function(){return this.readAnyInt(8,!1)},a.prototype.readString=function(e){if(this.position+e<=this.buffer.byteLength){for(var n="",s=0;s<e;s++)n+=String.fromCharCode(this.readUint8());return n}else throw"Not enough bytes in buffer"},a.prototype.readCString=function(){for(var e=[];;){var n=this.readUint8();if(n!==0)e.push(n);else break}return String.fromCharCode.apply(null,e)},a.prototype.readInt8=function(){return this.readAnyInt(1,!0)},a.prototype.readInt16=function(){return this.readAnyInt(2,!0)},a.prototype.readInt32=function(){return this.readAnyInt(4,!0)},a.prototype.readInt64=function(){return this.readAnyInt(8,!1)},a.prototype.readUint8Array=function(e){for(var n=new Uint8Array(e),s=0;s<e;s++)n[s]=this.readUint8();return n},a.prototype.readInt16Array=function(e){for(var n=new Int16Array(e),s=0;s<e;s++)n[s]=this.readInt16();return n},a.prototype.readUint16Array=function(e){for(var n=new Int16Array(e),s=0;s<e;s++)n[s]=this.readUint16();return n},a.prototype.readUint32Array=function(e){for(var n=new Uint32Array(e),s=0;s<e;s++)n[s]=this.readUint32();return n},a.prototype.readInt32Array=function(e){for(var n=new Int32Array(e),s=0;s<e;s++)n[s]=this.readInt32();return n},t.MP4BoxStream=a;var o=function(e,n,s){this._byteOffset=n||0,e instanceof ArrayBuffer?this.buffer=e:typeof e=="object"?(this.dataView=e,n&&(this._byteOffset+=n)):this.buffer=new ArrayBuffer(e||0),this.position=0,this.endianness=s??o.LITTLE_ENDIAN};o.prototype={},o.prototype.getPosition=function(){return this.position},o.prototype._realloc=function(e){if(this._dynamicSize){var n=this._byteOffset+this.position+e,s=this._buffer.byteLength;if(n<=s){n>this._byteLength&&(this._byteLength=n);return}for(s<1&&(s=1);n>s;)s*=2;var c=new ArrayBuffer(s),f=new Uint8Array(this._buffer),m=new Uint8Array(c,0,f.length);m.set(f),this.buffer=c,this._byteLength=n}},o.prototype._trimAlloc=function(){if(this._byteLength!=this._buffer.byteLength){var e=new ArrayBuffer(this._byteLength),n=new Uint8Array(e),s=new Uint8Array(this._buffer,0,n.length);n.set(s),this.buffer=e}},o.BIG_ENDIAN=!1,o.LITTLE_ENDIAN=!0,o.prototype._byteLength=0,Object.defineProperty(o.prototype,"byteLength",{get:function(){return this._byteLength-this._byteOffset}}),Object.defineProperty(o.prototype,"buffer",{get:function(){return this._trimAlloc(),this._buffer},set:function(e){this._buffer=e,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(o.prototype,"byteOffset",{get:function(){return this._byteOffset},set:function(e){this._byteOffset=e,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(o.prototype,"dataView",{get:function(){return this._dataView},set:function(e){this._byteOffset=e.byteOffset,this._buffer=e.buffer,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._byteOffset+e.byteLength}}),o.prototype.seek=function(e){var n=Math.max(0,Math.min(this.byteLength,e));this.position=isNaN(n)||!isFinite(n)?0:n},o.prototype.isEof=function(){return this.position>=this._byteLength},o.prototype.mapUint8Array=function(e){this._realloc(e*1);var n=new Uint8Array(this._buffer,this.byteOffset+this.position,e);return this.position+=e*1,n},o.prototype.readInt32Array=function(e,n){e=e??this.byteLength-this.position/4;var s=new Int32Array(e);return o.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,e*s.BYTES_PER_ELEMENT),o.arrayToNative(s,n??this.endianness),this.position+=s.byteLength,s},o.prototype.readInt16Array=function(e,n){e=e??this.byteLength-this.position/2;var s=new Int16Array(e);return o.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,e*s.BYTES_PER_ELEMENT),o.arrayToNative(s,n??this.endianness),this.position+=s.byteLength,s},o.prototype.readInt8Array=function(e){e=e??this.byteLength-this.position;var n=new Int8Array(e);return o.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,e*n.BYTES_PER_ELEMENT),this.position+=n.byteLength,n},o.prototype.readUint32Array=function(e,n){e=e??this.byteLength-this.position/4;var s=new Uint32Array(e);return o.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,e*s.BYTES_PER_ELEMENT),o.arrayToNative(s,n??this.endianness),this.position+=s.byteLength,s},o.prototype.readUint16Array=function(e,n){e=e??this.byteLength-this.position/2;var s=new Uint16Array(e);return o.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,e*s.BYTES_PER_ELEMENT),o.arrayToNative(s,n??this.endianness),this.position+=s.byteLength,s},o.prototype.readUint8Array=function(e){e=e??this.byteLength-this.position;var n=new Uint8Array(e);return o.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,e*n.BYTES_PER_ELEMENT),this.position+=n.byteLength,n},o.prototype.readFloat64Array=function(e,n){e=e??this.byteLength-this.position/8;var s=new Float64Array(e);return o.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,e*s.BYTES_PER_ELEMENT),o.arrayToNative(s,n??this.endianness),this.position+=s.byteLength,s},o.prototype.readFloat32Array=function(e,n){e=e??this.byteLength-this.position/4;var s=new Float32Array(e);return o.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,e*s.BYTES_PER_ELEMENT),o.arrayToNative(s,n??this.endianness),this.position+=s.byteLength,s},o.prototype.readInt32=function(e){var n=this._dataView.getInt32(this.position,e??this.endianness);return this.position+=4,n},o.prototype.readInt16=function(e){var n=this._dataView.getInt16(this.position,e??this.endianness);return this.position+=2,n},o.prototype.readInt8=function(){var e=this._dataView.getInt8(this.position);return this.position+=1,e},o.prototype.readUint32=function(e){var n=this._dataView.getUint32(this.position,e??this.endianness);return this.position+=4,n},o.prototype.readUint16=function(e){var n=this._dataView.getUint16(this.position,e??this.endianness);return this.position+=2,n},o.prototype.readUint8=function(){var e=this._dataView.getUint8(this.position);return this.position+=1,e},o.prototype.readFloat32=function(e){var n=this._dataView.getFloat32(this.position,e??this.endianness);return this.position+=4,n},o.prototype.readFloat64=function(e){var n=this._dataView.getFloat64(this.position,e??this.endianness);return this.position+=8,n},o.endianness=new Int8Array(new Int16Array([1]).buffer)[0]>0,o.memcpy=function(e,n,s,c,f){var m=new Uint8Array(e,n,f),p=new Uint8Array(s,c,f);m.set(p)},o.arrayToNative=function(e,n){return n==this.endianness?e:this.flipArrayEndianness(e)},o.nativeToEndian=function(e,n){return this.endianness==n?e:this.flipArrayEndianness(e)},o.flipArrayEndianness=function(e){for(var n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),s=0;s<e.byteLength;s+=e.BYTES_PER_ELEMENT)for(var c=s+e.BYTES_PER_ELEMENT-1,f=s;c>f;c--,f++){var m=n[f];n[f]=n[c],n[c]=m}return e},o.prototype.failurePosition=0,String.fromCharCodeUint8=function(e){for(var n=[],s=0;s<e.length;s++)n[s]=e[s];return String.fromCharCode.apply(null,n)},o.prototype.readString=function(e,n){return n==null||n=="ASCII"?String.fromCharCodeUint8.apply(null,[this.mapUint8Array(e??this.byteLength-this.position)]):new TextDecoder(n).decode(this.mapUint8Array(e))},o.prototype.readCString=function(e){var n=this.byteLength-this.position,s=new Uint8Array(this._buffer,this._byteOffset+this.position),c=n;e!=null&&(c=Math.min(e,n));for(var f=0;f<c&&s[f]!==0;f++);var m=String.fromCharCodeUint8.apply(null,[this.mapUint8Array(f)]);return e!=null?this.position+=c-f:f!=n&&(this.position+=1),m};var u=Math.pow(2,32);o.prototype.readInt64=function(){return this.readInt32()*u+this.readUint32()},o.prototype.readUint64=function(){return this.readUint32()*u+this.readUint32()},o.prototype.readInt64=function(){return this.readUint32()*u+this.readUint32()},o.prototype.readUint24=function(){return(this.readUint8()<<16)+(this.readUint8()<<8)+this.readUint8()},t.DataStream=o,o.prototype.save=function(e){var n=new Blob([this.buffer]);if(window.URL&&URL.createObjectURL){var s=window.URL.createObjectURL(n),c=document.createElement("a");document.body.appendChild(c),c.setAttribute("href",s),c.setAttribute("download",e),c.setAttribute("target","_self"),c.click(),window.URL.revokeObjectURL(s)}else throw"DataStream.save: Can't create object URL."},o.prototype._dynamicSize=!0,Object.defineProperty(o.prototype,"dynamicSize",{get:function(){return this._dynamicSize},set:function(e){e||this._trimAlloc(),this._dynamicSize=e}}),o.prototype.shift=function(e){var n=new ArrayBuffer(this._byteLength-e),s=new Uint8Array(n),c=new Uint8Array(this._buffer,e,s.length);s.set(c),this.buffer=n,this.position-=e},o.prototype.writeInt32Array=function(e,n){if(this._realloc(e.length*4),e instanceof Int32Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapInt32Array(e.length,n);else for(var s=0;s<e.length;s++)this.writeInt32(e[s],n)},o.prototype.writeInt16Array=function(e,n){if(this._realloc(e.length*2),e instanceof Int16Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapInt16Array(e.length,n);else for(var s=0;s<e.length;s++)this.writeInt16(e[s],n)},o.prototype.writeInt8Array=function(e){if(this._realloc(e.length*1),e instanceof Int8Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapInt8Array(e.length);else for(var n=0;n<e.length;n++)this.writeInt8(e[n])},o.prototype.writeUint32Array=function(e,n){if(this._realloc(e.length*4),e instanceof Uint32Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapUint32Array(e.length,n);else for(var s=0;s<e.length;s++)this.writeUint32(e[s],n)},o.prototype.writeUint16Array=function(e,n){if(this._realloc(e.length*2),e instanceof Uint16Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapUint16Array(e.length,n);else for(var s=0;s<e.length;s++)this.writeUint16(e[s],n)},o.prototype.writeUint8Array=function(e){if(this._realloc(e.length*1),e instanceof Uint8Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapUint8Array(e.length);else for(var n=0;n<e.length;n++)this.writeUint8(e[n])},o.prototype.writeFloat64Array=function(e,n){if(this._realloc(e.length*8),e instanceof Float64Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapFloat64Array(e.length,n);else for(var s=0;s<e.length;s++)this.writeFloat64(e[s],n)},o.prototype.writeFloat32Array=function(e,n){if(this._realloc(e.length*4),e instanceof Float32Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapFloat32Array(e.length,n);else for(var s=0;s<e.length;s++)this.writeFloat32(e[s],n)},o.prototype.writeInt32=function(e,n){this._realloc(4),this._dataView.setInt32(this.position,e,n??this.endianness),this.position+=4},o.prototype.writeInt16=function(e,n){this._realloc(2),this._dataView.setInt16(this.position,e,n??this.endianness),this.position+=2},o.prototype.writeInt8=function(e){this._realloc(1),this._dataView.setInt8(this.position,e),this.position+=1},o.prototype.writeUint32=function(e,n){this._realloc(4),this._dataView.setUint32(this.position,e,n??this.endianness),this.position+=4},o.prototype.writeUint16=function(e,n){this._realloc(2),this._dataView.setUint16(this.position,e,n??this.endianness),this.position+=2},o.prototype.writeUint8=function(e){this._realloc(1),this._dataView.setUint8(this.position,e),this.position+=1},o.prototype.writeFloat32=function(e,n){this._realloc(4),this._dataView.setFloat32(this.position,e,n??this.endianness),this.position+=4},o.prototype.writeFloat64=function(e,n){this._realloc(8),this._dataView.setFloat64(this.position,e,n??this.endianness),this.position+=8},o.prototype.writeUCS2String=function(e,n,s){s==null&&(s=e.length);for(var c=0;c<e.length&&c<s;c++)this.writeUint16(e.charCodeAt(c),n);for(;c<s;c++)this.writeUint16(0)},o.prototype.writeString=function(e,n,s){var c=0;if(n==null||n=="ASCII")if(s!=null){var f=Math.min(e.length,s);for(c=0;c<f;c++)this.writeUint8(e.charCodeAt(c));for(;c<s;c++)this.writeUint8(0)}else for(c=0;c<e.length;c++)this.writeUint8(e.charCodeAt(c));else this.writeUint8Array(new TextEncoder(n).encode(e.substring(0,s)))},o.prototype.writeCString=function(e,n){var s=0;if(n!=null){var c=Math.min(e.length,n);for(s=0;s<c;s++)this.writeUint8(e.charCodeAt(s));for(;s<n;s++)this.writeUint8(0)}else{for(s=0;s<e.length;s++)this.writeUint8(e.charCodeAt(s));this.writeUint8(0)}},o.prototype.writeStruct=function(e,n){for(var s=0;s<e.length;s+=2){var c=e[s+1];this.writeType(c,n[e[s]],n)}},o.prototype.writeType=function(e,n,s){var c;if(typeof e=="function")return e(this,n);if(typeof e=="object"&&!(e instanceof Array))return e.set(this,n,s);var f=null,m="ASCII",p=this.position;switch(typeof e=="string"&&/:/.test(e)&&(c=e.split(":"),e=c[0],f=parseInt(c[1])),typeof e=="string"&&/,/.test(e)&&(c=e.split(","),e=c[0],m=parseInt(c[1])),e){case"uint8":this.writeUint8(n);break;case"int8":this.writeInt8(n);break;case"uint16":this.writeUint16(n,this.endianness);break;case"int16":this.writeInt16(n,this.endianness);break;case"uint32":this.writeUint32(n,this.endianness);break;case"int32":this.writeInt32(n,this.endianness);break;case"float32":this.writeFloat32(n,this.endianness);break;case"float64":this.writeFloat64(n,this.endianness);break;case"uint16be":this.writeUint16(n,o.BIG_ENDIAN);break;case"int16be":this.writeInt16(n,o.BIG_ENDIAN);break;case"uint32be":this.writeUint32(n,o.BIG_ENDIAN);break;case"int32be":this.writeInt32(n,o.BIG_ENDIAN);break;case"float32be":this.writeFloat32(n,o.BIG_ENDIAN);break;case"float64be":this.writeFloat64(n,o.BIG_ENDIAN);break;case"uint16le":this.writeUint16(n,o.LITTLE_ENDIAN);break;case"int16le":this.writeInt16(n,o.LITTLE_ENDIAN);break;case"uint32le":this.writeUint32(n,o.LITTLE_ENDIAN);break;case"int32le":this.writeInt32(n,o.LITTLE_ENDIAN);break;case"float32le":this.writeFloat32(n,o.LITTLE_ENDIAN);break;case"float64le":this.writeFloat64(n,o.LITTLE_ENDIAN);break;case"cstring":this.writeCString(n,f);break;case"string":this.writeString(n,m,f);break;case"u16string":this.writeUCS2String(n,this.endianness,f);break;case"u16stringle":this.writeUCS2String(n,o.LITTLE_ENDIAN,f);break;case"u16stringbe":this.writeUCS2String(n,o.BIG_ENDIAN,f);break;default:if(e.length==3){for(var _=e[1],S=0;S<n.length;S++)this.writeType(_,n[S]);break}else{this.writeStruct(e,n);break}}f!=null&&(this.position=p,this._realloc(f),this.position=p+f)},o.prototype.writeUint64=function(e){var n=Math.floor(e/u);this.writeUint32(n),this.writeUint32(e&4294967295)},o.prototype.writeUint24=function(e){this.writeUint8((e&16711680)>>16),this.writeUint8((e&65280)>>8),this.writeUint8(e&255)},o.prototype.adjustUint32=function(e,n){var s=this.position;this.seek(e),this.writeUint32(n),this.seek(s)},o.prototype.mapInt32Array=function(e,n){this._realloc(e*4);var s=new Int32Array(this._buffer,this.byteOffset+this.position,e);return o.arrayToNative(s,n??this.endianness),this.position+=e*4,s},o.prototype.mapInt16Array=function(e,n){this._realloc(e*2);var s=new Int16Array(this._buffer,this.byteOffset+this.position,e);return o.arrayToNative(s,n??this.endianness),this.position+=e*2,s},o.prototype.mapInt8Array=function(e){this._realloc(e*1);var n=new Int8Array(this._buffer,this.byteOffset+this.position,e);return this.position+=e*1,n},o.prototype.mapUint32Array=function(e,n){this._realloc(e*4);var s=new Uint32Array(this._buffer,this.byteOffset+this.position,e);return o.arrayToNative(s,n??this.endianness),this.position+=e*4,s},o.prototype.mapUint16Array=function(e,n){this._realloc(e*2);var s=new Uint16Array(this._buffer,this.byteOffset+this.position,e);return o.arrayToNative(s,n??this.endianness),this.position+=e*2,s},o.prototype.mapFloat64Array=function(e,n){this._realloc(e*8);var s=new Float64Array(this._buffer,this.byteOffset+this.position,e);return o.arrayToNative(s,n??this.endianness),this.position+=e*8,s},o.prototype.mapFloat32Array=function(e,n){this._realloc(e*4);var s=new Float32Array(this._buffer,this.byteOffset+this.position,e);return o.arrayToNative(s,n??this.endianness),this.position+=e*4,s};var d=function(e){this.buffers=[],this.bufferIndex=-1,e&&(this.insertBuffer(e),this.bufferIndex=0)};d.prototype=new o(new ArrayBuffer,0,o.BIG_ENDIAN),d.prototype.initialized=function(){var e;return this.bufferIndex>-1?!0:this.buffers.length>0?(e=this.buffers[0],e.fileStart===0?(this.buffer=e,this.bufferIndex=0,r.debug("MultiBufferStream","Stream ready for parsing"),!0):(r.warn("MultiBufferStream","The first buffer should have a fileStart of 0"),this.logBufferLevel(),!1)):(r.warn("MultiBufferStream","No buffer to start parsing from"),this.logBufferLevel(),!1)},ArrayBuffer.concat=function(e,n){r.debug("ArrayBuffer","Trying to create a new buffer of size: "+(e.byteLength+n.byteLength));var s=new Uint8Array(e.byteLength+n.byteLength);return s.set(new Uint8Array(e),0),s.set(new Uint8Array(n),e.byteLength),s.buffer},d.prototype.reduceBuffer=function(e,n,s){var c;return c=new Uint8Array(s),c.set(new Uint8Array(e,n,s)),c.buffer.fileStart=e.fileStart+n,c.buffer.usedBytes=0,c.buffer},d.prototype.insertBuffer=function(e){for(var n=!0,s=0;s<this.buffers.length;s++){var c=this.buffers[s];if(e.fileStart<=c.fileStart){if(e.fileStart===c.fileStart)if(e.byteLength>c.byteLength){this.buffers.splice(s,1),s--;continue}else r.warn("MultiBufferStream","Buffer (fileStart: "+e.fileStart+" - Length: "+e.byteLength+") already appended, ignoring");else e.fileStart+e.byteLength<=c.fileStart||(e=this.reduceBuffer(e,0,c.fileStart-e.fileStart)),r.debug("MultiBufferStream","Appending new buffer (fileStart: "+e.fileStart+" - Length: "+e.byteLength+")"),this.buffers.splice(s,0,e),s===0&&(this.buffer=e);n=!1;break}else if(e.fileStart<c.fileStart+c.byteLength){var f=c.fileStart+c.byteLength-e.fileStart,m=e.byteLength-f;if(m>0)e=this.reduceBuffer(e,f,m);else{n=!1;break}}}n&&(r.debug("MultiBufferStream","Appending new buffer (fileStart: "+e.fileStart+" - Length: "+e.byteLength+")"),this.buffers.push(e),s===0&&(this.buffer=e))},d.prototype.logBufferLevel=function(e){var n,s,c,f,m=[],p,_="";for(c=0,f=0,n=0;n<this.buffers.length;n++)s=this.buffers[n],n===0?(p={},m.push(p),p.start=s.fileStart,p.end=s.fileStart+s.byteLength,_+="["+p.start+"-"):p.end===s.fileStart?p.end=s.fileStart+s.byteLength:(p={},p.start=s.fileStart,_+=m[m.length-1].end-1+"], ["+p.start+"-",p.end=s.fileStart+s.byteLength,m.push(p)),c+=s.usedBytes,f+=s.byteLength;m.length>0&&(_+=p.end-1+"]");var S=e?r.info:r.debug;this.buffers.length===0?S("MultiBufferStream","No more buffer in memory"):S("MultiBufferStream",""+this.buffers.length+" stored buffer(s) ("+c+"/"+f+" bytes), continuous ranges: "+_)},d.prototype.cleanBuffers=function(){var e,n;for(e=0;e<this.buffers.length;e++)n=this.buffers[e],n.usedBytes===n.byteLength&&(r.debug("MultiBufferStream","Removing buffer #"+e),this.buffers.splice(e,1),e--)},d.prototype.mergeNextBuffer=function(){var e;if(this.bufferIndex+1<this.buffers.length)if(e=this.buffers[this.bufferIndex+1],e.fileStart===this.buffer.fileStart+this.buffer.byteLength){var n=this.buffer.byteLength,s=this.buffer.usedBytes,c=this.buffer.fileStart;return this.buffers[this.bufferIndex]=ArrayBuffer.concat(this.buffer,e),this.buffer=this.buffers[this.bufferIndex],this.buffers.splice(this.bufferIndex+1,1),this.buffer.usedBytes=s,this.buffer.fileStart=c,r.debug("ISOFile","Concatenating buffer for box parsing (length: "+n+"->"+this.buffer.byteLength+")"),!0}else return!1;else return!1},d.prototype.findPosition=function(e,n,s){var c,f=null,m=-1;for(e===!0?c=0:c=this.bufferIndex;c<this.buffers.length&&(f=this.buffers[c],f.fileStart<=n);)m=c,s&&(f.fileStart+f.byteLength<=n?f.usedBytes=f.byteLength:f.usedBytes=n-f.fileStart,this.logBufferLevel()),c++;return m!==-1?(f=this.buffers[m],f.fileStart+f.byteLength>=n?(r.debug("MultiBufferStream","Found position in existing buffer #"+m),m):-1):-1},d.prototype.findEndContiguousBuf=function(e){var n,s,c,f=e!==void 0?e:this.bufferIndex;if(s=this.buffers[f],this.buffers.length>f+1)for(n=f+1;n<this.buffers.length&&(c=this.buffers[n],c.fileStart===s.fileStart+s.byteLength);n++)s=c;return s.fileStart+s.byteLength},d.prototype.getEndFilePositionAfter=function(e){var n=this.findPosition(!0,e,!1);return n!==-1?this.findEndContiguousBuf(n):e},d.prototype.addUsedBytes=function(e){this.buffer.usedBytes+=e,this.logBufferLevel()},d.prototype.setAllUsedBytes=function(){this.buffer.usedBytes=this.buffer.byteLength,this.logBufferLevel()},d.prototype.seek=function(e,n,s){var c;return c=this.findPosition(n,e,s),c!==-1?(this.buffer=this.buffers[c],this.bufferIndex=c,this.position=e-this.buffer.fileStart,r.debug("MultiBufferStream","Repositioning parser at buffer position: "+this.position),!0):(r.debug("MultiBufferStream","Position "+e+" not found in buffered data"),!1)},d.prototype.getPosition=function(){if(this.bufferIndex===-1||this.buffers[this.bufferIndex]===null)throw"Error accessing position in the MultiBufferStream";return this.buffers[this.bufferIndex].fileStart+this.position},d.prototype.getLength=function(){return this.byteLength},d.prototype.getEndPosition=function(){if(this.bufferIndex===-1||this.buffers[this.bufferIndex]===null)throw"Error accessing position in the MultiBufferStream";return this.buffers[this.bufferIndex].fileStart+this.byteLength},t.MultiBufferStream=d;var h=function(){var e=3,n=4,s=5,c=6,f=[];f[e]="ES_Descriptor",f[n]="DecoderConfigDescriptor",f[s]="DecoderSpecificInfo",f[c]="SLConfigDescriptor",this.getDescriptorName=function(_){return f[_]};var m=this,p={};return this.parseOneDescriptor=function(_){var S=0,x,w,U;for(x=_.readUint8(),U=_.readUint8();U&128;)S=(U&127)<<7,U=_.readUint8();return S+=U&127,r.debug("MPEG4DescriptorParser","Found "+(f[x]||"Descriptor "+x)+", size "+S+" at position "+_.getPosition()),f[x]?w=new p[f[x]](S):w=new p.Descriptor(S),w.parse(_),w},p.Descriptor=function(_,S){this.tag=_,this.size=S,this.descs=[]},p.Descriptor.prototype.parse=function(_){this.data=_.readUint8Array(this.size)},p.Descriptor.prototype.findDescriptor=function(_){for(var S=0;S<this.descs.length;S++)if(this.descs[S].tag==_)return this.descs[S];return null},p.Descriptor.prototype.parseRemainingDescriptors=function(_){for(var S=_.position;_.position<S+this.size;){var x=m.parseOneDescriptor(_);this.descs.push(x)}},p.ES_Descriptor=function(_){p.Descriptor.call(this,e,_)},p.ES_Descriptor.prototype=new p.Descriptor,p.ES_Descriptor.prototype.parse=function(_){if(this.ES_ID=_.readUint16(),this.flags=_.readUint8(),this.size-=3,this.flags&128?(this.dependsOn_ES_ID=_.readUint16(),this.size-=2):this.dependsOn_ES_ID=0,this.flags&64){var S=_.readUint8();this.URL=_.readString(S),this.size-=S+1}else this.URL="";this.flags&32?(this.OCR_ES_ID=_.readUint16(),this.size-=2):this.OCR_ES_ID=0,this.parseRemainingDescriptors(_)},p.ES_Descriptor.prototype.getOTI=function(_){var S=this.findDescriptor(n);return S?S.oti:0},p.ES_Descriptor.prototype.getAudioConfig=function(_){var S=this.findDescriptor(n);if(!S)return null;var x=S.findDescriptor(s);if(x&&x.data){var w=(x.data[0]&248)>>3;return w===31&&x.data.length>=2&&(w=32+((x.data[0]&7)<<3)+((x.data[1]&224)>>5)),w}else return null},p.DecoderConfigDescriptor=function(_){p.Descriptor.call(this,n,_)},p.DecoderConfigDescriptor.prototype=new p.Descriptor,p.DecoderConfigDescriptor.prototype.parse=function(_){this.oti=_.readUint8(),this.streamType=_.readUint8(),this.bufferSize=_.readUint24(),this.maxBitrate=_.readUint32(),this.avgBitrate=_.readUint32(),this.size-=13,this.parseRemainingDescriptors(_)},p.DecoderSpecificInfo=function(_){p.Descriptor.call(this,s,_)},p.DecoderSpecificInfo.prototype=new p.Descriptor,p.SLConfigDescriptor=function(_){p.Descriptor.call(this,c,_)},p.SLConfigDescriptor.prototype=new p.Descriptor,this};t.MPEG4DescriptorParser=h;var l={ERR_INVALID_DATA:-1,ERR_NOT_ENOUGH_DATA:0,OK:1,BASIC_BOXES:["mdat","idat","free","skip","meco","strk"],FULL_BOXES:["hmhd","nmhd","iods","xml ","bxml","ipro","mere"],CONTAINER_BOXES:[["moov",["trak","pssh"]],["trak"],["edts"],["mdia"],["minf"],["dinf"],["stbl",["sgpd","sbgp"]],["mvex",["trex"]],["moof",["traf"]],["traf",["trun","sgpd","sbgp"]],["vttc"],["tref"],["iref"],["mfra",["tfra"]],["meco"],["hnti"],["hinf"],["strk"],["strd"],["sinf"],["rinf"],["schi"],["trgr"],["udta",["kind"]],["iprp",["ipma"]],["ipco"],["grpl"],["j2kH"],["etyp",["tyco"]]],boxCodes:[],fullBoxCodes:[],containerBoxCodes:[],sampleEntryCodes:{},sampleGroupEntryCodes:[],trackGroupTypes:[],UUIDBoxes:{},UUIDs:[],initialize:function(){l.FullBox.prototype=new l.Box,l.ContainerBox.prototype=new l.Box,l.SampleEntry.prototype=new l.Box,l.TrackGroupTypeBox.prototype=new l.FullBox,l.BASIC_BOXES.forEach(function(e){l.createBoxCtor(e)}),l.FULL_BOXES.forEach(function(e){l.createFullBoxCtor(e)}),l.CONTAINER_BOXES.forEach(function(e){l.createContainerBoxCtor(e[0],null,e[1])})},Box:function(e,n,s){this.type=e,this.size=n,this.uuid=s},FullBox:function(e,n,s){l.Box.call(this,e,n,s),this.flags=0,this.version=0},ContainerBox:function(e,n,s){l.Box.call(this,e,n,s),this.boxes=[]},SampleEntry:function(e,n,s,c){l.ContainerBox.call(this,e,n),this.hdr_size=s,this.start=c},SampleGroupEntry:function(e){this.grouping_type=e},TrackGroupTypeBox:function(e,n){l.FullBox.call(this,e,n)},createBoxCtor:function(e,n){l.boxCodes.push(e),l[e+"Box"]=function(s){l.Box.call(this,e,s)},l[e+"Box"].prototype=new l.Box,n&&(l[e+"Box"].prototype.parse=n)},createFullBoxCtor:function(e,n){l[e+"Box"]=function(s){l.FullBox.call(this,e,s)},l[e+"Box"].prototype=new l.FullBox,l[e+"Box"].prototype.parse=function(s){this.parseFullHeader(s),n&&n.call(this,s)}},addSubBoxArrays:function(e){if(e){this.subBoxNames=e;for(var n=e.length,s=0;s<n;s++)this[e[s]+"s"]=[]}},createContainerBoxCtor:function(e,n,s){l[e+"Box"]=function(c){l.ContainerBox.call(this,e,c),l.addSubBoxArrays.call(this,s)},l[e+"Box"].prototype=new l.ContainerBox,n&&(l[e+"Box"].prototype.parse=n)},createMediaSampleEntryCtor:function(e,n,s){l.sampleEntryCodes[e]=[],l[e+"SampleEntry"]=function(c,f){l.SampleEntry.call(this,c,f),l.addSubBoxArrays.call(this,s)},l[e+"SampleEntry"].prototype=new l.SampleEntry,n&&(l[e+"SampleEntry"].prototype.parse=n)},createSampleEntryCtor:function(e,n,s,c){l.sampleEntryCodes[e].push(n),l[n+"SampleEntry"]=function(f){l[e+"SampleEntry"].call(this,n,f),l.addSubBoxArrays.call(this,c)},l[n+"SampleEntry"].prototype=new l[e+"SampleEntry"],s&&(l[n+"SampleEntry"].prototype.parse=s)},createEncryptedSampleEntryCtor:function(e,n,s){l.createSampleEntryCtor.call(this,e,n,s,["sinf"])},createSampleGroupCtor:function(e,n){l[e+"SampleGroupEntry"]=function(s){l.SampleGroupEntry.call(this,e,s)},l[e+"SampleGroupEntry"].prototype=new l.SampleGroupEntry,n&&(l[e+"SampleGroupEntry"].prototype.parse=n)},createTrackGroupCtor:function(e,n){l[e+"TrackGroupTypeBox"]=function(s){l.TrackGroupTypeBox.call(this,e,s)},l[e+"TrackGroupTypeBox"].prototype=new l.TrackGroupTypeBox,n&&(l[e+"TrackGroupTypeBox"].prototype.parse=n)},createUUIDBox:function(e,n,s,c){l.UUIDs.push(e),l.UUIDBoxes[e]=function(f){n?l.FullBox.call(this,"uuid",f,e):s?l.ContainerBox.call(this,"uuid",f,e):l.Box.call(this,"uuid",f,e)},l.UUIDBoxes[e].prototype=n?new l.FullBox:s?new l.ContainerBox:new l.Box,c&&(n?l.UUIDBoxes[e].prototype.parse=function(f){this.parseFullHeader(f),c&&c.call(this,f)}:l.UUIDBoxes[e].prototype.parse=c)}};l.initialize(),l.TKHD_FLAG_ENABLED=1,l.TKHD_FLAG_IN_MOVIE=2,l.TKHD_FLAG_IN_PREVIEW=4,l.TFHD_FLAG_BASE_DATA_OFFSET=1,l.TFHD_FLAG_SAMPLE_DESC=2,l.TFHD_FLAG_SAMPLE_DUR=8,l.TFHD_FLAG_SAMPLE_SIZE=16,l.TFHD_FLAG_SAMPLE_FLAGS=32,l.TFHD_FLAG_DUR_EMPTY=65536,l.TFHD_FLAG_DEFAULT_BASE_IS_MOOF=131072,l.TRUN_FLAGS_DATA_OFFSET=1,l.TRUN_FLAGS_FIRST_FLAG=4,l.TRUN_FLAGS_DURATION=256,l.TRUN_FLAGS_SIZE=512,l.TRUN_FLAGS_FLAGS=1024,l.TRUN_FLAGS_CTS_OFFSET=2048,l.Box.prototype.add=function(e){return this.addBox(new l[e+"Box"])},l.Box.prototype.addBox=function(e){return this.boxes.push(e),this[e.type+"s"]?this[e.type+"s"].push(e):this[e.type]=e,e},l.Box.prototype.set=function(e,n){return this[e]=n,this},l.Box.prototype.addEntry=function(e,n){var s=n||"entries";return this[s]||(this[s]=[]),this[s].push(e),this},t.BoxParser=l,l.parseUUID=function(e){return l.parseHex16(e)},l.parseHex16=function(e){for(var n="",s=0;s<16;s++){var c=e.readUint8().toString(16);n+=c.length===1?"0"+c:c}return n},l.parseOneBox=function(e,n,s){var c,f=e.getPosition(),m=0,p,_;if(e.getEndPosition()-f<8)return r.debug("BoxParser","Not enough data in stream to parse the type and size of the box"),{code:l.ERR_NOT_ENOUGH_DATA};if(s&&s<8)return r.debug("BoxParser","Not enough bytes left in the parent box to parse a new box"),{code:l.ERR_NOT_ENOUGH_DATA};var S=e.readUint32(),x=e.readString(4),w=x;if(r.debug("BoxParser","Found box of type '"+x+"' and size "+S+" at position "+f),m=8,x=="uuid"){if(e.getEndPosition()-e.getPosition()<16||s-m<16)return e.seek(f),r.debug("BoxParser","Not enough bytes left in the parent box to parse a UUID box"),{code:l.ERR_NOT_ENOUGH_DATA};_=l.parseUUID(e),m+=16,w=_}if(S==1){if(e.getEndPosition()-e.getPosition()<8||s&&s-m<8)return e.seek(f),r.warn("BoxParser",'Not enough data in stream to parse the extended size of the "'+x+'" box'),{code:l.ERR_NOT_ENOUGH_DATA};S=e.readUint64(),m+=8}else if(S===0){if(s)S=s;else if(x!=="mdat")return r.error("BoxParser","Unlimited box size not supported for type: '"+x+"'"),c=new l.Box(x,S),{code:l.OK,box:c,size:c.size}}return S!==0&&S<m?(r.error("BoxParser","Box of type "+x+" has an invalid size "+S+" (too small to be a box)"),{code:l.ERR_NOT_ENOUGH_DATA,type:x,size:S,hdr_size:m,start:f}):S!==0&&s&&S>s?(r.error("BoxParser","Box of type '"+x+"' has a size "+S+" greater than its container size "+s),{code:l.ERR_NOT_ENOUGH_DATA,type:x,size:S,hdr_size:m,start:f}):S!==0&&f+S>e.getEndPosition()?(e.seek(f),r.info("BoxParser","Not enough data in stream to parse the entire '"+x+"' box"),{code:l.ERR_NOT_ENOUGH_DATA,type:x,size:S,hdr_size:m,start:f}):n?{code:l.OK,type:x,size:S,hdr_size:m,start:f}:(l[x+"Box"]?c=new l[x+"Box"](S):x!=="uuid"?(r.warn("BoxParser","Unknown box type: '"+x+"'"),c=new l.Box(x,S),c.has_unparsed_data=!0):l.UUIDBoxes[_]?c=new l.UUIDBoxes[_](S):(r.warn("BoxParser","Unknown uuid type: '"+_+"'"),c=new l.Box(x,S),c.uuid=_,c.has_unparsed_data=!0),c.hdr_size=m,c.start=f,c.write===l.Box.prototype.write&&c.type!=="mdat"&&(r.info("BoxParser","'"+w+"' box writing not yet implemented, keeping unparsed data in memory for later write"),c.parseDataAndRewind(e)),c.parse(e),p=e.getPosition()-(c.start+c.size),p<0?(r.warn("BoxParser","Parsing of box '"+w+"' did not read the entire indicated box data size (missing "+-p+" bytes), seeking forward"),e.seek(c.start+c.size)):p>0&&(r.error("BoxParser","Parsing of box '"+w+"' read "+p+" more bytes than the indicated box data size, seeking backwards"),c.size!==0&&e.seek(c.start+c.size)),{code:l.OK,box:c,size:c.size})},l.Box.prototype.parse=function(e){this.type!="mdat"?this.data=e.readUint8Array(this.size-this.hdr_size):this.size===0?e.seek(e.getEndPosition()):e.seek(this.start+this.size)},l.Box.prototype.parseDataAndRewind=function(e){this.data=e.readUint8Array(this.size-this.hdr_size),e.position-=this.size-this.hdr_size},l.FullBox.prototype.parseDataAndRewind=function(e){this.parseFullHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size),this.hdr_size-=4,e.position-=this.size-this.hdr_size},l.FullBox.prototype.parseFullHeader=function(e){this.version=e.readUint8(),this.flags=e.readUint24(),this.hdr_size+=4},l.FullBox.prototype.parse=function(e){this.parseFullHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size)},l.ContainerBox.prototype.parse=function(e){for(var n,s;e.getPosition()<this.start+this.size;)if(n=l.parseOneBox(e,!1,this.size-(e.getPosition()-this.start)),n.code===l.OK)if(s=n.box,this.boxes.push(s),this.subBoxNames&&this.subBoxNames.indexOf(s.type)!=-1)this[this.subBoxNames[this.subBoxNames.indexOf(s.type)]+"s"].push(s);else{var c=s.type!=="uuid"?s.type:s.uuid;this[c]?r.warn("Box of type "+c+" already stored in field of this type"):this[c]=s}else return},l.Box.prototype.parseLanguage=function(e){this.language=e.readUint16();var n=[];n[0]=this.language>>10&31,n[1]=this.language>>5&31,n[2]=this.language&31,this.languageString=String.fromCharCode(n[0]+96,n[1]+96,n[2]+96)},l.SAMPLE_ENTRY_TYPE_VISUAL="Visual",l.SAMPLE_ENTRY_TYPE_AUDIO="Audio",l.SAMPLE_ENTRY_TYPE_HINT="Hint",l.SAMPLE_ENTRY_TYPE_METADATA="Metadata",l.SAMPLE_ENTRY_TYPE_SUBTITLE="Subtitle",l.SAMPLE_ENTRY_TYPE_SYSTEM="System",l.SAMPLE_ENTRY_TYPE_TEXT="Text",l.SampleEntry.prototype.parseHeader=function(e){e.readUint8Array(6),this.data_reference_index=e.readUint16(),this.hdr_size+=8},l.SampleEntry.prototype.parse=function(e){this.parseHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size)},l.SampleEntry.prototype.parseDataAndRewind=function(e){this.parseHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size),this.hdr_size-=8,e.position-=this.size-this.hdr_size},l.SampleEntry.prototype.parseFooter=function(e){l.ContainerBox.prototype.parse.call(this,e)},l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_HINT),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_METADATA),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SYSTEM),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_TEXT),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,function(e){var n;this.parseHeader(e),e.readUint16(),e.readUint16(),e.readUint32Array(3),this.width=e.readUint16(),this.height=e.readUint16(),this.horizresolution=e.readUint32(),this.vertresolution=e.readUint32(),e.readUint32(),this.frame_count=e.readUint16(),n=Math.min(31,e.readUint8()),this.compressorname=e.readString(n),n<31&&e.readString(31-n),this.depth=e.readUint16(),e.readUint16(),this.parseFooter(e)}),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,function(e){this.parseHeader(e),e.readUint32Array(2),this.channel_count=e.readUint16(),this.samplesize=e.readUint16(),e.readUint16(),e.readUint16(),this.samplerate=e.readUint32()/65536,this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"avc1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"avc2"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"avc3"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"avc4"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"av01"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"dav1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"hvc1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"hev1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"hvt1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"lhe1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"dvh1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"dvhe"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vvc1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vvi1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vvs1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vvcN"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vp08"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vp09"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"avs3"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"j2ki"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"mjp2"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"mjpg"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"uncv"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"mp4a"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"ac-3"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"ac-4"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"ec-3"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"Opus"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"mha1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"mha2"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"mhm1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"mhm2"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"encv"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"enca"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE,"encu"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SYSTEM,"encs"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_TEXT,"enct"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_METADATA,"encm"),l.createBoxCtor("a1lx",function(e){var n=e.readUint8()&1,s=((n&1)+1)*16;this.layer_size=[];for(var c=0;c<3;c++)s==16?this.layer_size[c]=e.readUint16():this.layer_size[c]=e.readUint32()}),l.createBoxCtor("a1op",function(e){this.op_index=e.readUint8()}),l.createFullBoxCtor("auxC",function(e){this.aux_type=e.readCString();var n=this.size-this.hdr_size-(this.aux_type.length+1);this.aux_subtype=e.readUint8Array(n)}),l.createBoxCtor("av1C",function(e){var n=e.readUint8();if(n>>7&!1){r.error("av1C marker problem");return}if(this.version=n&127,this.version!==1){r.error("av1C version "+this.version+" not supported");return}if(n=e.readUint8(),this.seq_profile=n>>5&7,this.seq_level_idx_0=n&31,n=e.readUint8(),this.seq_tier_0=n>>7&1,this.high_bitdepth=n>>6&1,this.twelve_bit=n>>5&1,this.monochrome=n>>4&1,this.chroma_subsampling_x=n>>3&1,this.chroma_subsampling_y=n>>2&1,this.chroma_sample_position=n&3,n=e.readUint8(),this.reserved_1=n>>5&7,this.reserved_1!==0){r.error("av1C reserved_1 parsing problem");return}if(this.initial_presentation_delay_present=n>>4&1,this.initial_presentation_delay_present===1)this.initial_presentation_delay_minus_one=n&15;else if(this.reserved_2=n&15,this.reserved_2!==0){r.error("av1C reserved_2 parsing problem");return}var s=this.size-this.hdr_size-4;this.configOBUs=e.readUint8Array(s)}),l.createBoxCtor("avcC",function(e){var n,s;for(this.configurationVersion=e.readUint8(),this.AVCProfileIndication=e.readUint8(),this.profile_compatibility=e.readUint8(),this.AVCLevelIndication=e.readUint8(),this.lengthSizeMinusOne=e.readUint8()&3,this.nb_SPS_nalus=e.readUint8()&31,s=this.size-this.hdr_size-6,this.SPS=[],n=0;n<this.nb_SPS_nalus;n++)this.SPS[n]={},this.SPS[n].length=e.readUint16(),this.SPS[n].nalu=e.readUint8Array(this.SPS[n].length),s-=2+this.SPS[n].length;for(this.nb_PPS_nalus=e.readUint8(),s--,this.PPS=[],n=0;n<this.nb_PPS_nalus;n++)this.PPS[n]={},this.PPS[n].length=e.readUint16(),this.PPS[n].nalu=e.readUint8Array(this.PPS[n].length),s-=2+this.PPS[n].length;s>0&&(this.ext=e.readUint8Array(s))}),l.createBoxCtor("btrt",function(e){this.bufferSizeDB=e.readUint32(),this.maxBitrate=e.readUint32(),this.avgBitrate=e.readUint32()}),l.createFullBoxCtor("ccst",function(e){var n=e.readUint8();this.all_ref_pics_intra=(n&128)==128,this.intra_pred_used=(n&64)==64,this.max_ref_per_pic=(n&63)>>2,e.readUint24()}),l.createBoxCtor("cdef",function(e){var n;for(this.channel_count=e.readUint16(),this.channel_indexes=[],this.channel_types=[],this.channel_associations=[],n=0;n<this.channel_count;n++)this.channel_indexes.push(e.readUint16()),this.channel_types.push(e.readUint16()),this.channel_associations.push(e.readUint16())}),l.createBoxCtor("clap",function(e){this.cleanApertureWidthN=e.readUint32(),this.cleanApertureWidthD=e.readUint32(),this.cleanApertureHeightN=e.readUint32(),this.cleanApertureHeightD=e.readUint32(),this.horizOffN=e.readUint32(),this.horizOffD=e.readUint32(),this.vertOffN=e.readUint32(),this.vertOffD=e.readUint32()}),l.createBoxCtor("clli",function(e){this.max_content_light_level=e.readUint16(),this.max_pic_average_light_level=e.readUint16()}),l.createFullBoxCtor("cmex",function(e){this.flags&1&&(this.pos_x=e.readInt32()),this.flags&2&&(this.pos_y=e.readInt32()),this.flags&4&&(this.pos_z=e.readInt32()),this.flags&8&&(this.version==0?this.flags&16?(this.quat_x=e.readInt32(),this.quat_y=e.readInt32(),this.quat_z=e.readInt32()):(this.quat_x=e.readInt16(),this.quat_y=e.readInt16(),this.quat_z=e.readInt16()):this.version==1),this.flags&32&&(this.id=e.readUint32())}),l.createFullBoxCtor("cmin",function(e){this.focal_length_x=e.readInt32(),this.principal_point_x=e.readInt32(),this.principal_point_y=e.readInt32(),this.flags&1&&(this.focal_length_y=e.readInt32(),this.skew_factor=e.readInt32())}),l.createBoxCtor("cmpd",function(e){for(this.component_count=e.readUint16(),this.component_types=[],this.component_type_urls=[],i=0;i<this.component_count;i++){var n=e.readUint16();this.component_types.push(n),n>=32768&&this.component_type_urls.push(e.readCString())}}),l.createFullBoxCtor("co64",function(e){var n,s;if(n=e.readUint32(),this.chunk_offsets=[],this.version===0)for(s=0;s<n;s++)this.chunk_offsets.push(e.readUint64())}),l.createFullBoxCtor("CoLL",function(e){this.maxCLL=e.readUint16(),this.maxFALL=e.readUint16()}),l.createBoxCtor("colr",function(e){if(this.colour_type=e.readString(4),this.colour_type==="nclx"){this.colour_primaries=e.readUint16(),this.transfer_characteristics=e.readUint16(),this.matrix_coefficients=e.readUint16();var n=e.readUint8();this.full_range_flag=n>>7}else this.colour_type==="rICC"?this.ICC_profile=e.readUint8Array(this.size-4):this.colour_type==="prof"&&(this.ICC_profile=e.readUint8Array(this.size-4))}),l.createFullBoxCtor("cprt",function(e){this.parseLanguage(e),this.notice=e.readCString()}),l.createFullBoxCtor("cslg",function(e){this.version===0&&(this.compositionToDTSShift=e.readInt32(),this.leastDecodeToDisplayDelta=e.readInt32(),this.greatestDecodeToDisplayDelta=e.readInt32(),this.compositionStartTime=e.readInt32(),this.compositionEndTime=e.readInt32())}),l.createFullBoxCtor("ctts",function(e){var n,s;if(n=e.readUint32(),this.sample_counts=[],this.sample_offsets=[],this.version===0)for(s=0;s<n;s++){this.sample_counts.push(e.readUint32());var c=e.readInt32();c<0&&r.warn("BoxParser","ctts box uses negative values without using version 1"),this.sample_offsets.push(c)}else if(this.version==1)for(s=0;s<n;s++)this.sample_counts.push(e.readUint32()),this.sample_offsets.push(e.readInt32())}),l.createBoxCtor("dac3",function(e){var n=e.readUint8(),s=e.readUint8(),c=e.readUint8();this.fscod=n>>6,this.bsid=n>>1&31,this.bsmod=(n&1)<<2|s>>6&3,this.acmod=s>>3&7,this.lfeon=s>>2&1,this.bit_rate_code=s&3|c>>5&7}),l.createBoxCtor("dec3",function(e){var n=e.readUint16();this.data_rate=n>>3,this.num_ind_sub=n&7,this.ind_subs=[];for(var s=0;s<this.num_ind_sub+1;s++){var c={};this.ind_subs.push(c);var f=e.readUint8(),m=e.readUint8(),p=e.readUint8();c.fscod=f>>6,c.bsid=f>>1&31,c.bsmod=(f&1)<<4|m>>4&15,c.acmod=m>>1&7,c.lfeon=m&1,c.num_dep_sub=p>>1&15,c.num_dep_sub>0&&(c.chan_loc=(p&1)<<8|e.readUint8())}}),l.createFullBoxCtor("dfLa",function(e){var n=127,s=128,c=[],f=["STREAMINFO","PADDING","APPLICATION","SEEKTABLE","VORBIS_COMMENT","CUESHEET","PICTURE","RESERVED"];this.parseFullHeader(e);do{var m=e.readUint8(),p=Math.min(m&n,f.length-1);if(p?e.readUint8Array(e.readUint24()):(e.readUint8Array(13),this.samplerate=e.readUint32()>>12,e.readUint8Array(20)),c.push(f[p]),m&s)break}while(!0);this.numMetadataBlocks=c.length+" ("+c.join(", ")+")"}),l.createBoxCtor("dimm",function(e){this.bytessent=e.readUint64()}),l.createBoxCtor("dmax",function(e){this.time=e.readUint32()}),l.createBoxCtor("dmed",function(e){this.bytessent=e.readUint64()}),l.createBoxCtor("dOps",function(e){if(this.Version=e.readUint8(),this.OutputChannelCount=e.readUint8(),this.PreSkip=e.readUint16(),this.InputSampleRate=e.readUint32(),this.OutputGain=e.readInt16(),this.ChannelMappingFamily=e.readUint8(),this.ChannelMappingFamily!==0){this.StreamCount=e.readUint8(),this.CoupledCount=e.readUint8(),this.ChannelMapping=[];for(var n=0;n<this.OutputChannelCount;n++)this.ChannelMapping[n]=e.readUint8()}}),l.createFullBoxCtor("dref",function(e){var n,s;this.entries=[];for(var c=e.readUint32(),f=0;f<c;f++)if(n=l.parseOneBox(e,!1,this.size-(e.getPosition()-this.start)),n.code===l.OK)s=n.box,this.entries.push(s);else return}),l.createBoxCtor("drep",function(e){this.bytessent=e.readUint64()}),l.createFullBoxCtor("elng",function(e){this.extended_language=e.readString(this.size-this.hdr_size)}),l.createFullBoxCtor("elst",function(e){this.entries=[];for(var n=e.readUint32(),s=0;s<n;s++){var c={};this.entries.push(c),this.version===1?(c.segment_duration=e.readUint64(),c.media_time=e.readInt64()):(c.segment_duration=e.readUint32(),c.media_time=e.readInt32()),c.media_rate_integer=e.readInt16(),c.media_rate_fraction=e.readInt16()}}),l.createFullBoxCtor("emsg",function(e){this.version==1?(this.timescale=e.readUint32(),this.presentation_time=e.readUint64(),this.event_duration=e.readUint32(),this.id=e.readUint32(),this.scheme_id_uri=e.readCString(),this.value=e.readCString()):(this.scheme_id_uri=e.readCString(),this.value=e.readCString(),this.timescale=e.readUint32(),this.presentation_time_delta=e.readUint32(),this.event_duration=e.readUint32(),this.id=e.readUint32());var n=this.size-this.hdr_size-(4*4+(this.scheme_id_uri.length+1)+(this.value.length+1));this.version==1&&(n-=4),this.message_data=e.readUint8Array(n)}),l.createEntityToGroupCtor=function(e,n){l[e+"Box"]=function(s){l.FullBox.call(this,e,s)},l[e+"Box"].prototype=new l.FullBox,l[e+"Box"].prototype.parse=function(s){if(this.parseFullHeader(s),n)n.call(this,s);else for(this.group_id=s.readUint32(),this.num_entities_in_group=s.readUint32(),this.entity_ids=[],i=0;i<this.num_entities_in_group;i++){var c=s.readUint32();this.entity_ids.push(c)}}},l.createEntityToGroupCtor("aebr"),l.createEntityToGroupCtor("afbr"),l.createEntityToGroupCtor("albc"),l.createEntityToGroupCtor("altr"),l.createEntityToGroupCtor("brst"),l.createEntityToGroupCtor("dobr"),l.createEntityToGroupCtor("eqiv"),l.createEntityToGroupCtor("favc"),l.createEntityToGroupCtor("fobr"),l.createEntityToGroupCtor("iaug"),l.createEntityToGroupCtor("pano"),l.createEntityToGroupCtor("slid"),l.createEntityToGroupCtor("ster"),l.createEntityToGroupCtor("tsyn"),l.createEntityToGroupCtor("wbbr"),l.createEntityToGroupCtor("prgr"),l.createFullBoxCtor("esds",function(e){var n=e.readUint8Array(this.size-this.hdr_size);if(this.data=n,typeof h<"u"){var s=new h;this.esd=s.parseOneDescriptor(new o(n.buffer,0,o.BIG_ENDIAN))}}),l.createBoxCtor("fiel",function(e){this.fieldCount=e.readUint8(),this.fieldOrdering=e.readUint8()}),l.createBoxCtor("frma",function(e){this.data_format=e.readString(4)}),l.createBoxCtor("ftyp",function(e){var n=this.size-this.hdr_size;this.major_brand=e.readString(4),this.minor_version=e.readUint32(),n-=8,this.compatible_brands=[];for(var s=0;n>=4;)this.compatible_brands[s]=e.readString(4),n-=4,s++}),l.createFullBoxCtor("hdlr",function(e){this.version===0&&(e.readUint32(),this.handler=e.readString(4),e.readUint32Array(3),this.name=e.readString(this.size-this.hdr_size-20),this.name[this.name.length-1]==="\0"&&(this.name=this.name.slice(0,-1)))}),l.createBoxCtor("hvcC",function(e){var n,s,c,f;this.configurationVersion=e.readUint8(),f=e.readUint8(),this.general_profile_space=f>>6,this.general_tier_flag=(f&32)>>5,this.general_profile_idc=f&31,this.general_profile_compatibility=e.readUint32(),this.general_constraint_indicator=e.readUint8Array(6),this.general_level_idc=e.readUint8(),this.min_spatial_segmentation_idc=e.readUint16()&4095,this.parallelismType=e.readUint8()&3,this.chroma_format_idc=e.readUint8()&3,this.bit_depth_luma_minus8=e.readUint8()&7,this.bit_depth_chroma_minus8=e.readUint8()&7,this.avgFrameRate=e.readUint16(),f=e.readUint8(),this.constantFrameRate=f>>6,this.numTemporalLayers=(f&13)>>3,this.temporalIdNested=(f&4)>>2,this.lengthSizeMinusOne=f&3,this.nalu_arrays=[];var m=e.readUint8();for(n=0;n<m;n++){var p=[];this.nalu_arrays.push(p),f=e.readUint8(),p.completeness=(f&128)>>7,p.nalu_type=f&63;var _=e.readUint16();for(s=0;s<_;s++){var S={};p.push(S),c=e.readUint16(),S.data=e.readUint8Array(c)}}}),l.createFullBoxCtor("iinf",function(e){var n;this.version===0?this.entry_count=e.readUint16():this.entry_count=e.readUint32(),this.item_infos=[];for(var s=0;s<this.entry_count;s++)if(n=l.parseOneBox(e,!1,this.size-(e.getPosition()-this.start)),n.code===l.OK)n.box.type!=="infe"&&r.error("BoxParser","Expected 'infe' box, got "+n.box.type),this.item_infos[s]=n.box;else return}),l.createFullBoxCtor("iloc",function(e){var n;n=e.readUint8(),this.offset_size=n>>4&15,this.length_size=n&15,n=e.readUint8(),this.base_offset_size=n>>4&15,this.version===1||this.version===2?this.index_size=n&15:this.index_size=0,this.items=[];var s=0;if(this.version<2)s=e.readUint16();else if(this.version===2)s=e.readUint32();else throw"version of iloc box not supported";for(var c=0;c<s;c++){var f={};if(this.items.push(f),this.version<2)f.item_ID=e.readUint16();else if(this.version===2)f.item_ID=e.readUint16();else throw"version of iloc box not supported";switch(this.version===1||this.version===2?f.construction_method=e.readUint16()&15:f.construction_method=0,f.data_reference_index=e.readUint16(),this.base_offset_size){case 0:f.base_offset=0;break;case 4:f.base_offset=e.readUint32();break;case 8:f.base_offset=e.readUint64();break;default:throw"Error reading base offset size"}var m=e.readUint16();f.extents=[];for(var p=0;p<m;p++){var _={};if(f.extents.push(_),this.version===1||this.version===2)switch(this.index_size){case 0:_.extent_index=0;break;case 4:_.extent_index=e.readUint32();break;case 8:_.extent_index=e.readUint64();break;default:throw"Error reading extent index"}switch(this.offset_size){case 0:_.extent_offset=0;break;case 4:_.extent_offset=e.readUint32();break;case 8:_.extent_offset=e.readUint64();break;default:throw"Error reading extent index"}switch(this.length_size){case 0:_.extent_length=0;break;case 4:_.extent_length=e.readUint32();break;case 8:_.extent_length=e.readUint64();break;default:throw"Error reading extent index"}}}}),l.createBoxCtor("imir",function(e){var n=e.readUint8();this.reserved=n>>7,this.axis=n&1}),l.createFullBoxCtor("infe",function(e){if((this.version===0||this.version===1)&&(this.item_ID=e.readUint16(),this.item_protection_index=e.readUint16(),this.item_name=e.readCString(),this.content_type=e.readCString(),this.content_encoding=e.readCString()),this.version===1){this.extension_type=e.readString(4),r.warn("BoxParser","Cannot parse extension type"),e.seek(this.start+this.size);return}this.version>=2&&(this.version===2?this.item_ID=e.readUint16():this.version===3&&(this.item_ID=e.readUint32()),this.item_protection_index=e.readUint16(),this.item_type=e.readString(4),this.item_name=e.readCString(),this.item_type==="mime"?(this.content_type=e.readCString(),this.content_encoding=e.readCString()):this.item_type==="uri "&&(this.item_uri_type=e.readCString()))}),l.createFullBoxCtor("ipma",function(e){var n,s;for(entry_count=e.readUint32(),this.associations=[],n=0;n<entry_count;n++){var c={};this.associations.push(c),this.version<1?c.id=e.readUint16():c.id=e.readUint32();var f=e.readUint8();for(c.props=[],s=0;s<f;s++){var m=e.readUint8(),p={};c.props.push(p),p.essential=(m&128)>>7===1,this.flags&1?p.property_index=(m&127)<<8|e.readUint8():p.property_index=m&127}}}),l.createFullBoxCtor("iref",function(e){var n,s;for(this.references=[];e.getPosition()<this.start+this.size;)if(n=l.parseOneBox(e,!0,this.size-(e.getPosition()-this.start)),n.code===l.OK)this.version===0?s=new l.SingleItemTypeReferenceBox(n.type,n.size,n.hdr_size,n.start):s=new l.SingleItemTypeReferenceBoxLarge(n.type,n.size,n.hdr_size,n.start),s.write===l.Box.prototype.write&&s.type!=="mdat"&&(r.warn("BoxParser",s.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),s.parseDataAndRewind(e)),s.parse(e),this.references.push(s);else return}),l.createBoxCtor("irot",function(e){this.angle=e.readUint8()&3}),l.createFullBoxCtor("ispe",function(e){this.image_width=e.readUint32(),this.image_height=e.readUint32()}),l.createFullBoxCtor("kind",function(e){this.schemeURI=e.readCString(),this.value=e.readCString()}),l.createFullBoxCtor("leva",function(e){var n=e.readUint8();this.levels=[];for(var s=0;s<n;s++){var c={};this.levels[s]=c,c.track_ID=e.readUint32();var f=e.readUint8();switch(c.padding_flag=f>>7,c.assignment_type=f&127,c.assignment_type){case 0:c.grouping_type=e.readString(4);break;case 1:c.grouping_type=e.readString(4),c.grouping_type_parameter=e.readUint32();break;case 2:break;case 3:break;case 4:c.sub_track_id=e.readUint32();break;default:r.warn("BoxParser","Unknown leva assignement type")}}}),l.createBoxCtor("lsel",function(e){this.layer_id=e.readUint16()}),l.createBoxCtor("maxr",function(e){this.period=e.readUint32(),this.bytes=e.readUint32()}),l.createBoxCtor("mdcv",function(e){this.display_primaries=[],this.display_primaries[0]={},this.display_primaries[0].x=e.readUint16(),this.display_primaries[0].y=e.readUint16(),this.display_primaries[1]={},this.display_primaries[1].x=e.readUint16(),this.display_primaries[1].y=e.readUint16(),this.display_primaries[2]={},this.display_primaries[2].x=e.readUint16(),this.display_primaries[2].y=e.readUint16(),this.white_point={},this.white_point.x=e.readUint16(),this.white_point.y=e.readUint16(),this.max_display_mastering_luminance=e.readUint32(),this.min_display_mastering_luminance=e.readUint32()}),l.createFullBoxCtor("mdhd",function(e){this.version==1?(this.creation_time=e.readUint64(),this.modification_time=e.readUint64(),this.timescale=e.readUint32(),this.duration=e.readUint64()):(this.creation_time=e.readUint32(),this.modification_time=e.readUint32(),this.timescale=e.readUint32(),this.duration=e.readUint32()),this.parseLanguage(e),e.readUint16()}),l.createFullBoxCtor("mehd",function(e){this.flags&1&&(r.warn("BoxParser","mehd box incorrectly uses flags set to 1, converting version to 1"),this.version=1),this.version==1?this.fragment_duration=e.readUint64():this.fragment_duration=e.readUint32()}),l.createFullBoxCtor("meta",function(e){this.boxes=[],l.ContainerBox.prototype.parse.call(this,e)}),l.createFullBoxCtor("mfhd",function(e){this.sequence_number=e.readUint32()}),l.createFullBoxCtor("mfro",function(e){this._size=e.readUint32()}),l.createFullBoxCtor("mvhd",function(e){this.version==1?(this.creation_time=e.readUint64(),this.modification_time=e.readUint64(),this.timescale=e.readUint32(),this.duration=e.readUint64()):(this.creation_time=e.readUint32(),this.modification_time=e.readUint32(),this.timescale=e.readUint32(),this.duration=e.readUint32()),this.rate=e.readUint32(),this.volume=e.readUint16()>>8,e.readUint16(),e.readUint32Array(2),this.matrix=e.readUint32Array(9),e.readUint32Array(6),this.next_track_id=e.readUint32()}),l.createBoxCtor("npck",function(e){this.packetssent=e.readUint32()}),l.createBoxCtor("nump",function(e){this.packetssent=e.readUint64()}),l.createFullBoxCtor("padb",function(e){var n=e.readUint32();this.padbits=[];for(var s=0;s<Math.floor((n+1)/2);s++)this.padbits=e.readUint8()}),l.createBoxCtor("pasp",function(e){this.hSpacing=e.readUint32(),this.vSpacing=e.readUint32()}),l.createBoxCtor("payl",function(e){this.text=e.readString(this.size-this.hdr_size)}),l.createBoxCtor("payt",function(e){this.payloadID=e.readUint32();var n=e.readUint8();this.rtpmap_string=e.readString(n)}),l.createFullBoxCtor("pdin",function(e){var n=(this.size-this.hdr_size)/8;this.rate=[],this.initial_delay=[];for(var s=0;s<n;s++)this.rate[s]=e.readUint32(),this.initial_delay[s]=e.readUint32()}),l.createFullBoxCtor("pitm",function(e){this.version===0?this.item_id=e.readUint16():this.item_id=e.readUint32()}),l.createFullBoxCtor("pixi",function(e){var n;for(this.num_channels=e.readUint8(),this.bits_per_channels=[],n=0;n<this.num_channels;n++)this.bits_per_channels[n]=e.readUint8()}),l.createBoxCtor("pmax",function(e){this.bytes=e.readUint32()}),l.createFullBoxCtor("prdi",function(e){if(this.step_count=e.readUint16(),this.item_count=[],this.flags&2)for(var n=0;n<this.step_count;n++)this.item_count[n]=e.readUint16()}),l.createFullBoxCtor("prft",function(e){this.ref_track_id=e.readUint32(),this.ntp_timestamp=e.readUint64(),this.version===0?this.media_time=e.readUint32():this.media_time=e.readUint64()}),l.createFullBoxCtor("pssh",function(e){if(this.system_id=l.parseHex16(e),this.version>0){var n=e.readUint32();this.kid=[];for(var s=0;s<n;s++)this.kid[s]=l.parseHex16(e)}var c=e.readUint32();c>0&&(this.data=e.readUint8Array(c))}),l.createFullBoxCtor("clef",function(e){this.width=e.readUint32(),this.height=e.readUint32()}),l.createFullBoxCtor("enof",function(e){this.width=e.readUint32(),this.height=e.readUint32()}),l.createFullBoxCtor("prof",function(e){this.width=e.readUint32(),this.height=e.readUint32()}),l.createContainerBoxCtor("tapt",null,["clef","prof","enof"]),l.createBoxCtor("rtp ",function(e){this.descriptionformat=e.readString(4),this.sdptext=e.readString(this.size-this.hdr_size-4)}),l.createFullBoxCtor("saio",function(e){this.flags&1&&(this.aux_info_type=e.readUint32(),this.aux_info_type_parameter=e.readUint32());var n=e.readUint32();this.offset=[];for(var s=0;s<n;s++)this.version===0?this.offset[s]=e.readUint32():this.offset[s]=e.readUint64()}),l.createFullBoxCtor("saiz",function(e){this.flags&1&&(this.aux_info_type=e.readUint32(),this.aux_info_type_parameter=e.readUint32()),this.default_sample_info_size=e.readUint8();var n=e.readUint32();if(this.sample_info_size=[],this.default_sample_info_size===0)for(var s=0;s<n;s++)this.sample_info_size[s]=e.readUint8()}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_METADATA,"mett",function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.mime_format=e.readCString(),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_METADATA,"metx",function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.namespace=e.readCString(),this.schema_location=e.readCString(),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE,"sbtt",function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.mime_format=e.readCString(),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE,"stpp",function(e){this.parseHeader(e),this.namespace=e.readCString(),this.schema_location=e.readCString(),this.auxiliary_mime_types=e.readCString(),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE,"stxt",function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.mime_format=e.readCString(),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE,"tx3g",function(e){this.parseHeader(e),this.displayFlags=e.readUint32(),this.horizontal_justification=e.readInt8(),this.vertical_justification=e.readInt8(),this.bg_color_rgba=e.readUint8Array(4),this.box_record=e.readInt16Array(4),this.style_record=e.readUint8Array(12),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_METADATA,"wvtt",function(e){this.parseHeader(e),this.parseFooter(e)}),l.createSampleGroupCtor("alst",function(e){var n,s=e.readUint16();for(this.first_output_sample=e.readUint16(),this.sample_offset=[],n=0;n<s;n++)this.sample_offset[n]=e.readUint32();var c=this.description_length-4-4*s;for(this.num_output_samples=[],this.num_total_samples=[],n=0;n<c/4;n++)this.num_output_samples[n]=e.readUint16(),this.num_total_samples[n]=e.readUint16()}),l.createSampleGroupCtor("avll",function(e){this.layerNumber=e.readUint8(),this.accurateStatisticsFlag=e.readUint8(),this.avgBitRate=e.readUint16(),this.avgFrameRate=e.readUint16()}),l.createSampleGroupCtor("avss",function(e){this.subSequenceIdentifier=e.readUint16(),this.layerNumber=e.readUint8();var n=e.readUint8();this.durationFlag=n>>7,this.avgRateFlag=n>>6&1,this.durationFlag&&(this.duration=e.readUint32()),this.avgRateFlag&&(this.accurateStatisticsFlag=e.readUint8(),this.avgBitRate=e.readUint16(),this.avgFrameRate=e.readUint16()),this.dependency=[];for(var s=e.readUint8(),c=0;c<s;c++){var f={};this.dependency.push(f),f.subSeqDirectionFlag=e.readUint8(),f.layerNumber=e.readUint8(),f.subSequenceIdentifier=e.readUint16()}}),l.createSampleGroupCtor("dtrt",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("mvif",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("prol",function(e){this.roll_distance=e.readInt16()}),l.createSampleGroupCtor("rap ",function(e){var n=e.readUint8();this.num_leading_samples_known=n>>7,this.num_leading_samples=n&127}),l.createSampleGroupCtor("rash",function(e){if(this.operation_point_count=e.readUint16(),this.description_length!==2+(this.operation_point_count===1?2:this.operation_point_count*6)+9)r.warn("BoxParser","Mismatch in "+this.grouping_type+" sample group length"),this.data=e.readUint8Array(this.description_length-2);else{if(this.operation_point_count===1)this.target_rate_share=e.readUint16();else{this.target_rate_share=[],this.available_bitrate=[];for(var n=0;n<this.operation_point_count;n++)this.available_bitrate[n]=e.readUint32(),this.target_rate_share[n]=e.readUint16()}this.maximum_bitrate=e.readUint32(),this.minimum_bitrate=e.readUint32(),this.discard_priority=e.readUint8()}}),l.createSampleGroupCtor("roll",function(e){this.roll_distance=e.readInt16()}),l.SampleGroupEntry.prototype.parse=function(e){r.warn("BoxParser","Unknown Sample Group type: "+this.grouping_type),this.data=e.readUint8Array(this.description_length)},l.createSampleGroupCtor("scif",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("scnm",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("seig",function(e){this.reserved=e.readUint8();var n=e.readUint8();this.crypt_byte_block=n>>4,this.skip_byte_block=n&15,this.isProtected=e.readUint8(),this.Per_Sample_IV_Size=e.readUint8(),this.KID=l.parseHex16(e),this.constant_IV_size=0,this.constant_IV=0,this.isProtected===1&&this.Per_Sample_IV_Size===0&&(this.constant_IV_size=e.readUint8(),this.constant_IV=e.readUint8Array(this.constant_IV_size))}),l.createSampleGroupCtor("stsa",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("sync",function(e){var n=e.readUint8();this.NAL_unit_type=n&63}),l.createSampleGroupCtor("tele",function(e){var n=e.readUint8();this.level_independently_decodable=n>>7}),l.createSampleGroupCtor("tsas",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("tscl",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("vipr",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createFullBoxCtor("sbgp",function(e){this.grouping_type=e.readString(4),this.version===1?this.grouping_type_parameter=e.readUint32():this.grouping_type_parameter=0,this.entries=[];for(var n=e.readUint32(),s=0;s<n;s++){var c={};this.entries.push(c),c.sample_count=e.readInt32(),c.group_description_index=e.readInt32()}}),l.createFullBoxCtor("schm",function(e){this.scheme_type=e.readString(4),this.scheme_version=e.readUint32(),this.flags&1&&(this.scheme_uri=e.readString(this.size-this.hdr_size-8))}),l.createBoxCtor("sdp ",function(e){this.sdptext=e.readString(this.size-this.hdr_size)}),l.createFullBoxCtor("sdtp",function(e){var n,s=this.size-this.hdr_size;this.is_leading=[],this.sample_depends_on=[],this.sample_is_depended_on=[],this.sample_has_redundancy=[];for(var c=0;c<s;c++)n=e.readUint8(),this.is_leading[c]=n>>6,this.sample_depends_on[c]=n>>4&3,this.sample_is_depended_on[c]=n>>2&3,this.sample_has_redundancy[c]=n&3}),l.createFullBoxCtor("senc"),l.createFullBoxCtor("sgpd",function(e){this.grouping_type=e.readString(4),r.debug("BoxParser","Found Sample Groups of type "+this.grouping_type),this.version===1?this.default_length=e.readUint32():this.default_length=0,this.version>=2&&(this.default_group_description_index=e.readUint32()),this.entries=[];for(var n=e.readUint32(),s=0;s<n;s++){var c;l[this.grouping_type+"SampleGroupEntry"]?c=new l[this.grouping_type+"SampleGroupEntry"](this.grouping_type):c=new l.SampleGroupEntry(this.grouping_type),this.entries.push(c),this.version===1?this.default_length===0?c.description_length=e.readUint32():c.description_length=this.default_length:c.description_length=this.default_length,c.write===l.SampleGroupEntry.prototype.write&&(r.info("BoxParser","SampleGroup for type "+this.grouping_type+" writing not yet implemented, keeping unparsed data in memory for later write"),c.data=e.readUint8Array(c.description_length),e.position-=c.description_length),c.parse(e)}}),l.createFullBoxCtor("sidx",function(e){this.reference_ID=e.readUint32(),this.timescale=e.readUint32(),this.version===0?(this.earliest_presentation_time=e.readUint32(),this.first_offset=e.readUint32()):(this.earliest_presentation_time=e.readUint64(),this.first_offset=e.readUint64()),e.readUint16(),this.references=[];for(var n=e.readUint16(),s=0;s<n;s++){var c={};this.references.push(c);var f=e.readUint32();c.reference_type=f>>31&1,c.referenced_size=f&2147483647,c.subsegment_duration=e.readUint32(),f=e.readUint32(),c.starts_with_SAP=f>>31&1,c.SAP_type=f>>28&7,c.SAP_delta_time=f&268435455}}),l.SingleItemTypeReferenceBox=function(e,n,s,c){l.Box.call(this,e,n),this.hdr_size=s,this.start=c},l.SingleItemTypeReferenceBox.prototype=new l.Box,l.SingleItemTypeReferenceBox.prototype.parse=function(e){this.from_item_ID=e.readUint16();var n=e.readUint16();this.references=[];for(var s=0;s<n;s++)this.references[s]={},this.references[s].to_item_ID=e.readUint16()},l.SingleItemTypeReferenceBoxLarge=function(e,n,s,c){l.Box.call(this,e,n),this.hdr_size=s,this.start=c},l.SingleItemTypeReferenceBoxLarge.prototype=new l.Box,l.SingleItemTypeReferenceBoxLarge.prototype.parse=function(e){this.from_item_ID=e.readUint32();var n=e.readUint16();this.references=[];for(var s=0;s<n;s++)this.references[s]={},this.references[s].to_item_ID=e.readUint32()},l.createFullBoxCtor("SmDm",function(e){this.primaryRChromaticity_x=e.readUint16(),this.primaryRChromaticity_y=e.readUint16(),this.primaryGChromaticity_x=e.readUint16(),this.primaryGChromaticity_y=e.readUint16(),this.primaryBChromaticity_x=e.readUint16(),this.primaryBChromaticity_y=e.readUint16(),this.whitePointChromaticity_x=e.readUint16(),this.whitePointChromaticity_y=e.readUint16(),this.luminanceMax=e.readUint32(),this.luminanceMin=e.readUint32()}),l.createFullBoxCtor("smhd",function(e){this.balance=e.readUint16(),e.readUint16()}),l.createFullBoxCtor("ssix",function(e){this.subsegments=[];for(var n=e.readUint32(),s=0;s<n;s++){var c={};this.subsegments.push(c),c.ranges=[];for(var f=e.readUint32(),m=0;m<f;m++){var p={};c.ranges.push(p),p.level=e.readUint8(),p.range_size=e.readUint24()}}}),l.createFullBoxCtor("stco",function(e){var n;if(n=e.readUint32(),this.chunk_offsets=[],this.version===0)for(var s=0;s<n;s++)this.chunk_offsets.push(e.readUint32())}),l.createFullBoxCtor("stdp",function(e){var n=(this.size-this.hdr_size)/2;this.priority=[];for(var s=0;s<n;s++)this.priority[s]=e.readUint16()}),l.createFullBoxCtor("sthd"),l.createFullBoxCtor("stri",function(e){this.switch_group=e.readUint16(),this.alternate_group=e.readUint16(),this.sub_track_id=e.readUint32();var n=(this.size-this.hdr_size-8)/4;this.attribute_list=[];for(var s=0;s<n;s++)this.attribute_list[s]=e.readUint32()}),l.createFullBoxCtor("stsc",function(e){var n,s;if(n=e.readUint32(),this.first_chunk=[],this.samples_per_chunk=[],this.sample_description_index=[],this.version===0)for(s=0;s<n;s++)this.first_chunk.push(e.readUint32()),this.samples_per_chunk.push(e.readUint32()),this.sample_description_index.push(e.readUint32())}),l.createFullBoxCtor("stsd",function(e){var n,s,c,f;for(this.entries=[],c=e.readUint32(),n=1;n<=c;n++)if(s=l.parseOneBox(e,!0,this.size-(e.getPosition()-this.start)),s.code===l.OK)l[s.type+"SampleEntry"]?(f=new l[s.type+"SampleEntry"](s.size),f.hdr_size=s.hdr_size,f.start=s.start):(r.warn("BoxParser","Unknown sample entry type: "+s.type),f=new l.SampleEntry(s.type,s.size,s.hdr_size,s.start)),f.write===l.SampleEntry.prototype.write&&(r.info("BoxParser","SampleEntry "+f.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),f.parseDataAndRewind(e)),f.parse(e),this.entries.push(f);else return}),l.createFullBoxCtor("stsg",function(e){this.grouping_type=e.readUint32();var n=e.readUint16();this.group_description_index=[];for(var s=0;s<n;s++)this.group_description_index[s]=e.readUint32()}),l.createFullBoxCtor("stsh",function(e){var n,s;if(n=e.readUint32(),this.shadowed_sample_numbers=[],this.sync_sample_numbers=[],this.version===0)for(s=0;s<n;s++)this.shadowed_sample_numbers.push(e.readUint32()),this.sync_sample_numbers.push(e.readUint32())}),l.createFullBoxCtor("stss",function(e){var n,s;if(s=e.readUint32(),this.version===0)for(this.sample_numbers=[],n=0;n<s;n++)this.sample_numbers.push(e.readUint32())}),l.createFullBoxCtor("stsz",function(e){var n;if(this.sample_sizes=[],this.version===0)for(this.sample_size=e.readUint32(),this.sample_count=e.readUint32(),n=0;n<this.sample_count;n++)this.sample_size===0?this.sample_sizes.push(e.readUint32()):this.sample_sizes[n]=this.sample_size}),l.createFullBoxCtor("stts",function(e){var n,s,c;if(n=e.readUint32(),this.sample_counts=[],this.sample_deltas=[],this.version===0)for(s=0;s<n;s++)this.sample_counts.push(e.readUint32()),c=e.readInt32(),c<0&&(r.warn("BoxParser","File uses negative stts sample delta, using value 1 instead, sync may be lost!"),c=1),this.sample_deltas.push(c)}),l.createFullBoxCtor("stvi",function(e){var n=e.readUint32();this.single_view_allowed=n&3,this.stereo_scheme=e.readUint32();var s=e.readUint32();this.stereo_indication_type=e.readString(s);var c,f;for(this.boxes=[];e.getPosition()<this.start+this.size;)if(c=l.parseOneBox(e,!1,this.size-(e.getPosition()-this.start)),c.code===l.OK)f=c.box,this.boxes.push(f),this[f.type]=f;else return}),l.createBoxCtor("styp",function(e){l.ftypBox.prototype.parse.call(this,e)}),l.createFullBoxCtor("stz2",function(e){var n,s;if(this.sample_sizes=[],this.version===0)if(this.reserved=e.readUint24(),this.field_size=e.readUint8(),s=e.readUint32(),this.field_size===4)for(n=0;n<s;n+=2){var c=e.readUint8();this.sample_sizes[n]=c>>4&15,this.sample_sizes[n+1]=c&15}else if(this.field_size===8)for(n=0;n<s;n++)this.sample_sizes[n]=e.readUint8();else if(this.field_size===16)for(n=0;n<s;n++)this.sample_sizes[n]=e.readUint16();else r.error("BoxParser","Error in length field in stz2 box")}),l.createFullBoxCtor("subs",function(e){var n,s,c,f;for(c=e.readUint32(),this.entries=[],n=0;n<c;n++){var m={};if(this.entries[n]=m,m.sample_delta=e.readUint32(),m.subsamples=[],f=e.readUint16(),f>0)for(s=0;s<f;s++){var p={};m.subsamples.push(p),this.version==1?p.size=e.readUint32():p.size=e.readUint16(),p.priority=e.readUint8(),p.discardable=e.readUint8(),p.codec_specific_parameters=e.readUint32()}}}),l.createFullBoxCtor("tenc",function(e){if(e.readUint8(),this.version===0)e.readUint8();else{var n=e.readUint8();this.default_crypt_byte_block=n>>4&15,this.default_skip_byte_block=n&15}this.default_isProtected=e.readUint8(),this.default_Per_Sample_IV_Size=e.readUint8(),this.default_KID=l.parseHex16(e),this.default_isProtected===1&&this.default_Per_Sample_IV_Size===0&&(this.default_constant_IV_size=e.readUint8(),this.default_constant_IV=e.readUint8Array(this.default_constant_IV_size))}),l.createFullBoxCtor("tfdt",function(e){this.version==1?this.baseMediaDecodeTime=e.readUint64():this.baseMediaDecodeTime=e.readUint32()}),l.createFullBoxCtor("tfhd",function(e){var n=0;this.track_id=e.readUint32(),this.size-this.hdr_size>n&&this.flags&l.TFHD_FLAG_BASE_DATA_OFFSET?(this.base_data_offset=e.readUint64(),n+=8):this.base_data_offset=0,this.size-this.hdr_size>n&&this.flags&l.TFHD_FLAG_SAMPLE_DESC?(this.default_sample_description_index=e.readUint32(),n+=4):this.default_sample_description_index=0,this.size-this.hdr_size>n&&this.flags&l.TFHD_FLAG_SAMPLE_DUR?(this.default_sample_duration=e.readUint32(),n+=4):this.default_sample_duration=0,this.size-this.hdr_size>n&&this.flags&l.TFHD_FLAG_SAMPLE_SIZE?(this.default_sample_size=e.readUint32(),n+=4):this.default_sample_size=0,this.size-this.hdr_size>n&&this.flags&l.TFHD_FLAG_SAMPLE_FLAGS?(this.default_sample_flags=e.readUint32(),n+=4):this.default_sample_flags=0}),l.createFullBoxCtor("tfra",function(e){this.track_ID=e.readUint32(),e.readUint24();var n=e.readUint8();this.length_size_of_traf_num=n>>4&3,this.length_size_of_trun_num=n>>2&3,this.length_size_of_sample_num=n&3,this.entries=[];for(var s=e.readUint32(),c=0;c<s;c++)this.version===1?(this.time=e.readUint64(),this.moof_offset=e.readUint64()):(this.time=e.readUint32(),this.moof_offset=e.readUint32()),this.traf_number=e["readUint"+8*(this.length_size_of_traf_num+1)](),this.trun_number=e["readUint"+8*(this.length_size_of_trun_num+1)](),this.sample_number=e["readUint"+8*(this.length_size_of_sample_num+1)]()}),l.createFullBoxCtor("tkhd",function(e){this.version==1?(this.creation_time=e.readUint64(),this.modification_time=e.readUint64(),this.track_id=e.readUint32(),e.readUint32(),this.duration=e.readUint64()):(this.creation_time=e.readUint32(),this.modification_time=e.readUint32(),this.track_id=e.readUint32(),e.readUint32(),this.duration=e.readUint32()),e.readUint32Array(2),this.layer=e.readInt16(),this.alternate_group=e.readInt16(),this.volume=e.readInt16()>>8,e.readUint16(),this.matrix=e.readInt32Array(9),this.width=e.readUint32(),this.height=e.readUint32()}),l.createBoxCtor("tmax",function(e){this.time=e.readUint32()}),l.createBoxCtor("tmin",function(e){this.time=e.readUint32()}),l.createBoxCtor("totl",function(e){this.bytessent=e.readUint32()}),l.createBoxCtor("tpay",function(e){this.bytessent=e.readUint32()}),l.createBoxCtor("tpyl",function(e){this.bytessent=e.readUint64()}),l.TrackGroupTypeBox.prototype.parse=function(e){this.parseFullHeader(e),this.track_group_id=e.readUint32()},l.createTrackGroupCtor("msrc"),l.TrackReferenceTypeBox=function(e,n,s,c){l.Box.call(this,e,n),this.hdr_size=s,this.start=c},l.TrackReferenceTypeBox.prototype=new l.Box,l.TrackReferenceTypeBox.prototype.parse=function(e){this.track_ids=e.readUint32Array((this.size-this.hdr_size)/4)},l.trefBox.prototype.parse=function(e){for(var n,s;e.getPosition()<this.start+this.size;)if(n=l.parseOneBox(e,!0,this.size-(e.getPosition()-this.start)),n.code===l.OK)s=new l.TrackReferenceTypeBox(n.type,n.size,n.hdr_size,n.start),s.write===l.Box.prototype.write&&s.type!=="mdat"&&(r.info("BoxParser","TrackReference "+s.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),s.parseDataAndRewind(e)),s.parse(e),this.boxes.push(s);else return},l.createFullBoxCtor("trep",function(e){for(this.track_ID=e.readUint32(),this.boxes=[];e.getPosition()<this.start+this.size;)if(ret=l.parseOneBox(e,!1,this.size-(e.getPosition()-this.start)),ret.code===l.OK)box=ret.box,this.boxes.push(box);else return}),l.createFullBoxCtor("trex",function(e){this.track_id=e.readUint32(),this.default_sample_description_index=e.readUint32(),this.default_sample_duration=e.readUint32(),this.default_sample_size=e.readUint32(),this.default_sample_flags=e.readUint32()}),l.createBoxCtor("trpy",function(e){this.bytessent=e.readUint64()}),l.createFullBoxCtor("trun",function(e){var n=0;if(this.sample_count=e.readUint32(),n+=4,this.size-this.hdr_size>n&&this.flags&l.TRUN_FLAGS_DATA_OFFSET?(this.data_offset=e.readInt32(),n+=4):this.data_offset=0,this.size-this.hdr_size>n&&this.flags&l.TRUN_FLAGS_FIRST_FLAG?(this.first_sample_flags=e.readUint32(),n+=4):this.first_sample_flags=0,this.sample_duration=[],this.sample_size=[],this.sample_flags=[],this.sample_composition_time_offset=[],this.size-this.hdr_size>n)for(var s=0;s<this.sample_count;s++)this.flags&l.TRUN_FLAGS_DURATION&&(this.sample_duration[s]=e.readUint32()),this.flags&l.TRUN_FLAGS_SIZE&&(this.sample_size[s]=e.readUint32()),this.flags&l.TRUN_FLAGS_FLAGS&&(this.sample_flags[s]=e.readUint32()),this.flags&l.TRUN_FLAGS_CTS_OFFSET&&(this.version===0?this.sample_composition_time_offset[s]=e.readUint32():this.sample_composition_time_offset[s]=e.readInt32())}),l.createFullBoxCtor("tsel",function(e){this.switch_group=e.readUint32();var n=(this.size-this.hdr_size-4)/4;this.attribute_list=[];for(var s=0;s<n;s++)this.attribute_list[s]=e.readUint32()}),l.createFullBoxCtor("txtC",function(e){this.config=e.readCString()}),l.createBoxCtor("tyco",function(e){var n=(this.size-this.hdr_size)/4;this.compatible_brands=[];for(var s=0;s<n;s++)this.compatible_brands[s]=e.readString(4)}),l.createFullBoxCtor("udes",function(e){this.lang=e.readCString(),this.name=e.readCString(),this.description=e.readCString(),this.tags=e.readCString()}),l.createFullBoxCtor("uncC",function(e){var n;for(this.profile=e.readUint32(),this.component_count=e.readUint16(),this.component_index=[],this.component_bit_depth_minus_one=[],this.component_format=[],this.component_align_size=[],n=0;n<this.component_count;n++)this.component_index.push(e.readUint16()),this.component_bit_depth_minus_one.push(e.readUint8()),this.component_format.push(e.readUint8()),this.component_align_size.push(e.readUint8());this.sampling_type=e.readUint8(),this.interleave_type=e.readUint8(),this.block_size=e.readUint8();var s=e.readUint8();this.component_little_endian=s>>7&1,this.block_pad_lsb=s>>6&1,this.block_little_endian=s>>5&1,this.block_reversed=s>>4&1,this.pad_unknown=s>>3&1,this.pixel_size=e.readUint8(),this.row_align_size=e.readUint32(),this.tile_align_size=e.readUint32(),this.num_tile_cols_minus_one=e.readUint32(),this.num_tile_rows_minus_one=e.readUint32()}),l.createFullBoxCtor("url ",function(e){this.flags!==1&&(this.location=e.readCString())}),l.createFullBoxCtor("urn ",function(e){this.name=e.readCString(),this.size-this.hdr_size-this.name.length-1>0&&(this.location=e.readCString())}),l.createUUIDBox("a5d40b30e81411ddba2f0800200c9a66",!0,!1,function(e){this.LiveServerManifest=e.readString(this.size-this.hdr_size).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}),l.createUUIDBox("d08a4f1810f34a82b6c832d8aba183d3",!0,!1,function(e){this.system_id=l.parseHex16(e);var n=e.readUint32();n>0&&(this.data=e.readUint8Array(n))}),l.createUUIDBox("a2394f525a9b4f14a2446c427c648df4",!0,!1),l.createUUIDBox("8974dbce7be74c5184f97148f9882554",!0,!1,function(e){this.default_AlgorithmID=e.readUint24(),this.default_IV_size=e.readUint8(),this.default_KID=l.parseHex16(e)}),l.createUUIDBox("d4807ef2ca3946958e5426cb9e46a79f",!0,!1,function(e){this.fragment_count=e.readUint8(),this.entries=[];for(var n=0;n<this.fragment_count;n++){var s={},c=0,f=0;this.version===1?(c=e.readUint64(),f=e.readUint64()):(c=e.readUint32(),f=e.readUint32()),s.absolute_time=c,s.absolute_duration=f,this.entries.push(s)}}),l.createUUIDBox("6d1d9b0542d544e680e2141daff757b2",!0,!1,function(e){this.version===1?(this.absolute_time=e.readUint64(),this.duration=e.readUint64()):(this.absolute_time=e.readUint32(),this.duration=e.readUint32())}),l.createFullBoxCtor("vmhd",function(e){this.graphicsmode=e.readUint16(),this.opcolor=e.readUint16Array(3)}),l.createFullBoxCtor("vpcC",function(e){var n;this.version===1?(this.profile=e.readUint8(),this.level=e.readUint8(),n=e.readUint8(),this.bitDepth=n>>4,this.chromaSubsampling=n>>1&7,this.videoFullRangeFlag=n&1,this.colourPrimaries=e.readUint8(),this.transferCharacteristics=e.readUint8(),this.matrixCoefficients=e.readUint8(),this.codecIntializationDataSize=e.readUint16(),this.codecIntializationData=e.readUint8Array(this.codecIntializationDataSize)):(this.profile=e.readUint8(),this.level=e.readUint8(),n=e.readUint8(),this.bitDepth=n>>4&15,this.colorSpace=n&15,n=e.readUint8(),this.chromaSubsampling=n>>4&15,this.transferFunction=n>>1&7,this.videoFullRangeFlag=n&1,this.codecIntializationDataSize=e.readUint16(),this.codecIntializationData=e.readUint8Array(this.codecIntializationDataSize))}),l.createBoxCtor("vttC",function(e){this.text=e.readString(this.size-this.hdr_size)}),l.createFullBoxCtor("vvcC",function(e){var n,s,c={held_bits:void 0,num_held_bits:0,stream_read_1_bytes:function(E){this.held_bits=E.readUint8(),this.num_held_bits=8},stream_read_2_bytes:function(E){this.held_bits=E.readUint16(),this.num_held_bits=16},extract_bits:function(E){var T=this.held_bits>>this.num_held_bits-E&(1<<E)-1;return this.num_held_bits-=E,T}};if(c.stream_read_1_bytes(e),c.extract_bits(5),this.lengthSizeMinusOne=c.extract_bits(2),this.ptl_present_flag=c.extract_bits(1),this.ptl_present_flag){c.stream_read_2_bytes(e),this.ols_idx=c.extract_bits(9),this.num_sublayers=c.extract_bits(3),this.constant_frame_rate=c.extract_bits(2),this.chroma_format_idc=c.extract_bits(2),c.stream_read_1_bytes(e),this.bit_depth_minus8=c.extract_bits(3),c.extract_bits(5);{if(c.stream_read_2_bytes(e),c.extract_bits(2),this.num_bytes_constraint_info=c.extract_bits(6),this.general_profile_idc=c.extract_bits(7),this.general_tier_flag=c.extract_bits(1),this.general_level_idc=e.readUint8(),c.stream_read_1_bytes(e),this.ptl_frame_only_constraint_flag=c.extract_bits(1),this.ptl_multilayer_enabled_flag=c.extract_bits(1),this.general_constraint_info=new Uint8Array(this.num_bytes_constraint_info),this.num_bytes_constraint_info){for(n=0;n<this.num_bytes_constraint_info-1;n++){var f=c.extract_bits(6);c.stream_read_1_bytes(e);var m=c.extract_bits(2);this.general_constraint_info[n]=f<<2|m}this.general_constraint_info[this.num_bytes_constraint_info-1]=c.extract_bits(6)}else c.extract_bits(6);if(this.num_sublayers>1){for(c.stream_read_1_bytes(e),this.ptl_sublayer_present_mask=0,s=this.num_sublayers-2;s>=0;--s){var p=c.extract_bits(1);this.ptl_sublayer_present_mask|=p<<s}for(s=this.num_sublayers;s<=8&&this.num_sublayers>1;++s)c.extract_bits(1);for(this.sublayer_level_idc=[],s=this.num_sublayers-2;s>=0;--s)this.ptl_sublayer_present_mask&1<<s&&(this.sublayer_level_idc[s]=e.readUint8())}if(this.ptl_num_sub_profiles=e.readUint8(),this.general_sub_profile_idc=[],this.ptl_num_sub_profiles)for(n=0;n<this.ptl_num_sub_profiles;n++)this.general_sub_profile_idc.push(e.readUint32())}this.max_picture_width=e.readUint16(),this.max_picture_height=e.readUint16(),this.avg_frame_rate=e.readUint16()}var _=12,S=13;this.nalu_arrays=[];var x=e.readUint8();for(n=0;n<x;n++){var w=[];this.nalu_arrays.push(w),c.stream_read_1_bytes(e),w.completeness=c.extract_bits(1),c.extract_bits(2),w.nalu_type=c.extract_bits(5);var U=1;for(w.nalu_type!=S&&w.nalu_type!=_&&(U=e.readUint16()),s=0;s<U;s++){var A=e.readUint16();w.push({data:e.readUint8Array(A),length:A})}}}),l.createFullBoxCtor("vvnC",function(e){var n=strm.readUint8();this.lengthSizeMinusOne=n&3}),l.SampleEntry.prototype.isVideo=function(){return!1},l.SampleEntry.prototype.isAudio=function(){return!1},l.SampleEntry.prototype.isSubtitle=function(){return!1},l.SampleEntry.prototype.isMetadata=function(){return!1},l.SampleEntry.prototype.isHint=function(){return!1},l.SampleEntry.prototype.getCodec=function(){return this.type.replace(".","")},l.SampleEntry.prototype.getWidth=function(){return""},l.SampleEntry.prototype.getHeight=function(){return""},l.SampleEntry.prototype.getChannelCount=function(){return""},l.SampleEntry.prototype.getSampleRate=function(){return""},l.SampleEntry.prototype.getSampleSize=function(){return""},l.VisualSampleEntry.prototype.isVideo=function(){return!0},l.VisualSampleEntry.prototype.getWidth=function(){return this.width},l.VisualSampleEntry.prototype.getHeight=function(){return this.height},l.AudioSampleEntry.prototype.isAudio=function(){return!0},l.AudioSampleEntry.prototype.getChannelCount=function(){return this.channel_count},l.AudioSampleEntry.prototype.getSampleRate=function(){return this.samplerate},l.AudioSampleEntry.prototype.getSampleSize=function(){return this.samplesize},l.SubtitleSampleEntry.prototype.isSubtitle=function(){return!0},l.MetadataSampleEntry.prototype.isMetadata=function(){return!0},l.decimalToHex=function(e,n){var s=Number(e).toString(16);for(n=typeof n>"u"||n===null?n=2:n;s.length<n;)s="0"+s;return s},l.avc1SampleEntry.prototype.getCodec=l.avc2SampleEntry.prototype.getCodec=l.avc3SampleEntry.prototype.getCodec=l.avc4SampleEntry.prototype.getCodec=function(){var e=l.SampleEntry.prototype.getCodec.call(this);return this.avcC?e+"."+l.decimalToHex(this.avcC.AVCProfileIndication)+l.decimalToHex(this.avcC.profile_compatibility)+l.decimalToHex(this.avcC.AVCLevelIndication):e},l.hev1SampleEntry.prototype.getCodec=l.hvc1SampleEntry.prototype.getCodec=function(){var e,n=l.SampleEntry.prototype.getCodec.call(this);if(this.hvcC){switch(n+=".",this.hvcC.general_profile_space){case 0:n+="";break;case 1:n+="A";break;case 2:n+="B";break;case 3:n+="C";break}n+=this.hvcC.general_profile_idc,n+=".";var s=this.hvcC.general_profile_compatibility,c=0;for(e=0;e<32&&(c|=s&1,e!=31);e++)c<<=1,s>>=1;n+=l.decimalToHex(c,0),n+=".",this.hvcC.general_tier_flag===0?n+="L":n+="H",n+=this.hvcC.general_level_idc;var f=!1,m="";for(e=5;e>=0;e--)(this.hvcC.general_constraint_indicator[e]||f)&&(m="."+l.decimalToHex(this.hvcC.general_constraint_indicator[e],0)+m,f=!0);n+=m}return n},l.vvc1SampleEntry.prototype.getCodec=l.vvi1SampleEntry.prototype.getCodec=function(){var e,n=l.SampleEntry.prototype.getCodec.call(this);if(this.vvcC){n+="."+this.vvcC.general_profile_idc,this.vvcC.general_tier_flag?n+=".H":n+=".L",n+=this.vvcC.general_level_idc;var s="";if(this.vvcC.general_constraint_info){var c=[],f=0;f|=this.vvcC.ptl_frame_only_constraint<<7,f|=this.vvcC.ptl_multilayer_enabled<<6;var m;for(e=0;e<this.vvcC.general_constraint_info.length;++e)f|=this.vvcC.general_constraint_info[e]>>2&63,c.push(f),f&&(m=e),f=this.vvcC.general_constraint_info[e]>>2&3;if(m===void 0)s=".CA";else{s=".C";var p="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",_=0,S=0;for(e=0;e<=m;++e)for(_=_<<8|c[e],S+=8;S>=5;){var x=_>>S-5&31;s+=p[x],S-=5,_&=(1<<S)-1}S&&(_<<=5-S,s+=p[_&31])}}n+=s}return n},l.mp4aSampleEntry.prototype.getCodec=function(){var e=l.SampleEntry.prototype.getCodec.call(this);if(this.esds&&this.esds.esd){var n=this.esds.esd.getOTI(),s=this.esds.esd.getAudioConfig();return e+"."+l.decimalToHex(n)+(s?"."+s:"")}else return e},l.stxtSampleEntry.prototype.getCodec=function(){var e=l.SampleEntry.prototype.getCodec.call(this);return this.mime_format?e+"."+this.mime_format:e},l.vp08SampleEntry.prototype.getCodec=l.vp09SampleEntry.prototype.getCodec=function(){var e=l.SampleEntry.prototype.getCodec.call(this),n=this.vpcC.level;n==0&&(n="00");var s=this.vpcC.bitDepth;return s==8&&(s="08"),e+".0"+this.vpcC.profile+"."+n+"."+s},l.av01SampleEntry.prototype.getCodec=function(){var e=l.SampleEntry.prototype.getCodec.call(this),n=this.av1C.seq_level_idx_0;n<10&&(n="0"+n);var s;return this.av1C.seq_profile===2&&this.av1C.high_bitdepth===1?s=this.av1C.twelve_bit===1?"12":"10":this.av1C.seq_profile<=2&&(s=this.av1C.high_bitdepth===1?"10":"08"),e+"."+this.av1C.seq_profile+"."+n+(this.av1C.seq_tier_0?"H":"M")+"."+s},l.Box.prototype.writeHeader=function(e,n){this.size+=8,this.size>u&&(this.size+=8),this.type==="uuid"&&(this.size+=16),r.debug("BoxWriter","Writing box "+this.type+" of size: "+this.size+" at position "+e.getPosition()+(n||"")),this.size>u?e.writeUint32(1):(this.sizePosition=e.getPosition(),e.writeUint32(this.size)),e.writeString(this.type,null,4),this.type==="uuid"&&e.writeUint8Array(this.uuid),this.size>u&&e.writeUint64(this.size)},l.FullBox.prototype.writeHeader=function(e){this.size+=4,l.Box.prototype.writeHeader.call(this,e," v="+this.version+" f="+this.flags),e.writeUint8(this.version),e.writeUint24(this.flags)},l.Box.prototype.write=function(e){this.type==="mdat"?this.data&&(this.size=this.data.length,this.writeHeader(e),e.writeUint8Array(this.data)):(this.size=this.data?this.data.length:0,this.writeHeader(e),this.data&&e.writeUint8Array(this.data))},l.ContainerBox.prototype.write=function(e){this.size=0,this.writeHeader(e);for(var n=0;n<this.boxes.length;n++)this.boxes[n]&&(this.boxes[n].write(e),this.size+=this.boxes[n].size);r.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},l.TrackReferenceTypeBox.prototype.write=function(e){this.size=this.track_ids.length*4,this.writeHeader(e),e.writeUint32Array(this.track_ids)},l.avcCBox.prototype.write=function(e){var n;for(this.size=7,n=0;n<this.SPS.length;n++)this.size+=2+this.SPS[n].length;for(n=0;n<this.PPS.length;n++)this.size+=2+this.PPS[n].length;for(this.ext&&(this.size+=this.ext.length),this.writeHeader(e),e.writeUint8(this.configurationVersion),e.writeUint8(this.AVCProfileIndication),e.writeUint8(this.profile_compatibility),e.writeUint8(this.AVCLevelIndication),e.writeUint8(this.lengthSizeMinusOne+252),e.writeUint8(this.SPS.length+224),n=0;n<this.SPS.length;n++)e.writeUint16(this.SPS[n].length),e.writeUint8Array(this.SPS[n].nalu);for(e.writeUint8(this.PPS.length),n=0;n<this.PPS.length;n++)e.writeUint16(this.PPS[n].length),e.writeUint8Array(this.PPS[n].nalu);this.ext&&e.writeUint8Array(this.ext)},l.co64Box.prototype.write=function(e){var n;for(this.version=0,this.flags=0,this.size=4+8*this.chunk_offsets.length,this.writeHeader(e),e.writeUint32(this.chunk_offsets.length),n=0;n<this.chunk_offsets.length;n++)e.writeUint64(this.chunk_offsets[n])},l.cslgBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4*5,this.writeHeader(e),e.writeInt32(this.compositionToDTSShift),e.writeInt32(this.leastDecodeToDisplayDelta),e.writeInt32(this.greatestDecodeToDisplayDelta),e.writeInt32(this.compositionStartTime),e.writeInt32(this.compositionEndTime)},l.cttsBox.prototype.write=function(e){var n;for(this.version=0,this.flags=0,this.size=4+8*this.sample_counts.length,this.writeHeader(e),e.writeUint32(this.sample_counts.length),n=0;n<this.sample_counts.length;n++)e.writeUint32(this.sample_counts[n]),this.version===1?e.writeInt32(this.sample_offsets[n]):e.writeUint32(this.sample_offsets[n])},l.drefBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4,this.writeHeader(e),e.writeUint32(this.entries.length);for(var n=0;n<this.entries.length;n++)this.entries[n].write(e),this.size+=this.entries[n].size;r.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},l.elngBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=this.extended_language.length,this.writeHeader(e),e.writeString(this.extended_language)},l.elstBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4+12*this.entries.length,this.writeHeader(e),e.writeUint32(this.entries.length);for(var n=0;n<this.entries.length;n++){var s=this.entries[n];e.writeUint32(s.segment_duration),e.writeInt32(s.media_time),e.writeInt16(s.media_rate_integer),e.writeInt16(s.media_rate_fraction)}},l.emsgBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4*4+this.message_data.length+(this.scheme_id_uri.length+1)+(this.value.length+1),this.writeHeader(e),e.writeCString(this.scheme_id_uri),e.writeCString(this.value),e.writeUint32(this.timescale),e.writeUint32(this.presentation_time_delta),e.writeUint32(this.event_duration),e.writeUint32(this.id),e.writeUint8Array(this.message_data)},l.ftypBox.prototype.write=function(e){this.size=8+4*this.compatible_brands.length,this.writeHeader(e),e.writeString(this.major_brand,null,4),e.writeUint32(this.minor_version);for(var n=0;n<this.compatible_brands.length;n++)e.writeString(this.compatible_brands[n],null,4)},l.hdlrBox.prototype.write=function(e){this.size=5*4+this.name.length+1,this.version=0,this.flags=0,this.writeHeader(e),e.writeUint32(0),e.writeString(this.handler,null,4),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeCString(this.name)},l.hvcCBox.prototype.write=function(e){var n,s;for(this.size=23,n=0;n<this.nalu_arrays.length;n++)for(this.size+=3,s=0;s<this.nalu_arrays[n].length;s++)this.size+=2+this.nalu_arrays[n][s].data.length;for(this.writeHeader(e),e.writeUint8(this.configurationVersion),e.writeUint8(this.general_profile_space<<6+this.general_tier_flag<<5+this.general_profile_idc),e.writeUint32(this.general_profile_compatibility),e.writeUint8Array(this.general_constraint_indicator),e.writeUint8(this.general_level_idc),e.writeUint16(this.min_spatial_segmentation_idc+(15<<24)),e.writeUint8(this.parallelismType+252),e.writeUint8(this.chroma_format_idc+252),e.writeUint8(this.bit_depth_luma_minus8+248),e.writeUint8(this.bit_depth_chroma_minus8+248),e.writeUint16(this.avgFrameRate),e.writeUint8((this.constantFrameRate<<6)+(this.numTemporalLayers<<3)+(this.temporalIdNested<<2)+this.lengthSizeMinusOne),e.writeUint8(this.nalu_arrays.length),n=0;n<this.nalu_arrays.length;n++)for(e.writeUint8((this.nalu_arrays[n].completeness<<7)+this.nalu_arrays[n].nalu_type),e.writeUint16(this.nalu_arrays[n].length),s=0;s<this.nalu_arrays[n].length;s++)e.writeUint16(this.nalu_arrays[n][s].data.length),e.writeUint8Array(this.nalu_arrays[n][s].data)},l.kindBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=this.schemeURI.length+1+(this.value.length+1),this.writeHeader(e),e.writeCString(this.schemeURI),e.writeCString(this.value)},l.mdhdBox.prototype.write=function(e){this.size=4*4+2*2,this.flags=0,this.version=0,this.writeHeader(e),e.writeUint32(this.creation_time),e.writeUint32(this.modification_time),e.writeUint32(this.timescale),e.writeUint32(this.duration),e.writeUint16(this.language),e.writeUint16(0)},l.mehdBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4,this.writeHeader(e),e.writeUint32(this.fragment_duration)},l.mfhdBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4,this.writeHeader(e),e.writeUint32(this.sequence_number)},l.mvhdBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=23*4+2*2,this.writeHeader(e),e.writeUint32(this.creation_time),e.writeUint32(this.modification_time),e.writeUint32(this.timescale),e.writeUint32(this.duration),e.writeUint32(this.rate),e.writeUint16(this.volume<<8),e.writeUint16(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32Array(this.matrix),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(this.next_track_id)},l.SampleEntry.prototype.writeHeader=function(e){this.size=8,l.Box.prototype.writeHeader.call(this,e),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint16(this.data_reference_index)},l.SampleEntry.prototype.writeFooter=function(e){for(var n=0;n<this.boxes.length;n++)this.boxes[n].write(e),this.size+=this.boxes[n].size;r.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},l.SampleEntry.prototype.write=function(e){this.writeHeader(e),e.writeUint8Array(this.data),this.size+=this.data.length,r.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},l.VisualSampleEntry.prototype.write=function(e){this.writeHeader(e),this.size+=2*7+6*4+32,e.writeUint16(0),e.writeUint16(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint16(this.width),e.writeUint16(this.height),e.writeUint32(this.horizresolution),e.writeUint32(this.vertresolution),e.writeUint32(0),e.writeUint16(this.frame_count),e.writeUint8(Math.min(31,this.compressorname.length)),e.writeString(this.compressorname,null,31),e.writeUint16(this.depth),e.writeInt16(-1),this.writeFooter(e)},l.AudioSampleEntry.prototype.write=function(e){this.writeHeader(e),this.size+=2*4+3*4,e.writeUint32(0),e.writeUint32(0),e.writeUint16(this.channel_count),e.writeUint16(this.samplesize),e.writeUint16(0),e.writeUint16(0),e.writeUint32(this.samplerate<<16),this.writeFooter(e)},l.stppSampleEntry.prototype.write=function(e){this.writeHeader(e),this.size+=this.namespace.length+1+this.schema_location.length+1+this.auxiliary_mime_types.length+1,e.writeCString(this.namespace),e.writeCString(this.schema_location),e.writeCString(this.auxiliary_mime_types),this.writeFooter(e)},l.SampleGroupEntry.prototype.write=function(e){e.writeUint8Array(this.data)},l.sbgpBox.prototype.write=function(e){this.version=1,this.flags=0,this.size=12+8*this.entries.length,this.writeHeader(e),e.writeString(this.grouping_type,null,4),e.writeUint32(this.grouping_type_parameter),e.writeUint32(this.entries.length);for(var n=0;n<this.entries.length;n++){var s=this.entries[n];e.writeInt32(s.sample_count),e.writeInt32(s.group_description_index)}},l.sgpdBox.prototype.write=function(e){var n,s;for(this.flags=0,this.size=12,n=0;n<this.entries.length;n++)s=this.entries[n],this.version===1&&(this.default_length===0&&(this.size+=4),this.size+=s.data.length);for(this.writeHeader(e),e.writeString(this.grouping_type,null,4),this.version===1&&e.writeUint32(this.default_length),this.version>=2&&e.writeUint32(this.default_sample_description_index),e.writeUint32(this.entries.length),n=0;n<this.entries.length;n++)s=this.entries[n],this.version===1&&this.default_length===0&&e.writeUint32(s.description_length),s.write(e)},l.sidxBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4*4+2+2+12*this.references.length,this.writeHeader(e),e.writeUint32(this.reference_ID),e.writeUint32(this.timescale),e.writeUint32(this.earliest_presentation_time),e.writeUint32(this.first_offset),e.writeUint16(0),e.writeUint16(this.references.length);for(var n=0;n<this.references.length;n++){var s=this.references[n];e.writeUint32(s.reference_type<<31|s.referenced_size),e.writeUint32(s.subsegment_duration),e.writeUint32(s.starts_with_SAP<<31|s.SAP_type<<28|s.SAP_delta_time)}},l.smhdBox.prototype.write=function(e){this.version=0,this.flags=1,this.size=4,this.writeHeader(e),e.writeUint16(this.balance),e.writeUint16(0)},l.stcoBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4+4*this.chunk_offsets.length,this.writeHeader(e),e.writeUint32(this.chunk_offsets.length),e.writeUint32Array(this.chunk_offsets)},l.stscBox.prototype.write=function(e){var n;for(this.version=0,this.flags=0,this.size=4+12*this.first_chunk.length,this.writeHeader(e),e.writeUint32(this.first_chunk.length),n=0;n<this.first_chunk.length;n++)e.writeUint32(this.first_chunk[n]),e.writeUint32(this.samples_per_chunk[n]),e.writeUint32(this.sample_description_index[n])},l.stsdBox.prototype.write=function(e){var n;for(this.version=0,this.flags=0,this.size=0,this.writeHeader(e),e.writeUint32(this.entries.length),this.size+=4,n=0;n<this.entries.length;n++)this.entries[n].write(e),this.size+=this.entries[n].size;r.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},l.stshBox.prototype.write=function(e){var n;for(this.version=0,this.flags=0,this.size=4+8*this.shadowed_sample_numbers.length,this.writeHeader(e),e.writeUint32(this.shadowed_sample_numbers.length),n=0;n<this.shadowed_sample_numbers.length;n++)e.writeUint32(this.shadowed_sample_numbers[n]),e.writeUint32(this.sync_sample_numbers[n])},l.stssBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4+4*this.sample_numbers.length,this.writeHeader(e),e.writeUint32(this.sample_numbers.length),e.writeUint32Array(this.sample_numbers)},l.stszBox.prototype.write=function(e){var n,s=!0;if(this.version=0,this.flags=0,this.sample_sizes.length>0)for(n=0;n+1<this.sample_sizes.length;)if(this.sample_sizes[n+1]!==this.sample_sizes[0]){s=!1;break}else n++;else s=!1;this.size=8,s||(this.size+=4*this.sample_sizes.length),this.writeHeader(e),s?e.writeUint32(this.sample_sizes[0]):e.writeUint32(0),e.writeUint32(this.sample_sizes.length),s||e.writeUint32Array(this.sample_sizes)},l.sttsBox.prototype.write=function(e){var n;for(this.version=0,this.flags=0,this.size=4+8*this.sample_counts.length,this.writeHeader(e),e.writeUint32(this.sample_counts.length),n=0;n<this.sample_counts.length;n++)e.writeUint32(this.sample_counts[n]),e.writeUint32(this.sample_deltas[n])},l.tfdtBox.prototype.write=function(e){var n=Math.pow(2,32)-1;this.version=this.baseMediaDecodeTime>n?1:0,this.flags=0,this.size=4,this.version===1&&(this.size+=4),this.writeHeader(e),this.version===1?e.writeUint64(this.baseMediaDecodeTime):e.writeUint32(this.baseMediaDecodeTime)},l.tfhdBox.prototype.write=function(e){this.version=0,this.size=4,this.flags&l.TFHD_FLAG_BASE_DATA_OFFSET&&(this.size+=8),this.flags&l.TFHD_FLAG_SAMPLE_DESC&&(this.size+=4),this.flags&l.TFHD_FLAG_SAMPLE_DUR&&(this.size+=4),this.flags&l.TFHD_FLAG_SAMPLE_SIZE&&(this.size+=4),this.flags&l.TFHD_FLAG_SAMPLE_FLAGS&&(this.size+=4),this.writeHeader(e),e.writeUint32(this.track_id),this.flags&l.TFHD_FLAG_BASE_DATA_OFFSET&&e.writeUint64(this.base_data_offset),this.flags&l.TFHD_FLAG_SAMPLE_DESC&&e.writeUint32(this.default_sample_description_index),this.flags&l.TFHD_FLAG_SAMPLE_DUR&&e.writeUint32(this.default_sample_duration),this.flags&l.TFHD_FLAG_SAMPLE_SIZE&&e.writeUint32(this.default_sample_size),this.flags&l.TFHD_FLAG_SAMPLE_FLAGS&&e.writeUint32(this.default_sample_flags)},l.tkhdBox.prototype.write=function(e){this.version=0,this.size=4*18+2*4,this.writeHeader(e),e.writeUint32(this.creation_time),e.writeUint32(this.modification_time),e.writeUint32(this.track_id),e.writeUint32(0),e.writeUint32(this.duration),e.writeUint32(0),e.writeUint32(0),e.writeInt16(this.layer),e.writeInt16(this.alternate_group),e.writeInt16(this.volume<<8),e.writeUint16(0),e.writeInt32Array(this.matrix),e.writeUint32(this.width),e.writeUint32(this.height)},l.trexBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4*5,this.writeHeader(e),e.writeUint32(this.track_id),e.writeUint32(this.default_sample_description_index),e.writeUint32(this.default_sample_duration),e.writeUint32(this.default_sample_size),e.writeUint32(this.default_sample_flags)},l.trunBox.prototype.write=function(e){this.version=0,this.size=4,this.flags&l.TRUN_FLAGS_DATA_OFFSET&&(this.size+=4),this.flags&l.TRUN_FLAGS_FIRST_FLAG&&(this.size+=4),this.flags&l.TRUN_FLAGS_DURATION&&(this.size+=4*this.sample_duration.length),this.flags&l.TRUN_FLAGS_SIZE&&(this.size+=4*this.sample_size.length),this.flags&l.TRUN_FLAGS_FLAGS&&(this.size+=4*this.sample_flags.length),this.flags&l.TRUN_FLAGS_CTS_OFFSET&&(this.size+=4*this.sample_composition_time_offset.length),this.writeHeader(e),e.writeUint32(this.sample_count),this.flags&l.TRUN_FLAGS_DATA_OFFSET&&(this.data_offset_position=e.getPosition(),e.writeInt32(this.data_offset)),this.flags&l.TRUN_FLAGS_FIRST_FLAG&&e.writeUint32(this.first_sample_flags);for(var n=0;n<this.sample_count;n++)this.flags&l.TRUN_FLAGS_DURATION&&e.writeUint32(this.sample_duration[n]),this.flags&l.TRUN_FLAGS_SIZE&&e.writeUint32(this.sample_size[n]),this.flags&l.TRUN_FLAGS_FLAGS&&e.writeUint32(this.sample_flags[n]),this.flags&l.TRUN_FLAGS_CTS_OFFSET&&(this.version===0?e.writeUint32(this.sample_composition_time_offset[n]):e.writeInt32(this.sample_composition_time_offset[n]))},l["url Box"].prototype.write=function(e){this.version=0,this.location?(this.flags=0,this.size=this.location.length+1):(this.flags=1,this.size=0),this.writeHeader(e),this.location&&e.writeCString(this.location)},l["urn Box"].prototype.write=function(e){this.version=0,this.flags=0,this.size=this.name.length+1+(this.location?this.location.length+1:0),this.writeHeader(e),e.writeCString(this.name),this.location&&e.writeCString(this.location)},l.vmhdBox.prototype.write=function(e){this.version=0,this.flags=1,this.size=8,this.writeHeader(e),e.writeUint16(this.graphicsmode),e.writeUint16Array(this.opcolor)},l.cttsBox.prototype.unpack=function(e){var n,s,c;for(c=0,n=0;n<this.sample_counts.length;n++)for(s=0;s<this.sample_counts[n];s++)e[c].pts=e[c].dts+this.sample_offsets[n],c++},l.sttsBox.prototype.unpack=function(e){var n,s,c;for(c=0,n=0;n<this.sample_counts.length;n++)for(s=0;s<this.sample_counts[n];s++)c===0?e[c].dts=0:e[c].dts=e[c-1].dts+this.sample_deltas[n],c++},l.stcoBox.prototype.unpack=function(e){var n;for(n=0;n<this.chunk_offsets.length;n++)e[n].offset=this.chunk_offsets[n]},l.stscBox.prototype.unpack=function(e){var n,s,c,f,m;for(f=0,m=0,n=0;n<this.first_chunk.length;n++)for(s=0;s<(n+1<this.first_chunk.length?this.first_chunk[n+1]:1/0);s++)for(m++,c=0;c<this.samples_per_chunk[n];c++){if(e[f])e[f].description_index=this.sample_description_index[n],e[f].chunk_index=m;else return;f++}},l.stszBox.prototype.unpack=function(e){var n;for(n=0;n<this.sample_sizes.length;n++)e[n].size=this.sample_sizes[n]},l.DIFF_BOXES_PROP_NAMES=["boxes","entries","references","subsamples","items","item_infos","extents","associations","subsegments","ranges","seekLists","seekPoints","esd","levels"],l.DIFF_PRIMITIVE_ARRAY_PROP_NAMES=["compatible_brands","matrix","opcolor","sample_counts","sample_counts","sample_deltas","first_chunk","samples_per_chunk","sample_sizes","chunk_offsets","sample_offsets","sample_description_index","sample_duration"],l.boxEqualFields=function(e,n){if(e&&!n)return!1;var s;for(s in e)if(!(l.DIFF_BOXES_PROP_NAMES.indexOf(s)>-1)){if(e[s]instanceof l.Box||n[s]instanceof l.Box||typeof e[s]>"u"||typeof n[s]>"u"||typeof e[s]=="function"||typeof n[s]=="function"||e.subBoxNames&&e.subBoxNames.indexOf(s.slice(0,4))>-1||n.subBoxNames&&n.subBoxNames.indexOf(s.slice(0,4))>-1||s==="data"||s==="start"||s==="size"||s==="creation_time"||s==="modification_time"||l.DIFF_PRIMITIVE_ARRAY_PROP_NAMES.indexOf(s)>-1)continue;if(e[s]!==n[s])return!1}return!0},l.boxEqual=function(e,n){if(!l.boxEqualFields(e,n))return!1;for(var s=0;s<l.DIFF_BOXES_PROP_NAMES.length;s++){var c=l.DIFF_BOXES_PROP_NAMES[s];if(e[c]&&n[c]&&!l.boxEqual(e[c],n[c]))return!1}return!0};var g=function(){};g.prototype.parseSample=function(e){var n={},s;n.resources=[];var c=new a(e.data.buffer);if(!e.subsamples||e.subsamples.length===0)n.documentString=c.readString(e.data.length);else if(n.documentString=c.readString(e.subsamples[0].size),e.subsamples.length>1)for(s=1;s<e.subsamples.length;s++)n.resources[s]=c.readUint8Array(e.subsamples[s].size);return typeof DOMParser<"u"&&(n.document=new DOMParser().parseFromString(n.documentString,"application/xml")),n};var y=function(){};y.prototype.parseSample=function(e){var n,s=new a(e.data.buffer);return n=s.readString(e.data.length),n},y.prototype.parseConfig=function(e){var n,s=new a(e.buffer);return s.readUint32(),n=s.readCString(),n},t.XMLSubtitlein4Parser=g,t.Textin4Parser=y;var v=function(e){this.stream=e||new d,this.boxes=[],this.mdats=[],this.moofs=[],this.isProgressive=!1,this.moovStartFound=!1,this.onMoovStart=null,this.moovStartSent=!1,this.onReady=null,this.readySent=!1,this.onSegment=null,this.onSamples=null,this.onError=null,this.sampleListBuilt=!1,this.fragmentedTracks=[],this.extractedTracks=[],this.isFragmentationInitialized=!1,this.sampleProcessingStarted=!1,this.nextMoofNumber=0,this.itemListBuilt=!1,this.onSidx=null,this.sidxSent=!1};v.prototype.setSegmentOptions=function(e,n,s){var c=this.getTrackById(e);if(c){var f={};this.fragmentedTracks.push(f),f.id=e,f.user=n,f.trak=c,c.nextSample=0,f.segmentStream=null,f.nb_samples=1e3,f.rapAlignement=!0,s&&(s.nbSamples&&(f.nb_samples=s.nbSamples),s.rapAlignement&&(f.rapAlignement=s.rapAlignement))}},v.prototype.unsetSegmentOptions=function(e){for(var n=-1,s=0;s<this.fragmentedTracks.length;s++){var c=this.fragmentedTracks[s];c.id==e&&(n=s)}n>-1&&this.fragmentedTracks.splice(n,1)},v.prototype.setExtractionOptions=function(e,n,s){var c=this.getTrackById(e);if(c){var f={};this.extractedTracks.push(f),f.id=e,f.user=n,f.trak=c,c.nextSample=0,f.nb_samples=1e3,f.samples=[],s&&s.nbSamples&&(f.nb_samples=s.nbSamples)}},v.prototype.unsetExtractionOptions=function(e){for(var n=-1,s=0;s<this.extractedTracks.length;s++){var c=this.extractedTracks[s];c.id==e&&(n=s)}n>-1&&this.extractedTracks.splice(n,1)},v.prototype.parse=function(){var e,n,s=!1;if(!(this.restoreParsePosition&&!this.restoreParsePosition()))for(;;)if(this.hasIncompleteMdat&&this.hasIncompleteMdat()){if(this.processIncompleteMdat())continue;return}else if(this.saveParsePosition&&this.saveParsePosition(),e=l.parseOneBox(this.stream,s),e.code===l.ERR_NOT_ENOUGH_DATA)if(this.processIncompleteBox){if(this.processIncompleteBox(e))continue;return}else return;else{var c;switch(n=e.box,c=n.type!=="uuid"?n.type:n.uuid,this.boxes.push(n),c){case"mdat":this.mdats.push(n);break;case"moof":this.moofs.push(n);break;case"moov":this.moovStartFound=!0,this.mdats.length===0&&(this.isProgressive=!0);default:this[c]!==void 0&&r.warn("ISOFile","Duplicate Box of type: "+c+", overriding previous occurrence"),this[c]=n;break}this.updateUsedBytes&&this.updateUsedBytes(n,e)}},v.prototype.checkBuffer=function(e){if(e==null)throw"Buffer must be defined and non empty";if(e.fileStart===void 0)throw"Buffer must have a fileStart property";return e.byteLength===0?(r.warn("ISOFile","Ignoring empty buffer (fileStart: "+e.fileStart+")"),this.stream.logBufferLevel(),!1):(r.info("ISOFile","Processing buffer (fileStart: "+e.fileStart+")"),e.usedBytes=0,this.stream.insertBuffer(e),this.stream.logBufferLevel(),this.stream.initialized()?!0:(r.warn("ISOFile","Not ready to start parsing"),!1))},v.prototype.appendBuffer=function(e,n){var s;if(this.checkBuffer(e))return this.parse(),this.moovStartFound&&!this.moovStartSent&&(this.moovStartSent=!0,this.onMoovStart&&this.onMoovStart()),this.moov?(this.sampleListBuilt||(this.buildSampleLists(),this.sampleListBuilt=!0),this.updateSampleLists(),this.onReady&&!this.readySent&&(this.readySent=!0,this.onReady(this.getInfo())),this.processSamples(n),this.nextSeekPosition?(s=this.nextSeekPosition,this.nextSeekPosition=void 0):s=this.nextParsePosition,this.stream.getEndFilePositionAfter&&(s=this.stream.getEndFilePositionAfter(s))):this.nextParsePosition?s=this.nextParsePosition:s=0,this.sidx&&this.onSidx&&!this.sidxSent&&(this.onSidx(this.sidx),this.sidxSent=!0),this.meta&&(this.flattenItemInfo&&!this.itemListBuilt&&(this.flattenItemInfo(),this.itemListBuilt=!0),this.processItems&&this.processItems(this.onItem)),this.stream.cleanBuffers&&(r.info("ISOFile","Done processing buffer (fileStart: "+e.fileStart+") - next buffer to fetch should have a fileStart position of "+s),this.stream.logBufferLevel(),this.stream.cleanBuffers(),this.stream.logBufferLevel(!0),r.info("ISOFile","Sample data size in memory: "+this.getAllocatedSampleDataSize())),s},v.prototype.getInfo=function(){var e,n,s={},c,f,m,p,_=new Date("1904-01-01T00:00:00Z").getTime();if(this.moov)for(s.hasMoov=!0,s.duration=this.moov.mvhd.duration,s.timescale=this.moov.mvhd.timescale,s.isFragmented=this.moov.mvex!=null,s.isFragmented&&this.moov.mvex.mehd&&(s.fragment_duration=this.moov.mvex.mehd.fragment_duration),s.isProgressive=this.isProgressive,s.hasIOD=this.moov.iods!=null,s.brands=[],s.brands.push(this.ftyp.major_brand),s.brands=s.brands.concat(this.ftyp.compatible_brands),s.created=new Date(_+this.moov.mvhd.creation_time*1e3),s.modified=new Date(_+this.moov.mvhd.modification_time*1e3),s.tracks=[],s.audioTracks=[],s.videoTracks=[],s.subtitleTracks=[],s.metadataTracks=[],s.hintTracks=[],s.otherTracks=[],e=0;e<this.moov.traks.length;e++){if(c=this.moov.traks[e],p=c.mdia.minf.stbl.stsd.entries[0],f={},s.tracks.push(f),f.id=c.tkhd.track_id,f.name=c.mdia.hdlr.name,f.references=[],c.tref)for(n=0;n<c.tref.boxes.length;n++)m={},f.references.push(m),m.type=c.tref.boxes[n].type,m.track_ids=c.tref.boxes[n].track_ids;c.edts&&(f.edits=c.edts.elst.entries),f.created=new Date(_+c.tkhd.creation_time*1e3),f.modified=new Date(_+c.tkhd.modification_time*1e3),f.movie_duration=c.tkhd.duration,f.movie_timescale=s.timescale,f.layer=c.tkhd.layer,f.alternate_group=c.tkhd.alternate_group,f.volume=c.tkhd.volume,f.matrix=c.tkhd.matrix,f.track_width=c.tkhd.width/65536,f.track_height=c.tkhd.height/65536,f.timescale=c.mdia.mdhd.timescale,f.cts_shift=c.mdia.minf.stbl.cslg,f.duration=c.mdia.mdhd.duration,f.samples_duration=c.samples_duration,f.codec=p.getCodec(),f.kind=c.udta&&c.udta.kinds.length?c.udta.kinds[0]:{schemeURI:"",value:""},f.language=c.mdia.elng?c.mdia.elng.extended_language:c.mdia.mdhd.languageString,f.nb_samples=c.samples.length,f.size=c.samples_size,f.bitrate=f.size*8*f.timescale/f.samples_duration,p.isAudio()?(f.type="audio",s.audioTracks.push(f),f.audio={},f.audio.sample_rate=p.getSampleRate(),f.audio.channel_count=p.getChannelCount(),f.audio.sample_size=p.getSampleSize()):p.isVideo()?(f.type="video",s.videoTracks.push(f),f.video={},f.video.width=p.getWidth(),f.video.height=p.getHeight()):p.isSubtitle()?(f.type="subtitles",s.subtitleTracks.push(f)):p.isHint()?(f.type="metadata",s.hintTracks.push(f)):p.isMetadata()?(f.type="metadata",s.metadataTracks.push(f)):(f.type="metadata",s.otherTracks.push(f))}else s.hasMoov=!1;if(s.mime="",s.hasMoov&&s.tracks){for(s.videoTracks&&s.videoTracks.length>0?s.mime+='video/mp4; codecs="':s.audioTracks&&s.audioTracks.length>0?s.mime+='audio/mp4; codecs="':s.mime+='application/mp4; codecs="',e=0;e<s.tracks.length;e++)e!==0&&(s.mime+=","),s.mime+=s.tracks[e].codec;s.mime+='"; profiles="',s.mime+=this.ftyp.compatible_brands.join(),s.mime+='"'}return s},v.prototype.setNextSeekPositionFromSample=function(e){e&&(this.nextSeekPosition?this.nextSeekPosition=Math.min(e.offset+e.alreadyRead,this.nextSeekPosition):this.nextSeekPosition=e.offset+e.alreadyRead)},v.prototype.processSamples=function(e){var n,s;if(this.sampleProcessingStarted){if(this.isFragmentationInitialized&&this.onSegment!==null)for(n=0;n<this.fragmentedTracks.length;n++){var c=this.fragmentedTracks[n];for(s=c.trak;s.nextSample<s.samples.length&&this.sampleProcessingStarted;){r.debug("ISOFile","Creating media fragment on track #"+c.id+" for sample "+s.nextSample);var f=this.createFragment(c.id,s.nextSample,c.segmentStream);if(f)c.segmentStream=f,s.nextSample++;else break;if((s.nextSample%c.nb_samples===0||e||s.nextSample>=s.samples.length)&&(r.info("ISOFile","Sending fragmented data on track #"+c.id+" for samples ["+Math.max(0,s.nextSample-c.nb_samples)+","+(s.nextSample-1)+"]"),r.info("ISOFile","Sample data size in memory: "+this.getAllocatedSampleDataSize()),this.onSegment&&this.onSegment(c.id,c.user,c.segmentStream.buffer,s.nextSample,e||s.nextSample>=s.samples.length),c.segmentStream=null,c!==this.fragmentedTracks[n]))break}}if(this.onSamples!==null)for(n=0;n<this.extractedTracks.length;n++){var m=this.extractedTracks[n];for(s=m.trak;s.nextSample<s.samples.length&&this.sampleProcessingStarted;){r.debug("ISOFile","Exporting on track #"+m.id+" sample #"+s.nextSample);var p=this.getSample(s,s.nextSample);if(p)s.nextSample++,m.samples.push(p);else{this.setNextSeekPositionFromSample(s.samples[s.nextSample]);break}if((s.nextSample%m.nb_samples===0||s.nextSample>=s.samples.length)&&(r.debug("ISOFile","Sending samples on track #"+m.id+" for sample "+s.nextSample),this.onSamples&&this.onSamples(m.id,m.user,m.samples),m.samples=[],m!==this.extractedTracks[n]))break}}}},v.prototype.getBox=function(e){var n=this.getBoxes(e,!0);return n.length?n[0]:null},v.prototype.getBoxes=function(e,n){var s=[];return v._sweep.call(this,e,s,n),s},v._sweep=function(e,n,s){this.type&&this.type==e&&n.push(this);for(var c in this.boxes){if(n.length&&s)return;v._sweep.call(this.boxes[c],e,n,s)}},v.prototype.getTrackSamplesInfo=function(e){var n=this.getTrackById(e);if(n)return n.samples},v.prototype.getTrackSample=function(e,n){var s=this.getTrackById(e),c=this.getSample(s,n);return c},v.prototype.releaseUsedSamples=function(e,n){var s=0,c=this.getTrackById(e);c.lastValidSample||(c.lastValidSample=0);for(var f=c.lastValidSample;f<n;f++)s+=this.releaseSample(c,f);r.info("ISOFile","Track #"+e+" released samples up to "+n+" (released size: "+s+", remaining: "+this.samplesDataSize+")"),c.lastValidSample=n},v.prototype.start=function(){this.sampleProcessingStarted=!0,this.processSamples(!1)},v.prototype.stop=function(){this.sampleProcessingStarted=!1},v.prototype.flush=function(){r.info("ISOFile","Flushing remaining samples"),this.updateSampleLists(),this.processSamples(!0),this.stream.cleanBuffers(),this.stream.logBufferLevel(!0)},v.prototype.seekTrack=function(e,n,s){var c,f,m=1/0,p=0,_=0,S;if(s.samples.length===0)return r.info("ISOFile","No sample in track, cannot seek! Using time "+r.getDurationString(0,1)+" and offset: 0"),{offset:0,time:0};for(c=0;c<s.samples.length;c++){if(f=s.samples[c],c===0)_=0,S=f.timescale;else if(f.cts>e*f.timescale){_=c-1;break}n&&f.is_sync&&(p=c)}for(n&&(_=p),e=s.samples[_].cts,s.nextSample=_;s.samples[_].alreadyRead===s.samples[_].size&&s.samples[_+1];)_++;return m=s.samples[_].offset+s.samples[_].alreadyRead,r.info("ISOFile","Seeking to "+(n?"RAP":"")+" sample #"+s.nextSample+" on track "+s.tkhd.track_id+", time "+r.getDurationString(e,S)+" and offset: "+m),{offset:m,time:e/S}},v.prototype.getTrackDuration=function(e){var n;return e.samples?(n=e.samples[e.samples.length-1],(n.cts+n.duration)/n.timescale):1/0},v.prototype.seek=function(e,n){var s=this.moov,c,f,m,p={offset:1/0,time:1/0};if(this.moov){for(m=0;m<s.traks.length;m++)c=s.traks[m],!(e>this.getTrackDuration(c))&&(f=this.seekTrack(e,n,c),f.offset<p.offset&&(p.offset=f.offset),f.time<p.time&&(p.time=f.time));return r.info("ISOFile","Seeking at time "+r.getDurationString(p.time,1)+" needs a buffer with a fileStart position of "+p.offset),p.offset===1/0?p={offset:this.nextParsePosition,time:0}:p.offset=this.stream.getEndFilePositionAfter(p.offset),r.info("ISOFile","Adjusted seek position (after checking data already in buffer): "+p.offset),p}else throw"Cannot seek: moov not received!"},v.prototype.equal=function(e){for(var n=0;n<this.boxes.length&&n<e.boxes.length;){var s=this.boxes[n],c=e.boxes[n];if(!l.boxEqual(s,c))return!1;n++}return!0},t.ISOFile=v,v.prototype.lastBoxStartPosition=0,v.prototype.parsingMdat=null,v.prototype.nextParsePosition=0,v.prototype.discardMdatData=!1,v.prototype.processIncompleteBox=function(e){var n,s,c;return e.type==="mdat"?(n=new l[e.type+"Box"](e.size),this.parsingMdat=n,this.boxes.push(n),this.mdats.push(n),n.start=e.start,n.hdr_size=e.hdr_size,this.stream.addUsedBytes(n.hdr_size),this.lastBoxStartPosition=n.start+n.size,c=this.stream.seek(n.start+n.size,!1,this.discardMdatData),c?(this.parsingMdat=null,!0):(this.moovStartFound?this.nextParsePosition=this.stream.findEndContiguousBuf():this.nextParsePosition=n.start+n.size,!1)):(e.type==="moov"&&(this.moovStartFound=!0,this.mdats.length===0&&(this.isProgressive=!0)),s=this.stream.mergeNextBuffer?this.stream.mergeNextBuffer():!1,s?(this.nextParsePosition=this.stream.getEndPosition(),!0):(e.type?this.moovStartFound?this.nextParsePosition=this.stream.getEndPosition():this.nextParsePosition=this.stream.getPosition()+e.size:this.nextParsePosition=this.stream.getEndPosition(),!1))},v.prototype.hasIncompleteMdat=function(){return this.parsingMdat!==null},v.prototype.processIncompleteMdat=function(){var e,n;return e=this.parsingMdat,n=this.stream.seek(e.start+e.size,!1,this.discardMdatData),n?(r.debug("ISOFile","Found 'mdat' end in buffered data"),this.parsingMdat=null,!0):(this.nextParsePosition=this.stream.findEndContiguousBuf(),!1)},v.prototype.restoreParsePosition=function(){return this.stream.seek(this.lastBoxStartPosition,!0,this.discardMdatData)},v.prototype.saveParsePosition=function(){this.lastBoxStartPosition=this.stream.getPosition()},v.prototype.updateUsedBytes=function(e,n){this.stream.addUsedBytes&&(e.type==="mdat"?(this.stream.addUsedBytes(e.hdr_size),this.discardMdatData&&this.stream.addUsedBytes(e.size-e.hdr_size)):this.stream.addUsedBytes(e.size))},v.prototype.add=l.Box.prototype.add,v.prototype.addBox=l.Box.prototype.addBox,v.prototype.init=function(e){var n=e||{};this.add("ftyp").set("major_brand",n.brands&&n.brands[0]||"iso4").set("minor_version",0).set("compatible_brands",n.brands||["iso4"]);var s=this.add("moov");return s.add("mvhd").set("timescale",n.timescale||600).set("rate",n.rate||65536).set("creation_time",0).set("modification_time",0).set("duration",n.duration||0).set("volume",n.width?0:256).set("matrix",[65536,0,0,0,65536,0,0,0,1073741824]).set("next_track_id",1),s.add("mvex"),this},v.prototype.addTrack=function(e){this.moov||this.init(e);var n=e||{};n.width=n.width||320,n.height=n.height||320,n.id=n.id||this.moov.mvhd.next_track_id,n.type=n.type||"avc1";var s=this.moov.add("trak");this.moov.mvhd.next_track_id=n.id+1,s.add("tkhd").set("flags",l.TKHD_FLAG_ENABLED|l.TKHD_FLAG_IN_MOVIE|l.TKHD_FLAG_IN_PREVIEW).set("creation_time",0).set("modification_time",0).set("track_id",n.id).set("duration",n.duration||0).set("layer",n.layer||0).set("alternate_group",0).set("volume",1).set("matrix",[0,0,0,0,0,0,0,0,0]).set("width",n.width<<16).set("height",n.height<<16);var c=s.add("mdia");c.add("mdhd").set("creation_time",0).set("modification_time",0).set("timescale",n.timescale||1).set("duration",n.media_duration||0).set("language",n.language||"und"),c.add("hdlr").set("handler",n.hdlr||"vide").set("name",n.name||"Track created with MP4Box.js"),c.add("elng").set("extended_language",n.language||"fr-FR");var f=c.add("minf");if(l[n.type+"SampleEntry"]!==void 0){var m=new l[n.type+"SampleEntry"];m.data_reference_index=1;var p="";for(var _ in l.sampleEntryCodes)for(var S=l.sampleEntryCodes[_],x=0;x<S.length;x++)if(S.indexOf(n.type)>-1){p=_;break}switch(p){case"Visual":if(f.add("vmhd").set("graphicsmode",0).set("opcolor",[0,0,0]),m.set("width",n.width).set("height",n.height).set("horizresolution",72<<16).set("vertresolution",72<<16).set("frame_count",1).set("compressorname",n.type+" Compressor").set("depth",24),n.avcDecoderConfigRecord){var w=new l.avcCBox;w.parse(new a(n.avcDecoderConfigRecord)),m.addBox(w)}else if(n.hevcDecoderConfigRecord){var U=new l.hvcCBox;U.parse(new a(n.hevcDecoderConfigRecord)),m.addBox(U)}break;case"Audio":f.add("smhd").set("balance",n.balance||0),m.set("channel_count",n.channel_count||2).set("samplesize",n.samplesize||16).set("samplerate",n.samplerate||65536);break;case"Hint":f.add("hmhd");break;case"Subtitle":switch(f.add("sthd"),n.type){case"stpp":m.set("namespace",n.namespace||"nonamespace").set("schema_location",n.schema_location||"").set("auxiliary_mime_types",n.auxiliary_mime_types||"");break}break;case"Metadata":f.add("nmhd");break;case"System":f.add("nmhd");break;default:f.add("nmhd");break}n.description&&m.addBox(n.description),n.description_boxes&&n.description_boxes.forEach(function(E){m.addBox(E)}),f.add("dinf").add("dref").addEntry(new l["url Box"]().set("flags",1));var A=f.add("stbl");return A.add("stsd").addEntry(m),A.add("stts").set("sample_counts",[]).set("sample_deltas",[]),A.add("stsc").set("first_chunk",[]).set("samples_per_chunk",[]).set("sample_description_index",[]),A.add("stco").set("chunk_offsets",[]),A.add("stsz").set("sample_sizes",[]),this.moov.mvex.add("trex").set("track_id",n.id).set("default_sample_description_index",n.default_sample_description_index||1).set("default_sample_duration",n.default_sample_duration||0).set("default_sample_size",n.default_sample_size||0).set("default_sample_flags",n.default_sample_flags||0),this.buildTrakSampleLists(s),n.id}},l.Box.prototype.computeSize=function(e){var n=e||new o;n.endianness=o.BIG_ENDIAN,this.write(n)},v.prototype.addSample=function(e,n,s){var c=s||{},f={},m=this.getTrackById(e);if(m!==null){f.number=m.samples.length,f.track_id=m.tkhd.track_id,f.timescale=m.mdia.mdhd.timescale,f.description_index=c.sample_description_index?c.sample_description_index-1:0,f.description=m.mdia.minf.stbl.stsd.entries[f.description_index],f.data=n,f.size=n.byteLength,f.alreadyRead=f.size,f.duration=c.duration||1,f.cts=c.cts||0,f.dts=c.dts||0,f.is_sync=c.is_sync||!1,f.is_leading=c.is_leading||0,f.depends_on=c.depends_on||0,f.is_depended_on=c.is_depended_on||0,f.has_redundancy=c.has_redundancy||0,f.degradation_priority=c.degradation_priority||0,f.offset=0,f.subsamples=c.subsamples,m.samples.push(f),m.samples_size+=f.size,m.samples_duration+=f.duration,m.first_dts===void 0&&(m.first_dts=c.dts),this.processSamples();var p=this.createSingleSampleMoof(f);return this.addBox(p),p.computeSize(),p.trafs[0].truns[0].data_offset=p.size+8,this.add("mdat").data=new Uint8Array(n),f}},v.prototype.createSingleSampleMoof=function(e){var n=0;e.is_sync?n=1<<25:n=65536;var s=new l.moofBox;s.add("mfhd").set("sequence_number",this.nextMoofNumber),this.nextMoofNumber++;var c=s.add("traf"),f=this.getTrackById(e.track_id);return c.add("tfhd").set("track_id",e.track_id).set("flags",l.TFHD_FLAG_DEFAULT_BASE_IS_MOOF),c.add("tfdt").set("baseMediaDecodeTime",e.dts-(f.first_dts||0)),c.add("trun").set("flags",l.TRUN_FLAGS_DATA_OFFSET|l.TRUN_FLAGS_DURATION|l.TRUN_FLAGS_SIZE|l.TRUN_FLAGS_FLAGS|l.TRUN_FLAGS_CTS_OFFSET).set("data_offset",0).set("first_sample_flags",0).set("sample_count",1).set("sample_duration",[e.duration]).set("sample_size",[e.size]).set("sample_flags",[n]).set("sample_composition_time_offset",[e.cts-e.dts]),s},v.prototype.lastMoofIndex=0,v.prototype.samplesDataSize=0,v.prototype.resetTables=function(){var e,n,s,c,f,m,p,_;for(this.initial_duration=this.moov.mvhd.duration,this.moov.mvhd.duration=0,e=0;e<this.moov.traks.length;e++){n=this.moov.traks[e],n.tkhd.duration=0,n.mdia.mdhd.duration=0,s=n.mdia.minf.stbl.stco||n.mdia.minf.stbl.co64,s.chunk_offsets=[],c=n.mdia.minf.stbl.stsc,c.first_chunk=[],c.samples_per_chunk=[],c.sample_description_index=[],f=n.mdia.minf.stbl.stsz||n.mdia.minf.stbl.stz2,f.sample_sizes=[],m=n.mdia.minf.stbl.stts,m.sample_counts=[],m.sample_deltas=[],p=n.mdia.minf.stbl.ctts,p&&(p.sample_counts=[],p.sample_offsets=[]),_=n.mdia.minf.stbl.stss;var S=n.mdia.minf.stbl.boxes.indexOf(_);S!=-1&&(n.mdia.minf.stbl.boxes[S]=null)}},v.initSampleGroups=function(e,n,s,c,f){var m,p,_,S;function x(w,U,A){this.grouping_type=w,this.grouping_type_parameter=U,this.sbgp=A,this.last_sample_in_run=-1,this.entry_index=-1}for(n&&(n.sample_groups_info=[]),e.sample_groups_info||(e.sample_groups_info=[]),p=0;p<s.length;p++){for(S=s[p].grouping_type+"/"+s[p].grouping_type_parameter,_=new x(s[p].grouping_type,s[p].grouping_type_parameter,s[p]),n&&(n.sample_groups_info[S]=_),e.sample_groups_info[S]||(e.sample_groups_info[S]=_),m=0;m<c.length;m++)c[m].grouping_type===s[p].grouping_type&&(_.description=c[m],_.description.used=!0);if(f)for(m=0;m<f.length;m++)f[m].grouping_type===s[p].grouping_type&&(_.fragment_description=f[m],_.fragment_description.used=!0,_.is_fragment=!0)}if(n){if(f)for(p=0;p<f.length;p++)!f[p].used&&f[p].version>=2&&(S=f[p].grouping_type+"/0",_=new x(f[p].grouping_type,0),_.is_fragment=!0,n.sample_groups_info[S]||(n.sample_groups_info[S]=_))}else for(p=0;p<c.length;p++)!c[p].used&&c[p].version>=2&&(S=c[p].grouping_type+"/0",_=new x(c[p].grouping_type,0),e.sample_groups_info[S]||(e.sample_groups_info[S]=_))},v.setSampleGroupProperties=function(e,n,s,c){var f,m;n.sample_groups=[];for(f in c)if(n.sample_groups[f]={},n.sample_groups[f].grouping_type=c[f].grouping_type,n.sample_groups[f].grouping_type_parameter=c[f].grouping_type_parameter,s>=c[f].last_sample_in_run&&(c[f].last_sample_in_run<0&&(c[f].last_sample_in_run=0),c[f].entry_index++,c[f].entry_index<=c[f].sbgp.entries.length-1&&(c[f].last_sample_in_run+=c[f].sbgp.entries[c[f].entry_index].sample_count)),c[f].entry_index<=c[f].sbgp.entries.length-1?n.sample_groups[f].group_description_index=c[f].sbgp.entries[c[f].entry_index].group_description_index:n.sample_groups[f].group_description_index=-1,n.sample_groups[f].group_description_index!==0){var p;c[f].fragment_description?p=c[f].fragment_description:p=c[f].description,n.sample_groups[f].group_description_index>0?(n.sample_groups[f].group_description_index>65535?m=(n.sample_groups[f].group_description_index>>16)-1:m=n.sample_groups[f].group_description_index-1,p&&m>=0&&(n.sample_groups[f].description=p.entries[m])):p&&p.version>=2&&p.default_group_description_index>0&&(n.sample_groups[f].description=p.entries[p.default_group_description_index-1])}},v.process_sdtp=function(e,n,s){n&&(e?(n.is_leading=e.is_leading[s],n.depends_on=e.sample_depends_on[s],n.is_depended_on=e.sample_is_depended_on[s],n.has_redundancy=e.sample_has_redundancy[s]):(n.is_leading=0,n.depends_on=0,n.is_depended_on=0,n.has_redundancy=0))},v.prototype.buildSampleLists=function(){var e,n;for(e=0;e<this.moov.traks.length;e++)n=this.moov.traks[e],this.buildTrakSampleLists(n)},v.prototype.buildTrakSampleLists=function(e){var n,s,c,f,m,p,_,S,x,w,U,A,E,T,P,z,R,D,B,F,M,I,L,O;if(e.samples=[],e.samples_duration=0,e.samples_size=0,s=e.mdia.minf.stbl.stco||e.mdia.minf.stbl.co64,c=e.mdia.minf.stbl.stsc,f=e.mdia.minf.stbl.stsz||e.mdia.minf.stbl.stz2,m=e.mdia.minf.stbl.stts,p=e.mdia.minf.stbl.ctts,_=e.mdia.minf.stbl.stss,S=e.mdia.minf.stbl.stsd,x=e.mdia.minf.stbl.subs,A=e.mdia.minf.stbl.stdp,w=e.mdia.minf.stbl.sbgps,U=e.mdia.minf.stbl.sgpds,D=-1,B=-1,F=-1,M=-1,I=0,L=0,O=0,v.initSampleGroups(e,null,w,U),!(typeof f>"u")){for(n=0;n<f.sample_sizes.length;n++){var k={};k.number=n,k.track_id=e.tkhd.track_id,k.timescale=e.mdia.mdhd.timescale,k.alreadyRead=0,e.samples[n]=k,k.size=f.sample_sizes[n],e.samples_size+=k.size,n===0?(T=1,E=0,k.chunk_index=T,k.chunk_run_index=E,R=c.samples_per_chunk[E],z=0,E+1<c.first_chunk.length?P=c.first_chunk[E+1]-1:P=1/0):n<R?(k.chunk_index=T,k.chunk_run_index=E):(T++,k.chunk_index=T,z=0,T<=P||(E++,E+1<c.first_chunk.length?P=c.first_chunk[E+1]-1:P=1/0),k.chunk_run_index=E,R+=c.samples_per_chunk[E]),k.description_index=c.sample_description_index[k.chunk_run_index]-1,k.description=S.entries[k.description_index],k.offset=s.chunk_offsets[k.chunk_index-1]+z,z+=k.size,n>D&&(B++,D<0&&(D=0),D+=m.sample_counts[B]),n>0?(e.samples[n-1].duration=m.sample_deltas[B],e.samples_duration+=e.samples[n-1].duration,k.dts=e.samples[n-1].dts+e.samples[n-1].duration):k.dts=0,p?(n>=F&&(M++,F<0&&(F=0),F+=p.sample_counts[M]),k.cts=e.samples[n].dts+p.sample_offsets[M]):k.cts=k.dts,_?(n==_.sample_numbers[I]-1?(k.is_sync=!0,I++):(k.is_sync=!1,k.degradation_priority=0),x&&x.entries[L].sample_delta+O==n+1&&(k.subsamples=x.entries[L].subsamples,O+=x.entries[L].sample_delta,L++)):k.is_sync=!0,v.process_sdtp(e.mdia.minf.stbl.sdtp,k,k.number),A?k.degradation_priority=A.priority[n]:k.degradation_priority=0,x&&x.entries[L].sample_delta+O==n&&(k.subsamples=x.entries[L].subsamples,O+=x.entries[L].sample_delta),(w.length>0||U.length>0)&&v.setSampleGroupProperties(e,k,n,e.sample_groups_info)}n>0&&(e.samples[n-1].duration=Math.max(e.mdia.mdhd.duration-e.samples[n-1].dts,0),e.samples_duration+=e.samples[n-1].duration)}},v.prototype.updateSampleLists=function(){var e,n,s,c,f,m,p,_,S,x,w,U,A,E,T;if(this.moov!==void 0){for(;this.lastMoofIndex<this.moofs.length;)if(S=this.moofs[this.lastMoofIndex],this.lastMoofIndex++,S.type=="moof")for(x=S,e=0;e<x.trafs.length;e++){for(w=x.trafs[e],U=this.getTrackById(w.tfhd.track_id),A=this.getTrexById(w.tfhd.track_id),w.tfhd.flags&l.TFHD_FLAG_SAMPLE_DESC?c=w.tfhd.default_sample_description_index:c=A?A.default_sample_description_index:1,w.tfhd.flags&l.TFHD_FLAG_SAMPLE_DUR?f=w.tfhd.default_sample_duration:f=A?A.default_sample_duration:0,w.tfhd.flags&l.TFHD_FLAG_SAMPLE_SIZE?m=w.tfhd.default_sample_size:m=A?A.default_sample_size:0,w.tfhd.flags&l.TFHD_FLAG_SAMPLE_FLAGS?p=w.tfhd.default_sample_flags:p=A?A.default_sample_flags:0,w.sample_number=0,w.sbgps.length>0&&v.initSampleGroups(U,w,w.sbgps,U.mdia.minf.stbl.sgpds,w.sgpds),n=0;n<w.truns.length;n++){var P=w.truns[n];for(s=0;s<P.sample_count;s++){E={},E.moof_number=this.lastMoofIndex,E.number_in_traf=w.sample_number,w.sample_number++,E.number=U.samples.length,w.first_sample_index=U.samples.length,U.samples.push(E),E.track_id=U.tkhd.track_id,E.timescale=U.mdia.mdhd.timescale,E.description_index=c-1,E.description=U.mdia.minf.stbl.stsd.entries[E.description_index],E.size=m,P.flags&l.TRUN_FLAGS_SIZE&&(E.size=P.sample_size[s]),U.samples_size+=E.size,E.duration=f,P.flags&l.TRUN_FLAGS_DURATION&&(E.duration=P.sample_duration[s]),U.samples_duration+=E.duration,U.first_traf_merged||s>0?E.dts=U.samples[U.samples.length-2].dts+U.samples[U.samples.length-2].duration:(w.tfdt?E.dts=w.tfdt.baseMediaDecodeTime:E.dts=0,U.first_traf_merged=!0),E.cts=E.dts,P.flags&l.TRUN_FLAGS_CTS_OFFSET&&(E.cts=E.dts+P.sample_composition_time_offset[s]),T=p,P.flags&l.TRUN_FLAGS_FLAGS?T=P.sample_flags[s]:s===0&&P.flags&l.TRUN_FLAGS_FIRST_FLAG&&(T=P.first_sample_flags),E.is_sync=!(T>>16&1),E.is_leading=T>>26&3,E.depends_on=T>>24&3,E.is_depended_on=T>>22&3,E.has_redundancy=T>>20&3,E.degradation_priority=T&65535;var z=!!(w.tfhd.flags&l.TFHD_FLAG_BASE_DATA_OFFSET),R=!!(w.tfhd.flags&l.TFHD_FLAG_DEFAULT_BASE_IS_MOOF),D=!!(P.flags&l.TRUN_FLAGS_DATA_OFFSET),B=0;z?B=w.tfhd.base_data_offset:R||n===0?B=x.start:B=_,n===0&&s===0?D?E.offset=B+P.data_offset:E.offset=B:E.offset=_,_=E.offset+E.size,(w.sbgps.length>0||w.sgpds.length>0||U.mdia.minf.stbl.sbgps.length>0||U.mdia.minf.stbl.sgpds.length>0)&&v.setSampleGroupProperties(U,E,E.number_in_traf,w.sample_groups_info)}}if(w.subs){U.has_fragment_subsamples=!0;var F=w.first_sample_index;for(n=0;n<w.subs.entries.length;n++)F+=w.subs.entries[n].sample_delta,E=U.samples[F-1],E.subsamples=w.subs.entries[n].subsamples}}}},v.prototype.getSample=function(e,n){var s,c=e.samples[n];if(!this.moov)return null;if(!c.data)c.data=new Uint8Array(c.size),c.alreadyRead=0,this.samplesDataSize+=c.size,r.debug("ISOFile","Allocating sample #"+n+" on track #"+e.tkhd.track_id+" of size "+c.size+" (total: "+this.samplesDataSize+")");else if(c.alreadyRead==c.size)return c;for(;;){var f=this.stream.findPosition(!0,c.offset+c.alreadyRead,!1);if(f>-1){s=this.stream.buffers[f];var m=s.byteLength-(c.offset+c.alreadyRead-s.fileStart);if(c.size-c.alreadyRead<=m)return r.debug("ISOFile","Getting sample #"+n+" data (alreadyRead: "+c.alreadyRead+" offset: "+(c.offset+c.alreadyRead-s.fileStart)+" read size: "+(c.size-c.alreadyRead)+" full size: "+c.size+")"),o.memcpy(c.data.buffer,c.alreadyRead,s,c.offset+c.alreadyRead-s.fileStart,c.size-c.alreadyRead),s.usedBytes+=c.size-c.alreadyRead,this.stream.logBufferLevel(),c.alreadyRead=c.size,c;if(m===0)return null;r.debug("ISOFile","Getting sample #"+n+" partial data (alreadyRead: "+c.alreadyRead+" offset: "+(c.offset+c.alreadyRead-s.fileStart)+" read size: "+m+" full size: "+c.size+")"),o.memcpy(c.data.buffer,c.alreadyRead,s,c.offset+c.alreadyRead-s.fileStart,m),c.alreadyRead+=m,s.usedBytes+=m,this.stream.logBufferLevel()}else return null}},v.prototype.releaseSample=function(e,n){var s=e.samples[n];return s.data?(this.samplesDataSize-=s.size,s.data=null,s.alreadyRead=0,s.size):0},v.prototype.getAllocatedSampleDataSize=function(){return this.samplesDataSize},v.prototype.getCodecs=function(){var e,n="";for(e=0;e<this.moov.traks.length;e++){var s=this.moov.traks[e];e>0&&(n+=","),n+=s.mdia.minf.stbl.stsd.entries[0].getCodec()}return n},v.prototype.getTrexById=function(e){var n;if(!this.moov||!this.moov.mvex)return null;for(n=0;n<this.moov.mvex.trexs.length;n++){var s=this.moov.mvex.trexs[n];if(s.track_id==e)return s}return null},v.prototype.getTrackById=function(e){if(this.moov===void 0)return null;for(var n=0;n<this.moov.traks.length;n++){var s=this.moov.traks[n];if(s.tkhd.track_id==e)return s}return null},v.prototype.items=[],v.prototype.itemsDataSize=0,v.prototype.flattenItemInfo=function(){var e=this.items,n,s,c,f=this.meta;if(f!=null&&f.hdlr!==void 0&&f.iinf!==void 0){for(n=0;n<f.iinf.item_infos.length;n++)c={},c.id=f.iinf.item_infos[n].item_ID,e[c.id]=c,c.ref_to=[],c.name=f.iinf.item_infos[n].item_name,f.iinf.item_infos[n].protection_index>0&&(c.protection=f.ipro.protections[f.iinf.item_infos[n].protection_index-1]),f.iinf.item_infos[n].item_type?c.type=f.iinf.item_infos[n].item_type:c.type="mime",c.content_type=f.iinf.item_infos[n].content_type,c.content_encoding=f.iinf.item_infos[n].content_encoding;if(f.iloc)for(n=0;n<f.iloc.items.length;n++){var m=f.iloc.items[n];switch(c=e[m.item_ID],m.data_reference_index!==0&&(r.warn("Item storage with reference to other files: not supported"),c.source=f.dinf.boxes[m.data_reference_index-1]),m.construction_method){case 0:break;case 1:r.warn("Item storage with construction_method : not supported");break;case 2:r.warn("Item storage with construction_method : not supported");break}for(c.extents=[],c.size=0,s=0;s<m.extents.length;s++)c.extents[s]={},c.extents[s].offset=m.extents[s].extent_offset+m.base_offset,c.extents[s].length=m.extents[s].extent_length,c.extents[s].alreadyRead=0,c.size+=c.extents[s].length}if(f.pitm&&(e[f.pitm.item_id].primary=!0),f.iref)for(n=0;n<f.iref.references.length;n++){var p=f.iref.references[n];for(s=0;s<p.references.length;s++)e[p.from_item_ID].ref_to.push({type:p.type,id:p.references[s]})}if(f.iprp)for(var _=0;_<f.iprp.ipmas.length;_++){var S=f.iprp.ipmas[_];for(n=0;n<S.associations.length;n++){var x=S.associations[n];for(c=e[x.id],c.properties===void 0&&(c.properties={},c.properties.boxes=[]),s=0;s<x.props.length;s++){var w=x.props[s];if(w.property_index>0&&w.property_index-1<f.iprp.ipco.boxes.length){var U=f.iprp.ipco.boxes[w.property_index-1];c.properties[U.type]=U,c.properties.boxes.push(U)}}}}}},v.prototype.getItem=function(e){var n,s;if(!this.meta)return null;if(s=this.items[e],!s.data&&s.size)s.data=new Uint8Array(s.size),s.alreadyRead=0,this.itemsDataSize+=s.size,r.debug("ISOFile","Allocating item #"+e+" of size "+s.size+" (total: "+this.itemsDataSize+")");else if(s.alreadyRead===s.size)return s;for(var c=0;c<s.extents.length;c++){var f=s.extents[c];if(f.alreadyRead!==f.length){var m=this.stream.findPosition(!0,f.offset+f.alreadyRead,!1);if(m>-1){n=this.stream.buffers[m];var p=n.byteLength-(f.offset+f.alreadyRead-n.fileStart);if(f.length-f.alreadyRead<=p)r.debug("ISOFile","Getting item #"+e+" extent #"+c+" data (alreadyRead: "+f.alreadyRead+" offset: "+(f.offset+f.alreadyRead-n.fileStart)+" read size: "+(f.length-f.alreadyRead)+" full extent size: "+f.length+" full item size: "+s.size+")"),o.memcpy(s.data.buffer,s.alreadyRead,n,f.offset+f.alreadyRead-n.fileStart,f.length-f.alreadyRead),n.usedBytes+=f.length-f.alreadyRead,this.stream.logBufferLevel(),s.alreadyRead+=f.length-f.alreadyRead,f.alreadyRead=f.length;else return r.debug("ISOFile","Getting item #"+e+" extent #"+c+" partial data (alreadyRead: "+f.alreadyRead+" offset: "+(f.offset+f.alreadyRead-n.fileStart)+" read size: "+p+" full extent size: "+f.length+" full item size: "+s.size+")"),o.memcpy(s.data.buffer,s.alreadyRead,n,f.offset+f.alreadyRead-n.fileStart,p),f.alreadyRead+=p,s.alreadyRead+=p,n.usedBytes+=p,this.stream.logBufferLevel(),null}else return null}}return s.alreadyRead===s.size?s:null},v.prototype.releaseItem=function(e){var n=this.items[e];if(n.data){this.itemsDataSize-=n.size,n.data=null,n.alreadyRead=0;for(var s=0;s<n.extents.length;s++){var c=n.extents[s];c.alreadyRead=0}return n.size}else return 0},v.prototype.processItems=function(e){for(var n in this.items){var s=this.items[n];this.getItem(s.id),e&&!s.sent&&(e(s),s.sent=!0,s.data=null)}},v.prototype.hasItem=function(e){for(var n in this.items){var s=this.items[n];if(s.name===e)return s.id}return-1},v.prototype.getMetaHandler=function(){return this.meta?this.meta.hdlr.handler:null},v.prototype.getPrimaryItem=function(){return!this.meta||!this.meta.pitm?null:this.getItem(this.meta.pitm.item_id)},v.prototype.itemToFragmentedTrackFile=function(e){var n=e||{},s=null;if(n.itemId?s=this.getItem(n.itemId):s=this.getPrimaryItem(),s==null)return null;var c=new v;c.discardMdatData=!1;var f={type:s.type,description_boxes:s.properties.boxes};s.properties.ispe&&(f.width=s.properties.ispe.image_width,f.height=s.properties.ispe.image_height);var m=c.addTrack(f);return m?(c.addSample(m,s.data),c):null},v.prototype.write=function(e){for(var n=0;n<this.boxes.length;n++)this.boxes[n].write(e)},v.prototype.createFragment=function(e,n,s){var c=this.getTrackById(e),f=this.getSample(c,n);if(f==null)return this.setNextSeekPositionFromSample(c.samples[n]),null;var m=s||new o;m.endianness=o.BIG_ENDIAN;var p=this.createSingleSampleMoof(f);p.write(m),p.trafs[0].truns[0].data_offset=p.size+8,r.debug("MP4Box","Adjusting data_offset with new value "+p.trafs[0].truns[0].data_offset),m.adjustUint32(p.trafs[0].truns[0].data_offset_position,p.trafs[0].truns[0].data_offset);var _=new l.mdatBox;return _.data=f.data,_.write(m),m},v.writeInitializationSegment=function(e,n,s,c){var f;r.debug("ISOFile","Generating initialization segment");var m=new o;m.endianness=o.BIG_ENDIAN,e.write(m);var p=n.add("mvex");for(s&&p.add("mehd").set("fragment_duration",s),f=0;f<n.traks.length;f++)p.add("trex").set("track_id",n.traks[f].tkhd.track_id).set("default_sample_description_index",1).set("default_sample_duration",c).set("default_sample_size",0).set("default_sample_flags",65536);return n.write(m),m.buffer},v.prototype.save=function(e){var n=new o;n.endianness=o.BIG_ENDIAN,this.write(n),n.save(e)},v.prototype.getBuffer=function(){var e=new o;return e.endianness=o.BIG_ENDIAN,this.write(e),e.buffer},v.prototype.initializeSegmentation=function(){var e,n,s,c;for(this.onSegment===null&&r.warn("MP4Box","No segmentation callback set!"),this.isFragmentationInitialized||(this.isFragmentationInitialized=!0,this.nextMoofNumber=0,this.resetTables()),n=[],e=0;e<this.fragmentedTracks.length;e++){var f=new l.moovBox;f.mvhd=this.moov.mvhd,f.boxes.push(f.mvhd),s=this.getTrackById(this.fragmentedTracks[e].id),f.boxes.push(s),f.traks.push(s),c={},c.id=s.tkhd.track_id,c.user=this.fragmentedTracks[e].user,c.buffer=v.writeInitializationSegment(this.ftyp,f,this.moov.mvex&&this.moov.mvex.mehd?this.moov.mvex.mehd.fragment_duration:void 0,this.moov.traks[e].samples.length>0?this.moov.traks[e].samples[0].duration:0),n.push(c)}return n},l.Box.prototype.printHeader=function(e){this.size+=8,this.size>u&&(this.size+=8),this.type==="uuid"&&(this.size+=16),e.log(e.indent+"size:"+this.size),e.log(e.indent+"type:"+this.type)},l.FullBox.prototype.printHeader=function(e){this.size+=4,l.Box.prototype.printHeader.call(this,e),e.log(e.indent+"version:"+this.version),e.log(e.indent+"flags:"+this.flags)},l.Box.prototype.print=function(e){this.printHeader(e)},l.ContainerBox.prototype.print=function(e){this.printHeader(e);for(var n=0;n<this.boxes.length;n++)if(this.boxes[n]){var s=e.indent;e.indent+=" ",this.boxes[n].print(e),e.indent=s}},v.prototype.print=function(e){e.indent="";for(var n=0;n<this.boxes.length;n++)this.boxes[n]&&this.boxes[n].print(e)},l.mvhdBox.prototype.print=function(e){l.FullBox.prototype.printHeader.call(this,e),e.log(e.indent+"creation_time: "+this.creation_time),e.log(e.indent+"modification_time: "+this.modification_time),e.log(e.indent+"timescale: "+this.timescale),e.log(e.indent+"duration: "+this.duration),e.log(e.indent+"rate: "+this.rate),e.log(e.indent+"volume: "+(this.volume>>8)),e.log(e.indent+"matrix: "+this.matrix.join(", ")),e.log(e.indent+"next_track_id: "+this.next_track_id)},l.tkhdBox.prototype.print=function(e){l.FullBox.prototype.printHeader.call(this,e),e.log(e.indent+"creation_time: "+this.creation_time),e.log(e.indent+"modification_time: "+this.modification_time),e.log(e.indent+"track_id: "+this.track_id),e.log(e.indent+"duration: "+this.duration),e.log(e.indent+"volume: "+(this.volume>>8)),e.log(e.indent+"matrix: "+this.matrix.join(", ")),e.log(e.indent+"layer: "+this.layer),e.log(e.indent+"alternate_group: "+this.alternate_group),e.log(e.indent+"width: "+this.width),e.log(e.indent+"height: "+this.height)};var b={};b.createFile=function(e,n){var s=e!==void 0?e:!0,c=new v(n);return c.discardMdatData=!s,c},t.createFile=b.createFile})(KI);const ep={sampleRate:48e3,channelCount:2,codec:"mp4a.40.2"};var ms,en,Wn,Zo,Yi,Wa,tp,lw;const xu=class{constructor(t,r={}){Si(this,tp),Lt(this,"ready"),Si(this,ms,{duration:0,width:0,height:0}),Si(this,en,new Float32Array),Si(this,Wn,new Float32Array),Si(this,Zo,0),Si(this,Yi,0),Si(this,Wa,void 0),Ui(this,Wa,{loop:!1,volume:1,...r}),this.ready=$I(this,tp,lw).call(this,t).then(()=>({width:0,height:0,duration:r.loop?1/0:Me(this,ms).duration}))}getPCMData(){return[Me(this,en),Me(this,Wn)]}async tick(t){if(t<Me(this,Zo))throw Error("time not allow rollback");if(!Me(this,Wa).loop&&t>=Me(this,ms).duration)return{audio:[],state:"done"};const r=t-Me(this,Zo);Ui(this,Zo,t);const a=Math.ceil(r*(ep.sampleRate/1e6)),o=Me(this,Yi)+a,u=Me(this,Wa).loop?[U_(Me(this,en),Me(this,Yi),o),U_(Me(this,Wn),Me(this,Yi),o)]:[Me(this,en).slice(Me(this,Yi),o),Me(this,Wn).slice(Me(this,Yi),o)];return Ui(this,Yi,o),{audio:u,state:"success"}}destroy(){Ui(this,en,new Float32Array(0)),Ui(this,Wn,new Float32Array(0)),oi.info("---- audioclip destroy ----")}};let XI=xu;ms=new WeakMap,en=new WeakMap,Wn=new WeakMap,Zo=new WeakMap,Yi=new WeakMap,Wa=new WeakMap,tp=new WeakSet,lw=async function(t){xu.ctx==null&&(xu.ctx=new AudioContext({sampleRate:ep.sampleRate}));const r=performance.now(),a=t instanceof ReadableStream?await QI(t,xu.ctx):t;oi.info("Audio clip decoded complete:",performance.now()-r);const o=Me(this,Wa).volume;if(o!==1)for(const u of a)for(let d=0;d<u.length;d+=1)u[d]*=o;Me(this,ms).duration=a[0].length/ep.sampleRate*1e6,Ui(this,en,a[0]),Ui(this,Wn,a[1]??Me(this,en)),oi.info("Audio clip convert to AudioData, time:",performance.now()-r)},Lt(XI,"ctx",null);async function QI(t,r){const a=await new Response(t).arrayBuffer();return qI(await r.decodeAudioData(a))}const ZI=["t","b","l","r","lt","lb","rt","rb","rotate"],Sr=class{constructor(r,a,o,u,d){Lt(this,"x",0),Lt(this,"y",0),Lt(this,"w",0),Lt(this,"h",0),Lt(this,"angle",0),Lt(this,"master",null),this.x=r??0,this.y=a??0,this.w=o??0,this.h=u??0,this.master=d??null}get center(){const{x:r,y:a,w:o,h:u}=this;return{x:r+o/2,y:a+u/2}}get ctrls(){const{w:r,h:a}=this,o=Sr.CTRL_SIZE,u=o/2,d=r/2,h=a/2,l=o*1.5,g=l/2;return{t:new Sr(-u,-h-u,o,o,this),b:new Sr(-u,h-u,o,o,this),l:new Sr(-d-u,-u,o,o,this),r:new Sr(d-u,-u,o,o,this),lt:new Sr(-d-u,-h-u,o,o,this),lb:new Sr(-d-u,h-u,o,o,this),rt:new Sr(d-u,-h-u,o,o,this),rb:new Sr(d-u,h-u,o,o,this),rotate:new Sr(-g,-h-o*2-g,l,l,this)}}clone(){const{x:r,y:a,w:o,h:u,master:d}=this;return new Sr(r,a,o,u,d)}checkHit(r,a){let{angle:o,center:u,x:d,y:h,w:l,h:g,master:y}=this;const v=(y==null?void 0:y.center)??u,b=(y==null?void 0:y.angle)??o;y==null&&(d=d-v.x,h=h-v.y);const e=r-v.x,n=a-v.y;let s=e,c=n;return b!==0&&(s=e*Math.cos(b)+n*Math.sin(b),c=n*Math.cos(b)-e*Math.sin(b)),!(s<d||s>d+l||c<h||c>h+g)}};let Lm=Sr;Lt(Lm,"CTRL_SIZE",16);var Jo,Gn;class JI{constructor(r){Lt(this,"rect",new Lm),Lt(this,"visible",!0),Lt(this,"zIndex",0),Lt(this,"opacity",1),Lt(this,"flip",null),Si(this,Jo,null),Si(this,Gn,null),Lt(this,"audioNode",null),Lt(this,"initReady",Promise.resolve()),this.name=r}render(r){const{rect:{center:a,angle:o}}=this;r.setTransform(this.flip==="horizontal"?-1:1,0,0,this.flip==="vertical"?-1:1,a.x,a.y),r.rotate((this.flip==null?1:-1)*o),r.globalAlpha=this.opacity}setAnimation(r,a){Ui(this,Jo,Object.entries(r).map(([o,u])=>{const d={from:0,to:100}[o]??Number(o.slice(0,-1));if(isNaN(d)||d>100||d<0)throw Error("keyFrame must between 0~100");return[d/100,u]})),Ui(this,Gn,Object.assign({},Me(this,Gn),{duration:a.duration*1e6,delay:(a.delay??0)*1e6,iterCount:a.iterCount??1/0}))}animate(r){if(Me(this,Jo)==null||Me(this,Gn)==null||r<Me(this,Gn).delay)return;const a=eB(r,Me(this,Jo),Me(this,Gn));for(const o in a)switch(o){case"opacity":this.opacity=a[o];break;case"x":case"y":case"w":case"h":case"angle":this.rect[o]=a[o];break}}}Jo=new WeakMap,Gn=new WeakMap;function eB(t,r,a){if(t/a.duration>=a.iterCount)return{};const o=t%a.duration,u=t===a.duration?1:o/a.duration,d=r.findIndex(e=>e[0]>=u);if(d===-1)return{};const h=r[d-1],l=r[d],g=l[1];if(h==null)return g;const y=h[1],v={},b=(u-h[0])/(l[0]-h[0]);for(const e in g){const n=e;y[n]!=null&&(v[n]=(g[n]-y[n])*b+y[n])}return v}function lc(t){return document.createElement(t)}var qi;let tB=class{constructor(){sr(this,qi,new Map),ro(this,"on",(r,a)=>{const o=se(this,qi).get(r)??new Set;return o.add(a),se(this,qi).has(r)||se(this,qi).set(r,o),()=>{o.delete(a),o.size===0&&se(this,qi).delete(r)}}),ro(this,"emit",(r,...a)=>{const o=se(this,qi).get(r);o!=null&&o.forEach(u=>u(...a))})}destroy(){se(this,qi).clear()}};qi=new WeakMap;var nd=(t=>(t.ActiveSpriteChange="activeSpriteChange",t.AddSprite="addSprite",t))(nd||{}),wr,es,Ta,rp,uw;class rB{constructor(){sr(this,rp),sr(this,wr,[]),sr(this,es,null),sr(this,Ta,new tB),ro(this,"audioCtx",new AudioContext),ro(this,"audioMSDest",this.audioCtx.createMediaStreamDestination()),ro(this,"on",se(this,Ta).on),sc(this,rp,uw).call(this)}get activeSprite(){return se(this,es)}set activeSprite(r){r!==se(this,es)&&(ri(this,es,r),se(this,Ta).emit("activeSpriteChange",r))}async addSprite(r){var a;await r.initReady,se(this,wr).push(r),ri(this,wr,se(this,wr).sort((o,u)=>o.zIndex-u.zIndex)),(a=r.audioNode)==null||a.connect(this.audioMSDest),se(this,Ta).emit("addSprite",r)}sortSprite(){ri(this,wr,se(this,wr).sort((r,a)=>r.zIndex-a.zIndex))}removeSprite(r){ri(this,wr,se(this,wr).filter(a=>a!==r)),r.destroy()}getSprites(){return[...se(this,wr)]}destroy(){se(this,Ta).destroy(),se(this,wr).forEach(r=>r.destroy()),ri(this,wr,[]),this.audioMSDest.disconnect(),this.audioCtx.close().catch(console.error)}}wr=new WeakMap,es=new WeakMap,Ta=new WeakMap,rp=new WeakSet,uw=function(){const t=this.audioCtx.createOscillator(),r=this.audioCtx.createPeriodicWave(new Float32Array([0,0]),new Float32Array([0,0]),{disableNormalization:!0});t.setPeriodicWave(r),t.connect(this.audioMSDest),t.start()};function iB(t,r,a){const o={w:r.clientWidth/r.width,h:r.clientHeight/r.height},u=new ResizeObserver(()=>{o.w=r.clientWidth/r.width,o.h=r.clientHeight/r.height,a.activeSprite!=null&&vf(a.activeSprite,d,h,o)});u.observe(r);const{rectEl:d,ctrlsEl:h}=nB(t),l=a.on(nd.ActiveSpriteChange,e=>{if(e==null){d.style.display="none";return}vf(e,d,h,o),d.style.display=""});let g=!1;const y=e=>{e.button===0&&(g=!0)},v=()=>{g=!1},b=()=>{!g||a.activeSprite==null||vf(a.activeSprite,d,h,o)};return r.addEventListener("mousedown",y),window.addEventListener("mouseup",v),window.addEventListener("mousemove",b),()=>{u.disconnect(),l(),d.remove(),r.removeEventListener("mousedown",y),window.removeEventListener("mouseup",v),window.removeEventListener("mousemove",b)}}function nB(t){const r=lc("div");r.style.cssText=`
    position: absolute;
    pointer-events: none;
    border: 1px solid #eee;
    box-sizing: border-box;
    display: none;
  `;const a=Object.fromEntries(ZI.map(o=>{const u=lc("div");return u.style.cssText=`
      position: absolute;
      border: 1px solid #3ee;
      box-sizing: border-box;
      border-radius: 50%;
      background-color: #fff;
    `,[o,u]}));return Object.values(a).forEach(o=>r.appendChild(o)),t.appendChild(r),{rectEl:r,ctrlsEl:a}}function vf(t,r,a,o){const{x:u,y:d,w:h,h:l,angle:g,ctrls:y}=t.rect;Object.assign(r.style,{left:`${u*o.w}px`,top:`${d*o.h}px`,width:`${h*o.w}px`,height:`${l*o.h}px`,rotate:`${g}rad`}),Object.entries(y).forEach(([v,{x:b,y:e,w:n,h:s}])=>{Object.assign(a[v].style,{left:"50%",top:"50%",width:`${n*o.w}px`,height:`${s*o.h}px`,transform:`translate(${b*o.w}px, ${e*o.h}px)`})})}function aB(t,r){const a={w:t.clientWidth/t.width,h:t.clientHeight/t.height},o=new ResizeObserver(()=>{a.w=t.clientWidth/t.width,a.h=t.clientHeight/t.height});o.observe(t);const u=d=>{if(d.button!==0)return;const{offsetX:h,offsetY:l}=d,g=h/a.w,y=l/a.h;if(r.activeSprite!=null){const[v]=Object.entries(r.activeSprite.rect.ctrls).find(([,b])=>b.checkHit(g,y))??[];if(v!=null)return}r.activeSprite=r.getSprites().reverse().find(v=>v.rect.checkHit(g,y))??null};return t.addEventListener("mousedown",u),()=>{o.disconnect(),t.removeEventListener("mousedown",u)}}function oB(t,r){const a={w:t.clientWidth/t.width,h:t.clientHeight/t.height},o=new ResizeObserver(()=>{a.w=t.clientWidth/t.width,a.h=t.clientHeight/t.height});o.observe(t);let u=0,d=0,h=null,l=null,g=null;const y=e=>{if(e.button!==0||r.activeSprite==null)return;g=r.activeSprite;const{offsetX:n,offsetY:s,clientX:c,clientY:f}=e;cB({rect:g.rect,offsetX:n,offsetY:s,clientX:c,clientY:f,cvsRatio:a,cvsEl:t})||(h=g.rect.clone(),l={xl:-h.w+10,xr:t.width-10,yt:-h.h+10,yb:t.height-10},u=c,d=f,window.addEventListener("mousemove",v),window.addEventListener("mouseup",b))},v=e=>{if(g==null||h==null||l==null)return;const{clientX:n,clientY:s}=e;let c=h.x+(n-u)/a.w,f=h.y+(s-d)/a.h;c=c<=l.xl?l.xl:c>=l.xr?l.xr:c,f=f<=l.yt?l.yt:f>=l.yb?l.yb:f,g.rect.x=c,g.rect.y=f};t.addEventListener("mousedown",y);const b=()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",b)};return()=>{o.disconnect(),b(),t.removeEventListener("mousedown",y)}}function sB({sprRect:t,startX:r,startY:a,ctrlKey:o,cvsRatio:u}){const d=t.clone(),h=g=>{const{clientX:y,clientY:v}=g,b=(y-r)/u.w,e=(v-a)/u.h,n=o.length===1?lB:uB,{x:s,y:c,w:f,h:m}=d,p=Math.atan2(m,f),{incW:_,incH:S,incS:x,rotateAngle:w}=n({deltaX:b,deltaY:e,angle:t.angle,ctrlKey:o,diagonalAngle:p}),U=10;let A=f+_;A=A<U?U:A;let E=m+S;E=E<U?U:E;const T=x/2*Math.cos(w)+s+f/2,P=x/2*Math.sin(w)+c+m/2,z=T-A/2,R=P-E/2;t.x=z,t.y=R,t.w=A,t.h=E},l=()=>{window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",l)};window.addEventListener("mousemove",h),window.addEventListener("mouseup",l)}function lB({deltaX:t,deltaY:r,angle:a,ctrlKey:o}){let u=0,d=0,h=0,l=a;return o==="l"||o==="r"?(u=t*Math.cos(a)+r*Math.sin(a),d=u*(o==="l"?-1:1)):(o==="t"||o==="b")&&(l=a-Math.PI/2,u=t*Math.cos(l)+r*Math.sin(l),h=u*(o==="b"?-1:1)),{incW:d,incH:h,incS:u,rotateAngle:l}}function uB({deltaX:t,deltaY:r,angle:a,ctrlKey:o,diagonalAngle:u}){const d=(o==="lt"||o==="rb"?1:-1)*u+a,h=t*Math.cos(d)+r*Math.sin(d),l=o==="lt"||o==="lb"?-1:1,g=h*Math.cos(u)*l,y=h*Math.sin(u)*l;return{incW:g,incH:y,incS:h,rotateAngle:d}}function cB({rect:t,cvsRatio:r,offsetX:a,offsetY:o,clientX:u,clientY:d,cvsEl:h}){const l=a/r.w,g=o/r.h,[y]=Object.entries(t.ctrls).find(([,v])=>v.checkHit(l,g))??[];return y==null?!1:(y==="rotate"?dB(t,fB(t.center,r,h)):sB({sprRect:t,ctrlKey:y,startX:u,startY:d,cvsRatio:r}),!0)}function dB(t,r){const a=({clientX:u,clientY:d})=>{const h=u-r.x,l=d-r.y,g=Math.atan2(l,h)+Math.PI/2;t.angle=g},o=()=>{window.removeEventListener("mousemove",a),window.removeEventListener("mouseup",o)};window.addEventListener("mousemove",a),window.addEventListener("mouseup",o)}function fB(t,r,a){const o=t.x*r.w,u=t.y*r.h,{left:d,top:h}=a.getBoundingClientRect();return{x:o+d,y:u+h}}function hB(t){const r=lc("canvas");return r.style.cssText=`
    width: 100%;
    height: 100%;
  `,r.width=t.width,r.height=t.height,r}var Nt,Ya,Eu,Uu,ip,cw;let pB=class{constructor(r,a){sr(this,ip),sr(this,Nt,void 0),ro(this,"spriteManager"),sr(this,Ya,void 0),sr(this,Eu,!1),sr(this,Uu,[]),ri(this,Nt,hB(a.resolution));const o=se(this,Nt).getContext("2d",{alpha:!1});if(o==null)throw Error("canvas context is null");ri(this,Ya,o),r.appendChild(se(this,Nt)),Lm.CTRL_SIZE=14/(se(this,Nt).clientWidth/se(this,Nt).width),this.spriteManager=new rB,se(this,Uu).push(aB(se(this,Nt),this.spriteManager),mB(se(this,Nt),this.spriteManager),oB(se(this,Nt),this.spriteManager),iB(r,se(this,Nt),this.spriteManager),this.spriteManager.on(nd.AddSprite,d=>{const{rect:h}=d;h.x===0&&h.y===0&&(h.x=(se(this,Nt).width-h.w)/2,h.y=(se(this,Nt).height-h.h)/2)}));const u=()=>{se(this,Eu)||(se(this,Ya).fillStyle=a.bgColor,se(this,Ya).fillRect(0,0,a.resolution.width,a.resolution.height),sc(this,ip,cw).call(this),requestAnimationFrame(u))};u()}destroy(){ri(this,Eu,!0),se(this,Nt).remove(),se(this,Uu).forEach(r=>r()),this.spriteManager.destroy()}captureStream(){this.spriteManager.audioCtx.state==="suspended"&&(oi.info("AVCanvas.captureStream resume AudioContext"),this.spriteManager.audioCtx.resume().catch(oi.error));const r=new MediaStream;return se(this,Nt).captureStream().getTracks().concat(this.spriteManager.audioMSDest.stream.getTracks()).forEach(a=>{r.addTrack(a)}),oi.info("AVCanvas.captureStream, tracks:",r.getTracks().map(a=>a.kind)),r}};Nt=new WeakMap,Ya=new WeakMap,Eu=new WeakMap,Uu=new WeakMap,ip=new WeakSet,cw=function(){const t=se(this,Ya);this.spriteManager.getSprites().forEach(r=>r.render(t)),t.resetTransform()};function mB(t,r){const a={w:t.clientWidth/t.width,h:t.clientHeight/t.height},o=new ResizeObserver(()=>{a.w=t.clientWidth/t.width,a.h=t.clientHeight/t.height});o.observe(t);const u=t.style;let d=r.activeSprite;r.on(nd.ActiveSpriteChange,e=>{d=e,e==null&&(u.cursor="")});let h=!1;const l=({offsetX:e,offsetY:n})=>{h=!0;const s=e/a.w,c=n/a.h;(d==null?void 0:d.rect.checkHit(s,c))===!0&&u.cursor===""&&(u.cursor="move")},g=()=>{h=!1},y=["ns-resize","nesw-resize","ew-resize","nwse-resize","ns-resize","nesw-resize","ew-resize","nwse-resize"],v={t:0,rt:1,r:2,rb:3,b:4,lb:5,l:6,lt:7},b=e=>{if(d==null||h)return;const{offsetX:n,offsetY:s}=e,c=n/a.w,f=s/a.h,[m]=Object.entries(d.rect.ctrls).find(([,p])=>p.checkHit(c,f))??[];if(m!=null){if(m==="rotate"){u.cursor="crosshair";return}const p=d.rect.angle,_=p<0?p+2*Math.PI:p,S=(v[m]+Math.floor((_+Math.PI/8)/(Math.PI/4)))%8;u.cursor=y[S];return}if(d.rect.checkHit(c,f)){u.cursor="move";return}u.cursor=""};return t.addEventListener("mousemove",b),t.addEventListener("mousedown",l),window.addEventListener("mouseup",g),()=>{o.disconnect(),t.removeEventListener("mousemove",b),t.removeEventListener("mousedown",l),window.removeEventListener("mouseup",g)}}var yi,np,dw,ap,fw;let C_=class extends JI{constructor(r,a,o={}){super(r),sr(this,np),sr(this,ap),sr(this,yi,null),this.initReady=(a instanceof MediaStream?sc(this,np,dw).call(this,a,o):sc(this,ap,fw).call(this,a,o)).then(({videoEl:u,audioSource:d})=>{u.loop=!0,this.rect.w=u.videoWidth,this.rect.h=u.videoHeight,ri(this,yi,u),d!=null&&o.audioCtx!=null&&(this.audioNode=o.audioCtx.createGain(),d.connect(this.audioNode))})}render(r){if(se(this,yi)==null)return;super.render(r);const{w:a,h:o}=this.rect;r.drawImage(se(this,yi),-a/2,-o/2,a,o)}get volume(){var r;return((r=this.audioNode)==null?void 0:r.gain.value)??0}set volume(r){this.audioNode!=null&&(this.audioNode.gain.value=r)}destroy(){var r,a,o;(r=se(this,yi))==null||r.remove(),((a=se(this,yi))==null?void 0:a.src)!=null&&URL.revokeObjectURL(se(this,yi).src),ri(this,yi,null),(o=this.audioNode)==null||o.disconnect()}};yi=new WeakMap,np=new WeakSet,dw=async function(t,r){const a=new MediaStream;t.getAudioTracks().forEach(d=>{t.removeTrack(d),a.addTrack(d)});const o=await gB(t);await o.play();let u=null;return r.audioCtx!=null&&a.getAudioTracks().length>0&&(u=r.audioCtx.createMediaStreamSource(a)),{videoEl:o,audioSource:u}},ap=new WeakSet,fw=async function(t,r){if(!["video/mp4","video/webm"].includes(t.type))throw Error("Unsupport video format");const a=lc("video");a.src=URL.createObjectURL(t),await a.play();let o=null;return r.audioCtx!=null&&(o=r.audioCtx.createMediaElementSource(a)),{videoEl:a,audioSource:o}};async function gB(t){const r=document.createElement("video");let a;return r.srcObject=t,await new Promise((o,u)=>{let d=!1;r.addEventListener("loadeddata",()=>{d||(clearTimeout(a),o(r))}),a=window.setTimeout(()=>{d=!0,u(new Error("video load failed"))},2e3)})}var hw={};(function(t){var r=function(){var e=new Date,n=4,s=3,c=2,f=1,m=n,p={setLogLevel:function(_){_==this.debug?m=f:_==this.info?m=c:_==this.warn?m=s:(_==this.error,m=n)},debug:function(_,S){console.debug===void 0&&(console.debug=console.log),f>=m&&console.debug("["+r.getDurationString(new Date-e,1e3)+"]","["+_+"]",S)},log:function(_,S){this.debug(_.msg)},info:function(_,S){c>=m&&console.info("["+r.getDurationString(new Date-e,1e3)+"]","["+_+"]",S)},warn:function(_,S){s>=m&&console.warn("["+r.getDurationString(new Date-e,1e3)+"]","["+_+"]",S)},error:function(_,S){n>=m&&console.error("["+r.getDurationString(new Date-e,1e3)+"]","["+_+"]",S)}};return p}();r.getDurationString=function(e,n){var s;function c(x,w){for(var U=""+x,A=U.split(".");A[0].length<w;)A[0]="0"+A[0];return A.join(".")}e<0?(s=!0,e=-e):s=!1;var f=n||1,m=e/f,p=Math.floor(m/3600);m-=p*3600;var _=Math.floor(m/60);m-=_*60;var S=m*1e3;return m=Math.floor(m),S-=m*1e3,S=Math.floor(S),(s?"-":"")+p+":"+c(_,2)+":"+c(m,2)+"."+c(S,3)},r.printRanges=function(e){var n=e.length;if(n>0){for(var s="",c=0;c<n;c++)c>0&&(s+=","),s+="["+r.getDurationString(e.start(c))+","+r.getDurationString(e.end(c))+"]";return s}else return"(empty)"},t.Log=r;var a=function(e){if(e instanceof ArrayBuffer)this.buffer=e,this.dataview=new DataView(e);else throw"Needs an array buffer";this.position=0};a.prototype.getPosition=function(){return this.position},a.prototype.getEndPosition=function(){return this.buffer.byteLength},a.prototype.getLength=function(){return this.buffer.byteLength},a.prototype.seek=function(e){var n=Math.max(0,Math.min(this.buffer.byteLength,e));return this.position=isNaN(n)||!isFinite(n)?0:n,!0},a.prototype.isEos=function(){return this.getPosition()>=this.getEndPosition()},a.prototype.readAnyInt=function(e,n){var s=0;if(this.position+e<=this.buffer.byteLength){switch(e){case 1:n?s=this.dataview.getInt8(this.position):s=this.dataview.getUint8(this.position);break;case 2:n?s=this.dataview.getInt16(this.position):s=this.dataview.getUint16(this.position);break;case 3:if(n)throw"No method for reading signed 24 bits values";s=this.dataview.getUint8(this.position)<<16,s|=this.dataview.getUint8(this.position+1)<<8,s|=this.dataview.getUint8(this.position+2);break;case 4:n?s=this.dataview.getInt32(this.position):s=this.dataview.getUint32(this.position);break;case 8:if(n)throw"No method for reading signed 64 bits values";s=this.dataview.getUint32(this.position)<<32,s|=this.dataview.getUint32(this.position+4);break;default:throw"readInt method not implemented for size: "+e}return this.position+=e,s}else throw"Not enough bytes in buffer"},a.prototype.readUint8=function(){return this.readAnyInt(1,!1)},a.prototype.readUint16=function(){return this.readAnyInt(2,!1)},a.prototype.readUint24=function(){return this.readAnyInt(3,!1)},a.prototype.readUint32=function(){return this.readAnyInt(4,!1)},a.prototype.readUint64=function(){return this.readAnyInt(8,!1)},a.prototype.readString=function(e){if(this.position+e<=this.buffer.byteLength){for(var n="",s=0;s<e;s++)n+=String.fromCharCode(this.readUint8());return n}else throw"Not enough bytes in buffer"},a.prototype.readCString=function(){for(var e=[];;){var n=this.readUint8();if(n!==0)e.push(n);else break}return String.fromCharCode.apply(null,e)},a.prototype.readInt8=function(){return this.readAnyInt(1,!0)},a.prototype.readInt16=function(){return this.readAnyInt(2,!0)},a.prototype.readInt32=function(){return this.readAnyInt(4,!0)},a.prototype.readInt64=function(){return this.readAnyInt(8,!1)},a.prototype.readUint8Array=function(e){for(var n=new Uint8Array(e),s=0;s<e;s++)n[s]=this.readUint8();return n},a.prototype.readInt16Array=function(e){for(var n=new Int16Array(e),s=0;s<e;s++)n[s]=this.readInt16();return n},a.prototype.readUint16Array=function(e){for(var n=new Int16Array(e),s=0;s<e;s++)n[s]=this.readUint16();return n},a.prototype.readUint32Array=function(e){for(var n=new Uint32Array(e),s=0;s<e;s++)n[s]=this.readUint32();return n},a.prototype.readInt32Array=function(e){for(var n=new Int32Array(e),s=0;s<e;s++)n[s]=this.readInt32();return n},t.MP4BoxStream=a;var o=function(e,n,s){this._byteOffset=n||0,e instanceof ArrayBuffer?this.buffer=e:typeof e=="object"?(this.dataView=e,n&&(this._byteOffset+=n)):this.buffer=new ArrayBuffer(e||0),this.position=0,this.endianness=s??o.LITTLE_ENDIAN};o.prototype={},o.prototype.getPosition=function(){return this.position},o.prototype._realloc=function(e){if(this._dynamicSize){var n=this._byteOffset+this.position+e,s=this._buffer.byteLength;if(n<=s){n>this._byteLength&&(this._byteLength=n);return}for(s<1&&(s=1);n>s;)s*=2;var c=new ArrayBuffer(s),f=new Uint8Array(this._buffer),m=new Uint8Array(c,0,f.length);m.set(f),this.buffer=c,this._byteLength=n}},o.prototype._trimAlloc=function(){if(this._byteLength!=this._buffer.byteLength){var e=new ArrayBuffer(this._byteLength),n=new Uint8Array(e),s=new Uint8Array(this._buffer,0,n.length);n.set(s),this.buffer=e}},o.BIG_ENDIAN=!1,o.LITTLE_ENDIAN=!0,o.prototype._byteLength=0,Object.defineProperty(o.prototype,"byteLength",{get:function(){return this._byteLength-this._byteOffset}}),Object.defineProperty(o.prototype,"buffer",{get:function(){return this._trimAlloc(),this._buffer},set:function(e){this._buffer=e,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(o.prototype,"byteOffset",{get:function(){return this._byteOffset},set:function(e){this._byteOffset=e,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(o.prototype,"dataView",{get:function(){return this._dataView},set:function(e){this._byteOffset=e.byteOffset,this._buffer=e.buffer,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._byteOffset+e.byteLength}}),o.prototype.seek=function(e){var n=Math.max(0,Math.min(this.byteLength,e));this.position=isNaN(n)||!isFinite(n)?0:n},o.prototype.isEof=function(){return this.position>=this._byteLength},o.prototype.mapUint8Array=function(e){this._realloc(e*1);var n=new Uint8Array(this._buffer,this.byteOffset+this.position,e);return this.position+=e*1,n},o.prototype.readInt32Array=function(e,n){e=e??this.byteLength-this.position/4;var s=new Int32Array(e);return o.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,e*s.BYTES_PER_ELEMENT),o.arrayToNative(s,n??this.endianness),this.position+=s.byteLength,s},o.prototype.readInt16Array=function(e,n){e=e??this.byteLength-this.position/2;var s=new Int16Array(e);return o.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,e*s.BYTES_PER_ELEMENT),o.arrayToNative(s,n??this.endianness),this.position+=s.byteLength,s},o.prototype.readInt8Array=function(e){e=e??this.byteLength-this.position;var n=new Int8Array(e);return o.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,e*n.BYTES_PER_ELEMENT),this.position+=n.byteLength,n},o.prototype.readUint32Array=function(e,n){e=e??this.byteLength-this.position/4;var s=new Uint32Array(e);return o.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,e*s.BYTES_PER_ELEMENT),o.arrayToNative(s,n??this.endianness),this.position+=s.byteLength,s},o.prototype.readUint16Array=function(e,n){e=e??this.byteLength-this.position/2;var s=new Uint16Array(e);return o.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,e*s.BYTES_PER_ELEMENT),o.arrayToNative(s,n??this.endianness),this.position+=s.byteLength,s},o.prototype.readUint8Array=function(e){e=e??this.byteLength-this.position;var n=new Uint8Array(e);return o.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,e*n.BYTES_PER_ELEMENT),this.position+=n.byteLength,n},o.prototype.readFloat64Array=function(e,n){e=e??this.byteLength-this.position/8;var s=new Float64Array(e);return o.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,e*s.BYTES_PER_ELEMENT),o.arrayToNative(s,n??this.endianness),this.position+=s.byteLength,s},o.prototype.readFloat32Array=function(e,n){e=e??this.byteLength-this.position/4;var s=new Float32Array(e);return o.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,e*s.BYTES_PER_ELEMENT),o.arrayToNative(s,n??this.endianness),this.position+=s.byteLength,s},o.prototype.readInt32=function(e){var n=this._dataView.getInt32(this.position,e??this.endianness);return this.position+=4,n},o.prototype.readInt16=function(e){var n=this._dataView.getInt16(this.position,e??this.endianness);return this.position+=2,n},o.prototype.readInt8=function(){var e=this._dataView.getInt8(this.position);return this.position+=1,e},o.prototype.readUint32=function(e){var n=this._dataView.getUint32(this.position,e??this.endianness);return this.position+=4,n},o.prototype.readUint16=function(e){var n=this._dataView.getUint16(this.position,e??this.endianness);return this.position+=2,n},o.prototype.readUint8=function(){var e=this._dataView.getUint8(this.position);return this.position+=1,e},o.prototype.readFloat32=function(e){var n=this._dataView.getFloat32(this.position,e??this.endianness);return this.position+=4,n},o.prototype.readFloat64=function(e){var n=this._dataView.getFloat64(this.position,e??this.endianness);return this.position+=8,n},o.endianness=new Int8Array(new Int16Array([1]).buffer)[0]>0,o.memcpy=function(e,n,s,c,f){var m=new Uint8Array(e,n,f),p=new Uint8Array(s,c,f);m.set(p)},o.arrayToNative=function(e,n){return n==this.endianness?e:this.flipArrayEndianness(e)},o.nativeToEndian=function(e,n){return this.endianness==n?e:this.flipArrayEndianness(e)},o.flipArrayEndianness=function(e){for(var n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),s=0;s<e.byteLength;s+=e.BYTES_PER_ELEMENT)for(var c=s+e.BYTES_PER_ELEMENT-1,f=s;c>f;c--,f++){var m=n[f];n[f]=n[c],n[c]=m}return e},o.prototype.failurePosition=0,String.fromCharCodeUint8=function(e){for(var n=[],s=0;s<e.length;s++)n[s]=e[s];return String.fromCharCode.apply(null,n)},o.prototype.readString=function(e,n){return n==null||n=="ASCII"?String.fromCharCodeUint8.apply(null,[this.mapUint8Array(e??this.byteLength-this.position)]):new TextDecoder(n).decode(this.mapUint8Array(e))},o.prototype.readCString=function(e){var n=this.byteLength-this.position,s=new Uint8Array(this._buffer,this._byteOffset+this.position),c=n;e!=null&&(c=Math.min(e,n));for(var f=0;f<c&&s[f]!==0;f++);var m=String.fromCharCodeUint8.apply(null,[this.mapUint8Array(f)]);return e!=null?this.position+=c-f:f!=n&&(this.position+=1),m};var u=Math.pow(2,32);o.prototype.readInt64=function(){return this.readInt32()*u+this.readUint32()},o.prototype.readUint64=function(){return this.readUint32()*u+this.readUint32()},o.prototype.readInt64=function(){return this.readUint32()*u+this.readUint32()},o.prototype.readUint24=function(){return(this.readUint8()<<16)+(this.readUint8()<<8)+this.readUint8()},t.DataStream=o,o.prototype.save=function(e){var n=new Blob([this.buffer]);if(window.URL&&URL.createObjectURL){var s=window.URL.createObjectURL(n),c=document.createElement("a");document.body.appendChild(c),c.setAttribute("href",s),c.setAttribute("download",e),c.setAttribute("target","_self"),c.click(),window.URL.revokeObjectURL(s)}else throw"DataStream.save: Can't create object URL."},o.prototype._dynamicSize=!0,Object.defineProperty(o.prototype,"dynamicSize",{get:function(){return this._dynamicSize},set:function(e){e||this._trimAlloc(),this._dynamicSize=e}}),o.prototype.shift=function(e){var n=new ArrayBuffer(this._byteLength-e),s=new Uint8Array(n),c=new Uint8Array(this._buffer,e,s.length);s.set(c),this.buffer=n,this.position-=e},o.prototype.writeInt32Array=function(e,n){if(this._realloc(e.length*4),e instanceof Int32Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapInt32Array(e.length,n);else for(var s=0;s<e.length;s++)this.writeInt32(e[s],n)},o.prototype.writeInt16Array=function(e,n){if(this._realloc(e.length*2),e instanceof Int16Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapInt16Array(e.length,n);else for(var s=0;s<e.length;s++)this.writeInt16(e[s],n)},o.prototype.writeInt8Array=function(e){if(this._realloc(e.length*1),e instanceof Int8Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapInt8Array(e.length);else for(var n=0;n<e.length;n++)this.writeInt8(e[n])},o.prototype.writeUint32Array=function(e,n){if(this._realloc(e.length*4),e instanceof Uint32Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapUint32Array(e.length,n);else for(var s=0;s<e.length;s++)this.writeUint32(e[s],n)},o.prototype.writeUint16Array=function(e,n){if(this._realloc(e.length*2),e instanceof Uint16Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapUint16Array(e.length,n);else for(var s=0;s<e.length;s++)this.writeUint16(e[s],n)},o.prototype.writeUint8Array=function(e){if(this._realloc(e.length*1),e instanceof Uint8Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapUint8Array(e.length);else for(var n=0;n<e.length;n++)this.writeUint8(e[n])},o.prototype.writeFloat64Array=function(e,n){if(this._realloc(e.length*8),e instanceof Float64Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapFloat64Array(e.length,n);else for(var s=0;s<e.length;s++)this.writeFloat64(e[s],n)},o.prototype.writeFloat32Array=function(e,n){if(this._realloc(e.length*4),e instanceof Float32Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapFloat32Array(e.length,n);else for(var s=0;s<e.length;s++)this.writeFloat32(e[s],n)},o.prototype.writeInt32=function(e,n){this._realloc(4),this._dataView.setInt32(this.position,e,n??this.endianness),this.position+=4},o.prototype.writeInt16=function(e,n){this._realloc(2),this._dataView.setInt16(this.position,e,n??this.endianness),this.position+=2},o.prototype.writeInt8=function(e){this._realloc(1),this._dataView.setInt8(this.position,e),this.position+=1},o.prototype.writeUint32=function(e,n){this._realloc(4),this._dataView.setUint32(this.position,e,n??this.endianness),this.position+=4},o.prototype.writeUint16=function(e,n){this._realloc(2),this._dataView.setUint16(this.position,e,n??this.endianness),this.position+=2},o.prototype.writeUint8=function(e){this._realloc(1),this._dataView.setUint8(this.position,e),this.position+=1},o.prototype.writeFloat32=function(e,n){this._realloc(4),this._dataView.setFloat32(this.position,e,n??this.endianness),this.position+=4},o.prototype.writeFloat64=function(e,n){this._realloc(8),this._dataView.setFloat64(this.position,e,n??this.endianness),this.position+=8},o.prototype.writeUCS2String=function(e,n,s){s==null&&(s=e.length);for(var c=0;c<e.length&&c<s;c++)this.writeUint16(e.charCodeAt(c),n);for(;c<s;c++)this.writeUint16(0)},o.prototype.writeString=function(e,n,s){var c=0;if(n==null||n=="ASCII")if(s!=null){var f=Math.min(e.length,s);for(c=0;c<f;c++)this.writeUint8(e.charCodeAt(c));for(;c<s;c++)this.writeUint8(0)}else for(c=0;c<e.length;c++)this.writeUint8(e.charCodeAt(c));else this.writeUint8Array(new TextEncoder(n).encode(e.substring(0,s)))},o.prototype.writeCString=function(e,n){var s=0;if(n!=null){var c=Math.min(e.length,n);for(s=0;s<c;s++)this.writeUint8(e.charCodeAt(s));for(;s<n;s++)this.writeUint8(0)}else{for(s=0;s<e.length;s++)this.writeUint8(e.charCodeAt(s));this.writeUint8(0)}},o.prototype.writeStruct=function(e,n){for(var s=0;s<e.length;s+=2){var c=e[s+1];this.writeType(c,n[e[s]],n)}},o.prototype.writeType=function(e,n,s){var c;if(typeof e=="function")return e(this,n);if(typeof e=="object"&&!(e instanceof Array))return e.set(this,n,s);var f=null,m="ASCII",p=this.position;switch(typeof e=="string"&&/:/.test(e)&&(c=e.split(":"),e=c[0],f=parseInt(c[1])),typeof e=="string"&&/,/.test(e)&&(c=e.split(","),e=c[0],m=parseInt(c[1])),e){case"uint8":this.writeUint8(n);break;case"int8":this.writeInt8(n);break;case"uint16":this.writeUint16(n,this.endianness);break;case"int16":this.writeInt16(n,this.endianness);break;case"uint32":this.writeUint32(n,this.endianness);break;case"int32":this.writeInt32(n,this.endianness);break;case"float32":this.writeFloat32(n,this.endianness);break;case"float64":this.writeFloat64(n,this.endianness);break;case"uint16be":this.writeUint16(n,o.BIG_ENDIAN);break;case"int16be":this.writeInt16(n,o.BIG_ENDIAN);break;case"uint32be":this.writeUint32(n,o.BIG_ENDIAN);break;case"int32be":this.writeInt32(n,o.BIG_ENDIAN);break;case"float32be":this.writeFloat32(n,o.BIG_ENDIAN);break;case"float64be":this.writeFloat64(n,o.BIG_ENDIAN);break;case"uint16le":this.writeUint16(n,o.LITTLE_ENDIAN);break;case"int16le":this.writeInt16(n,o.LITTLE_ENDIAN);break;case"uint32le":this.writeUint32(n,o.LITTLE_ENDIAN);break;case"int32le":this.writeInt32(n,o.LITTLE_ENDIAN);break;case"float32le":this.writeFloat32(n,o.LITTLE_ENDIAN);break;case"float64le":this.writeFloat64(n,o.LITTLE_ENDIAN);break;case"cstring":this.writeCString(n,f);break;case"string":this.writeString(n,m,f);break;case"u16string":this.writeUCS2String(n,this.endianness,f);break;case"u16stringle":this.writeUCS2String(n,o.LITTLE_ENDIAN,f);break;case"u16stringbe":this.writeUCS2String(n,o.BIG_ENDIAN,f);break;default:if(e.length==3){for(var _=e[1],S=0;S<n.length;S++)this.writeType(_,n[S]);break}else{this.writeStruct(e,n);break}}f!=null&&(this.position=p,this._realloc(f),this.position=p+f)},o.prototype.writeUint64=function(e){var n=Math.floor(e/u);this.writeUint32(n),this.writeUint32(e&4294967295)},o.prototype.writeUint24=function(e){this.writeUint8((e&16711680)>>16),this.writeUint8((e&65280)>>8),this.writeUint8(e&255)},o.prototype.adjustUint32=function(e,n){var s=this.position;this.seek(e),this.writeUint32(n),this.seek(s)},o.prototype.mapInt32Array=function(e,n){this._realloc(e*4);var s=new Int32Array(this._buffer,this.byteOffset+this.position,e);return o.arrayToNative(s,n??this.endianness),this.position+=e*4,s},o.prototype.mapInt16Array=function(e,n){this._realloc(e*2);var s=new Int16Array(this._buffer,this.byteOffset+this.position,e);return o.arrayToNative(s,n??this.endianness),this.position+=e*2,s},o.prototype.mapInt8Array=function(e){this._realloc(e*1);var n=new Int8Array(this._buffer,this.byteOffset+this.position,e);return this.position+=e*1,n},o.prototype.mapUint32Array=function(e,n){this._realloc(e*4);var s=new Uint32Array(this._buffer,this.byteOffset+this.position,e);return o.arrayToNative(s,n??this.endianness),this.position+=e*4,s},o.prototype.mapUint16Array=function(e,n){this._realloc(e*2);var s=new Uint16Array(this._buffer,this.byteOffset+this.position,e);return o.arrayToNative(s,n??this.endianness),this.position+=e*2,s},o.prototype.mapFloat64Array=function(e,n){this._realloc(e*8);var s=new Float64Array(this._buffer,this.byteOffset+this.position,e);return o.arrayToNative(s,n??this.endianness),this.position+=e*8,s},o.prototype.mapFloat32Array=function(e,n){this._realloc(e*4);var s=new Float32Array(this._buffer,this.byteOffset+this.position,e);return o.arrayToNative(s,n??this.endianness),this.position+=e*4,s};var d=function(e){this.buffers=[],this.bufferIndex=-1,e&&(this.insertBuffer(e),this.bufferIndex=0)};d.prototype=new o(new ArrayBuffer,0,o.BIG_ENDIAN),d.prototype.initialized=function(){var e;return this.bufferIndex>-1?!0:this.buffers.length>0?(e=this.buffers[0],e.fileStart===0?(this.buffer=e,this.bufferIndex=0,r.debug("MultiBufferStream","Stream ready for parsing"),!0):(r.warn("MultiBufferStream","The first buffer should have a fileStart of 0"),this.logBufferLevel(),!1)):(r.warn("MultiBufferStream","No buffer to start parsing from"),this.logBufferLevel(),!1)},ArrayBuffer.concat=function(e,n){r.debug("ArrayBuffer","Trying to create a new buffer of size: "+(e.byteLength+n.byteLength));var s=new Uint8Array(e.byteLength+n.byteLength);return s.set(new Uint8Array(e),0),s.set(new Uint8Array(n),e.byteLength),s.buffer},d.prototype.reduceBuffer=function(e,n,s){var c;return c=new Uint8Array(s),c.set(new Uint8Array(e,n,s)),c.buffer.fileStart=e.fileStart+n,c.buffer.usedBytes=0,c.buffer},d.prototype.insertBuffer=function(e){for(var n=!0,s=0;s<this.buffers.length;s++){var c=this.buffers[s];if(e.fileStart<=c.fileStart){if(e.fileStart===c.fileStart)if(e.byteLength>c.byteLength){this.buffers.splice(s,1),s--;continue}else r.warn("MultiBufferStream","Buffer (fileStart: "+e.fileStart+" - Length: "+e.byteLength+") already appended, ignoring");else e.fileStart+e.byteLength<=c.fileStart||(e=this.reduceBuffer(e,0,c.fileStart-e.fileStart)),r.debug("MultiBufferStream","Appending new buffer (fileStart: "+e.fileStart+" - Length: "+e.byteLength+")"),this.buffers.splice(s,0,e),s===0&&(this.buffer=e);n=!1;break}else if(e.fileStart<c.fileStart+c.byteLength){var f=c.fileStart+c.byteLength-e.fileStart,m=e.byteLength-f;if(m>0)e=this.reduceBuffer(e,f,m);else{n=!1;break}}}n&&(r.debug("MultiBufferStream","Appending new buffer (fileStart: "+e.fileStart+" - Length: "+e.byteLength+")"),this.buffers.push(e),s===0&&(this.buffer=e))},d.prototype.logBufferLevel=function(e){var n,s,c,f,m=[],p,_="";for(c=0,f=0,n=0;n<this.buffers.length;n++)s=this.buffers[n],n===0?(p={},m.push(p),p.start=s.fileStart,p.end=s.fileStart+s.byteLength,_+="["+p.start+"-"):p.end===s.fileStart?p.end=s.fileStart+s.byteLength:(p={},p.start=s.fileStart,_+=m[m.length-1].end-1+"], ["+p.start+"-",p.end=s.fileStart+s.byteLength,m.push(p)),c+=s.usedBytes,f+=s.byteLength;m.length>0&&(_+=p.end-1+"]");var S=e?r.info:r.debug;this.buffers.length===0?S("MultiBufferStream","No more buffer in memory"):S("MultiBufferStream",""+this.buffers.length+" stored buffer(s) ("+c+"/"+f+" bytes), continuous ranges: "+_)},d.prototype.cleanBuffers=function(){var e,n;for(e=0;e<this.buffers.length;e++)n=this.buffers[e],n.usedBytes===n.byteLength&&(r.debug("MultiBufferStream","Removing buffer #"+e),this.buffers.splice(e,1),e--)},d.prototype.mergeNextBuffer=function(){var e;if(this.bufferIndex+1<this.buffers.length)if(e=this.buffers[this.bufferIndex+1],e.fileStart===this.buffer.fileStart+this.buffer.byteLength){var n=this.buffer.byteLength,s=this.buffer.usedBytes,c=this.buffer.fileStart;return this.buffers[this.bufferIndex]=ArrayBuffer.concat(this.buffer,e),this.buffer=this.buffers[this.bufferIndex],this.buffers.splice(this.bufferIndex+1,1),this.buffer.usedBytes=s,this.buffer.fileStart=c,r.debug("ISOFile","Concatenating buffer for box parsing (length: "+n+"->"+this.buffer.byteLength+")"),!0}else return!1;else return!1},d.prototype.findPosition=function(e,n,s){var c,f=null,m=-1;for(e===!0?c=0:c=this.bufferIndex;c<this.buffers.length&&(f=this.buffers[c],f.fileStart<=n);){m=c,s&&(f.fileStart+f.byteLength<=n?f.usedBytes=f.byteLength:f.usedBytes=n-f.fileStart,this.logBufferLevel());c++}return m!==-1?(f=this.buffers[m],f.fileStart+f.byteLength>=n?(r.debug("MultiBufferStream","Found position in existing buffer #"+m),m):-1):-1},d.prototype.findEndContiguousBuf=function(e){var n,s,c,f=e!==void 0?e:this.bufferIndex;if(s=this.buffers[f],this.buffers.length>f+1)for(n=f+1;n<this.buffers.length&&(c=this.buffers[n],c.fileStart===s.fileStart+s.byteLength);n++)s=c;return s.fileStart+s.byteLength},d.prototype.getEndFilePositionAfter=function(e){var n=this.findPosition(!0,e,!1);return n!==-1?this.findEndContiguousBuf(n):e},d.prototype.addUsedBytes=function(e){this.buffer.usedBytes+=e,this.logBufferLevel()},d.prototype.setAllUsedBytes=function(){this.buffer.usedBytes=this.buffer.byteLength,this.logBufferLevel()},d.prototype.seek=function(e,n,s){var c;return c=this.findPosition(n,e,s),c!==-1?(this.buffer=this.buffers[c],this.bufferIndex=c,this.position=e-this.buffer.fileStart,r.debug("MultiBufferStream","Repositioning parser at buffer position: "+this.position),!0):(r.debug("MultiBufferStream","Position "+e+" not found in buffered data"),!1)},d.prototype.getPosition=function(){if(this.bufferIndex===-1||this.buffers[this.bufferIndex]===null)throw"Error accessing position in the MultiBufferStream";return this.buffers[this.bufferIndex].fileStart+this.position},d.prototype.getLength=function(){return this.byteLength},d.prototype.getEndPosition=function(){if(this.bufferIndex===-1||this.buffers[this.bufferIndex]===null)throw"Error accessing position in the MultiBufferStream";return this.buffers[this.bufferIndex].fileStart+this.byteLength},t.MultiBufferStream=d;var h=function(){var e=3,n=4,s=5,c=6,f=[];f[e]="ES_Descriptor",f[n]="DecoderConfigDescriptor",f[s]="DecoderSpecificInfo",f[c]="SLConfigDescriptor",this.getDescriptorName=function(_){return f[_]};var m=this,p={};return this.parseOneDescriptor=function(_){var S=0,x,w,U;for(x=_.readUint8(),U=_.readUint8();U&128;)S=(U&127)<<7,U=_.readUint8();return S+=U&127,r.debug("MPEG4DescriptorParser","Found "+(f[x]||"Descriptor "+x)+", size "+S+" at position "+_.getPosition()),f[x]?w=new p[f[x]](S):w=new p.Descriptor(S),w.parse(_),w},p.Descriptor=function(_,S){this.tag=_,this.size=S,this.descs=[]},p.Descriptor.prototype.parse=function(_){this.data=_.readUint8Array(this.size)},p.Descriptor.prototype.findDescriptor=function(_){for(var S=0;S<this.descs.length;S++)if(this.descs[S].tag==_)return this.descs[S];return null},p.Descriptor.prototype.parseRemainingDescriptors=function(_){for(var S=_.position;_.position<S+this.size;){var x=m.parseOneDescriptor(_);this.descs.push(x)}},p.ES_Descriptor=function(_){p.Descriptor.call(this,e,_)},p.ES_Descriptor.prototype=new p.Descriptor,p.ES_Descriptor.prototype.parse=function(_){if(this.ES_ID=_.readUint16(),this.flags=_.readUint8(),this.size-=3,this.flags&128?(this.dependsOn_ES_ID=_.readUint16(),this.size-=2):this.dependsOn_ES_ID=0,this.flags&64){var S=_.readUint8();this.URL=_.readString(S),this.size-=S+1}else this.URL="";this.flags&32?(this.OCR_ES_ID=_.readUint16(),this.size-=2):this.OCR_ES_ID=0,this.parseRemainingDescriptors(_)},p.ES_Descriptor.prototype.getOTI=function(_){var S=this.findDescriptor(n);return S?S.oti:0},p.ES_Descriptor.prototype.getAudioConfig=function(_){var S=this.findDescriptor(n);if(!S)return null;var x=S.findDescriptor(s);if(x&&x.data){var w=(x.data[0]&248)>>3;return w===31&&x.data.length>=2&&(w=32+((x.data[0]&7)<<3)+((x.data[1]&224)>>5)),w}else return null},p.DecoderConfigDescriptor=function(_){p.Descriptor.call(this,n,_)},p.DecoderConfigDescriptor.prototype=new p.Descriptor,p.DecoderConfigDescriptor.prototype.parse=function(_){this.oti=_.readUint8(),this.streamType=_.readUint8(),this.bufferSize=_.readUint24(),this.maxBitrate=_.readUint32(),this.avgBitrate=_.readUint32(),this.size-=13,this.parseRemainingDescriptors(_)},p.DecoderSpecificInfo=function(_){p.Descriptor.call(this,s,_)},p.DecoderSpecificInfo.prototype=new p.Descriptor,p.SLConfigDescriptor=function(_){p.Descriptor.call(this,c,_)},p.SLConfigDescriptor.prototype=new p.Descriptor,this};t.MPEG4DescriptorParser=h;var l={ERR_INVALID_DATA:-1,ERR_NOT_ENOUGH_DATA:0,OK:1,BASIC_BOXES:["mdat","idat","free","skip","meco","strk"],FULL_BOXES:["hmhd","nmhd","iods","xml ","bxml","ipro","mere"],CONTAINER_BOXES:[["moov",["trak","pssh"]],["trak"],["edts"],["mdia"],["minf"],["dinf"],["stbl",["sgpd","sbgp"]],["mvex",["trex"]],["moof",["traf"]],["traf",["trun","sgpd","sbgp"]],["vttc"],["tref"],["iref"],["mfra",["tfra"]],["meco"],["hnti"],["hinf"],["strk"],["strd"],["sinf"],["rinf"],["schi"],["trgr"],["udta",["kind"]],["iprp",["ipma"]],["ipco"],["grpl"],["j2kH"],["etyp",["tyco"]]],boxCodes:[],fullBoxCodes:[],containerBoxCodes:[],sampleEntryCodes:{},sampleGroupEntryCodes:[],trackGroupTypes:[],UUIDBoxes:{},UUIDs:[],initialize:function(){l.FullBox.prototype=new l.Box,l.ContainerBox.prototype=new l.Box,l.SampleEntry.prototype=new l.Box,l.TrackGroupTypeBox.prototype=new l.FullBox,l.BASIC_BOXES.forEach(function(e){l.createBoxCtor(e)}),l.FULL_BOXES.forEach(function(e){l.createFullBoxCtor(e)}),l.CONTAINER_BOXES.forEach(function(e){l.createContainerBoxCtor(e[0],null,e[1])})},Box:function(e,n,s){this.type=e,this.size=n,this.uuid=s},FullBox:function(e,n,s){l.Box.call(this,e,n,s),this.flags=0,this.version=0},ContainerBox:function(e,n,s){l.Box.call(this,e,n,s),this.boxes=[]},SampleEntry:function(e,n,s,c){l.ContainerBox.call(this,e,n),this.hdr_size=s,this.start=c},SampleGroupEntry:function(e){this.grouping_type=e},TrackGroupTypeBox:function(e,n){l.FullBox.call(this,e,n)},createBoxCtor:function(e,n){l.boxCodes.push(e),l[e+"Box"]=function(s){l.Box.call(this,e,s)},l[e+"Box"].prototype=new l.Box,n&&(l[e+"Box"].prototype.parse=n)},createFullBoxCtor:function(e,n){l[e+"Box"]=function(s){l.FullBox.call(this,e,s)},l[e+"Box"].prototype=new l.FullBox,l[e+"Box"].prototype.parse=function(s){this.parseFullHeader(s),n&&n.call(this,s)}},addSubBoxArrays:function(e){if(e){this.subBoxNames=e;for(var n=e.length,s=0;s<n;s++)this[e[s]+"s"]=[]}},createContainerBoxCtor:function(e,n,s){l[e+"Box"]=function(c){l.ContainerBox.call(this,e,c),l.addSubBoxArrays.call(this,s)},l[e+"Box"].prototype=new l.ContainerBox,n&&(l[e+"Box"].prototype.parse=n)},createMediaSampleEntryCtor:function(e,n,s){l.sampleEntryCodes[e]=[],l[e+"SampleEntry"]=function(c,f){l.SampleEntry.call(this,c,f),l.addSubBoxArrays.call(this,s)},l[e+"SampleEntry"].prototype=new l.SampleEntry,n&&(l[e+"SampleEntry"].prototype.parse=n)},createSampleEntryCtor:function(e,n,s,c){l.sampleEntryCodes[e].push(n),l[n+"SampleEntry"]=function(f){l[e+"SampleEntry"].call(this,n,f),l.addSubBoxArrays.call(this,c)},l[n+"SampleEntry"].prototype=new l[e+"SampleEntry"],s&&(l[n+"SampleEntry"].prototype.parse=s)},createEncryptedSampleEntryCtor:function(e,n,s){l.createSampleEntryCtor.call(this,e,n,s,["sinf"])},createSampleGroupCtor:function(e,n){l[e+"SampleGroupEntry"]=function(s){l.SampleGroupEntry.call(this,e,s)},l[e+"SampleGroupEntry"].prototype=new l.SampleGroupEntry,n&&(l[e+"SampleGroupEntry"].prototype.parse=n)},createTrackGroupCtor:function(e,n){l[e+"TrackGroupTypeBox"]=function(s){l.TrackGroupTypeBox.call(this,e,s)},l[e+"TrackGroupTypeBox"].prototype=new l.TrackGroupTypeBox,n&&(l[e+"TrackGroupTypeBox"].prototype.parse=n)},createUUIDBox:function(e,n,s,c){l.UUIDs.push(e),l.UUIDBoxes[e]=function(f){n?l.FullBox.call(this,"uuid",f,e):s?l.ContainerBox.call(this,"uuid",f,e):l.Box.call(this,"uuid",f,e)},l.UUIDBoxes[e].prototype=n?new l.FullBox:s?new l.ContainerBox:new l.Box,c&&(n?l.UUIDBoxes[e].prototype.parse=function(f){this.parseFullHeader(f),c&&c.call(this,f)}:l.UUIDBoxes[e].prototype.parse=c)}};l.initialize(),l.TKHD_FLAG_ENABLED=1,l.TKHD_FLAG_IN_MOVIE=2,l.TKHD_FLAG_IN_PREVIEW=4,l.TFHD_FLAG_BASE_DATA_OFFSET=1,l.TFHD_FLAG_SAMPLE_DESC=2,l.TFHD_FLAG_SAMPLE_DUR=8,l.TFHD_FLAG_SAMPLE_SIZE=16,l.TFHD_FLAG_SAMPLE_FLAGS=32,l.TFHD_FLAG_DUR_EMPTY=65536,l.TFHD_FLAG_DEFAULT_BASE_IS_MOOF=131072,l.TRUN_FLAGS_DATA_OFFSET=1,l.TRUN_FLAGS_FIRST_FLAG=4,l.TRUN_FLAGS_DURATION=256,l.TRUN_FLAGS_SIZE=512,l.TRUN_FLAGS_FLAGS=1024,l.TRUN_FLAGS_CTS_OFFSET=2048,l.Box.prototype.add=function(e){return this.addBox(new l[e+"Box"])},l.Box.prototype.addBox=function(e){return this.boxes.push(e),this[e.type+"s"]?this[e.type+"s"].push(e):this[e.type]=e,e},l.Box.prototype.set=function(e,n){return this[e]=n,this},l.Box.prototype.addEntry=function(e,n){var s=n||"entries";return this[s]||(this[s]=[]),this[s].push(e),this},t.BoxParser=l,l.parseUUID=function(e){return l.parseHex16(e)},l.parseHex16=function(e){for(var n="",s=0;s<16;s++){var c=e.readUint8().toString(16);n+=c.length===1?"0"+c:c}return n},l.parseOneBox=function(e,n,s){var c,f=e.getPosition(),m=0,p,_;if(e.getEndPosition()-f<8)return r.debug("BoxParser","Not enough data in stream to parse the type and size of the box"),{code:l.ERR_NOT_ENOUGH_DATA};if(s&&s<8)return r.debug("BoxParser","Not enough bytes left in the parent box to parse a new box"),{code:l.ERR_NOT_ENOUGH_DATA};var S=e.readUint32(),x=e.readString(4),w=x;if(r.debug("BoxParser","Found box of type '"+x+"' and size "+S+" at position "+f),m=8,x=="uuid"){if(e.getEndPosition()-e.getPosition()<16||s-m<16)return e.seek(f),r.debug("BoxParser","Not enough bytes left in the parent box to parse a UUID box"),{code:l.ERR_NOT_ENOUGH_DATA};_=l.parseUUID(e),m+=16,w=_}if(S==1){if(e.getEndPosition()-e.getPosition()<8||s&&s-m<8)return e.seek(f),r.warn("BoxParser",'Not enough data in stream to parse the extended size of the "'+x+'" box'),{code:l.ERR_NOT_ENOUGH_DATA};S=e.readUint64(),m+=8}else if(S===0){if(s)S=s;else if(x!=="mdat")return r.error("BoxParser","Unlimited box size not supported for type: '"+x+"'"),c=new l.Box(x,S),{code:l.OK,box:c,size:c.size}}return S!==0&&S<m?(r.error("BoxParser","Box of type "+x+" has an invalid size "+S+" (too small to be a box)"),{code:l.ERR_NOT_ENOUGH_DATA,type:x,size:S,hdr_size:m,start:f}):S!==0&&s&&S>s?(r.error("BoxParser","Box of type '"+x+"' has a size "+S+" greater than its container size "+s),{code:l.ERR_NOT_ENOUGH_DATA,type:x,size:S,hdr_size:m,start:f}):S!==0&&f+S>e.getEndPosition()?(e.seek(f),r.info("BoxParser","Not enough data in stream to parse the entire '"+x+"' box"),{code:l.ERR_NOT_ENOUGH_DATA,type:x,size:S,hdr_size:m,start:f}):n?{code:l.OK,type:x,size:S,hdr_size:m,start:f}:(l[x+"Box"]?c=new l[x+"Box"](S):x!=="uuid"?(r.warn("BoxParser","Unknown box type: '"+x+"'"),c=new l.Box(x,S),c.has_unparsed_data=!0):l.UUIDBoxes[_]?c=new l.UUIDBoxes[_](S):(r.warn("BoxParser","Unknown uuid type: '"+_+"'"),c=new l.Box(x,S),c.uuid=_,c.has_unparsed_data=!0),c.hdr_size=m,c.start=f,c.write===l.Box.prototype.write&&c.type!=="mdat"&&(r.info("BoxParser","'"+w+"' box writing not yet implemented, keeping unparsed data in memory for later write"),c.parseDataAndRewind(e)),c.parse(e),p=e.getPosition()-(c.start+c.size),p<0?(r.warn("BoxParser","Parsing of box '"+w+"' did not read the entire indicated box data size (missing "+-p+" bytes), seeking forward"),e.seek(c.start+c.size)):p>0&&(r.error("BoxParser","Parsing of box '"+w+"' read "+p+" more bytes than the indicated box data size, seeking backwards"),c.size!==0&&e.seek(c.start+c.size)),{code:l.OK,box:c,size:c.size})},l.Box.prototype.parse=function(e){this.type!="mdat"?this.data=e.readUint8Array(this.size-this.hdr_size):this.size===0?e.seek(e.getEndPosition()):e.seek(this.start+this.size)},l.Box.prototype.parseDataAndRewind=function(e){this.data=e.readUint8Array(this.size-this.hdr_size),e.position-=this.size-this.hdr_size},l.FullBox.prototype.parseDataAndRewind=function(e){this.parseFullHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size),this.hdr_size-=4,e.position-=this.size-this.hdr_size},l.FullBox.prototype.parseFullHeader=function(e){this.version=e.readUint8(),this.flags=e.readUint24(),this.hdr_size+=4},l.FullBox.prototype.parse=function(e){this.parseFullHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size)},l.ContainerBox.prototype.parse=function(e){for(var n,s;e.getPosition()<this.start+this.size;)if(n=l.parseOneBox(e,!1,this.size-(e.getPosition()-this.start)),n.code===l.OK)if(s=n.box,this.boxes.push(s),this.subBoxNames&&this.subBoxNames.indexOf(s.type)!=-1)this[this.subBoxNames[this.subBoxNames.indexOf(s.type)]+"s"].push(s);else{var c=s.type!=="uuid"?s.type:s.uuid;this[c]?r.warn("Box of type "+c+" already stored in field of this type"):this[c]=s}else return},l.Box.prototype.parseLanguage=function(e){this.language=e.readUint16();var n=[];n[0]=this.language>>10&31,n[1]=this.language>>5&31,n[2]=this.language&31,this.languageString=String.fromCharCode(n[0]+96,n[1]+96,n[2]+96)},l.SAMPLE_ENTRY_TYPE_VISUAL="Visual",l.SAMPLE_ENTRY_TYPE_AUDIO="Audio",l.SAMPLE_ENTRY_TYPE_HINT="Hint",l.SAMPLE_ENTRY_TYPE_METADATA="Metadata",l.SAMPLE_ENTRY_TYPE_SUBTITLE="Subtitle",l.SAMPLE_ENTRY_TYPE_SYSTEM="System",l.SAMPLE_ENTRY_TYPE_TEXT="Text",l.SampleEntry.prototype.parseHeader=function(e){e.readUint8Array(6),this.data_reference_index=e.readUint16(),this.hdr_size+=8},l.SampleEntry.prototype.parse=function(e){this.parseHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size)},l.SampleEntry.prototype.parseDataAndRewind=function(e){this.parseHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size),this.hdr_size-=8,e.position-=this.size-this.hdr_size},l.SampleEntry.prototype.parseFooter=function(e){l.ContainerBox.prototype.parse.call(this,e)},l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_HINT),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_METADATA),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SYSTEM),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_TEXT),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,function(e){var n;this.parseHeader(e),e.readUint16(),e.readUint16(),e.readUint32Array(3),this.width=e.readUint16(),this.height=e.readUint16(),this.horizresolution=e.readUint32(),this.vertresolution=e.readUint32(),e.readUint32(),this.frame_count=e.readUint16(),n=Math.min(31,e.readUint8()),this.compressorname=e.readString(n),n<31&&e.readString(31-n),this.depth=e.readUint16(),e.readUint16(),this.parseFooter(e)}),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,function(e){this.parseHeader(e),e.readUint32Array(2),this.channel_count=e.readUint16(),this.samplesize=e.readUint16(),e.readUint16(),e.readUint16(),this.samplerate=e.readUint32()/65536,this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"avc1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"avc2"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"avc3"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"avc4"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"av01"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"dav1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"hvc1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"hev1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"hvt1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"lhe1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"dvh1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"dvhe"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vvc1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vvi1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vvs1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vvcN"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vp08"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vp09"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"avs3"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"j2ki"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"mjp2"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"mjpg"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"uncv"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"mp4a"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"ac-3"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"ac-4"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"ec-3"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"Opus"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"mha1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"mha2"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"mhm1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"mhm2"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"encv"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"enca"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE,"encu"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SYSTEM,"encs"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_TEXT,"enct"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_METADATA,"encm"),l.createBoxCtor("a1lx",function(e){var n=e.readUint8()&1,s=((n&1)+1)*16;this.layer_size=[];for(var c=0;c<3;c++)s==16?this.layer_size[c]=e.readUint16():this.layer_size[c]=e.readUint32()}),l.createBoxCtor("a1op",function(e){this.op_index=e.readUint8()}),l.createFullBoxCtor("auxC",function(e){this.aux_type=e.readCString();var n=this.size-this.hdr_size-(this.aux_type.length+1);this.aux_subtype=e.readUint8Array(n)}),l.createBoxCtor("av1C",function(e){var n=e.readUint8();if(n>>7&!1){r.error("av1C marker problem");return}if(this.version=n&127,this.version!==1){r.error("av1C version "+this.version+" not supported");return}if(n=e.readUint8(),this.seq_profile=n>>5&7,this.seq_level_idx_0=n&31,n=e.readUint8(),this.seq_tier_0=n>>7&1,this.high_bitdepth=n>>6&1,this.twelve_bit=n>>5&1,this.monochrome=n>>4&1,this.chroma_subsampling_x=n>>3&1,this.chroma_subsampling_y=n>>2&1,this.chroma_sample_position=n&3,n=e.readUint8(),this.reserved_1=n>>5&7,this.reserved_1!==0){r.error("av1C reserved_1 parsing problem");return}if(this.initial_presentation_delay_present=n>>4&1,this.initial_presentation_delay_present===1)this.initial_presentation_delay_minus_one=n&15;else if(this.reserved_2=n&15,this.reserved_2!==0){r.error("av1C reserved_2 parsing problem");return}var s=this.size-this.hdr_size-4;this.configOBUs=e.readUint8Array(s)}),l.createBoxCtor("avcC",function(e){var n,s;for(this.configurationVersion=e.readUint8(),this.AVCProfileIndication=e.readUint8(),this.profile_compatibility=e.readUint8(),this.AVCLevelIndication=e.readUint8(),this.lengthSizeMinusOne=e.readUint8()&3,this.nb_SPS_nalus=e.readUint8()&31,s=this.size-this.hdr_size-6,this.SPS=[],n=0;n<this.nb_SPS_nalus;n++)this.SPS[n]={},this.SPS[n].length=e.readUint16(),this.SPS[n].nalu=e.readUint8Array(this.SPS[n].length),s-=2+this.SPS[n].length;for(this.nb_PPS_nalus=e.readUint8(),s--,this.PPS=[],n=0;n<this.nb_PPS_nalus;n++)this.PPS[n]={},this.PPS[n].length=e.readUint16(),this.PPS[n].nalu=e.readUint8Array(this.PPS[n].length),s-=2+this.PPS[n].length;s>0&&(this.ext=e.readUint8Array(s))}),l.createBoxCtor("btrt",function(e){this.bufferSizeDB=e.readUint32(),this.maxBitrate=e.readUint32(),this.avgBitrate=e.readUint32()}),l.createFullBoxCtor("ccst",function(e){var n=e.readUint8();this.all_ref_pics_intra=(n&128)==128,this.intra_pred_used=(n&64)==64,this.max_ref_per_pic=(n&63)>>2,e.readUint24()}),l.createBoxCtor("cdef",function(e){var n;for(this.channel_count=e.readUint16(),this.channel_indexes=[],this.channel_types=[],this.channel_associations=[],n=0;n<this.channel_count;n++)this.channel_indexes.push(e.readUint16()),this.channel_types.push(e.readUint16()),this.channel_associations.push(e.readUint16())}),l.createBoxCtor("clap",function(e){this.cleanApertureWidthN=e.readUint32(),this.cleanApertureWidthD=e.readUint32(),this.cleanApertureHeightN=e.readUint32(),this.cleanApertureHeightD=e.readUint32(),this.horizOffN=e.readUint32(),this.horizOffD=e.readUint32(),this.vertOffN=e.readUint32(),this.vertOffD=e.readUint32()}),l.createBoxCtor("clli",function(e){this.max_content_light_level=e.readUint16(),this.max_pic_average_light_level=e.readUint16()}),l.createFullBoxCtor("cmex",function(e){this.flags&1&&(this.pos_x=e.readInt32()),this.flags&2&&(this.pos_y=e.readInt32()),this.flags&4&&(this.pos_z=e.readInt32()),this.flags&8&&(this.version==0?this.flags&16?(this.quat_x=e.readInt32(),this.quat_y=e.readInt32(),this.quat_z=e.readInt32()):(this.quat_x=e.readInt16(),this.quat_y=e.readInt16(),this.quat_z=e.readInt16()):this.version==1),this.flags&32&&(this.id=e.readUint32())}),l.createFullBoxCtor("cmin",function(e){this.focal_length_x=e.readInt32(),this.principal_point_x=e.readInt32(),this.principal_point_y=e.readInt32(),this.flags&1&&(this.focal_length_y=e.readInt32(),this.skew_factor=e.readInt32())}),l.createBoxCtor("cmpd",function(e){for(this.component_count=e.readUint16(),this.component_types=[],this.component_type_urls=[],i=0;i<this.component_count;i++){var n=e.readUint16();this.component_types.push(n),n>=32768&&this.component_type_urls.push(e.readCString())}}),l.createFullBoxCtor("co64",function(e){var n,s;if(n=e.readUint32(),this.chunk_offsets=[],this.version===0)for(s=0;s<n;s++)this.chunk_offsets.push(e.readUint64())}),l.createFullBoxCtor("CoLL",function(e){this.maxCLL=e.readUint16(),this.maxFALL=e.readUint16()}),l.createBoxCtor("colr",function(e){if(this.colour_type=e.readString(4),this.colour_type==="nclx"){this.colour_primaries=e.readUint16(),this.transfer_characteristics=e.readUint16(),this.matrix_coefficients=e.readUint16();var n=e.readUint8();this.full_range_flag=n>>7}else this.colour_type==="rICC"?this.ICC_profile=e.readUint8Array(this.size-4):this.colour_type==="prof"&&(this.ICC_profile=e.readUint8Array(this.size-4))}),l.createFullBoxCtor("cprt",function(e){this.parseLanguage(e),this.notice=e.readCString()}),l.createFullBoxCtor("cslg",function(e){this.version===0&&(this.compositionToDTSShift=e.readInt32(),this.leastDecodeToDisplayDelta=e.readInt32(),this.greatestDecodeToDisplayDelta=e.readInt32(),this.compositionStartTime=e.readInt32(),this.compositionEndTime=e.readInt32())}),l.createFullBoxCtor("ctts",function(e){var n,s;if(n=e.readUint32(),this.sample_counts=[],this.sample_offsets=[],this.version===0)for(s=0;s<n;s++){this.sample_counts.push(e.readUint32());var c=e.readInt32();c<0&&r.warn("BoxParser","ctts box uses negative values without using version 1"),this.sample_offsets.push(c)}else if(this.version==1)for(s=0;s<n;s++)this.sample_counts.push(e.readUint32()),this.sample_offsets.push(e.readInt32())}),l.createBoxCtor("dac3",function(e){var n=e.readUint8(),s=e.readUint8(),c=e.readUint8();this.fscod=n>>6,this.bsid=n>>1&31,this.bsmod=(n&1)<<2|s>>6&3,this.acmod=s>>3&7,this.lfeon=s>>2&1,this.bit_rate_code=s&3|c>>5&7}),l.createBoxCtor("dec3",function(e){var n=e.readUint16();this.data_rate=n>>3,this.num_ind_sub=n&7,this.ind_subs=[];for(var s=0;s<this.num_ind_sub+1;s++){var c={};this.ind_subs.push(c);var f=e.readUint8(),m=e.readUint8(),p=e.readUint8();c.fscod=f>>6,c.bsid=f>>1&31,c.bsmod=(f&1)<<4|m>>4&15,c.acmod=m>>1&7,c.lfeon=m&1,c.num_dep_sub=p>>1&15,c.num_dep_sub>0&&(c.chan_loc=(p&1)<<8|e.readUint8())}}),l.createFullBoxCtor("dfLa",function(e){var n=127,s=128,c=[],f=["STREAMINFO","PADDING","APPLICATION","SEEKTABLE","VORBIS_COMMENT","CUESHEET","PICTURE","RESERVED"];this.parseFullHeader(e);do{var m=e.readUint8(),p=Math.min(m&n,f.length-1);if(p?e.readUint8Array(e.readUint24()):(e.readUint8Array(13),this.samplerate=e.readUint32()>>12,e.readUint8Array(20)),c.push(f[p]),m&s)break}while(!0);this.numMetadataBlocks=c.length+" ("+c.join(", ")+")"}),l.createBoxCtor("dimm",function(e){this.bytessent=e.readUint64()}),l.createBoxCtor("dmax",function(e){this.time=e.readUint32()}),l.createBoxCtor("dmed",function(e){this.bytessent=e.readUint64()}),l.createBoxCtor("dOps",function(e){if(this.Version=e.readUint8(),this.OutputChannelCount=e.readUint8(),this.PreSkip=e.readUint16(),this.InputSampleRate=e.readUint32(),this.OutputGain=e.readInt16(),this.ChannelMappingFamily=e.readUint8(),this.ChannelMappingFamily!==0){this.StreamCount=e.readUint8(),this.CoupledCount=e.readUint8(),this.ChannelMapping=[];for(var n=0;n<this.OutputChannelCount;n++)this.ChannelMapping[n]=e.readUint8()}}),l.createFullBoxCtor("dref",function(e){var n,s;this.entries=[];for(var c=e.readUint32(),f=0;f<c;f++)if(n=l.parseOneBox(e,!1,this.size-(e.getPosition()-this.start)),n.code===l.OK)s=n.box,this.entries.push(s);else return}),l.createBoxCtor("drep",function(e){this.bytessent=e.readUint64()}),l.createFullBoxCtor("elng",function(e){this.extended_language=e.readString(this.size-this.hdr_size)}),l.createFullBoxCtor("elst",function(e){this.entries=[];for(var n=e.readUint32(),s=0;s<n;s++){var c={};this.entries.push(c),this.version===1?(c.segment_duration=e.readUint64(),c.media_time=e.readInt64()):(c.segment_duration=e.readUint32(),c.media_time=e.readInt32()),c.media_rate_integer=e.readInt16(),c.media_rate_fraction=e.readInt16()}}),l.createFullBoxCtor("emsg",function(e){this.version==1?(this.timescale=e.readUint32(),this.presentation_time=e.readUint64(),this.event_duration=e.readUint32(),this.id=e.readUint32(),this.scheme_id_uri=e.readCString(),this.value=e.readCString()):(this.scheme_id_uri=e.readCString(),this.value=e.readCString(),this.timescale=e.readUint32(),this.presentation_time_delta=e.readUint32(),this.event_duration=e.readUint32(),this.id=e.readUint32());var n=this.size-this.hdr_size-(4*4+(this.scheme_id_uri.length+1)+(this.value.length+1));this.version==1&&(n-=4),this.message_data=e.readUint8Array(n)}),l.createEntityToGroupCtor=function(e,n){l[e+"Box"]=function(s){l.FullBox.call(this,e,s)},l[e+"Box"].prototype=new l.FullBox,l[e+"Box"].prototype.parse=function(s){if(this.parseFullHeader(s),n)n.call(this,s);else for(this.group_id=s.readUint32(),this.num_entities_in_group=s.readUint32(),this.entity_ids=[],i=0;i<this.num_entities_in_group;i++){var c=s.readUint32();this.entity_ids.push(c)}}},l.createEntityToGroupCtor("aebr"),l.createEntityToGroupCtor("afbr"),l.createEntityToGroupCtor("albc"),l.createEntityToGroupCtor("altr"),l.createEntityToGroupCtor("brst"),l.createEntityToGroupCtor("dobr"),l.createEntityToGroupCtor("eqiv"),l.createEntityToGroupCtor("favc"),l.createEntityToGroupCtor("fobr"),l.createEntityToGroupCtor("iaug"),l.createEntityToGroupCtor("pano"),l.createEntityToGroupCtor("slid"),l.createEntityToGroupCtor("ster"),l.createEntityToGroupCtor("tsyn"),l.createEntityToGroupCtor("wbbr"),l.createEntityToGroupCtor("prgr"),l.createFullBoxCtor("esds",function(e){var n=e.readUint8Array(this.size-this.hdr_size);if(this.data=n,typeof h<"u"){var s=new h;this.esd=s.parseOneDescriptor(new o(n.buffer,0,o.BIG_ENDIAN))}}),l.createBoxCtor("fiel",function(e){this.fieldCount=e.readUint8(),this.fieldOrdering=e.readUint8()}),l.createBoxCtor("frma",function(e){this.data_format=e.readString(4)}),l.createBoxCtor("ftyp",function(e){var n=this.size-this.hdr_size;this.major_brand=e.readString(4),this.minor_version=e.readUint32(),n-=8,this.compatible_brands=[];for(var s=0;n>=4;)this.compatible_brands[s]=e.readString(4),n-=4,s++}),l.createFullBoxCtor("hdlr",function(e){this.version===0&&(e.readUint32(),this.handler=e.readString(4),e.readUint32Array(3),this.name=e.readString(this.size-this.hdr_size-20),this.name[this.name.length-1]==="\0"&&(this.name=this.name.slice(0,-1)))}),l.createBoxCtor("hvcC",function(e){var n,s,c,f;this.configurationVersion=e.readUint8(),f=e.readUint8(),this.general_profile_space=f>>6,this.general_tier_flag=(f&32)>>5,this.general_profile_idc=f&31,this.general_profile_compatibility=e.readUint32(),this.general_constraint_indicator=e.readUint8Array(6),this.general_level_idc=e.readUint8(),this.min_spatial_segmentation_idc=e.readUint16()&4095,this.parallelismType=e.readUint8()&3,this.chroma_format_idc=e.readUint8()&3,this.bit_depth_luma_minus8=e.readUint8()&7,this.bit_depth_chroma_minus8=e.readUint8()&7,this.avgFrameRate=e.readUint16(),f=e.readUint8(),this.constantFrameRate=f>>6,this.numTemporalLayers=(f&13)>>3,this.temporalIdNested=(f&4)>>2,this.lengthSizeMinusOne=f&3,this.nalu_arrays=[];var m=e.readUint8();for(n=0;n<m;n++){var p=[];this.nalu_arrays.push(p),f=e.readUint8(),p.completeness=(f&128)>>7,p.nalu_type=f&63;var _=e.readUint16();for(s=0;s<_;s++){var S={};p.push(S),c=e.readUint16(),S.data=e.readUint8Array(c)}}}),l.createFullBoxCtor("iinf",function(e){var n;this.version===0?this.entry_count=e.readUint16():this.entry_count=e.readUint32(),this.item_infos=[];for(var s=0;s<this.entry_count;s++)if(n=l.parseOneBox(e,!1,this.size-(e.getPosition()-this.start)),n.code===l.OK)n.box.type!=="infe"&&r.error("BoxParser","Expected 'infe' box, got "+n.box.type),this.item_infos[s]=n.box;else return}),l.createFullBoxCtor("iloc",function(e){var n;n=e.readUint8(),this.offset_size=n>>4&15,this.length_size=n&15,n=e.readUint8(),this.base_offset_size=n>>4&15,this.version===1||this.version===2?this.index_size=n&15:this.index_size=0,this.items=[];var s=0;if(this.version<2)s=e.readUint16();else if(this.version===2)s=e.readUint32();else throw"version of iloc box not supported";for(var c=0;c<s;c++){var f={};if(this.items.push(f),this.version<2)f.item_ID=e.readUint16();else if(this.version===2)f.item_ID=e.readUint16();else throw"version of iloc box not supported";switch(this.version===1||this.version===2?f.construction_method=e.readUint16()&15:f.construction_method=0,f.data_reference_index=e.readUint16(),this.base_offset_size){case 0:f.base_offset=0;break;case 4:f.base_offset=e.readUint32();break;case 8:f.base_offset=e.readUint64();break;default:throw"Error reading base offset size"}var m=e.readUint16();f.extents=[];for(var p=0;p<m;p++){var _={};if(f.extents.push(_),this.version===1||this.version===2)switch(this.index_size){case 0:_.extent_index=0;break;case 4:_.extent_index=e.readUint32();break;case 8:_.extent_index=e.readUint64();break;default:throw"Error reading extent index"}switch(this.offset_size){case 0:_.extent_offset=0;break;case 4:_.extent_offset=e.readUint32();break;case 8:_.extent_offset=e.readUint64();break;default:throw"Error reading extent index"}switch(this.length_size){case 0:_.extent_length=0;break;case 4:_.extent_length=e.readUint32();break;case 8:_.extent_length=e.readUint64();break;default:throw"Error reading extent index"}}}}),l.createBoxCtor("imir",function(e){var n=e.readUint8();this.reserved=n>>7,this.axis=n&1}),l.createFullBoxCtor("infe",function(e){if((this.version===0||this.version===1)&&(this.item_ID=e.readUint16(),this.item_protection_index=e.readUint16(),this.item_name=e.readCString(),this.content_type=e.readCString(),this.content_encoding=e.readCString()),this.version===1){this.extension_type=e.readString(4),r.warn("BoxParser","Cannot parse extension type"),e.seek(this.start+this.size);return}this.version>=2&&(this.version===2?this.item_ID=e.readUint16():this.version===3&&(this.item_ID=e.readUint32()),this.item_protection_index=e.readUint16(),this.item_type=e.readString(4),this.item_name=e.readCString(),this.item_type==="mime"?(this.content_type=e.readCString(),this.content_encoding=e.readCString()):this.item_type==="uri "&&(this.item_uri_type=e.readCString()))}),l.createFullBoxCtor("ipma",function(e){var n,s;for(entry_count=e.readUint32(),this.associations=[],n=0;n<entry_count;n++){var c={};this.associations.push(c),this.version<1?c.id=e.readUint16():c.id=e.readUint32();var f=e.readUint8();for(c.props=[],s=0;s<f;s++){var m=e.readUint8(),p={};c.props.push(p),p.essential=(m&128)>>7===1,this.flags&1?p.property_index=(m&127)<<8|e.readUint8():p.property_index=m&127}}}),l.createFullBoxCtor("iref",function(e){var n,s;for(this.references=[];e.getPosition()<this.start+this.size;)if(n=l.parseOneBox(e,!0,this.size-(e.getPosition()-this.start)),n.code===l.OK)this.version===0?s=new l.SingleItemTypeReferenceBox(n.type,n.size,n.hdr_size,n.start):s=new l.SingleItemTypeReferenceBoxLarge(n.type,n.size,n.hdr_size,n.start),s.write===l.Box.prototype.write&&s.type!=="mdat"&&(r.warn("BoxParser",s.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),s.parseDataAndRewind(e)),s.parse(e),this.references.push(s);else return}),l.createBoxCtor("irot",function(e){this.angle=e.readUint8()&3}),l.createFullBoxCtor("ispe",function(e){this.image_width=e.readUint32(),this.image_height=e.readUint32()}),l.createFullBoxCtor("kind",function(e){this.schemeURI=e.readCString(),this.value=e.readCString()}),l.createFullBoxCtor("leva",function(e){var n=e.readUint8();this.levels=[];for(var s=0;s<n;s++){var c={};this.levels[s]=c,c.track_ID=e.readUint32();var f=e.readUint8();switch(c.padding_flag=f>>7,c.assignment_type=f&127,c.assignment_type){case 0:c.grouping_type=e.readString(4);break;case 1:c.grouping_type=e.readString(4),c.grouping_type_parameter=e.readUint32();break;case 2:break;case 3:break;case 4:c.sub_track_id=e.readUint32();break;default:r.warn("BoxParser","Unknown leva assignement type")}}}),l.createBoxCtor("lsel",function(e){this.layer_id=e.readUint16()}),l.createBoxCtor("maxr",function(e){this.period=e.readUint32(),this.bytes=e.readUint32()}),l.createBoxCtor("mdcv",function(e){this.display_primaries=[],this.display_primaries[0]={},this.display_primaries[0].x=e.readUint16(),this.display_primaries[0].y=e.readUint16(),this.display_primaries[1]={},this.display_primaries[1].x=e.readUint16(),this.display_primaries[1].y=e.readUint16(),this.display_primaries[2]={},this.display_primaries[2].x=e.readUint16(),this.display_primaries[2].y=e.readUint16(),this.white_point={},this.white_point.x=e.readUint16(),this.white_point.y=e.readUint16(),this.max_display_mastering_luminance=e.readUint32(),this.min_display_mastering_luminance=e.readUint32()}),l.createFullBoxCtor("mdhd",function(e){this.version==1?(this.creation_time=e.readUint64(),this.modification_time=e.readUint64(),this.timescale=e.readUint32(),this.duration=e.readUint64()):(this.creation_time=e.readUint32(),this.modification_time=e.readUint32(),this.timescale=e.readUint32(),this.duration=e.readUint32()),this.parseLanguage(e),e.readUint16()}),l.createFullBoxCtor("mehd",function(e){this.flags&1&&(r.warn("BoxParser","mehd box incorrectly uses flags set to 1, converting version to 1"),this.version=1),this.version==1?this.fragment_duration=e.readUint64():this.fragment_duration=e.readUint32()}),l.createFullBoxCtor("meta",function(e){this.boxes=[],l.ContainerBox.prototype.parse.call(this,e)}),l.createFullBoxCtor("mfhd",function(e){this.sequence_number=e.readUint32()}),l.createFullBoxCtor("mfro",function(e){this._size=e.readUint32()}),l.createFullBoxCtor("mvhd",function(e){this.version==1?(this.creation_time=e.readUint64(),this.modification_time=e.readUint64(),this.timescale=e.readUint32(),this.duration=e.readUint64()):(this.creation_time=e.readUint32(),this.modification_time=e.readUint32(),this.timescale=e.readUint32(),this.duration=e.readUint32()),this.rate=e.readUint32(),this.volume=e.readUint16()>>8,e.readUint16(),e.readUint32Array(2),this.matrix=e.readUint32Array(9),e.readUint32Array(6),this.next_track_id=e.readUint32()}),l.createBoxCtor("npck",function(e){this.packetssent=e.readUint32()}),l.createBoxCtor("nump",function(e){this.packetssent=e.readUint64()}),l.createFullBoxCtor("padb",function(e){var n=e.readUint32();this.padbits=[];for(var s=0;s<Math.floor((n+1)/2);s++)this.padbits=e.readUint8()}),l.createBoxCtor("pasp",function(e){this.hSpacing=e.readUint32(),this.vSpacing=e.readUint32()}),l.createBoxCtor("payl",function(e){this.text=e.readString(this.size-this.hdr_size)}),l.createBoxCtor("payt",function(e){this.payloadID=e.readUint32();var n=e.readUint8();this.rtpmap_string=e.readString(n)}),l.createFullBoxCtor("pdin",function(e){var n=(this.size-this.hdr_size)/8;this.rate=[],this.initial_delay=[];for(var s=0;s<n;s++)this.rate[s]=e.readUint32(),this.initial_delay[s]=e.readUint32()}),l.createFullBoxCtor("pitm",function(e){this.version===0?this.item_id=e.readUint16():this.item_id=e.readUint32()}),l.createFullBoxCtor("pixi",function(e){var n;for(this.num_channels=e.readUint8(),this.bits_per_channels=[],n=0;n<this.num_channels;n++)this.bits_per_channels[n]=e.readUint8()}),l.createBoxCtor("pmax",function(e){this.bytes=e.readUint32()}),l.createFullBoxCtor("prdi",function(e){if(this.step_count=e.readUint16(),this.item_count=[],this.flags&2)for(var n=0;n<this.step_count;n++)this.item_count[n]=e.readUint16()}),l.createFullBoxCtor("prft",function(e){this.ref_track_id=e.readUint32(),this.ntp_timestamp=e.readUint64(),this.version===0?this.media_time=e.readUint32():this.media_time=e.readUint64()}),l.createFullBoxCtor("pssh",function(e){if(this.system_id=l.parseHex16(e),this.version>0){var n=e.readUint32();this.kid=[];for(var s=0;s<n;s++)this.kid[s]=l.parseHex16(e)}var c=e.readUint32();c>0&&(this.data=e.readUint8Array(c))}),l.createFullBoxCtor("clef",function(e){this.width=e.readUint32(),this.height=e.readUint32()}),l.createFullBoxCtor("enof",function(e){this.width=e.readUint32(),this.height=e.readUint32()}),l.createFullBoxCtor("prof",function(e){this.width=e.readUint32(),this.height=e.readUint32()}),l.createContainerBoxCtor("tapt",null,["clef","prof","enof"]),l.createBoxCtor("rtp ",function(e){this.descriptionformat=e.readString(4),this.sdptext=e.readString(this.size-this.hdr_size-4)}),l.createFullBoxCtor("saio",function(e){this.flags&1&&(this.aux_info_type=e.readUint32(),this.aux_info_type_parameter=e.readUint32());var n=e.readUint32();this.offset=[];for(var s=0;s<n;s++)this.version===0?this.offset[s]=e.readUint32():this.offset[s]=e.readUint64()}),l.createFullBoxCtor("saiz",function(e){this.flags&1&&(this.aux_info_type=e.readUint32(),this.aux_info_type_parameter=e.readUint32()),this.default_sample_info_size=e.readUint8();var n=e.readUint32();if(this.sample_info_size=[],this.default_sample_info_size===0)for(var s=0;s<n;s++)this.sample_info_size[s]=e.readUint8()}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_METADATA,"mett",function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.mime_format=e.readCString(),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_METADATA,"metx",function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.namespace=e.readCString(),this.schema_location=e.readCString(),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE,"sbtt",function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.mime_format=e.readCString(),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE,"stpp",function(e){this.parseHeader(e),this.namespace=e.readCString(),this.schema_location=e.readCString(),this.auxiliary_mime_types=e.readCString(),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE,"stxt",function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.mime_format=e.readCString(),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE,"tx3g",function(e){this.parseHeader(e),this.displayFlags=e.readUint32(),this.horizontal_justification=e.readInt8(),this.vertical_justification=e.readInt8(),this.bg_color_rgba=e.readUint8Array(4),this.box_record=e.readInt16Array(4),this.style_record=e.readUint8Array(12),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_METADATA,"wvtt",function(e){this.parseHeader(e),this.parseFooter(e)}),l.createSampleGroupCtor("alst",function(e){var n,s=e.readUint16();for(this.first_output_sample=e.readUint16(),this.sample_offset=[],n=0;n<s;n++)this.sample_offset[n]=e.readUint32();var c=this.description_length-4-4*s;for(this.num_output_samples=[],this.num_total_samples=[],n=0;n<c/4;n++)this.num_output_samples[n]=e.readUint16(),this.num_total_samples[n]=e.readUint16()}),l.createSampleGroupCtor("avll",function(e){this.layerNumber=e.readUint8(),this.accurateStatisticsFlag=e.readUint8(),this.avgBitRate=e.readUint16(),this.avgFrameRate=e.readUint16()}),l.createSampleGroupCtor("avss",function(e){this.subSequenceIdentifier=e.readUint16(),this.layerNumber=e.readUint8();var n=e.readUint8();this.durationFlag=n>>7,this.avgRateFlag=n>>6&1,this.durationFlag&&(this.duration=e.readUint32()),this.avgRateFlag&&(this.accurateStatisticsFlag=e.readUint8(),this.avgBitRate=e.readUint16(),this.avgFrameRate=e.readUint16()),this.dependency=[];for(var s=e.readUint8(),c=0;c<s;c++){var f={};this.dependency.push(f),f.subSeqDirectionFlag=e.readUint8(),f.layerNumber=e.readUint8(),f.subSequenceIdentifier=e.readUint16()}}),l.createSampleGroupCtor("dtrt",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("mvif",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("prol",function(e){this.roll_distance=e.readInt16()}),l.createSampleGroupCtor("rap ",function(e){var n=e.readUint8();this.num_leading_samples_known=n>>7,this.num_leading_samples=n&127}),l.createSampleGroupCtor("rash",function(e){if(this.operation_point_count=e.readUint16(),this.description_length!==2+(this.operation_point_count===1?2:this.operation_point_count*6)+9)r.warn("BoxParser","Mismatch in "+this.grouping_type+" sample group length"),this.data=e.readUint8Array(this.description_length-2);else{if(this.operation_point_count===1)this.target_rate_share=e.readUint16();else{this.target_rate_share=[],this.available_bitrate=[];for(var n=0;n<this.operation_point_count;n++)this.available_bitrate[n]=e.readUint32(),this.target_rate_share[n]=e.readUint16()}this.maximum_bitrate=e.readUint32(),this.minimum_bitrate=e.readUint32(),this.discard_priority=e.readUint8()}}),l.createSampleGroupCtor("roll",function(e){this.roll_distance=e.readInt16()}),l.SampleGroupEntry.prototype.parse=function(e){r.warn("BoxParser","Unknown Sample Group type: "+this.grouping_type),this.data=e.readUint8Array(this.description_length)},l.createSampleGroupCtor("scif",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("scnm",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("seig",function(e){this.reserved=e.readUint8();var n=e.readUint8();this.crypt_byte_block=n>>4,this.skip_byte_block=n&15,this.isProtected=e.readUint8(),this.Per_Sample_IV_Size=e.readUint8(),this.KID=l.parseHex16(e),this.constant_IV_size=0,this.constant_IV=0,this.isProtected===1&&this.Per_Sample_IV_Size===0&&(this.constant_IV_size=e.readUint8(),this.constant_IV=e.readUint8Array(this.constant_IV_size))}),l.createSampleGroupCtor("stsa",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("sync",function(e){var n=e.readUint8();this.NAL_unit_type=n&63}),l.createSampleGroupCtor("tele",function(e){var n=e.readUint8();this.level_independently_decodable=n>>7}),l.createSampleGroupCtor("tsas",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("tscl",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("vipr",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createFullBoxCtor("sbgp",function(e){this.grouping_type=e.readString(4),this.version===1?this.grouping_type_parameter=e.readUint32():this.grouping_type_parameter=0,this.entries=[];for(var n=e.readUint32(),s=0;s<n;s++){var c={};this.entries.push(c),c.sample_count=e.readInt32(),c.group_description_index=e.readInt32()}}),l.createFullBoxCtor("schm",function(e){this.scheme_type=e.readString(4),this.scheme_version=e.readUint32(),this.flags&1&&(this.scheme_uri=e.readString(this.size-this.hdr_size-8))}),l.createBoxCtor("sdp ",function(e){this.sdptext=e.readString(this.size-this.hdr_size)}),l.createFullBoxCtor("sdtp",function(e){var n,s=this.size-this.hdr_size;this.is_leading=[],this.sample_depends_on=[],this.sample_is_depended_on=[],this.sample_has_redundancy=[];for(var c=0;c<s;c++)n=e.readUint8(),this.is_leading[c]=n>>6,this.sample_depends_on[c]=n>>4&3,this.sample_is_depended_on[c]=n>>2&3,this.sample_has_redundancy[c]=n&3}),l.createFullBoxCtor("senc"),l.createFullBoxCtor("sgpd",function(e){this.grouping_type=e.readString(4),r.debug("BoxParser","Found Sample Groups of type "+this.grouping_type),this.version===1?this.default_length=e.readUint32():this.default_length=0,this.version>=2&&(this.default_group_description_index=e.readUint32()),this.entries=[];for(var n=e.readUint32(),s=0;s<n;s++){var c;l[this.grouping_type+"SampleGroupEntry"]?c=new l[this.grouping_type+"SampleGroupEntry"](this.grouping_type):c=new l.SampleGroupEntry(this.grouping_type),this.entries.push(c),this.version===1?this.default_length===0?c.description_length=e.readUint32():c.description_length=this.default_length:c.description_length=this.default_length,c.write===l.SampleGroupEntry.prototype.write&&(r.info("BoxParser","SampleGroup for type "+this.grouping_type+" writing not yet implemented, keeping unparsed data in memory for later write"),c.data=e.readUint8Array(c.description_length),e.position-=c.description_length),c.parse(e)}}),l.createFullBoxCtor("sidx",function(e){this.reference_ID=e.readUint32(),this.timescale=e.readUint32(),this.version===0?(this.earliest_presentation_time=e.readUint32(),this.first_offset=e.readUint32()):(this.earliest_presentation_time=e.readUint64(),this.first_offset=e.readUint64()),e.readUint16(),this.references=[];for(var n=e.readUint16(),s=0;s<n;s++){var c={};this.references.push(c);var f=e.readUint32();c.reference_type=f>>31&1,c.referenced_size=f&2147483647,c.subsegment_duration=e.readUint32(),f=e.readUint32(),c.starts_with_SAP=f>>31&1,c.SAP_type=f>>28&7,c.SAP_delta_time=f&268435455}}),l.SingleItemTypeReferenceBox=function(e,n,s,c){l.Box.call(this,e,n),this.hdr_size=s,this.start=c},l.SingleItemTypeReferenceBox.prototype=new l.Box,l.SingleItemTypeReferenceBox.prototype.parse=function(e){this.from_item_ID=e.readUint16();var n=e.readUint16();this.references=[];for(var s=0;s<n;s++)this.references[s]={},this.references[s].to_item_ID=e.readUint16()},l.SingleItemTypeReferenceBoxLarge=function(e,n,s,c){l.Box.call(this,e,n),this.hdr_size=s,this.start=c},l.SingleItemTypeReferenceBoxLarge.prototype=new l.Box,l.SingleItemTypeReferenceBoxLarge.prototype.parse=function(e){this.from_item_ID=e.readUint32();var n=e.readUint16();this.references=[];for(var s=0;s<n;s++)this.references[s]={},this.references[s].to_item_ID=e.readUint32()},l.createFullBoxCtor("SmDm",function(e){this.primaryRChromaticity_x=e.readUint16(),this.primaryRChromaticity_y=e.readUint16(),this.primaryGChromaticity_x=e.readUint16(),this.primaryGChromaticity_y=e.readUint16(),this.primaryBChromaticity_x=e.readUint16(),this.primaryBChromaticity_y=e.readUint16(),this.whitePointChromaticity_x=e.readUint16(),this.whitePointChromaticity_y=e.readUint16(),this.luminanceMax=e.readUint32(),this.luminanceMin=e.readUint32()}),l.createFullBoxCtor("smhd",function(e){this.balance=e.readUint16(),e.readUint16()}),l.createFullBoxCtor("ssix",function(e){this.subsegments=[];for(var n=e.readUint32(),s=0;s<n;s++){var c={};this.subsegments.push(c),c.ranges=[];for(var f=e.readUint32(),m=0;m<f;m++){var p={};c.ranges.push(p),p.level=e.readUint8(),p.range_size=e.readUint24()}}}),l.createFullBoxCtor("stco",function(e){var n;if(n=e.readUint32(),this.chunk_offsets=[],this.version===0)for(var s=0;s<n;s++)this.chunk_offsets.push(e.readUint32())}),l.createFullBoxCtor("stdp",function(e){var n=(this.size-this.hdr_size)/2;this.priority=[];for(var s=0;s<n;s++)this.priority[s]=e.readUint16()}),l.createFullBoxCtor("sthd"),l.createFullBoxCtor("stri",function(e){this.switch_group=e.readUint16(),this.alternate_group=e.readUint16(),this.sub_track_id=e.readUint32();var n=(this.size-this.hdr_size-8)/4;this.attribute_list=[];for(var s=0;s<n;s++)this.attribute_list[s]=e.readUint32()}),l.createFullBoxCtor("stsc",function(e){var n,s;if(n=e.readUint32(),this.first_chunk=[],this.samples_per_chunk=[],this.sample_description_index=[],this.version===0)for(s=0;s<n;s++)this.first_chunk.push(e.readUint32()),this.samples_per_chunk.push(e.readUint32()),this.sample_description_index.push(e.readUint32())}),l.createFullBoxCtor("stsd",function(e){var n,s,c,f;for(this.entries=[],c=e.readUint32(),n=1;n<=c;n++)if(s=l.parseOneBox(e,!0,this.size-(e.getPosition()-this.start)),s.code===l.OK)l[s.type+"SampleEntry"]?(f=new l[s.type+"SampleEntry"](s.size),f.hdr_size=s.hdr_size,f.start=s.start):(r.warn("BoxParser","Unknown sample entry type: "+s.type),f=new l.SampleEntry(s.type,s.size,s.hdr_size,s.start)),f.write===l.SampleEntry.prototype.write&&(r.info("BoxParser","SampleEntry "+f.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),f.parseDataAndRewind(e)),f.parse(e),this.entries.push(f);else return}),l.createFullBoxCtor("stsg",function(e){this.grouping_type=e.readUint32();var n=e.readUint16();this.group_description_index=[];for(var s=0;s<n;s++)this.group_description_index[s]=e.readUint32()}),l.createFullBoxCtor("stsh",function(e){var n,s;if(n=e.readUint32(),this.shadowed_sample_numbers=[],this.sync_sample_numbers=[],this.version===0)for(s=0;s<n;s++)this.shadowed_sample_numbers.push(e.readUint32()),this.sync_sample_numbers.push(e.readUint32())}),l.createFullBoxCtor("stss",function(e){var n,s;if(s=e.readUint32(),this.version===0)for(this.sample_numbers=[],n=0;n<s;n++)this.sample_numbers.push(e.readUint32())}),l.createFullBoxCtor("stsz",function(e){var n;if(this.sample_sizes=[],this.version===0)for(this.sample_size=e.readUint32(),this.sample_count=e.readUint32(),n=0;n<this.sample_count;n++)this.sample_size===0?this.sample_sizes.push(e.readUint32()):this.sample_sizes[n]=this.sample_size}),l.createFullBoxCtor("stts",function(e){var n,s,c;if(n=e.readUint32(),this.sample_counts=[],this.sample_deltas=[],this.version===0)for(s=0;s<n;s++)this.sample_counts.push(e.readUint32()),c=e.readInt32(),c<0&&(r.warn("BoxParser","File uses negative stts sample delta, using value 1 instead, sync may be lost!"),c=1),this.sample_deltas.push(c)}),l.createFullBoxCtor("stvi",function(e){var n=e.readUint32();this.single_view_allowed=n&3,this.stereo_scheme=e.readUint32();var s=e.readUint32();this.stereo_indication_type=e.readString(s);var c,f;for(this.boxes=[];e.getPosition()<this.start+this.size;)if(c=l.parseOneBox(e,!1,this.size-(e.getPosition()-this.start)),c.code===l.OK)f=c.box,this.boxes.push(f),this[f.type]=f;else return}),l.createBoxCtor("styp",function(e){l.ftypBox.prototype.parse.call(this,e)}),l.createFullBoxCtor("stz2",function(e){var n,s;if(this.sample_sizes=[],this.version===0)if(this.reserved=e.readUint24(),this.field_size=e.readUint8(),s=e.readUint32(),this.field_size===4)for(n=0;n<s;n+=2){var c=e.readUint8();this.sample_sizes[n]=c>>4&15,this.sample_sizes[n+1]=c&15}else if(this.field_size===8)for(n=0;n<s;n++)this.sample_sizes[n]=e.readUint8();else if(this.field_size===16)for(n=0;n<s;n++)this.sample_sizes[n]=e.readUint16();else r.error("BoxParser","Error in length field in stz2 box")}),l.createFullBoxCtor("subs",function(e){var n,s,c,f;for(c=e.readUint32(),this.entries=[],n=0;n<c;n++){var m={};if(this.entries[n]=m,m.sample_delta=e.readUint32(),m.subsamples=[],f=e.readUint16(),f>0)for(s=0;s<f;s++){var p={};m.subsamples.push(p),this.version==1?p.size=e.readUint32():p.size=e.readUint16(),p.priority=e.readUint8(),p.discardable=e.readUint8(),p.codec_specific_parameters=e.readUint32()}}}),l.createFullBoxCtor("tenc",function(e){if(e.readUint8(),this.version===0)e.readUint8();else{var n=e.readUint8();this.default_crypt_byte_block=n>>4&15,this.default_skip_byte_block=n&15}this.default_isProtected=e.readUint8(),this.default_Per_Sample_IV_Size=e.readUint8(),this.default_KID=l.parseHex16(e),this.default_isProtected===1&&this.default_Per_Sample_IV_Size===0&&(this.default_constant_IV_size=e.readUint8(),this.default_constant_IV=e.readUint8Array(this.default_constant_IV_size))}),l.createFullBoxCtor("tfdt",function(e){this.version==1?this.baseMediaDecodeTime=e.readUint64():this.baseMediaDecodeTime=e.readUint32()}),l.createFullBoxCtor("tfhd",function(e){var n=0;this.track_id=e.readUint32(),this.size-this.hdr_size>n&&this.flags&l.TFHD_FLAG_BASE_DATA_OFFSET?(this.base_data_offset=e.readUint64(),n+=8):this.base_data_offset=0,this.size-this.hdr_size>n&&this.flags&l.TFHD_FLAG_SAMPLE_DESC?(this.default_sample_description_index=e.readUint32(),n+=4):this.default_sample_description_index=0,this.size-this.hdr_size>n&&this.flags&l.TFHD_FLAG_SAMPLE_DUR?(this.default_sample_duration=e.readUint32(),n+=4):this.default_sample_duration=0,this.size-this.hdr_size>n&&this.flags&l.TFHD_FLAG_SAMPLE_SIZE?(this.default_sample_size=e.readUint32(),n+=4):this.default_sample_size=0,this.size-this.hdr_size>n&&this.flags&l.TFHD_FLAG_SAMPLE_FLAGS?(this.default_sample_flags=e.readUint32(),n+=4):this.default_sample_flags=0}),l.createFullBoxCtor("tfra",function(e){this.track_ID=e.readUint32(),e.readUint24();var n=e.readUint8();this.length_size_of_traf_num=n>>4&3,this.length_size_of_trun_num=n>>2&3,this.length_size_of_sample_num=n&3,this.entries=[];for(var s=e.readUint32(),c=0;c<s;c++)this.version===1?(this.time=e.readUint64(),this.moof_offset=e.readUint64()):(this.time=e.readUint32(),this.moof_offset=e.readUint32()),this.traf_number=e["readUint"+8*(this.length_size_of_traf_num+1)](),this.trun_number=e["readUint"+8*(this.length_size_of_trun_num+1)](),this.sample_number=e["readUint"+8*(this.length_size_of_sample_num+1)]()}),l.createFullBoxCtor("tkhd",function(e){this.version==1?(this.creation_time=e.readUint64(),this.modification_time=e.readUint64(),this.track_id=e.readUint32(),e.readUint32(),this.duration=e.readUint64()):(this.creation_time=e.readUint32(),this.modification_time=e.readUint32(),this.track_id=e.readUint32(),e.readUint32(),this.duration=e.readUint32()),e.readUint32Array(2),this.layer=e.readInt16(),this.alternate_group=e.readInt16(),this.volume=e.readInt16()>>8,e.readUint16(),this.matrix=e.readInt32Array(9),this.width=e.readUint32(),this.height=e.readUint32()}),l.createBoxCtor("tmax",function(e){this.time=e.readUint32()}),l.createBoxCtor("tmin",function(e){this.time=e.readUint32()}),l.createBoxCtor("totl",function(e){this.bytessent=e.readUint32()}),l.createBoxCtor("tpay",function(e){this.bytessent=e.readUint32()}),l.createBoxCtor("tpyl",function(e){this.bytessent=e.readUint64()}),l.TrackGroupTypeBox.prototype.parse=function(e){this.parseFullHeader(e),this.track_group_id=e.readUint32()},l.createTrackGroupCtor("msrc"),l.TrackReferenceTypeBox=function(e,n,s,c){l.Box.call(this,e,n),this.hdr_size=s,this.start=c},l.TrackReferenceTypeBox.prototype=new l.Box,l.TrackReferenceTypeBox.prototype.parse=function(e){this.track_ids=e.readUint32Array((this.size-this.hdr_size)/4)},l.trefBox.prototype.parse=function(e){for(var n,s;e.getPosition()<this.start+this.size;)if(n=l.parseOneBox(e,!0,this.size-(e.getPosition()-this.start)),n.code===l.OK)s=new l.TrackReferenceTypeBox(n.type,n.size,n.hdr_size,n.start),s.write===l.Box.prototype.write&&s.type!=="mdat"&&(r.info("BoxParser","TrackReference "+s.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),s.parseDataAndRewind(e)),s.parse(e),this.boxes.push(s);else return},l.createFullBoxCtor("trep",function(e){for(this.track_ID=e.readUint32(),this.boxes=[];e.getPosition()<this.start+this.size;)if(ret=l.parseOneBox(e,!1,this.size-(e.getPosition()-this.start)),ret.code===l.OK)box=ret.box,this.boxes.push(box);else return}),l.createFullBoxCtor("trex",function(e){this.track_id=e.readUint32(),this.default_sample_description_index=e.readUint32(),this.default_sample_duration=e.readUint32(),this.default_sample_size=e.readUint32(),this.default_sample_flags=e.readUint32()}),l.createBoxCtor("trpy",function(e){this.bytessent=e.readUint64()}),l.createFullBoxCtor("trun",function(e){var n=0;if(this.sample_count=e.readUint32(),n+=4,this.size-this.hdr_size>n&&this.flags&l.TRUN_FLAGS_DATA_OFFSET?(this.data_offset=e.readInt32(),n+=4):this.data_offset=0,this.size-this.hdr_size>n&&this.flags&l.TRUN_FLAGS_FIRST_FLAG?(this.first_sample_flags=e.readUint32(),n+=4):this.first_sample_flags=0,this.sample_duration=[],this.sample_size=[],this.sample_flags=[],this.sample_composition_time_offset=[],this.size-this.hdr_size>n)for(var s=0;s<this.sample_count;s++)this.flags&l.TRUN_FLAGS_DURATION&&(this.sample_duration[s]=e.readUint32()),this.flags&l.TRUN_FLAGS_SIZE&&(this.sample_size[s]=e.readUint32()),this.flags&l.TRUN_FLAGS_FLAGS&&(this.sample_flags[s]=e.readUint32()),this.flags&l.TRUN_FLAGS_CTS_OFFSET&&(this.version===0?this.sample_composition_time_offset[s]=e.readUint32():this.sample_composition_time_offset[s]=e.readInt32())}),l.createFullBoxCtor("tsel",function(e){this.switch_group=e.readUint32();var n=(this.size-this.hdr_size-4)/4;this.attribute_list=[];for(var s=0;s<n;s++)this.attribute_list[s]=e.readUint32()}),l.createFullBoxCtor("txtC",function(e){this.config=e.readCString()}),l.createBoxCtor("tyco",function(e){var n=(this.size-this.hdr_size)/4;this.compatible_brands=[];for(var s=0;s<n;s++)this.compatible_brands[s]=e.readString(4)}),l.createFullBoxCtor("udes",function(e){this.lang=e.readCString(),this.name=e.readCString(),this.description=e.readCString(),this.tags=e.readCString()}),l.createFullBoxCtor("uncC",function(e){var n;for(this.profile=e.readUint32(),this.component_count=e.readUint16(),this.component_index=[],this.component_bit_depth_minus_one=[],this.component_format=[],this.component_align_size=[],n=0;n<this.component_count;n++)this.component_index.push(e.readUint16()),this.component_bit_depth_minus_one.push(e.readUint8()),this.component_format.push(e.readUint8()),this.component_align_size.push(e.readUint8());this.sampling_type=e.readUint8(),this.interleave_type=e.readUint8(),this.block_size=e.readUint8();var s=e.readUint8();this.component_little_endian=s>>7&1,this.block_pad_lsb=s>>6&1,this.block_little_endian=s>>5&1,this.block_reversed=s>>4&1,this.pad_unknown=s>>3&1,this.pixel_size=e.readUint8(),this.row_align_size=e.readUint32(),this.tile_align_size=e.readUint32(),this.num_tile_cols_minus_one=e.readUint32(),this.num_tile_rows_minus_one=e.readUint32()}),l.createFullBoxCtor("url ",function(e){this.flags!==1&&(this.location=e.readCString())}),l.createFullBoxCtor("urn ",function(e){this.name=e.readCString(),this.size-this.hdr_size-this.name.length-1>0&&(this.location=e.readCString())}),l.createUUIDBox("a5d40b30e81411ddba2f0800200c9a66",!0,!1,function(e){this.LiveServerManifest=e.readString(this.size-this.hdr_size).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}),l.createUUIDBox("d08a4f1810f34a82b6c832d8aba183d3",!0,!1,function(e){this.system_id=l.parseHex16(e);var n=e.readUint32();n>0&&(this.data=e.readUint8Array(n))}),l.createUUIDBox("a2394f525a9b4f14a2446c427c648df4",!0,!1),l.createUUIDBox("8974dbce7be74c5184f97148f9882554",!0,!1,function(e){this.default_AlgorithmID=e.readUint24(),this.default_IV_size=e.readUint8(),this.default_KID=l.parseHex16(e)}),l.createUUIDBox("d4807ef2ca3946958e5426cb9e46a79f",!0,!1,function(e){this.fragment_count=e.readUint8(),this.entries=[];for(var n=0;n<this.fragment_count;n++){var s={},c=0,f=0;this.version===1?(c=e.readUint64(),f=e.readUint64()):(c=e.readUint32(),f=e.readUint32()),s.absolute_time=c,s.absolute_duration=f,this.entries.push(s)}}),l.createUUIDBox("6d1d9b0542d544e680e2141daff757b2",!0,!1,function(e){this.version===1?(this.absolute_time=e.readUint64(),this.duration=e.readUint64()):(this.absolute_time=e.readUint32(),this.duration=e.readUint32())}),l.createFullBoxCtor("vmhd",function(e){this.graphicsmode=e.readUint16(),this.opcolor=e.readUint16Array(3)}),l.createFullBoxCtor("vpcC",function(e){var n;this.version===1?(this.profile=e.readUint8(),this.level=e.readUint8(),n=e.readUint8(),this.bitDepth=n>>4,this.chromaSubsampling=n>>1&7,this.videoFullRangeFlag=n&1,this.colourPrimaries=e.readUint8(),this.transferCharacteristics=e.readUint8(),this.matrixCoefficients=e.readUint8(),this.codecIntializationDataSize=e.readUint16(),this.codecIntializationData=e.readUint8Array(this.codecIntializationDataSize)):(this.profile=e.readUint8(),this.level=e.readUint8(),n=e.readUint8(),this.bitDepth=n>>4&15,this.colorSpace=n&15,n=e.readUint8(),this.chromaSubsampling=n>>4&15,this.transferFunction=n>>1&7,this.videoFullRangeFlag=n&1,this.codecIntializationDataSize=e.readUint16(),this.codecIntializationData=e.readUint8Array(this.codecIntializationDataSize))}),l.createBoxCtor("vttC",function(e){this.text=e.readString(this.size-this.hdr_size)}),l.createFullBoxCtor("vvcC",function(e){var n,s,c={held_bits:void 0,num_held_bits:0,stream_read_1_bytes:function(E){this.held_bits=E.readUint8(),this.num_held_bits=8},stream_read_2_bytes:function(E){this.held_bits=E.readUint16(),this.num_held_bits=16},extract_bits:function(E){var T=this.held_bits>>this.num_held_bits-E&(1<<E)-1;return this.num_held_bits-=E,T}};if(c.stream_read_1_bytes(e),c.extract_bits(5),this.lengthSizeMinusOne=c.extract_bits(2),this.ptl_present_flag=c.extract_bits(1),this.ptl_present_flag){c.stream_read_2_bytes(e),this.ols_idx=c.extract_bits(9),this.num_sublayers=c.extract_bits(3),this.constant_frame_rate=c.extract_bits(2),this.chroma_format_idc=c.extract_bits(2),c.stream_read_1_bytes(e),this.bit_depth_minus8=c.extract_bits(3),c.extract_bits(5);{if(c.stream_read_2_bytes(e),c.extract_bits(2),this.num_bytes_constraint_info=c.extract_bits(6),this.general_profile_idc=c.extract_bits(7),this.general_tier_flag=c.extract_bits(1),this.general_level_idc=e.readUint8(),c.stream_read_1_bytes(e),this.ptl_frame_only_constraint_flag=c.extract_bits(1),this.ptl_multilayer_enabled_flag=c.extract_bits(1),this.general_constraint_info=new Uint8Array(this.num_bytes_constraint_info),this.num_bytes_constraint_info){for(n=0;n<this.num_bytes_constraint_info-1;n++){var f=c.extract_bits(6);c.stream_read_1_bytes(e);var m=c.extract_bits(2);this.general_constraint_info[n]=f<<2|m}this.general_constraint_info[this.num_bytes_constraint_info-1]=c.extract_bits(6)}else c.extract_bits(6);if(this.num_sublayers>1){for(c.stream_read_1_bytes(e),this.ptl_sublayer_present_mask=0,s=this.num_sublayers-2;s>=0;--s){var p=c.extract_bits(1);this.ptl_sublayer_present_mask|=p<<s}for(s=this.num_sublayers;s<=8&&this.num_sublayers>1;++s)c.extract_bits(1);for(this.sublayer_level_idc=[],s=this.num_sublayers-2;s>=0;--s)this.ptl_sublayer_present_mask&1<<s&&(this.sublayer_level_idc[s]=e.readUint8())}if(this.ptl_num_sub_profiles=e.readUint8(),this.general_sub_profile_idc=[],this.ptl_num_sub_profiles)for(n=0;n<this.ptl_num_sub_profiles;n++)this.general_sub_profile_idc.push(e.readUint32())}this.max_picture_width=e.readUint16(),this.max_picture_height=e.readUint16(),this.avg_frame_rate=e.readUint16()}var _=12,S=13;this.nalu_arrays=[];var x=e.readUint8();for(n=0;n<x;n++){var w=[];this.nalu_arrays.push(w),c.stream_read_1_bytes(e),w.completeness=c.extract_bits(1),c.extract_bits(2),w.nalu_type=c.extract_bits(5);var U=1;for(w.nalu_type!=S&&w.nalu_type!=_&&(U=e.readUint16()),s=0;s<U;s++){var A=e.readUint16();w.push({data:e.readUint8Array(A),length:A})}}}),l.createFullBoxCtor("vvnC",function(e){var n=strm.readUint8();this.lengthSizeMinusOne=n&3}),l.SampleEntry.prototype.isVideo=function(){return!1},l.SampleEntry.prototype.isAudio=function(){return!1},l.SampleEntry.prototype.isSubtitle=function(){return!1},l.SampleEntry.prototype.isMetadata=function(){return!1},l.SampleEntry.prototype.isHint=function(){return!1},l.SampleEntry.prototype.getCodec=function(){return this.type.replace(".","")},l.SampleEntry.prototype.getWidth=function(){return""},l.SampleEntry.prototype.getHeight=function(){return""},l.SampleEntry.prototype.getChannelCount=function(){return""},l.SampleEntry.prototype.getSampleRate=function(){return""},l.SampleEntry.prototype.getSampleSize=function(){return""},l.VisualSampleEntry.prototype.isVideo=function(){return!0},l.VisualSampleEntry.prototype.getWidth=function(){return this.width},l.VisualSampleEntry.prototype.getHeight=function(){return this.height},l.AudioSampleEntry.prototype.isAudio=function(){return!0},l.AudioSampleEntry.prototype.getChannelCount=function(){return this.channel_count},l.AudioSampleEntry.prototype.getSampleRate=function(){return this.samplerate},l.AudioSampleEntry.prototype.getSampleSize=function(){return this.samplesize},l.SubtitleSampleEntry.prototype.isSubtitle=function(){return!0},l.MetadataSampleEntry.prototype.isMetadata=function(){return!0},l.decimalToHex=function(e,n){var s=Number(e).toString(16);for(n=typeof n>"u"||n===null?n=2:n;s.length<n;)s="0"+s;return s},l.avc1SampleEntry.prototype.getCodec=l.avc2SampleEntry.prototype.getCodec=l.avc3SampleEntry.prototype.getCodec=l.avc4SampleEntry.prototype.getCodec=function(){var e=l.SampleEntry.prototype.getCodec.call(this);return this.avcC?e+"."+l.decimalToHex(this.avcC.AVCProfileIndication)+l.decimalToHex(this.avcC.profile_compatibility)+l.decimalToHex(this.avcC.AVCLevelIndication):e},l.hev1SampleEntry.prototype.getCodec=l.hvc1SampleEntry.prototype.getCodec=function(){var e,n=l.SampleEntry.prototype.getCodec.call(this);if(this.hvcC){switch(n+=".",this.hvcC.general_profile_space){case 0:n+="";break;case 1:n+="A";break;case 2:n+="B";break;case 3:n+="C";break}n+=this.hvcC.general_profile_idc,n+=".";var s=this.hvcC.general_profile_compatibility,c=0;for(e=0;e<32&&(c|=s&1,e!=31);e++)c<<=1,s>>=1;n+=l.decimalToHex(c,0),n+=".",this.hvcC.general_tier_flag===0?n+="L":n+="H",n+=this.hvcC.general_level_idc;var f=!1,m="";for(e=5;e>=0;e--)(this.hvcC.general_constraint_indicator[e]||f)&&(m="."+l.decimalToHex(this.hvcC.general_constraint_indicator[e],0)+m,f=!0);n+=m}return n},l.vvc1SampleEntry.prototype.getCodec=l.vvi1SampleEntry.prototype.getCodec=function(){var e,n=l.SampleEntry.prototype.getCodec.call(this);if(this.vvcC){n+="."+this.vvcC.general_profile_idc,this.vvcC.general_tier_flag?n+=".H":n+=".L",n+=this.vvcC.general_level_idc;var s="";if(this.vvcC.general_constraint_info){var c=[],f=0;f|=this.vvcC.ptl_frame_only_constraint<<7,f|=this.vvcC.ptl_multilayer_enabled<<6;var m;for(e=0;e<this.vvcC.general_constraint_info.length;++e)f|=this.vvcC.general_constraint_info[e]>>2&63,c.push(f),f&&(m=e),f=this.vvcC.general_constraint_info[e]>>2&3;if(m===void 0)s=".CA";else{s=".C";var p="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",_=0,S=0;for(e=0;e<=m;++e)for(_=_<<8|c[e],S+=8;S>=5;){var x=_>>S-5&31;s+=p[x],S-=5,_&=(1<<S)-1}S&&(_<<=5-S,s+=p[_&31])}}n+=s}return n},l.mp4aSampleEntry.prototype.getCodec=function(){var e=l.SampleEntry.prototype.getCodec.call(this);if(this.esds&&this.esds.esd){var n=this.esds.esd.getOTI(),s=this.esds.esd.getAudioConfig();return e+"."+l.decimalToHex(n)+(s?"."+s:"")}else return e},l.stxtSampleEntry.prototype.getCodec=function(){var e=l.SampleEntry.prototype.getCodec.call(this);return this.mime_format?e+"."+this.mime_format:e},l.vp08SampleEntry.prototype.getCodec=l.vp09SampleEntry.prototype.getCodec=function(){var e=l.SampleEntry.prototype.getCodec.call(this),n=this.vpcC.level;n==0&&(n="00");var s=this.vpcC.bitDepth;return s==8&&(s="08"),e+".0"+this.vpcC.profile+"."+n+"."+s},l.av01SampleEntry.prototype.getCodec=function(){var e=l.SampleEntry.prototype.getCodec.call(this),n=this.av1C.seq_level_idx_0;n<10&&(n="0"+n);var s;return this.av1C.seq_profile===2&&this.av1C.high_bitdepth===1?s=this.av1C.twelve_bit===1?"12":"10":this.av1C.seq_profile<=2&&(s=this.av1C.high_bitdepth===1?"10":"08"),e+"."+this.av1C.seq_profile+"."+n+(this.av1C.seq_tier_0?"H":"M")+"."+s},l.Box.prototype.writeHeader=function(e,n){this.size+=8,this.size>u&&(this.size+=8),this.type==="uuid"&&(this.size+=16),r.debug("BoxWriter","Writing box "+this.type+" of size: "+this.size+" at position "+e.getPosition()+(n||"")),this.size>u?e.writeUint32(1):(this.sizePosition=e.getPosition(),e.writeUint32(this.size)),e.writeString(this.type,null,4),this.type==="uuid"&&e.writeUint8Array(this.uuid),this.size>u&&e.writeUint64(this.size)},l.FullBox.prototype.writeHeader=function(e){this.size+=4,l.Box.prototype.writeHeader.call(this,e," v="+this.version+" f="+this.flags),e.writeUint8(this.version),e.writeUint24(this.flags)},l.Box.prototype.write=function(e){this.type==="mdat"?this.data&&(this.size=this.data.length,this.writeHeader(e),e.writeUint8Array(this.data)):(this.size=this.data?this.data.length:0,this.writeHeader(e),this.data&&e.writeUint8Array(this.data))},l.ContainerBox.prototype.write=function(e){this.size=0,this.writeHeader(e);for(var n=0;n<this.boxes.length;n++)this.boxes[n]&&(this.boxes[n].write(e),this.size+=this.boxes[n].size);r.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},l.TrackReferenceTypeBox.prototype.write=function(e){this.size=this.track_ids.length*4,this.writeHeader(e),e.writeUint32Array(this.track_ids)},l.avcCBox.prototype.write=function(e){var n;for(this.size=7,n=0;n<this.SPS.length;n++)this.size+=2+this.SPS[n].length;for(n=0;n<this.PPS.length;n++)this.size+=2+this.PPS[n].length;for(this.ext&&(this.size+=this.ext.length),this.writeHeader(e),e.writeUint8(this.configurationVersion),e.writeUint8(this.AVCProfileIndication),e.writeUint8(this.profile_compatibility),e.writeUint8(this.AVCLevelIndication),e.writeUint8(this.lengthSizeMinusOne+252),e.writeUint8(this.SPS.length+224),n=0;n<this.SPS.length;n++)e.writeUint16(this.SPS[n].length),e.writeUint8Array(this.SPS[n].nalu);for(e.writeUint8(this.PPS.length),n=0;n<this.PPS.length;n++)e.writeUint16(this.PPS[n].length),e.writeUint8Array(this.PPS[n].nalu);this.ext&&e.writeUint8Array(this.ext)},l.co64Box.prototype.write=function(e){var n;for(this.version=0,this.flags=0,this.size=4+8*this.chunk_offsets.length,this.writeHeader(e),e.writeUint32(this.chunk_offsets.length),n=0;n<this.chunk_offsets.length;n++)e.writeUint64(this.chunk_offsets[n])},l.cslgBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4*5,this.writeHeader(e),e.writeInt32(this.compositionToDTSShift),e.writeInt32(this.leastDecodeToDisplayDelta),e.writeInt32(this.greatestDecodeToDisplayDelta),e.writeInt32(this.compositionStartTime),e.writeInt32(this.compositionEndTime)},l.cttsBox.prototype.write=function(e){var n;for(this.version=0,this.flags=0,this.size=4+8*this.sample_counts.length,this.writeHeader(e),e.writeUint32(this.sample_counts.length),n=0;n<this.sample_counts.length;n++)e.writeUint32(this.sample_counts[n]),this.version===1?e.writeInt32(this.sample_offsets[n]):e.writeUint32(this.sample_offsets[n])},l.drefBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4,this.writeHeader(e),e.writeUint32(this.entries.length);for(var n=0;n<this.entries.length;n++)this.entries[n].write(e),this.size+=this.entries[n].size;r.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},l.elngBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=this.extended_language.length,this.writeHeader(e),e.writeString(this.extended_language)},l.elstBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4+12*this.entries.length,this.writeHeader(e),e.writeUint32(this.entries.length);for(var n=0;n<this.entries.length;n++){var s=this.entries[n];e.writeUint32(s.segment_duration),e.writeInt32(s.media_time),e.writeInt16(s.media_rate_integer),e.writeInt16(s.media_rate_fraction)}},l.emsgBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4*4+this.message_data.length+(this.scheme_id_uri.length+1)+(this.value.length+1),this.writeHeader(e),e.writeCString(this.scheme_id_uri),e.writeCString(this.value),e.writeUint32(this.timescale),e.writeUint32(this.presentation_time_delta),e.writeUint32(this.event_duration),e.writeUint32(this.id),e.writeUint8Array(this.message_data)},l.ftypBox.prototype.write=function(e){this.size=8+4*this.compatible_brands.length,this.writeHeader(e),e.writeString(this.major_brand,null,4),e.writeUint32(this.minor_version);for(var n=0;n<this.compatible_brands.length;n++)e.writeString(this.compatible_brands[n],null,4)},l.hdlrBox.prototype.write=function(e){this.size=5*4+this.name.length+1,this.version=0,this.flags=0,this.writeHeader(e),e.writeUint32(0),e.writeString(this.handler,null,4),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeCString(this.name)},l.hvcCBox.prototype.write=function(e){var n,s;for(this.size=23,n=0;n<this.nalu_arrays.length;n++)for(this.size+=3,s=0;s<this.nalu_arrays[n].length;s++)this.size+=2+this.nalu_arrays[n][s].data.length;for(this.writeHeader(e),e.writeUint8(this.configurationVersion),e.writeUint8(this.general_profile_space<<6+this.general_tier_flag<<5+this.general_profile_idc),e.writeUint32(this.general_profile_compatibility),e.writeUint8Array(this.general_constraint_indicator),e.writeUint8(this.general_level_idc),e.writeUint16(this.min_spatial_segmentation_idc+(15<<24)),e.writeUint8(this.parallelismType+252),e.writeUint8(this.chroma_format_idc+252),e.writeUint8(this.bit_depth_luma_minus8+248),e.writeUint8(this.bit_depth_chroma_minus8+248),e.writeUint16(this.avgFrameRate),e.writeUint8((this.constantFrameRate<<6)+(this.numTemporalLayers<<3)+(this.temporalIdNested<<2)+this.lengthSizeMinusOne),e.writeUint8(this.nalu_arrays.length),n=0;n<this.nalu_arrays.length;n++)for(e.writeUint8((this.nalu_arrays[n].completeness<<7)+this.nalu_arrays[n].nalu_type),e.writeUint16(this.nalu_arrays[n].length),s=0;s<this.nalu_arrays[n].length;s++)e.writeUint16(this.nalu_arrays[n][s].data.length),e.writeUint8Array(this.nalu_arrays[n][s].data)},l.kindBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=this.schemeURI.length+1+(this.value.length+1),this.writeHeader(e),e.writeCString(this.schemeURI),e.writeCString(this.value)},l.mdhdBox.prototype.write=function(e){this.size=4*4+2*2,this.flags=0,this.version=0,this.writeHeader(e),e.writeUint32(this.creation_time),e.writeUint32(this.modification_time),e.writeUint32(this.timescale),e.writeUint32(this.duration),e.writeUint16(this.language),e.writeUint16(0)},l.mehdBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4,this.writeHeader(e),e.writeUint32(this.fragment_duration)},l.mfhdBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4,this.writeHeader(e),e.writeUint32(this.sequence_number)},l.mvhdBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=23*4+2*2,this.writeHeader(e),e.writeUint32(this.creation_time),e.writeUint32(this.modification_time),e.writeUint32(this.timescale),e.writeUint32(this.duration),e.writeUint32(this.rate),e.writeUint16(this.volume<<8),e.writeUint16(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32Array(this.matrix),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(this.next_track_id)},l.SampleEntry.prototype.writeHeader=function(e){this.size=8,l.Box.prototype.writeHeader.call(this,e),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint16(this.data_reference_index)},l.SampleEntry.prototype.writeFooter=function(e){for(var n=0;n<this.boxes.length;n++)this.boxes[n].write(e),this.size+=this.boxes[n].size;r.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},l.SampleEntry.prototype.write=function(e){this.writeHeader(e),e.writeUint8Array(this.data),this.size+=this.data.length,r.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},l.VisualSampleEntry.prototype.write=function(e){this.writeHeader(e),this.size+=2*7+6*4+32,e.writeUint16(0),e.writeUint16(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint16(this.width),e.writeUint16(this.height),e.writeUint32(this.horizresolution),e.writeUint32(this.vertresolution),e.writeUint32(0),e.writeUint16(this.frame_count),e.writeUint8(Math.min(31,this.compressorname.length)),e.writeString(this.compressorname,null,31),e.writeUint16(this.depth),e.writeInt16(-1),this.writeFooter(e)},l.AudioSampleEntry.prototype.write=function(e){this.writeHeader(e),this.size+=2*4+3*4,e.writeUint32(0),e.writeUint32(0),e.writeUint16(this.channel_count),e.writeUint16(this.samplesize),e.writeUint16(0),e.writeUint16(0),e.writeUint32(this.samplerate<<16),this.writeFooter(e)},l.stppSampleEntry.prototype.write=function(e){this.writeHeader(e),this.size+=this.namespace.length+1+this.schema_location.length+1+this.auxiliary_mime_types.length+1,e.writeCString(this.namespace),e.writeCString(this.schema_location),e.writeCString(this.auxiliary_mime_types),this.writeFooter(e)},l.SampleGroupEntry.prototype.write=function(e){e.writeUint8Array(this.data)},l.sbgpBox.prototype.write=function(e){this.version=1,this.flags=0,this.size=12+8*this.entries.length,this.writeHeader(e),e.writeString(this.grouping_type,null,4),e.writeUint32(this.grouping_type_parameter),e.writeUint32(this.entries.length);for(var n=0;n<this.entries.length;n++){var s=this.entries[n];e.writeInt32(s.sample_count),e.writeInt32(s.group_description_index)}},l.sgpdBox.prototype.write=function(e){var n,s;for(this.flags=0,this.size=12,n=0;n<this.entries.length;n++)s=this.entries[n],this.version===1&&(this.default_length===0&&(this.size+=4),this.size+=s.data.length);for(this.writeHeader(e),e.writeString(this.grouping_type,null,4),this.version===1&&e.writeUint32(this.default_length),this.version>=2&&e.writeUint32(this.default_sample_description_index),e.writeUint32(this.entries.length),n=0;n<this.entries.length;n++)s=this.entries[n],this.version===1&&this.default_length===0&&e.writeUint32(s.description_length),s.write(e)},l.sidxBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4*4+2+2+12*this.references.length,this.writeHeader(e),e.writeUint32(this.reference_ID),e.writeUint32(this.timescale),e.writeUint32(this.earliest_presentation_time),e.writeUint32(this.first_offset),e.writeUint16(0),e.writeUint16(this.references.length);for(var n=0;n<this.references.length;n++){var s=this.references[n];e.writeUint32(s.reference_type<<31|s.referenced_size),e.writeUint32(s.subsegment_duration),e.writeUint32(s.starts_with_SAP<<31|s.SAP_type<<28|s.SAP_delta_time)}},l.smhdBox.prototype.write=function(e){this.version=0,this.flags=1,this.size=4,this.writeHeader(e),e.writeUint16(this.balance),e.writeUint16(0)},l.stcoBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4+4*this.chunk_offsets.length,this.writeHeader(e),e.writeUint32(this.chunk_offsets.length),e.writeUint32Array(this.chunk_offsets)},l.stscBox.prototype.write=function(e){var n;for(this.version=0,this.flags=0,this.size=4+12*this.first_chunk.length,this.writeHeader(e),e.writeUint32(this.first_chunk.length),n=0;n<this.first_chunk.length;n++)e.writeUint32(this.first_chunk[n]),e.writeUint32(this.samples_per_chunk[n]),e.writeUint32(this.sample_description_index[n])},l.stsdBox.prototype.write=function(e){var n;for(this.version=0,this.flags=0,this.size=0,this.writeHeader(e),e.writeUint32(this.entries.length),this.size+=4,n=0;n<this.entries.length;n++)this.entries[n].write(e),this.size+=this.entries[n].size;r.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},l.stshBox.prototype.write=function(e){var n;for(this.version=0,this.flags=0,this.size=4+8*this.shadowed_sample_numbers.length,this.writeHeader(e),e.writeUint32(this.shadowed_sample_numbers.length),n=0;n<this.shadowed_sample_numbers.length;n++)e.writeUint32(this.shadowed_sample_numbers[n]),e.writeUint32(this.sync_sample_numbers[n])},l.stssBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4+4*this.sample_numbers.length,this.writeHeader(e),e.writeUint32(this.sample_numbers.length),e.writeUint32Array(this.sample_numbers)},l.stszBox.prototype.write=function(e){var n,s=!0;if(this.version=0,this.flags=0,this.sample_sizes.length>0)for(n=0;n+1<this.sample_sizes.length;)if(this.sample_sizes[n+1]!==this.sample_sizes[0]){s=!1;break}else n++;else s=!1;this.size=8,s||(this.size+=4*this.sample_sizes.length),this.writeHeader(e),s?e.writeUint32(this.sample_sizes[0]):e.writeUint32(0),e.writeUint32(this.sample_sizes.length),s||e.writeUint32Array(this.sample_sizes)},l.sttsBox.prototype.write=function(e){var n;for(this.version=0,this.flags=0,this.size=4+8*this.sample_counts.length,this.writeHeader(e),e.writeUint32(this.sample_counts.length),n=0;n<this.sample_counts.length;n++)e.writeUint32(this.sample_counts[n]),e.writeUint32(this.sample_deltas[n])},l.tfdtBox.prototype.write=function(e){var n=Math.pow(2,32)-1;this.version=this.baseMediaDecodeTime>n?1:0,this.flags=0,this.size=4,this.version===1&&(this.size+=4),this.writeHeader(e),this.version===1?e.writeUint64(this.baseMediaDecodeTime):e.writeUint32(this.baseMediaDecodeTime)},l.tfhdBox.prototype.write=function(e){this.version=0,this.size=4,this.flags&l.TFHD_FLAG_BASE_DATA_OFFSET&&(this.size+=8),this.flags&l.TFHD_FLAG_SAMPLE_DESC&&(this.size+=4),this.flags&l.TFHD_FLAG_SAMPLE_DUR&&(this.size+=4),this.flags&l.TFHD_FLAG_SAMPLE_SIZE&&(this.size+=4),this.flags&l.TFHD_FLAG_SAMPLE_FLAGS&&(this.size+=4),this.writeHeader(e),e.writeUint32(this.track_id),this.flags&l.TFHD_FLAG_BASE_DATA_OFFSET&&e.writeUint64(this.base_data_offset),this.flags&l.TFHD_FLAG_SAMPLE_DESC&&e.writeUint32(this.default_sample_description_index),this.flags&l.TFHD_FLAG_SAMPLE_DUR&&e.writeUint32(this.default_sample_duration),this.flags&l.TFHD_FLAG_SAMPLE_SIZE&&e.writeUint32(this.default_sample_size),this.flags&l.TFHD_FLAG_SAMPLE_FLAGS&&e.writeUint32(this.default_sample_flags)},l.tkhdBox.prototype.write=function(e){this.version=0,this.size=4*18+2*4,this.writeHeader(e),e.writeUint32(this.creation_time),e.writeUint32(this.modification_time),e.writeUint32(this.track_id),e.writeUint32(0),e.writeUint32(this.duration),e.writeUint32(0),e.writeUint32(0),e.writeInt16(this.layer),e.writeInt16(this.alternate_group),e.writeInt16(this.volume<<8),e.writeUint16(0),e.writeInt32Array(this.matrix),e.writeUint32(this.width),e.writeUint32(this.height)},l.trexBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4*5,this.writeHeader(e),e.writeUint32(this.track_id),e.writeUint32(this.default_sample_description_index),e.writeUint32(this.default_sample_duration),e.writeUint32(this.default_sample_size),e.writeUint32(this.default_sample_flags)},l.trunBox.prototype.write=function(e){this.version=0,this.size=4,this.flags&l.TRUN_FLAGS_DATA_OFFSET&&(this.size+=4),this.flags&l.TRUN_FLAGS_FIRST_FLAG&&(this.size+=4),this.flags&l.TRUN_FLAGS_DURATION&&(this.size+=4*this.sample_duration.length),this.flags&l.TRUN_FLAGS_SIZE&&(this.size+=4*this.sample_size.length),this.flags&l.TRUN_FLAGS_FLAGS&&(this.size+=4*this.sample_flags.length),this.flags&l.TRUN_FLAGS_CTS_OFFSET&&(this.size+=4*this.sample_composition_time_offset.length),this.writeHeader(e),e.writeUint32(this.sample_count),this.flags&l.TRUN_FLAGS_DATA_OFFSET&&(this.data_offset_position=e.getPosition(),e.writeInt32(this.data_offset)),this.flags&l.TRUN_FLAGS_FIRST_FLAG&&e.writeUint32(this.first_sample_flags);for(var n=0;n<this.sample_count;n++)this.flags&l.TRUN_FLAGS_DURATION&&e.writeUint32(this.sample_duration[n]),this.flags&l.TRUN_FLAGS_SIZE&&e.writeUint32(this.sample_size[n]),this.flags&l.TRUN_FLAGS_FLAGS&&e.writeUint32(this.sample_flags[n]),this.flags&l.TRUN_FLAGS_CTS_OFFSET&&(this.version===0?e.writeUint32(this.sample_composition_time_offset[n]):e.writeInt32(this.sample_composition_time_offset[n]))},l["url Box"].prototype.write=function(e){this.version=0,this.location?(this.flags=0,this.size=this.location.length+1):(this.flags=1,this.size=0),this.writeHeader(e),this.location&&e.writeCString(this.location)},l["urn Box"].prototype.write=function(e){this.version=0,this.flags=0,this.size=this.name.length+1+(this.location?this.location.length+1:0),this.writeHeader(e),e.writeCString(this.name),this.location&&e.writeCString(this.location)},l.vmhdBox.prototype.write=function(e){this.version=0,this.flags=1,this.size=8,this.writeHeader(e),e.writeUint16(this.graphicsmode),e.writeUint16Array(this.opcolor)},l.cttsBox.prototype.unpack=function(e){var n,s,c;for(c=0,n=0;n<this.sample_counts.length;n++)for(s=0;s<this.sample_counts[n];s++)e[c].pts=e[c].dts+this.sample_offsets[n],c++},l.sttsBox.prototype.unpack=function(e){var n,s,c;for(c=0,n=0;n<this.sample_counts.length;n++)for(s=0;s<this.sample_counts[n];s++)c===0?e[c].dts=0:e[c].dts=e[c-1].dts+this.sample_deltas[n],c++},l.stcoBox.prototype.unpack=function(e){var n;for(n=0;n<this.chunk_offsets.length;n++)e[n].offset=this.chunk_offsets[n]},l.stscBox.prototype.unpack=function(e){var n,s,c,f,m;for(f=0,m=0,n=0;n<this.first_chunk.length;n++)for(s=0;s<(n+1<this.first_chunk.length?this.first_chunk[n+1]:1/0);s++)for(m++,c=0;c<this.samples_per_chunk[n];c++){if(e[f])e[f].description_index=this.sample_description_index[n],e[f].chunk_index=m;else return;f++}},l.stszBox.prototype.unpack=function(e){var n;for(n=0;n<this.sample_sizes.length;n++)e[n].size=this.sample_sizes[n]},l.DIFF_BOXES_PROP_NAMES=["boxes","entries","references","subsamples","items","item_infos","extents","associations","subsegments","ranges","seekLists","seekPoints","esd","levels"],l.DIFF_PRIMITIVE_ARRAY_PROP_NAMES=["compatible_brands","matrix","opcolor","sample_counts","sample_counts","sample_deltas","first_chunk","samples_per_chunk","sample_sizes","chunk_offsets","sample_offsets","sample_description_index","sample_duration"],l.boxEqualFields=function(e,n){if(e&&!n)return!1;var s;for(s in e)if(!(l.DIFF_BOXES_PROP_NAMES.indexOf(s)>-1)){if(e[s]instanceof l.Box||n[s]instanceof l.Box)continue;if(typeof e[s]>"u"||typeof n[s]>"u")continue;if(typeof e[s]=="function"||typeof n[s]=="function")continue;if(e.subBoxNames&&e.subBoxNames.indexOf(s.slice(0,4))>-1||n.subBoxNames&&n.subBoxNames.indexOf(s.slice(0,4))>-1)continue;if(s==="data"||s==="start"||s==="size"||s==="creation_time"||s==="modification_time")continue;if(l.DIFF_PRIMITIVE_ARRAY_PROP_NAMES.indexOf(s)>-1)continue;if(e[s]!==n[s])return!1}return!0},l.boxEqual=function(e,n){if(!l.boxEqualFields(e,n))return!1;for(var s=0;s<l.DIFF_BOXES_PROP_NAMES.length;s++){var c=l.DIFF_BOXES_PROP_NAMES[s];if(e[c]&&n[c]&&!l.boxEqual(e[c],n[c]))return!1}return!0};var g=function(){};g.prototype.parseSample=function(e){var n={},s;n.resources=[];var c=new a(e.data.buffer);if(!e.subsamples||e.subsamples.length===0)n.documentString=c.readString(e.data.length);else if(n.documentString=c.readString(e.subsamples[0].size),e.subsamples.length>1)for(s=1;s<e.subsamples.length;s++)n.resources[s]=c.readUint8Array(e.subsamples[s].size);return typeof DOMParser<"u"&&(n.document=new DOMParser().parseFromString(n.documentString,"application/xml")),n};var y=function(){};y.prototype.parseSample=function(e){var n,s=new a(e.data.buffer);return n=s.readString(e.data.length),n},y.prototype.parseConfig=function(e){var n,s=new a(e.buffer);return s.readUint32(),n=s.readCString(),n},t.XMLSubtitlein4Parser=g,t.Textin4Parser=y;var v=function(e){this.stream=e||new d,this.boxes=[],this.mdats=[],this.moofs=[],this.isProgressive=!1,this.moovStartFound=!1,this.onMoovStart=null,this.moovStartSent=!1,this.onReady=null,this.readySent=!1,this.onSegment=null,this.onSamples=null,this.onError=null,this.sampleListBuilt=!1,this.fragmentedTracks=[],this.extractedTracks=[],this.isFragmentationInitialized=!1,this.sampleProcessingStarted=!1,this.nextMoofNumber=0,this.itemListBuilt=!1,this.onSidx=null,this.sidxSent=!1};v.prototype.setSegmentOptions=function(e,n,s){var c=this.getTrackById(e);if(c){var f={};this.fragmentedTracks.push(f),f.id=e,f.user=n,f.trak=c,c.nextSample=0,f.segmentStream=null,f.nb_samples=1e3,f.rapAlignement=!0,s&&(s.nbSamples&&(f.nb_samples=s.nbSamples),s.rapAlignement&&(f.rapAlignement=s.rapAlignement))}},v.prototype.unsetSegmentOptions=function(e){for(var n=-1,s=0;s<this.fragmentedTracks.length;s++){var c=this.fragmentedTracks[s];c.id==e&&(n=s)}n>-1&&this.fragmentedTracks.splice(n,1)},v.prototype.setExtractionOptions=function(e,n,s){var c=this.getTrackById(e);if(c){var f={};this.extractedTracks.push(f),f.id=e,f.user=n,f.trak=c,c.nextSample=0,f.nb_samples=1e3,f.samples=[],s&&s.nbSamples&&(f.nb_samples=s.nbSamples)}},v.prototype.unsetExtractionOptions=function(e){for(var n=-1,s=0;s<this.extractedTracks.length;s++){var c=this.extractedTracks[s];c.id==e&&(n=s)}n>-1&&this.extractedTracks.splice(n,1)},v.prototype.parse=function(){var e,n,s=!1;if(!(this.restoreParsePosition&&!this.restoreParsePosition()))for(;;)if(this.hasIncompleteMdat&&this.hasIncompleteMdat()){if(this.processIncompleteMdat())continue;return}else if(this.saveParsePosition&&this.saveParsePosition(),e=l.parseOneBox(this.stream,s),e.code===l.ERR_NOT_ENOUGH_DATA)if(this.processIncompleteBox){if(this.processIncompleteBox(e))continue;return}else return;else{var c;switch(n=e.box,c=n.type!=="uuid"?n.type:n.uuid,this.boxes.push(n),c){case"mdat":this.mdats.push(n);break;case"moof":this.moofs.push(n);break;case"moov":this.moovStartFound=!0,this.mdats.length===0&&(this.isProgressive=!0);default:this[c]!==void 0&&r.warn("ISOFile","Duplicate Box of type: "+c+", overriding previous occurrence"),this[c]=n;break}this.updateUsedBytes&&this.updateUsedBytes(n,e)}},v.prototype.checkBuffer=function(e){if(e==null)throw"Buffer must be defined and non empty";if(e.fileStart===void 0)throw"Buffer must have a fileStart property";return e.byteLength===0?(r.warn("ISOFile","Ignoring empty buffer (fileStart: "+e.fileStart+")"),this.stream.logBufferLevel(),!1):(r.info("ISOFile","Processing buffer (fileStart: "+e.fileStart+")"),e.usedBytes=0,this.stream.insertBuffer(e),this.stream.logBufferLevel(),this.stream.initialized()?!0:(r.warn("ISOFile","Not ready to start parsing"),!1))},v.prototype.appendBuffer=function(e,n){var s;if(this.checkBuffer(e))return this.parse(),this.moovStartFound&&!this.moovStartSent&&(this.moovStartSent=!0,this.onMoovStart&&this.onMoovStart()),this.moov?(this.sampleListBuilt||(this.buildSampleLists(),this.sampleListBuilt=!0),this.updateSampleLists(),this.onReady&&!this.readySent&&(this.readySent=!0,this.onReady(this.getInfo())),this.processSamples(n),this.nextSeekPosition?(s=this.nextSeekPosition,this.nextSeekPosition=void 0):s=this.nextParsePosition,this.stream.getEndFilePositionAfter&&(s=this.stream.getEndFilePositionAfter(s))):this.nextParsePosition?s=this.nextParsePosition:s=0,this.sidx&&this.onSidx&&!this.sidxSent&&(this.onSidx(this.sidx),this.sidxSent=!0),this.meta&&(this.flattenItemInfo&&!this.itemListBuilt&&(this.flattenItemInfo(),this.itemListBuilt=!0),this.processItems&&this.processItems(this.onItem)),this.stream.cleanBuffers&&(r.info("ISOFile","Done processing buffer (fileStart: "+e.fileStart+") - next buffer to fetch should have a fileStart position of "+s),this.stream.logBufferLevel(),this.stream.cleanBuffers(),this.stream.logBufferLevel(!0),r.info("ISOFile","Sample data size in memory: "+this.getAllocatedSampleDataSize())),s},v.prototype.getInfo=function(){var e,n,s={},c,f,m,p,_=new Date("1904-01-01T00:00:00Z").getTime();if(this.moov)for(s.hasMoov=!0,s.duration=this.moov.mvhd.duration,s.timescale=this.moov.mvhd.timescale,s.isFragmented=this.moov.mvex!=null,s.isFragmented&&this.moov.mvex.mehd&&(s.fragment_duration=this.moov.mvex.mehd.fragment_duration),s.isProgressive=this.isProgressive,s.hasIOD=this.moov.iods!=null,s.brands=[],s.brands.push(this.ftyp.major_brand),s.brands=s.brands.concat(this.ftyp.compatible_brands),s.created=new Date(_+this.moov.mvhd.creation_time*1e3),s.modified=new Date(_+this.moov.mvhd.modification_time*1e3),s.tracks=[],s.audioTracks=[],s.videoTracks=[],s.subtitleTracks=[],s.metadataTracks=[],s.hintTracks=[],s.otherTracks=[],e=0;e<this.moov.traks.length;e++){if(c=this.moov.traks[e],p=c.mdia.minf.stbl.stsd.entries[0],f={},s.tracks.push(f),f.id=c.tkhd.track_id,f.name=c.mdia.hdlr.name,f.references=[],c.tref)for(n=0;n<c.tref.boxes.length;n++)m={},f.references.push(m),m.type=c.tref.boxes[n].type,m.track_ids=c.tref.boxes[n].track_ids;c.edts&&(f.edits=c.edts.elst.entries),f.created=new Date(_+c.tkhd.creation_time*1e3),f.modified=new Date(_+c.tkhd.modification_time*1e3),f.movie_duration=c.tkhd.duration,f.movie_timescale=s.timescale,f.layer=c.tkhd.layer,f.alternate_group=c.tkhd.alternate_group,f.volume=c.tkhd.volume,f.matrix=c.tkhd.matrix,f.track_width=c.tkhd.width/65536,f.track_height=c.tkhd.height/65536,f.timescale=c.mdia.mdhd.timescale,f.cts_shift=c.mdia.minf.stbl.cslg,f.duration=c.mdia.mdhd.duration,f.samples_duration=c.samples_duration,f.codec=p.getCodec(),f.kind=c.udta&&c.udta.kinds.length?c.udta.kinds[0]:{schemeURI:"",value:""},f.language=c.mdia.elng?c.mdia.elng.extended_language:c.mdia.mdhd.languageString,f.nb_samples=c.samples.length,f.size=c.samples_size,f.bitrate=f.size*8*f.timescale/f.samples_duration,p.isAudio()?(f.type="audio",s.audioTracks.push(f),f.audio={},f.audio.sample_rate=p.getSampleRate(),f.audio.channel_count=p.getChannelCount(),f.audio.sample_size=p.getSampleSize()):p.isVideo()?(f.type="video",s.videoTracks.push(f),f.video={},f.video.width=p.getWidth(),f.video.height=p.getHeight()):p.isSubtitle()?(f.type="subtitles",s.subtitleTracks.push(f)):p.isHint()?(f.type="metadata",s.hintTracks.push(f)):p.isMetadata()?(f.type="metadata",s.metadataTracks.push(f)):(f.type="metadata",s.otherTracks.push(f))}else s.hasMoov=!1;if(s.mime="",s.hasMoov&&s.tracks){for(s.videoTracks&&s.videoTracks.length>0?s.mime+='video/mp4; codecs="':s.audioTracks&&s.audioTracks.length>0?s.mime+='audio/mp4; codecs="':s.mime+='application/mp4; codecs="',e=0;e<s.tracks.length;e++)e!==0&&(s.mime+=","),s.mime+=s.tracks[e].codec;s.mime+='"; profiles="',s.mime+=this.ftyp.compatible_brands.join(),s.mime+='"'}return s},v.prototype.setNextSeekPositionFromSample=function(e){e&&(this.nextSeekPosition?this.nextSeekPosition=Math.min(e.offset+e.alreadyRead,this.nextSeekPosition):this.nextSeekPosition=e.offset+e.alreadyRead)},v.prototype.processSamples=function(e){var n,s;if(this.sampleProcessingStarted){if(this.isFragmentationInitialized&&this.onSegment!==null)for(n=0;n<this.fragmentedTracks.length;n++){var c=this.fragmentedTracks[n];for(s=c.trak;s.nextSample<s.samples.length&&this.sampleProcessingStarted;){r.debug("ISOFile","Creating media fragment on track #"+c.id+" for sample "+s.nextSample);var f=this.createFragment(c.id,s.nextSample,c.segmentStream);if(f)c.segmentStream=f,s.nextSample++;else break;if((s.nextSample%c.nb_samples===0||e||s.nextSample>=s.samples.length)&&(r.info("ISOFile","Sending fragmented data on track #"+c.id+" for samples ["+Math.max(0,s.nextSample-c.nb_samples)+","+(s.nextSample-1)+"]"),r.info("ISOFile","Sample data size in memory: "+this.getAllocatedSampleDataSize()),this.onSegment&&this.onSegment(c.id,c.user,c.segmentStream.buffer,s.nextSample,e||s.nextSample>=s.samples.length),c.segmentStream=null,c!==this.fragmentedTracks[n]))break}}if(this.onSamples!==null)for(n=0;n<this.extractedTracks.length;n++){var m=this.extractedTracks[n];for(s=m.trak;s.nextSample<s.samples.length&&this.sampleProcessingStarted;){r.debug("ISOFile","Exporting on track #"+m.id+" sample #"+s.nextSample);var p=this.getSample(s,s.nextSample);if(p)s.nextSample++,m.samples.push(p);else{this.setNextSeekPositionFromSample(s.samples[s.nextSample]);break}if((s.nextSample%m.nb_samples===0||s.nextSample>=s.samples.length)&&(r.debug("ISOFile","Sending samples on track #"+m.id+" for sample "+s.nextSample),this.onSamples&&this.onSamples(m.id,m.user,m.samples),m.samples=[],m!==this.extractedTracks[n]))break}}}},v.prototype.getBox=function(e){var n=this.getBoxes(e,!0);return n.length?n[0]:null},v.prototype.getBoxes=function(e,n){var s=[];return v._sweep.call(this,e,s,n),s},v._sweep=function(e,n,s){this.type&&this.type==e&&n.push(this);for(var c in this.boxes){if(n.length&&s)return;v._sweep.call(this.boxes[c],e,n,s)}},v.prototype.getTrackSamplesInfo=function(e){var n=this.getTrackById(e);if(n)return n.samples},v.prototype.getTrackSample=function(e,n){var s=this.getTrackById(e),c=this.getSample(s,n);return c},v.prototype.releaseUsedSamples=function(e,n){var s=0,c=this.getTrackById(e);c.lastValidSample||(c.lastValidSample=0);for(var f=c.lastValidSample;f<n;f++)s+=this.releaseSample(c,f);r.info("ISOFile","Track #"+e+" released samples up to "+n+" (released size: "+s+", remaining: "+this.samplesDataSize+")"),c.lastValidSample=n},v.prototype.start=function(){this.sampleProcessingStarted=!0,this.processSamples(!1)},v.prototype.stop=function(){this.sampleProcessingStarted=!1},v.prototype.flush=function(){r.info("ISOFile","Flushing remaining samples"),this.updateSampleLists(),this.processSamples(!0),this.stream.cleanBuffers(),this.stream.logBufferLevel(!0)},v.prototype.seekTrack=function(e,n,s){var c,f,m=1/0,p=0,_=0,S;if(s.samples.length===0)return r.info("ISOFile","No sample in track, cannot seek! Using time "+r.getDurationString(0,1)+" and offset: 0"),{offset:0,time:0};for(c=0;c<s.samples.length;c++){if(f=s.samples[c],c===0)_=0,S=f.timescale;else if(f.cts>e*f.timescale){_=c-1;break}n&&f.is_sync&&(p=c)}for(n&&(_=p),e=s.samples[_].cts,s.nextSample=_;s.samples[_].alreadyRead===s.samples[_].size&&s.samples[_+1];)_++;return m=s.samples[_].offset+s.samples[_].alreadyRead,r.info("ISOFile","Seeking to "+(n?"RAP":"")+" sample #"+s.nextSample+" on track "+s.tkhd.track_id+", time "+r.getDurationString(e,S)+" and offset: "+m),{offset:m,time:e/S}},v.prototype.getTrackDuration=function(e){var n;return e.samples?(n=e.samples[e.samples.length-1],(n.cts+n.duration)/n.timescale):1/0},v.prototype.seek=function(e,n){var s=this.moov,c,f,m,p={offset:1/0,time:1/0};if(this.moov){for(m=0;m<s.traks.length;m++)c=s.traks[m],!(e>this.getTrackDuration(c))&&(f=this.seekTrack(e,n,c),f.offset<p.offset&&(p.offset=f.offset),f.time<p.time&&(p.time=f.time));return r.info("ISOFile","Seeking at time "+r.getDurationString(p.time,1)+" needs a buffer with a fileStart position of "+p.offset),p.offset===1/0?p={offset:this.nextParsePosition,time:0}:p.offset=this.stream.getEndFilePositionAfter(p.offset),r.info("ISOFile","Adjusted seek position (after checking data already in buffer): "+p.offset),p}else throw"Cannot seek: moov not received!"},v.prototype.equal=function(e){for(var n=0;n<this.boxes.length&&n<e.boxes.length;){var s=this.boxes[n],c=e.boxes[n];if(!l.boxEqual(s,c))return!1;n++}return!0},t.ISOFile=v,v.prototype.lastBoxStartPosition=0,v.prototype.parsingMdat=null,v.prototype.nextParsePosition=0,v.prototype.discardMdatData=!1,v.prototype.processIncompleteBox=function(e){var n,s,c;return e.type==="mdat"?(n=new l[e.type+"Box"](e.size),this.parsingMdat=n,this.boxes.push(n),this.mdats.push(n),n.start=e.start,n.hdr_size=e.hdr_size,this.stream.addUsedBytes(n.hdr_size),this.lastBoxStartPosition=n.start+n.size,c=this.stream.seek(n.start+n.size,!1,this.discardMdatData),c?(this.parsingMdat=null,!0):(this.moovStartFound?this.nextParsePosition=this.stream.findEndContiguousBuf():this.nextParsePosition=n.start+n.size,!1)):(e.type==="moov"&&(this.moovStartFound=!0,this.mdats.length===0&&(this.isProgressive=!0)),s=this.stream.mergeNextBuffer?this.stream.mergeNextBuffer():!1,s?(this.nextParsePosition=this.stream.getEndPosition(),!0):(e.type?this.moovStartFound?this.nextParsePosition=this.stream.getEndPosition():this.nextParsePosition=this.stream.getPosition()+e.size:this.nextParsePosition=this.stream.getEndPosition(),!1))},v.prototype.hasIncompleteMdat=function(){return this.parsingMdat!==null},v.prototype.processIncompleteMdat=function(){var e,n;return e=this.parsingMdat,n=this.stream.seek(e.start+e.size,!1,this.discardMdatData),n?(r.debug("ISOFile","Found 'mdat' end in buffered data"),this.parsingMdat=null,!0):(this.nextParsePosition=this.stream.findEndContiguousBuf(),!1)},v.prototype.restoreParsePosition=function(){return this.stream.seek(this.lastBoxStartPosition,!0,this.discardMdatData)},v.prototype.saveParsePosition=function(){this.lastBoxStartPosition=this.stream.getPosition()},v.prototype.updateUsedBytes=function(e,n){this.stream.addUsedBytes&&(e.type==="mdat"?(this.stream.addUsedBytes(e.hdr_size),this.discardMdatData&&this.stream.addUsedBytes(e.size-e.hdr_size)):this.stream.addUsedBytes(e.size))},v.prototype.add=l.Box.prototype.add,v.prototype.addBox=l.Box.prototype.addBox,v.prototype.init=function(e){var n=e||{};this.add("ftyp").set("major_brand",n.brands&&n.brands[0]||"iso4").set("minor_version",0).set("compatible_brands",n.brands||["iso4"]);var s=this.add("moov");return s.add("mvhd").set("timescale",n.timescale||600).set("rate",n.rate||65536).set("creation_time",0).set("modification_time",0).set("duration",n.duration||0).set("volume",n.width?0:256).set("matrix",[65536,0,0,0,65536,0,0,0,1073741824]).set("next_track_id",1),s.add("mvex"),this},v.prototype.addTrack=function(e){this.moov||this.init(e);var n=e||{};n.width=n.width||320,n.height=n.height||320,n.id=n.id||this.moov.mvhd.next_track_id,n.type=n.type||"avc1";var s=this.moov.add("trak");this.moov.mvhd.next_track_id=n.id+1,s.add("tkhd").set("flags",l.TKHD_FLAG_ENABLED|l.TKHD_FLAG_IN_MOVIE|l.TKHD_FLAG_IN_PREVIEW).set("creation_time",0).set("modification_time",0).set("track_id",n.id).set("duration",n.duration||0).set("layer",n.layer||0).set("alternate_group",0).set("volume",1).set("matrix",[0,0,0,0,0,0,0,0,0]).set("width",n.width<<16).set("height",n.height<<16);var c=s.add("mdia");c.add("mdhd").set("creation_time",0).set("modification_time",0).set("timescale",n.timescale||1).set("duration",n.media_duration||0).set("language",n.language||"und"),c.add("hdlr").set("handler",n.hdlr||"vide").set("name",n.name||"Track created with MP4Box.js"),c.add("elng").set("extended_language",n.language||"fr-FR");var f=c.add("minf");if(l[n.type+"SampleEntry"]!==void 0){var m=new l[n.type+"SampleEntry"];m.data_reference_index=1;var p="";for(var _ in l.sampleEntryCodes)for(var S=l.sampleEntryCodes[_],x=0;x<S.length;x++)if(S.indexOf(n.type)>-1){p=_;break}switch(p){case"Visual":if(f.add("vmhd").set("graphicsmode",0).set("opcolor",[0,0,0]),m.set("width",n.width).set("height",n.height).set("horizresolution",72<<16).set("vertresolution",72<<16).set("frame_count",1).set("compressorname",n.type+" Compressor").set("depth",24),n.avcDecoderConfigRecord){var w=new l.avcCBox;w.parse(new a(n.avcDecoderConfigRecord)),m.addBox(w)}else if(n.hevcDecoderConfigRecord){var U=new l.hvcCBox;U.parse(new a(n.hevcDecoderConfigRecord)),m.addBox(U)}break;case"Audio":f.add("smhd").set("balance",n.balance||0),m.set("channel_count",n.channel_count||2).set("samplesize",n.samplesize||16).set("samplerate",n.samplerate||65536);break;case"Hint":f.add("hmhd");break;case"Subtitle":switch(f.add("sthd"),n.type){case"stpp":m.set("namespace",n.namespace||"nonamespace").set("schema_location",n.schema_location||"").set("auxiliary_mime_types",n.auxiliary_mime_types||"");break}break;case"Metadata":f.add("nmhd");break;case"System":f.add("nmhd");break;default:f.add("nmhd");break}n.description&&m.addBox(n.description),n.description_boxes&&n.description_boxes.forEach(function(E){m.addBox(E)}),f.add("dinf").add("dref").addEntry(new l["url Box"]().set("flags",1));var A=f.add("stbl");return A.add("stsd").addEntry(m),A.add("stts").set("sample_counts",[]).set("sample_deltas",[]),A.add("stsc").set("first_chunk",[]).set("samples_per_chunk",[]).set("sample_description_index",[]),A.add("stco").set("chunk_offsets",[]),A.add("stsz").set("sample_sizes",[]),this.moov.mvex.add("trex").set("track_id",n.id).set("default_sample_description_index",n.default_sample_description_index||1).set("default_sample_duration",n.default_sample_duration||0).set("default_sample_size",n.default_sample_size||0).set("default_sample_flags",n.default_sample_flags||0),this.buildTrakSampleLists(s),n.id}},l.Box.prototype.computeSize=function(e){var n=e||new o;n.endianness=o.BIG_ENDIAN,this.write(n)},v.prototype.addSample=function(e,n,s){var c=s||{},f={},m=this.getTrackById(e);if(m!==null){f.number=m.samples.length,f.track_id=m.tkhd.track_id,f.timescale=m.mdia.mdhd.timescale,f.description_index=c.sample_description_index?c.sample_description_index-1:0,f.description=m.mdia.minf.stbl.stsd.entries[f.description_index],f.data=n,f.size=n.byteLength,f.alreadyRead=f.size,f.duration=c.duration||1,f.cts=c.cts||0,f.dts=c.dts||0,f.is_sync=c.is_sync||!1,f.is_leading=c.is_leading||0,f.depends_on=c.depends_on||0,f.is_depended_on=c.is_depended_on||0,f.has_redundancy=c.has_redundancy||0,f.degradation_priority=c.degradation_priority||0,f.offset=0,f.subsamples=c.subsamples,m.samples.push(f),m.samples_size+=f.size,m.samples_duration+=f.duration,m.first_dts===void 0&&(m.first_dts=c.dts),this.processSamples();var p=this.createSingleSampleMoof(f);return this.addBox(p),p.computeSize(),p.trafs[0].truns[0].data_offset=p.size+8,this.add("mdat").data=new Uint8Array(n),f}},v.prototype.createSingleSampleMoof=function(e){var n=0;e.is_sync?n=1<<25:n=65536;var s=new l.moofBox;s.add("mfhd").set("sequence_number",this.nextMoofNumber),this.nextMoofNumber++;var c=s.add("traf"),f=this.getTrackById(e.track_id);return c.add("tfhd").set("track_id",e.track_id).set("flags",l.TFHD_FLAG_DEFAULT_BASE_IS_MOOF),c.add("tfdt").set("baseMediaDecodeTime",e.dts-(f.first_dts||0)),c.add("trun").set("flags",l.TRUN_FLAGS_DATA_OFFSET|l.TRUN_FLAGS_DURATION|l.TRUN_FLAGS_SIZE|l.TRUN_FLAGS_FLAGS|l.TRUN_FLAGS_CTS_OFFSET).set("data_offset",0).set("first_sample_flags",0).set("sample_count",1).set("sample_duration",[e.duration]).set("sample_size",[e.size]).set("sample_flags",[n]).set("sample_composition_time_offset",[e.cts-e.dts]),s},v.prototype.lastMoofIndex=0,v.prototype.samplesDataSize=0,v.prototype.resetTables=function(){var e,n,s,c,f,m,p,_;for(this.initial_duration=this.moov.mvhd.duration,this.moov.mvhd.duration=0,e=0;e<this.moov.traks.length;e++){n=this.moov.traks[e],n.tkhd.duration=0,n.mdia.mdhd.duration=0,s=n.mdia.minf.stbl.stco||n.mdia.minf.stbl.co64,s.chunk_offsets=[],c=n.mdia.minf.stbl.stsc,c.first_chunk=[],c.samples_per_chunk=[],c.sample_description_index=[],f=n.mdia.minf.stbl.stsz||n.mdia.minf.stbl.stz2,f.sample_sizes=[],m=n.mdia.minf.stbl.stts,m.sample_counts=[],m.sample_deltas=[],p=n.mdia.minf.stbl.ctts,p&&(p.sample_counts=[],p.sample_offsets=[]),_=n.mdia.minf.stbl.stss;var S=n.mdia.minf.stbl.boxes.indexOf(_);S!=-1&&(n.mdia.minf.stbl.boxes[S]=null)}},v.initSampleGroups=function(e,n,s,c,f){var m,p,_,S;function x(w,U,A){this.grouping_type=w,this.grouping_type_parameter=U,this.sbgp=A,this.last_sample_in_run=-1,this.entry_index=-1}for(n&&(n.sample_groups_info=[]),e.sample_groups_info||(e.sample_groups_info=[]),p=0;p<s.length;p++){for(S=s[p].grouping_type+"/"+s[p].grouping_type_parameter,_=new x(s[p].grouping_type,s[p].grouping_type_parameter,s[p]),n&&(n.sample_groups_info[S]=_),e.sample_groups_info[S]||(e.sample_groups_info[S]=_),m=0;m<c.length;m++)c[m].grouping_type===s[p].grouping_type&&(_.description=c[m],_.description.used=!0);if(f)for(m=0;m<f.length;m++)f[m].grouping_type===s[p].grouping_type&&(_.fragment_description=f[m],_.fragment_description.used=!0,_.is_fragment=!0)}if(n){if(f)for(p=0;p<f.length;p++)!f[p].used&&f[p].version>=2&&(S=f[p].grouping_type+"/0",_=new x(f[p].grouping_type,0),_.is_fragment=!0,n.sample_groups_info[S]||(n.sample_groups_info[S]=_))}else for(p=0;p<c.length;p++)!c[p].used&&c[p].version>=2&&(S=c[p].grouping_type+"/0",_=new x(c[p].grouping_type,0),e.sample_groups_info[S]||(e.sample_groups_info[S]=_))},v.setSampleGroupProperties=function(e,n,s,c){var f,m;n.sample_groups=[];for(f in c)if(n.sample_groups[f]={},n.sample_groups[f].grouping_type=c[f].grouping_type,n.sample_groups[f].grouping_type_parameter=c[f].grouping_type_parameter,s>=c[f].last_sample_in_run&&(c[f].last_sample_in_run<0&&(c[f].last_sample_in_run=0),c[f].entry_index++,c[f].entry_index<=c[f].sbgp.entries.length-1&&(c[f].last_sample_in_run+=c[f].sbgp.entries[c[f].entry_index].sample_count)),c[f].entry_index<=c[f].sbgp.entries.length-1?n.sample_groups[f].group_description_index=c[f].sbgp.entries[c[f].entry_index].group_description_index:n.sample_groups[f].group_description_index=-1,n.sample_groups[f].group_description_index!==0){var p;c[f].fragment_description?p=c[f].fragment_description:p=c[f].description,n.sample_groups[f].group_description_index>0?(n.sample_groups[f].group_description_index>65535?m=(n.sample_groups[f].group_description_index>>16)-1:m=n.sample_groups[f].group_description_index-1,p&&m>=0&&(n.sample_groups[f].description=p.entries[m])):p&&p.version>=2&&p.default_group_description_index>0&&(n.sample_groups[f].description=p.entries[p.default_group_description_index-1])}},v.process_sdtp=function(e,n,s){n&&(e?(n.is_leading=e.is_leading[s],n.depends_on=e.sample_depends_on[s],n.is_depended_on=e.sample_is_depended_on[s],n.has_redundancy=e.sample_has_redundancy[s]):(n.is_leading=0,n.depends_on=0,n.is_depended_on=0,n.has_redundancy=0))},v.prototype.buildSampleLists=function(){var e,n;for(e=0;e<this.moov.traks.length;e++)n=this.moov.traks[e],this.buildTrakSampleLists(n)},v.prototype.buildTrakSampleLists=function(e){var n,s,c,f,m,p,_,S,x,w,U,A,E,T,P,z,R,D,B,F,M,I,L,O;if(e.samples=[],e.samples_duration=0,e.samples_size=0,s=e.mdia.minf.stbl.stco||e.mdia.minf.stbl.co64,c=e.mdia.minf.stbl.stsc,f=e.mdia.minf.stbl.stsz||e.mdia.minf.stbl.stz2,m=e.mdia.minf.stbl.stts,p=e.mdia.minf.stbl.ctts,_=e.mdia.minf.stbl.stss,S=e.mdia.minf.stbl.stsd,x=e.mdia.minf.stbl.subs,A=e.mdia.minf.stbl.stdp,w=e.mdia.minf.stbl.sbgps,U=e.mdia.minf.stbl.sgpds,D=-1,B=-1,F=-1,M=-1,I=0,L=0,O=0,v.initSampleGroups(e,null,w,U),!(typeof f>"u")){for(n=0;n<f.sample_sizes.length;n++){var k={};k.number=n,k.track_id=e.tkhd.track_id,k.timescale=e.mdia.mdhd.timescale,k.alreadyRead=0,e.samples[n]=k,k.size=f.sample_sizes[n],e.samples_size+=k.size,n===0?(T=1,E=0,k.chunk_index=T,k.chunk_run_index=E,R=c.samples_per_chunk[E],z=0,E+1<c.first_chunk.length?P=c.first_chunk[E+1]-1:P=1/0):n<R?(k.chunk_index=T,k.chunk_run_index=E):(T++,k.chunk_index=T,z=0,T<=P||(E++,E+1<c.first_chunk.length?P=c.first_chunk[E+1]-1:P=1/0),k.chunk_run_index=E,R+=c.samples_per_chunk[E]),k.description_index=c.sample_description_index[k.chunk_run_index]-1,k.description=S.entries[k.description_index],k.offset=s.chunk_offsets[k.chunk_index-1]+z,z+=k.size,n>D&&(B++,D<0&&(D=0),D+=m.sample_counts[B]),n>0?(e.samples[n-1].duration=m.sample_deltas[B],e.samples_duration+=e.samples[n-1].duration,k.dts=e.samples[n-1].dts+e.samples[n-1].duration):k.dts=0,p?(n>=F&&(M++,F<0&&(F=0),F+=p.sample_counts[M]),k.cts=e.samples[n].dts+p.sample_offsets[M]):k.cts=k.dts,_?(n==_.sample_numbers[I]-1?(k.is_sync=!0,I++):(k.is_sync=!1,k.degradation_priority=0),x&&x.entries[L].sample_delta+O==n+1&&(k.subsamples=x.entries[L].subsamples,O+=x.entries[L].sample_delta,L++)):k.is_sync=!0,v.process_sdtp(e.mdia.minf.stbl.sdtp,k,k.number),A?k.degradation_priority=A.priority[n]:k.degradation_priority=0,x&&x.entries[L].sample_delta+O==n&&(k.subsamples=x.entries[L].subsamples,O+=x.entries[L].sample_delta),(w.length>0||U.length>0)&&v.setSampleGroupProperties(e,k,n,e.sample_groups_info)}n>0&&(e.samples[n-1].duration=Math.max(e.mdia.mdhd.duration-e.samples[n-1].dts,0),e.samples_duration+=e.samples[n-1].duration)}},v.prototype.updateSampleLists=function(){var e,n,s,c,f,m,p,_,S,x,w,U,A,E,T;if(this.moov!==void 0){for(;this.lastMoofIndex<this.moofs.length;)if(S=this.moofs[this.lastMoofIndex],this.lastMoofIndex++,S.type=="moof")for(x=S,e=0;e<x.trafs.length;e++){for(w=x.trafs[e],U=this.getTrackById(w.tfhd.track_id),A=this.getTrexById(w.tfhd.track_id),w.tfhd.flags&l.TFHD_FLAG_SAMPLE_DESC?c=w.tfhd.default_sample_description_index:c=A?A.default_sample_description_index:1,w.tfhd.flags&l.TFHD_FLAG_SAMPLE_DUR?f=w.tfhd.default_sample_duration:f=A?A.default_sample_duration:0,w.tfhd.flags&l.TFHD_FLAG_SAMPLE_SIZE?m=w.tfhd.default_sample_size:m=A?A.default_sample_size:0,w.tfhd.flags&l.TFHD_FLAG_SAMPLE_FLAGS?p=w.tfhd.default_sample_flags:p=A?A.default_sample_flags:0,w.sample_number=0,w.sbgps.length>0&&v.initSampleGroups(U,w,w.sbgps,U.mdia.minf.stbl.sgpds,w.sgpds),n=0;n<w.truns.length;n++){var P=w.truns[n];for(s=0;s<P.sample_count;s++){E={},E.moof_number=this.lastMoofIndex,E.number_in_traf=w.sample_number,w.sample_number++,E.number=U.samples.length,w.first_sample_index=U.samples.length,U.samples.push(E),E.track_id=U.tkhd.track_id,E.timescale=U.mdia.mdhd.timescale,E.description_index=c-1,E.description=U.mdia.minf.stbl.stsd.entries[E.description_index],E.size=m,P.flags&l.TRUN_FLAGS_SIZE&&(E.size=P.sample_size[s]),U.samples_size+=E.size,E.duration=f,P.flags&l.TRUN_FLAGS_DURATION&&(E.duration=P.sample_duration[s]),U.samples_duration+=E.duration,U.first_traf_merged||s>0?E.dts=U.samples[U.samples.length-2].dts+U.samples[U.samples.length-2].duration:(w.tfdt?E.dts=w.tfdt.baseMediaDecodeTime:E.dts=0,U.first_traf_merged=!0),E.cts=E.dts,P.flags&l.TRUN_FLAGS_CTS_OFFSET&&(E.cts=E.dts+P.sample_composition_time_offset[s]),T=p,P.flags&l.TRUN_FLAGS_FLAGS?T=P.sample_flags[s]:s===0&&P.flags&l.TRUN_FLAGS_FIRST_FLAG&&(T=P.first_sample_flags),E.is_sync=!(T>>16&1),E.is_leading=T>>26&3,E.depends_on=T>>24&3,E.is_depended_on=T>>22&3,E.has_redundancy=T>>20&3,E.degradation_priority=T&65535;var z=!!(w.tfhd.flags&l.TFHD_FLAG_BASE_DATA_OFFSET),R=!!(w.tfhd.flags&l.TFHD_FLAG_DEFAULT_BASE_IS_MOOF),D=!!(P.flags&l.TRUN_FLAGS_DATA_OFFSET),B=0;z?B=w.tfhd.base_data_offset:R||n===0?B=x.start:B=_,n===0&&s===0?D?E.offset=B+P.data_offset:E.offset=B:E.offset=_,_=E.offset+E.size,(w.sbgps.length>0||w.sgpds.length>0||U.mdia.minf.stbl.sbgps.length>0||U.mdia.minf.stbl.sgpds.length>0)&&v.setSampleGroupProperties(U,E,E.number_in_traf,w.sample_groups_info)}}if(w.subs){U.has_fragment_subsamples=!0;var F=w.first_sample_index;for(n=0;n<w.subs.entries.length;n++)F+=w.subs.entries[n].sample_delta,E=U.samples[F-1],E.subsamples=w.subs.entries[n].subsamples}}}},v.prototype.getSample=function(e,n){var s,c=e.samples[n];if(!this.moov)return null;if(!c.data)c.data=new Uint8Array(c.size),c.alreadyRead=0,this.samplesDataSize+=c.size,r.debug("ISOFile","Allocating sample #"+n+" on track #"+e.tkhd.track_id+" of size "+c.size+" (total: "+this.samplesDataSize+")");else if(c.alreadyRead==c.size)return c;for(;;){var f=this.stream.findPosition(!0,c.offset+c.alreadyRead,!1);if(f>-1){s=this.stream.buffers[f];var m=s.byteLength-(c.offset+c.alreadyRead-s.fileStart);if(c.size-c.alreadyRead<=m)return r.debug("ISOFile","Getting sample #"+n+" data (alreadyRead: "+c.alreadyRead+" offset: "+(c.offset+c.alreadyRead-s.fileStart)+" read size: "+(c.size-c.alreadyRead)+" full size: "+c.size+")"),o.memcpy(c.data.buffer,c.alreadyRead,s,c.offset+c.alreadyRead-s.fileStart,c.size-c.alreadyRead),s.usedBytes+=c.size-c.alreadyRead,this.stream.logBufferLevel(),c.alreadyRead=c.size,c;if(m===0)return null;r.debug("ISOFile","Getting sample #"+n+" partial data (alreadyRead: "+c.alreadyRead+" offset: "+(c.offset+c.alreadyRead-s.fileStart)+" read size: "+m+" full size: "+c.size+")"),o.memcpy(c.data.buffer,c.alreadyRead,s,c.offset+c.alreadyRead-s.fileStart,m),c.alreadyRead+=m,s.usedBytes+=m,this.stream.logBufferLevel()}else return null}},v.prototype.releaseSample=function(e,n){var s=e.samples[n];return s.data?(this.samplesDataSize-=s.size,s.data=null,s.alreadyRead=0,s.size):0},v.prototype.getAllocatedSampleDataSize=function(){return this.samplesDataSize},v.prototype.getCodecs=function(){var e,n="";for(e=0;e<this.moov.traks.length;e++){var s=this.moov.traks[e];e>0&&(n+=","),n+=s.mdia.minf.stbl.stsd.entries[0].getCodec()}return n},v.prototype.getTrexById=function(e){var n;if(!this.moov||!this.moov.mvex)return null;for(n=0;n<this.moov.mvex.trexs.length;n++){var s=this.moov.mvex.trexs[n];if(s.track_id==e)return s}return null},v.prototype.getTrackById=function(e){if(this.moov===void 0)return null;for(var n=0;n<this.moov.traks.length;n++){var s=this.moov.traks[n];if(s.tkhd.track_id==e)return s}return null},v.prototype.items=[],v.prototype.itemsDataSize=0,v.prototype.flattenItemInfo=function(){var e=this.items,n,s,c,f=this.meta;if(f!=null&&f.hdlr!==void 0&&f.iinf!==void 0){for(n=0;n<f.iinf.item_infos.length;n++)c={},c.id=f.iinf.item_infos[n].item_ID,e[c.id]=c,c.ref_to=[],c.name=f.iinf.item_infos[n].item_name,f.iinf.item_infos[n].protection_index>0&&(c.protection=f.ipro.protections[f.iinf.item_infos[n].protection_index-1]),f.iinf.item_infos[n].item_type?c.type=f.iinf.item_infos[n].item_type:c.type="mime",c.content_type=f.iinf.item_infos[n].content_type,c.content_encoding=f.iinf.item_infos[n].content_encoding;if(f.iloc)for(n=0;n<f.iloc.items.length;n++){var m=f.iloc.items[n];switch(c=e[m.item_ID],m.data_reference_index!==0&&(r.warn("Item storage with reference to other files: not supported"),c.source=f.dinf.boxes[m.data_reference_index-1]),m.construction_method){case 0:break;case 1:r.warn("Item storage with construction_method : not supported");break;case 2:r.warn("Item storage with construction_method : not supported");break}for(c.extents=[],c.size=0,s=0;s<m.extents.length;s++)c.extents[s]={},c.extents[s].offset=m.extents[s].extent_offset+m.base_offset,c.extents[s].length=m.extents[s].extent_length,c.extents[s].alreadyRead=0,c.size+=c.extents[s].length}if(f.pitm&&(e[f.pitm.item_id].primary=!0),f.iref)for(n=0;n<f.iref.references.length;n++){var p=f.iref.references[n];for(s=0;s<p.references.length;s++)e[p.from_item_ID].ref_to.push({type:p.type,id:p.references[s]})}if(f.iprp)for(var _=0;_<f.iprp.ipmas.length;_++){var S=f.iprp.ipmas[_];for(n=0;n<S.associations.length;n++){var x=S.associations[n];for(c=e[x.id],c.properties===void 0&&(c.properties={},c.properties.boxes=[]),s=0;s<x.props.length;s++){var w=x.props[s];if(w.property_index>0&&w.property_index-1<f.iprp.ipco.boxes.length){var U=f.iprp.ipco.boxes[w.property_index-1];c.properties[U.type]=U,c.properties.boxes.push(U)}}}}}},v.prototype.getItem=function(e){var n,s;if(!this.meta)return null;if(s=this.items[e],!s.data&&s.size)s.data=new Uint8Array(s.size),s.alreadyRead=0,this.itemsDataSize+=s.size,r.debug("ISOFile","Allocating item #"+e+" of size "+s.size+" (total: "+this.itemsDataSize+")");else if(s.alreadyRead===s.size)return s;for(var c=0;c<s.extents.length;c++){var f=s.extents[c];if(f.alreadyRead!==f.length){var m=this.stream.findPosition(!0,f.offset+f.alreadyRead,!1);if(m>-1){n=this.stream.buffers[m];var p=n.byteLength-(f.offset+f.alreadyRead-n.fileStart);if(f.length-f.alreadyRead<=p)r.debug("ISOFile","Getting item #"+e+" extent #"+c+" data (alreadyRead: "+f.alreadyRead+" offset: "+(f.offset+f.alreadyRead-n.fileStart)+" read size: "+(f.length-f.alreadyRead)+" full extent size: "+f.length+" full item size: "+s.size+")"),o.memcpy(s.data.buffer,s.alreadyRead,n,f.offset+f.alreadyRead-n.fileStart,f.length-f.alreadyRead),n.usedBytes+=f.length-f.alreadyRead,this.stream.logBufferLevel(),s.alreadyRead+=f.length-f.alreadyRead,f.alreadyRead=f.length;else return r.debug("ISOFile","Getting item #"+e+" extent #"+c+" partial data (alreadyRead: "+f.alreadyRead+" offset: "+(f.offset+f.alreadyRead-n.fileStart)+" read size: "+p+" full extent size: "+f.length+" full item size: "+s.size+")"),o.memcpy(s.data.buffer,s.alreadyRead,n,f.offset+f.alreadyRead-n.fileStart,p),f.alreadyRead+=p,s.alreadyRead+=p,n.usedBytes+=p,this.stream.logBufferLevel(),null}else return null}}return s.alreadyRead===s.size?s:null},v.prototype.releaseItem=function(e){var n=this.items[e];if(n.data){this.itemsDataSize-=n.size,n.data=null,n.alreadyRead=0;for(var s=0;s<n.extents.length;s++){var c=n.extents[s];c.alreadyRead=0}return n.size}else return 0},v.prototype.processItems=function(e){for(var n in this.items){var s=this.items[n];this.getItem(s.id),e&&!s.sent&&(e(s),s.sent=!0,s.data=null)}},v.prototype.hasItem=function(e){for(var n in this.items){var s=this.items[n];if(s.name===e)return s.id}return-1},v.prototype.getMetaHandler=function(){return this.meta?this.meta.hdlr.handler:null},v.prototype.getPrimaryItem=function(){return!this.meta||!this.meta.pitm?null:this.getItem(this.meta.pitm.item_id)},v.prototype.itemToFragmentedTrackFile=function(e){var n=e||{},s=null;if(n.itemId?s=this.getItem(n.itemId):s=this.getPrimaryItem(),s==null)return null;var c=new v;c.discardMdatData=!1;var f={type:s.type,description_boxes:s.properties.boxes};s.properties.ispe&&(f.width=s.properties.ispe.image_width,f.height=s.properties.ispe.image_height);var m=c.addTrack(f);return m?(c.addSample(m,s.data),c):null},v.prototype.write=function(e){for(var n=0;n<this.boxes.length;n++)this.boxes[n].write(e)},v.prototype.createFragment=function(e,n,s){var c=this.getTrackById(e),f=this.getSample(c,n);if(f==null)return this.setNextSeekPositionFromSample(c.samples[n]),null;var m=s||new o;m.endianness=o.BIG_ENDIAN;var p=this.createSingleSampleMoof(f);p.write(m),p.trafs[0].truns[0].data_offset=p.size+8,r.debug("MP4Box","Adjusting data_offset with new value "+p.trafs[0].truns[0].data_offset),m.adjustUint32(p.trafs[0].truns[0].data_offset_position,p.trafs[0].truns[0].data_offset);var _=new l.mdatBox;return _.data=f.data,_.write(m),m},v.writeInitializationSegment=function(e,n,s,c){var f;r.debug("ISOFile","Generating initialization segment");var m=new o;m.endianness=o.BIG_ENDIAN,e.write(m);var p=n.add("mvex");for(s&&p.add("mehd").set("fragment_duration",s),f=0;f<n.traks.length;f++)p.add("trex").set("track_id",n.traks[f].tkhd.track_id).set("default_sample_description_index",1).set("default_sample_duration",c).set("default_sample_size",0).set("default_sample_flags",65536);return n.write(m),m.buffer},v.prototype.save=function(e){var n=new o;n.endianness=o.BIG_ENDIAN,this.write(n),n.save(e)},v.prototype.getBuffer=function(){var e=new o;return e.endianness=o.BIG_ENDIAN,this.write(e),e.buffer},v.prototype.initializeSegmentation=function(){var e,n,s,c;for(this.onSegment===null&&r.warn("MP4Box","No segmentation callback set!"),this.isFragmentationInitialized||(this.isFragmentationInitialized=!0,this.nextMoofNumber=0,this.resetTables()),n=[],e=0;e<this.fragmentedTracks.length;e++){var f=new l.moovBox;f.mvhd=this.moov.mvhd,f.boxes.push(f.mvhd),s=this.getTrackById(this.fragmentedTracks[e].id),f.boxes.push(s),f.traks.push(s),c={},c.id=s.tkhd.track_id,c.user=this.fragmentedTracks[e].user,c.buffer=v.writeInitializationSegment(this.ftyp,f,this.moov.mvex&&this.moov.mvex.mehd?this.moov.mvex.mehd.fragment_duration:void 0,this.moov.traks[e].samples.length>0?this.moov.traks[e].samples[0].duration:0),n.push(c)}return n},l.Box.prototype.printHeader=function(e){this.size+=8,this.size>u&&(this.size+=8),this.type==="uuid"&&(this.size+=16),e.log(e.indent+"size:"+this.size),e.log(e.indent+"type:"+this.type)},l.FullBox.prototype.printHeader=function(e){this.size+=4,l.Box.prototype.printHeader.call(this,e),e.log(e.indent+"version:"+this.version),e.log(e.indent+"flags:"+this.flags)},l.Box.prototype.print=function(e){this.printHeader(e)},l.ContainerBox.prototype.print=function(e){this.printHeader(e);for(var n=0;n<this.boxes.length;n++)if(this.boxes[n]){var s=e.indent;e.indent+=" ",this.boxes[n].print(e),e.indent=s}},v.prototype.print=function(e){e.indent="";for(var n=0;n<this.boxes.length;n++)this.boxes[n]&&this.boxes[n].print(e)},l.mvhdBox.prototype.print=function(e){l.FullBox.prototype.printHeader.call(this,e),e.log(e.indent+"creation_time: "+this.creation_time),e.log(e.indent+"modification_time: "+this.modification_time),e.log(e.indent+"timescale: "+this.timescale),e.log(e.indent+"duration: "+this.duration),e.log(e.indent+"rate: "+this.rate),e.log(e.indent+"volume: "+(this.volume>>8)),e.log(e.indent+"matrix: "+this.matrix.join(", ")),e.log(e.indent+"next_track_id: "+this.next_track_id)},l.tkhdBox.prototype.print=function(e){l.FullBox.prototype.printHeader.call(this,e),e.log(e.indent+"creation_time: "+this.creation_time),e.log(e.indent+"modification_time: "+this.modification_time),e.log(e.indent+"track_id: "+this.track_id),e.log(e.indent+"duration: "+this.duration),e.log(e.indent+"volume: "+(this.volume>>8)),e.log(e.indent+"matrix: "+this.matrix.join(", ")),e.log(e.indent+"layer: "+this.layer),e.log(e.indent+"alternate_group: "+this.alternate_group),e.log(e.indent+"width: "+this.width),e.log(e.indent+"height: "+this.height)};var b={};b.createFile=function(e,n){var s=e!==void 0?e:!0,c=new v(n);return c.discardMdatData=!s,c},t.createFile=b.createFile})(hw);const vB=Ys(hw);var ct,no;const lg=class lg{constructor(){$i(this,ct,[]);$i(this,no,0);dg(this,"meta")}append(r){xe(this,ct).push(r),Qr(this,no,xe(this,no)+(r.duration??0))}getChunks(){return xe(this,ct)}getDuration(){return xe(this,no)}slice(r,a){console.log(1111,{start:r,end:a},xe(this,ct));const o=new lg;o.meta=this.meta;const u=xe(this,ct).findIndex(h=>h.timestamp>=r&&h.type==="key"),d=xe(this,ct).findLastIndex(h=>h.timestamp<=a);if(u===-1||d===-1)throw Error("ChunkSlice out of bounds");console.log(22222,{startIndex:u,endIndex:d},xe(this,ct).slice(u,d));for(const h of xe(this,ct).slice(u,d))o.append(new EncodedVideoChunk({type:h.type,timestamp:h.timestamp-r,duration:h.duration??0,data:A_(h)}));return o}delete(r,a){const o=xe(this,ct).findIndex(d=>d.timestamp>=r);let u=xe(this,ct).findLastIndex(d=>d.timestamp<=a);if(o===-1||u===-1)throw Error("Deleted fragment out of bounds");for(let d=u;d<xe(this,ct).length;d++)if(xe(this,ct)[d].type==="key"){u=d;break}xe(this,ct).splice(o,u-o);for(let d=o;d<xe(this,ct).length;d++){const h=xe(this,ct)[d];xe(this,ct)[d]=new EncodedVideoChunk({type:h.type,timestamp:h.timestamp-(a-r),duration:h.duration??0,data:A_(h)})}Qr(this,no,xe(this,ct).reduce((d,h)=>(h.duration??0)+d,0))}};ct=new WeakMap,no=new WeakMap;let op=lg;function A_(t){const r=new ArrayBuffer(t.byteLength);return t.copyTo(r),r}function _B(t){var o,u;const r=vB.createFile(),a=r.addTrack({timescale:1e6,width:1280,height:720,brands:["isom","iso2","avc1","mp42","mp41"],avcDecoderConfigRecord:(u=(o=t.meta)==null?void 0:o.decoderConfig)==null?void 0:u.description});for(const d of t.getChunks()){const h=yB(d);r.addSample(a,h.data,h)}return r}function yB(t){const r=new ArrayBuffer(t.byteLength);t.copyTo(r);const a=t.timestamp;return{duration:t.duration??0,dts:a,cts:a,is_sync:t.type==="key",data:r}}var bB=Object.defineProperty,SB=(t,r,a)=>r in t?bB(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a,gt=(t,r,a)=>(SB(t,typeof r!="symbol"?r+"":r,a),a),zm=(t,r,a)=>{if(!r.has(t))throw TypeError("Cannot "+a)},ke=(t,r,a)=>(zm(t,r,"read from private field"),a?a.call(t):r.get(t)),ei=(t,r,a)=>{if(r.has(t))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(t):r.set(t,a)},ii=(t,r,a,o)=>(zm(t,r,"write to private field"),o?o.call(t,a):r.set(t,a),a),wB=(t,r,a)=>(zm(t,r,"access private method"),a);let ts=1;const T_={debug:(...t)=>{ts<=0&&console.debug(...t)},info:(...t)=>{ts<=1&&console.info(...t)},warn:(...t)=>{ts<=2&&console.warn(...t)},error:(...t)=>{ts<=3&&console.error(...t)}},il=new Map,wn={setLogLevel:t=>{ts=il.get(t)??1},...T_,create:t=>Object.fromEntries(Object.entries(T_).map(([r,a])=>[r,(...o)=>a(t,...o)]))};il.set(wn.debug,0);il.set(wn.info,1);il.set(wn.warn,2);il.set(wn.error,3);const xB=()=>{let t,r=16.6;self.onmessage=a=>{a.data.event==="start"&&(self.clearInterval(t),t=self.setInterval(()=>{self.postMessage({})},r)),a.data.event==="stop"&&self.clearInterval(t)}},EB=()=>{const t=new Blob([`(${xB.toString()})()`]),r=URL.createObjectURL(t);return new Worker(r)},Pa=new Map;let sp=1;const lp=EB();lp.onmessage=()=>{sp+=1;for(const[t,r]of Pa.entries())sp%t===0&&r.forEach(a=>a())};const UB=(t,r)=>{const a=Math.round(r/16.6),o=Pa.get(a)??new Set;return o.add(t),Pa.set(a,o),Pa.size===1&&o.size===1&&lp.postMessage({event:"start"}),()=>{o.delete(t),o.size===0&&Pa.delete(a),Pa.size===0&&(sp=0,lp.postMessage({event:"stop"}))}};function CB(t){return Array(t.numberOfChannels).fill(0).map((r,a)=>t.getChannelData(a))}function AB(t){return new Promise(r=>{const a=UB(()=>{a(),r()},t)})}function P_(t,r,a){const o=a-r,u=new Float32Array(o);let d=0;for(;d<o;)u[d]=t[(r+d)%t.length],d+=1;return u}function TB(t,r){let a=!1;async function o(){const u=t.getReader();for(;!a;){const{value:d,done:h}=await u.read();if(h){r.onDone();return}await r.onChunk(d)}u.releaseLock(),await t.cancel()}return o().catch(wn.error),()=>{a=!0}}var zi={};(function(t){var r=function(){var e=new Date,n=4,s=3,c=2,f=1,m=n,p={setLogLevel:function(_){_==this.debug?m=f:_==this.info?m=c:_==this.warn?m=s:(_==this.error,m=n)},debug:function(_,S){console.debug===void 0&&(console.debug=console.log),f>=m&&console.debug("["+r.getDurationString(new Date-e,1e3)+"]","["+_+"]",S)},log:function(_,S){this.debug(_.msg)},info:function(_,S){c>=m&&console.info("["+r.getDurationString(new Date-e,1e3)+"]","["+_+"]",S)},warn:function(_,S){s>=m&&console.warn("["+r.getDurationString(new Date-e,1e3)+"]","["+_+"]",S)},error:function(_,S){n>=m&&console.error("["+r.getDurationString(new Date-e,1e3)+"]","["+_+"]",S)}};return p}();r.getDurationString=function(e,n){var s;function c(x,w){for(var U=""+x,A=U.split(".");A[0].length<w;)A[0]="0"+A[0];return A.join(".")}e<0?(s=!0,e=-e):s=!1;var f=n||1,m=e/f,p=Math.floor(m/3600);m-=p*3600;var _=Math.floor(m/60);m-=_*60;var S=m*1e3;return m=Math.floor(m),S-=m*1e3,S=Math.floor(S),(s?"-":"")+p+":"+c(_,2)+":"+c(m,2)+"."+c(S,3)},r.printRanges=function(e){var n=e.length;if(n>0){for(var s="",c=0;c<n;c++)c>0&&(s+=","),s+="["+r.getDurationString(e.start(c))+","+r.getDurationString(e.end(c))+"]";return s}else return"(empty)"},t.Log=r;var a=function(e){if(e instanceof ArrayBuffer)this.buffer=e,this.dataview=new DataView(e);else throw"Needs an array buffer";this.position=0};a.prototype.getPosition=function(){return this.position},a.prototype.getEndPosition=function(){return this.buffer.byteLength},a.prototype.getLength=function(){return this.buffer.byteLength},a.prototype.seek=function(e){var n=Math.max(0,Math.min(this.buffer.byteLength,e));return this.position=isNaN(n)||!isFinite(n)?0:n,!0},a.prototype.isEos=function(){return this.getPosition()>=this.getEndPosition()},a.prototype.readAnyInt=function(e,n){var s=0;if(this.position+e<=this.buffer.byteLength){switch(e){case 1:n?s=this.dataview.getInt8(this.position):s=this.dataview.getUint8(this.position);break;case 2:n?s=this.dataview.getInt16(this.position):s=this.dataview.getUint16(this.position);break;case 3:if(n)throw"No method for reading signed 24 bits values";s=this.dataview.getUint8(this.position)<<16,s|=this.dataview.getUint8(this.position+1)<<8,s|=this.dataview.getUint8(this.position+2);break;case 4:n?s=this.dataview.getInt32(this.position):s=this.dataview.getUint32(this.position);break;case 8:if(n)throw"No method for reading signed 64 bits values";s=this.dataview.getUint32(this.position)<<32,s|=this.dataview.getUint32(this.position+4);break;default:throw"readInt method not implemented for size: "+e}return this.position+=e,s}else throw"Not enough bytes in buffer"},a.prototype.readUint8=function(){return this.readAnyInt(1,!1)},a.prototype.readUint16=function(){return this.readAnyInt(2,!1)},a.prototype.readUint24=function(){return this.readAnyInt(3,!1)},a.prototype.readUint32=function(){return this.readAnyInt(4,!1)},a.prototype.readUint64=function(){return this.readAnyInt(8,!1)},a.prototype.readString=function(e){if(this.position+e<=this.buffer.byteLength){for(var n="",s=0;s<e;s++)n+=String.fromCharCode(this.readUint8());return n}else throw"Not enough bytes in buffer"},a.prototype.readCString=function(){for(var e=[];;){var n=this.readUint8();if(n!==0)e.push(n);else break}return String.fromCharCode.apply(null,e)},a.prototype.readInt8=function(){return this.readAnyInt(1,!0)},a.prototype.readInt16=function(){return this.readAnyInt(2,!0)},a.prototype.readInt32=function(){return this.readAnyInt(4,!0)},a.prototype.readInt64=function(){return this.readAnyInt(8,!1)},a.prototype.readUint8Array=function(e){for(var n=new Uint8Array(e),s=0;s<e;s++)n[s]=this.readUint8();return n},a.prototype.readInt16Array=function(e){for(var n=new Int16Array(e),s=0;s<e;s++)n[s]=this.readInt16();return n},a.prototype.readUint16Array=function(e){for(var n=new Int16Array(e),s=0;s<e;s++)n[s]=this.readUint16();return n},a.prototype.readUint32Array=function(e){for(var n=new Uint32Array(e),s=0;s<e;s++)n[s]=this.readUint32();return n},a.prototype.readInt32Array=function(e){for(var n=new Int32Array(e),s=0;s<e;s++)n[s]=this.readInt32();return n},t.MP4BoxStream=a;var o=function(e,n,s){this._byteOffset=n||0,e instanceof ArrayBuffer?this.buffer=e:typeof e=="object"?(this.dataView=e,n&&(this._byteOffset+=n)):this.buffer=new ArrayBuffer(e||0),this.position=0,this.endianness=s??o.LITTLE_ENDIAN};o.prototype={},o.prototype.getPosition=function(){return this.position},o.prototype._realloc=function(e){if(this._dynamicSize){var n=this._byteOffset+this.position+e,s=this._buffer.byteLength;if(n<=s){n>this._byteLength&&(this._byteLength=n);return}for(s<1&&(s=1);n>s;)s*=2;var c=new ArrayBuffer(s),f=new Uint8Array(this._buffer),m=new Uint8Array(c,0,f.length);m.set(f),this.buffer=c,this._byteLength=n}},o.prototype._trimAlloc=function(){if(this._byteLength!=this._buffer.byteLength){var e=new ArrayBuffer(this._byteLength),n=new Uint8Array(e),s=new Uint8Array(this._buffer,0,n.length);n.set(s),this.buffer=e}},o.BIG_ENDIAN=!1,o.LITTLE_ENDIAN=!0,o.prototype._byteLength=0,Object.defineProperty(o.prototype,"byteLength",{get:function(){return this._byteLength-this._byteOffset}}),Object.defineProperty(o.prototype,"buffer",{get:function(){return this._trimAlloc(),this._buffer},set:function(e){this._buffer=e,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(o.prototype,"byteOffset",{get:function(){return this._byteOffset},set:function(e){this._byteOffset=e,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(o.prototype,"dataView",{get:function(){return this._dataView},set:function(e){this._byteOffset=e.byteOffset,this._buffer=e.buffer,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._byteOffset+e.byteLength}}),o.prototype.seek=function(e){var n=Math.max(0,Math.min(this.byteLength,e));this.position=isNaN(n)||!isFinite(n)?0:n},o.prototype.isEof=function(){return this.position>=this._byteLength},o.prototype.mapUint8Array=function(e){this._realloc(e*1);var n=new Uint8Array(this._buffer,this.byteOffset+this.position,e);return this.position+=e*1,n},o.prototype.readInt32Array=function(e,n){e=e??this.byteLength-this.position/4;var s=new Int32Array(e);return o.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,e*s.BYTES_PER_ELEMENT),o.arrayToNative(s,n??this.endianness),this.position+=s.byteLength,s},o.prototype.readInt16Array=function(e,n){e=e??this.byteLength-this.position/2;var s=new Int16Array(e);return o.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,e*s.BYTES_PER_ELEMENT),o.arrayToNative(s,n??this.endianness),this.position+=s.byteLength,s},o.prototype.readInt8Array=function(e){e=e??this.byteLength-this.position;var n=new Int8Array(e);return o.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,e*n.BYTES_PER_ELEMENT),this.position+=n.byteLength,n},o.prototype.readUint32Array=function(e,n){e=e??this.byteLength-this.position/4;var s=new Uint32Array(e);return o.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,e*s.BYTES_PER_ELEMENT),o.arrayToNative(s,n??this.endianness),this.position+=s.byteLength,s},o.prototype.readUint16Array=function(e,n){e=e??this.byteLength-this.position/2;var s=new Uint16Array(e);return o.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,e*s.BYTES_PER_ELEMENT),o.arrayToNative(s,n??this.endianness),this.position+=s.byteLength,s},o.prototype.readUint8Array=function(e){e=e??this.byteLength-this.position;var n=new Uint8Array(e);return o.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,e*n.BYTES_PER_ELEMENT),this.position+=n.byteLength,n},o.prototype.readFloat64Array=function(e,n){e=e??this.byteLength-this.position/8;var s=new Float64Array(e);return o.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,e*s.BYTES_PER_ELEMENT),o.arrayToNative(s,n??this.endianness),this.position+=s.byteLength,s},o.prototype.readFloat32Array=function(e,n){e=e??this.byteLength-this.position/4;var s=new Float32Array(e);return o.memcpy(s.buffer,0,this.buffer,this.byteOffset+this.position,e*s.BYTES_PER_ELEMENT),o.arrayToNative(s,n??this.endianness),this.position+=s.byteLength,s},o.prototype.readInt32=function(e){var n=this._dataView.getInt32(this.position,e??this.endianness);return this.position+=4,n},o.prototype.readInt16=function(e){var n=this._dataView.getInt16(this.position,e??this.endianness);return this.position+=2,n},o.prototype.readInt8=function(){var e=this._dataView.getInt8(this.position);return this.position+=1,e},o.prototype.readUint32=function(e){var n=this._dataView.getUint32(this.position,e??this.endianness);return this.position+=4,n},o.prototype.readUint16=function(e){var n=this._dataView.getUint16(this.position,e??this.endianness);return this.position+=2,n},o.prototype.readUint8=function(){var e=this._dataView.getUint8(this.position);return this.position+=1,e},o.prototype.readFloat32=function(e){var n=this._dataView.getFloat32(this.position,e??this.endianness);return this.position+=4,n},o.prototype.readFloat64=function(e){var n=this._dataView.getFloat64(this.position,e??this.endianness);return this.position+=8,n},o.endianness=new Int8Array(new Int16Array([1]).buffer)[0]>0,o.memcpy=function(e,n,s,c,f){var m=new Uint8Array(e,n,f),p=new Uint8Array(s,c,f);m.set(p)},o.arrayToNative=function(e,n){return n==this.endianness?e:this.flipArrayEndianness(e)},o.nativeToEndian=function(e,n){return this.endianness==n?e:this.flipArrayEndianness(e)},o.flipArrayEndianness=function(e){for(var n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),s=0;s<e.byteLength;s+=e.BYTES_PER_ELEMENT)for(var c=s+e.BYTES_PER_ELEMENT-1,f=s;c>f;c--,f++){var m=n[f];n[f]=n[c],n[c]=m}return e},o.prototype.failurePosition=0,String.fromCharCodeUint8=function(e){for(var n=[],s=0;s<e.length;s++)n[s]=e[s];return String.fromCharCode.apply(null,n)},o.prototype.readString=function(e,n){return n==null||n=="ASCII"?String.fromCharCodeUint8.apply(null,[this.mapUint8Array(e??this.byteLength-this.position)]):new TextDecoder(n).decode(this.mapUint8Array(e))},o.prototype.readCString=function(e){var n=this.byteLength-this.position,s=new Uint8Array(this._buffer,this._byteOffset+this.position),c=n;e!=null&&(c=Math.min(e,n));for(var f=0;f<c&&s[f]!==0;f++);var m=String.fromCharCodeUint8.apply(null,[this.mapUint8Array(f)]);return e!=null?this.position+=c-f:f!=n&&(this.position+=1),m};var u=Math.pow(2,32);o.prototype.readInt64=function(){return this.readInt32()*u+this.readUint32()},o.prototype.readUint64=function(){return this.readUint32()*u+this.readUint32()},o.prototype.readInt64=function(){return this.readUint32()*u+this.readUint32()},o.prototype.readUint24=function(){return(this.readUint8()<<16)+(this.readUint8()<<8)+this.readUint8()},t.DataStream=o,o.prototype.save=function(e){var n=new Blob([this.buffer]);if(window.URL&&URL.createObjectURL){var s=window.URL.createObjectURL(n),c=document.createElement("a");document.body.appendChild(c),c.setAttribute("href",s),c.setAttribute("download",e),c.setAttribute("target","_self"),c.click(),window.URL.revokeObjectURL(s)}else throw"DataStream.save: Can't create object URL."},o.prototype._dynamicSize=!0,Object.defineProperty(o.prototype,"dynamicSize",{get:function(){return this._dynamicSize},set:function(e){e||this._trimAlloc(),this._dynamicSize=e}}),o.prototype.shift=function(e){var n=new ArrayBuffer(this._byteLength-e),s=new Uint8Array(n),c=new Uint8Array(this._buffer,e,s.length);s.set(c),this.buffer=n,this.position-=e},o.prototype.writeInt32Array=function(e,n){if(this._realloc(e.length*4),e instanceof Int32Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapInt32Array(e.length,n);else for(var s=0;s<e.length;s++)this.writeInt32(e[s],n)},o.prototype.writeInt16Array=function(e,n){if(this._realloc(e.length*2),e instanceof Int16Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapInt16Array(e.length,n);else for(var s=0;s<e.length;s++)this.writeInt16(e[s],n)},o.prototype.writeInt8Array=function(e){if(this._realloc(e.length*1),e instanceof Int8Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapInt8Array(e.length);else for(var n=0;n<e.length;n++)this.writeInt8(e[n])},o.prototype.writeUint32Array=function(e,n){if(this._realloc(e.length*4),e instanceof Uint32Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapUint32Array(e.length,n);else for(var s=0;s<e.length;s++)this.writeUint32(e[s],n)},o.prototype.writeUint16Array=function(e,n){if(this._realloc(e.length*2),e instanceof Uint16Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapUint16Array(e.length,n);else for(var s=0;s<e.length;s++)this.writeUint16(e[s],n)},o.prototype.writeUint8Array=function(e){if(this._realloc(e.length*1),e instanceof Uint8Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapUint8Array(e.length);else for(var n=0;n<e.length;n++)this.writeUint8(e[n])},o.prototype.writeFloat64Array=function(e,n){if(this._realloc(e.length*8),e instanceof Float64Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapFloat64Array(e.length,n);else for(var s=0;s<e.length;s++)this.writeFloat64(e[s],n)},o.prototype.writeFloat32Array=function(e,n){if(this._realloc(e.length*4),e instanceof Float32Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT===0)o.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapFloat32Array(e.length,n);else for(var s=0;s<e.length;s++)this.writeFloat32(e[s],n)},o.prototype.writeInt32=function(e,n){this._realloc(4),this._dataView.setInt32(this.position,e,n??this.endianness),this.position+=4},o.prototype.writeInt16=function(e,n){this._realloc(2),this._dataView.setInt16(this.position,e,n??this.endianness),this.position+=2},o.prototype.writeInt8=function(e){this._realloc(1),this._dataView.setInt8(this.position,e),this.position+=1},o.prototype.writeUint32=function(e,n){this._realloc(4),this._dataView.setUint32(this.position,e,n??this.endianness),this.position+=4},o.prototype.writeUint16=function(e,n){this._realloc(2),this._dataView.setUint16(this.position,e,n??this.endianness),this.position+=2},o.prototype.writeUint8=function(e){this._realloc(1),this._dataView.setUint8(this.position,e),this.position+=1},o.prototype.writeFloat32=function(e,n){this._realloc(4),this._dataView.setFloat32(this.position,e,n??this.endianness),this.position+=4},o.prototype.writeFloat64=function(e,n){this._realloc(8),this._dataView.setFloat64(this.position,e,n??this.endianness),this.position+=8},o.prototype.writeUCS2String=function(e,n,s){s==null&&(s=e.length);for(var c=0;c<e.length&&c<s;c++)this.writeUint16(e.charCodeAt(c),n);for(;c<s;c++)this.writeUint16(0)},o.prototype.writeString=function(e,n,s){var c=0;if(n==null||n=="ASCII")if(s!=null){var f=Math.min(e.length,s);for(c=0;c<f;c++)this.writeUint8(e.charCodeAt(c));for(;c<s;c++)this.writeUint8(0)}else for(c=0;c<e.length;c++)this.writeUint8(e.charCodeAt(c));else this.writeUint8Array(new TextEncoder(n).encode(e.substring(0,s)))},o.prototype.writeCString=function(e,n){var s=0;if(n!=null){var c=Math.min(e.length,n);for(s=0;s<c;s++)this.writeUint8(e.charCodeAt(s));for(;s<n;s++)this.writeUint8(0)}else{for(s=0;s<e.length;s++)this.writeUint8(e.charCodeAt(s));this.writeUint8(0)}},o.prototype.writeStruct=function(e,n){for(var s=0;s<e.length;s+=2){var c=e[s+1];this.writeType(c,n[e[s]],n)}},o.prototype.writeType=function(e,n,s){var c;if(typeof e=="function")return e(this,n);if(typeof e=="object"&&!(e instanceof Array))return e.set(this,n,s);var f=null,m="ASCII",p=this.position;switch(typeof e=="string"&&/:/.test(e)&&(c=e.split(":"),e=c[0],f=parseInt(c[1])),typeof e=="string"&&/,/.test(e)&&(c=e.split(","),e=c[0],m=parseInt(c[1])),e){case"uint8":this.writeUint8(n);break;case"int8":this.writeInt8(n);break;case"uint16":this.writeUint16(n,this.endianness);break;case"int16":this.writeInt16(n,this.endianness);break;case"uint32":this.writeUint32(n,this.endianness);break;case"int32":this.writeInt32(n,this.endianness);break;case"float32":this.writeFloat32(n,this.endianness);break;case"float64":this.writeFloat64(n,this.endianness);break;case"uint16be":this.writeUint16(n,o.BIG_ENDIAN);break;case"int16be":this.writeInt16(n,o.BIG_ENDIAN);break;case"uint32be":this.writeUint32(n,o.BIG_ENDIAN);break;case"int32be":this.writeInt32(n,o.BIG_ENDIAN);break;case"float32be":this.writeFloat32(n,o.BIG_ENDIAN);break;case"float64be":this.writeFloat64(n,o.BIG_ENDIAN);break;case"uint16le":this.writeUint16(n,o.LITTLE_ENDIAN);break;case"int16le":this.writeInt16(n,o.LITTLE_ENDIAN);break;case"uint32le":this.writeUint32(n,o.LITTLE_ENDIAN);break;case"int32le":this.writeInt32(n,o.LITTLE_ENDIAN);break;case"float32le":this.writeFloat32(n,o.LITTLE_ENDIAN);break;case"float64le":this.writeFloat64(n,o.LITTLE_ENDIAN);break;case"cstring":this.writeCString(n,f);break;case"string":this.writeString(n,m,f);break;case"u16string":this.writeUCS2String(n,this.endianness,f);break;case"u16stringle":this.writeUCS2String(n,o.LITTLE_ENDIAN,f);break;case"u16stringbe":this.writeUCS2String(n,o.BIG_ENDIAN,f);break;default:if(e.length==3){for(var _=e[1],S=0;S<n.length;S++)this.writeType(_,n[S]);break}else{this.writeStruct(e,n);break}}f!=null&&(this.position=p,this._realloc(f),this.position=p+f)},o.prototype.writeUint64=function(e){var n=Math.floor(e/u);this.writeUint32(n),this.writeUint32(e&4294967295)},o.prototype.writeUint24=function(e){this.writeUint8((e&16711680)>>16),this.writeUint8((e&65280)>>8),this.writeUint8(e&255)},o.prototype.adjustUint32=function(e,n){var s=this.position;this.seek(e),this.writeUint32(n),this.seek(s)},o.prototype.mapInt32Array=function(e,n){this._realloc(e*4);var s=new Int32Array(this._buffer,this.byteOffset+this.position,e);return o.arrayToNative(s,n??this.endianness),this.position+=e*4,s},o.prototype.mapInt16Array=function(e,n){this._realloc(e*2);var s=new Int16Array(this._buffer,this.byteOffset+this.position,e);return o.arrayToNative(s,n??this.endianness),this.position+=e*2,s},o.prototype.mapInt8Array=function(e){this._realloc(e*1);var n=new Int8Array(this._buffer,this.byteOffset+this.position,e);return this.position+=e*1,n},o.prototype.mapUint32Array=function(e,n){this._realloc(e*4);var s=new Uint32Array(this._buffer,this.byteOffset+this.position,e);return o.arrayToNative(s,n??this.endianness),this.position+=e*4,s},o.prototype.mapUint16Array=function(e,n){this._realloc(e*2);var s=new Uint16Array(this._buffer,this.byteOffset+this.position,e);return o.arrayToNative(s,n??this.endianness),this.position+=e*2,s},o.prototype.mapFloat64Array=function(e,n){this._realloc(e*8);var s=new Float64Array(this._buffer,this.byteOffset+this.position,e);return o.arrayToNative(s,n??this.endianness),this.position+=e*8,s},o.prototype.mapFloat32Array=function(e,n){this._realloc(e*4);var s=new Float32Array(this._buffer,this.byteOffset+this.position,e);return o.arrayToNative(s,n??this.endianness),this.position+=e*4,s};var d=function(e){this.buffers=[],this.bufferIndex=-1,e&&(this.insertBuffer(e),this.bufferIndex=0)};d.prototype=new o(new ArrayBuffer,0,o.BIG_ENDIAN),d.prototype.initialized=function(){var e;return this.bufferIndex>-1?!0:this.buffers.length>0?(e=this.buffers[0],e.fileStart===0?(this.buffer=e,this.bufferIndex=0,r.debug("MultiBufferStream","Stream ready for parsing"),!0):(r.warn("MultiBufferStream","The first buffer should have a fileStart of 0"),this.logBufferLevel(),!1)):(r.warn("MultiBufferStream","No buffer to start parsing from"),this.logBufferLevel(),!1)},ArrayBuffer.concat=function(e,n){r.debug("ArrayBuffer","Trying to create a new buffer of size: "+(e.byteLength+n.byteLength));var s=new Uint8Array(e.byteLength+n.byteLength);return s.set(new Uint8Array(e),0),s.set(new Uint8Array(n),e.byteLength),s.buffer},d.prototype.reduceBuffer=function(e,n,s){var c;return c=new Uint8Array(s),c.set(new Uint8Array(e,n,s)),c.buffer.fileStart=e.fileStart+n,c.buffer.usedBytes=0,c.buffer},d.prototype.insertBuffer=function(e){for(var n=!0,s=0;s<this.buffers.length;s++){var c=this.buffers[s];if(e.fileStart<=c.fileStart){if(e.fileStart===c.fileStart)if(e.byteLength>c.byteLength){this.buffers.splice(s,1),s--;continue}else r.warn("MultiBufferStream","Buffer (fileStart: "+e.fileStart+" - Length: "+e.byteLength+") already appended, ignoring");else e.fileStart+e.byteLength<=c.fileStart||(e=this.reduceBuffer(e,0,c.fileStart-e.fileStart)),r.debug("MultiBufferStream","Appending new buffer (fileStart: "+e.fileStart+" - Length: "+e.byteLength+")"),this.buffers.splice(s,0,e),s===0&&(this.buffer=e);n=!1;break}else if(e.fileStart<c.fileStart+c.byteLength){var f=c.fileStart+c.byteLength-e.fileStart,m=e.byteLength-f;if(m>0)e=this.reduceBuffer(e,f,m);else{n=!1;break}}}n&&(r.debug("MultiBufferStream","Appending new buffer (fileStart: "+e.fileStart+" - Length: "+e.byteLength+")"),this.buffers.push(e),s===0&&(this.buffer=e))},d.prototype.logBufferLevel=function(e){var n,s,c,f,m=[],p,_="";for(c=0,f=0,n=0;n<this.buffers.length;n++)s=this.buffers[n],n===0?(p={},m.push(p),p.start=s.fileStart,p.end=s.fileStart+s.byteLength,_+="["+p.start+"-"):p.end===s.fileStart?p.end=s.fileStart+s.byteLength:(p={},p.start=s.fileStart,_+=m[m.length-1].end-1+"], ["+p.start+"-",p.end=s.fileStart+s.byteLength,m.push(p)),c+=s.usedBytes,f+=s.byteLength;m.length>0&&(_+=p.end-1+"]");var S=e?r.info:r.debug;this.buffers.length===0?S("MultiBufferStream","No more buffer in memory"):S("MultiBufferStream",""+this.buffers.length+" stored buffer(s) ("+c+"/"+f+" bytes), continuous ranges: "+_)},d.prototype.cleanBuffers=function(){var e,n;for(e=0;e<this.buffers.length;e++)n=this.buffers[e],n.usedBytes===n.byteLength&&(r.debug("MultiBufferStream","Removing buffer #"+e),this.buffers.splice(e,1),e--)},d.prototype.mergeNextBuffer=function(){var e;if(this.bufferIndex+1<this.buffers.length)if(e=this.buffers[this.bufferIndex+1],e.fileStart===this.buffer.fileStart+this.buffer.byteLength){var n=this.buffer.byteLength,s=this.buffer.usedBytes,c=this.buffer.fileStart;return this.buffers[this.bufferIndex]=ArrayBuffer.concat(this.buffer,e),this.buffer=this.buffers[this.bufferIndex],this.buffers.splice(this.bufferIndex+1,1),this.buffer.usedBytes=s,this.buffer.fileStart=c,r.debug("ISOFile","Concatenating buffer for box parsing (length: "+n+"->"+this.buffer.byteLength+")"),!0}else return!1;else return!1},d.prototype.findPosition=function(e,n,s){var c,f=null,m=-1;for(e===!0?c=0:c=this.bufferIndex;c<this.buffers.length&&(f=this.buffers[c],f.fileStart<=n);)m=c,s&&(f.fileStart+f.byteLength<=n?f.usedBytes=f.byteLength:f.usedBytes=n-f.fileStart,this.logBufferLevel()),c++;return m!==-1?(f=this.buffers[m],f.fileStart+f.byteLength>=n?(r.debug("MultiBufferStream","Found position in existing buffer #"+m),m):-1):-1},d.prototype.findEndContiguousBuf=function(e){var n,s,c,f=e!==void 0?e:this.bufferIndex;if(s=this.buffers[f],this.buffers.length>f+1)for(n=f+1;n<this.buffers.length&&(c=this.buffers[n],c.fileStart===s.fileStart+s.byteLength);n++)s=c;return s.fileStart+s.byteLength},d.prototype.getEndFilePositionAfter=function(e){var n=this.findPosition(!0,e,!1);return n!==-1?this.findEndContiguousBuf(n):e},d.prototype.addUsedBytes=function(e){this.buffer.usedBytes+=e,this.logBufferLevel()},d.prototype.setAllUsedBytes=function(){this.buffer.usedBytes=this.buffer.byteLength,this.logBufferLevel()},d.prototype.seek=function(e,n,s){var c;return c=this.findPosition(n,e,s),c!==-1?(this.buffer=this.buffers[c],this.bufferIndex=c,this.position=e-this.buffer.fileStart,r.debug("MultiBufferStream","Repositioning parser at buffer position: "+this.position),!0):(r.debug("MultiBufferStream","Position "+e+" not found in buffered data"),!1)},d.prototype.getPosition=function(){if(this.bufferIndex===-1||this.buffers[this.bufferIndex]===null)throw"Error accessing position in the MultiBufferStream";return this.buffers[this.bufferIndex].fileStart+this.position},d.prototype.getLength=function(){return this.byteLength},d.prototype.getEndPosition=function(){if(this.bufferIndex===-1||this.buffers[this.bufferIndex]===null)throw"Error accessing position in the MultiBufferStream";return this.buffers[this.bufferIndex].fileStart+this.byteLength},t.MultiBufferStream=d;var h=function(){var e=3,n=4,s=5,c=6,f=[];f[e]="ES_Descriptor",f[n]="DecoderConfigDescriptor",f[s]="DecoderSpecificInfo",f[c]="SLConfigDescriptor",this.getDescriptorName=function(_){return f[_]};var m=this,p={};return this.parseOneDescriptor=function(_){var S=0,x,w,U;for(x=_.readUint8(),U=_.readUint8();U&128;)S=(U&127)<<7,U=_.readUint8();return S+=U&127,r.debug("MPEG4DescriptorParser","Found "+(f[x]||"Descriptor "+x)+", size "+S+" at position "+_.getPosition()),f[x]?w=new p[f[x]](S):w=new p.Descriptor(S),w.parse(_),w},p.Descriptor=function(_,S){this.tag=_,this.size=S,this.descs=[]},p.Descriptor.prototype.parse=function(_){this.data=_.readUint8Array(this.size)},p.Descriptor.prototype.findDescriptor=function(_){for(var S=0;S<this.descs.length;S++)if(this.descs[S].tag==_)return this.descs[S];return null},p.Descriptor.prototype.parseRemainingDescriptors=function(_){for(var S=_.position;_.position<S+this.size;){var x=m.parseOneDescriptor(_);this.descs.push(x)}},p.ES_Descriptor=function(_){p.Descriptor.call(this,e,_)},p.ES_Descriptor.prototype=new p.Descriptor,p.ES_Descriptor.prototype.parse=function(_){if(this.ES_ID=_.readUint16(),this.flags=_.readUint8(),this.size-=3,this.flags&128?(this.dependsOn_ES_ID=_.readUint16(),this.size-=2):this.dependsOn_ES_ID=0,this.flags&64){var S=_.readUint8();this.URL=_.readString(S),this.size-=S+1}else this.URL="";this.flags&32?(this.OCR_ES_ID=_.readUint16(),this.size-=2):this.OCR_ES_ID=0,this.parseRemainingDescriptors(_)},p.ES_Descriptor.prototype.getOTI=function(_){var S=this.findDescriptor(n);return S?S.oti:0},p.ES_Descriptor.prototype.getAudioConfig=function(_){var S=this.findDescriptor(n);if(!S)return null;var x=S.findDescriptor(s);if(x&&x.data){var w=(x.data[0]&248)>>3;return w===31&&x.data.length>=2&&(w=32+((x.data[0]&7)<<3)+((x.data[1]&224)>>5)),w}else return null},p.DecoderConfigDescriptor=function(_){p.Descriptor.call(this,n,_)},p.DecoderConfigDescriptor.prototype=new p.Descriptor,p.DecoderConfigDescriptor.prototype.parse=function(_){this.oti=_.readUint8(),this.streamType=_.readUint8(),this.bufferSize=_.readUint24(),this.maxBitrate=_.readUint32(),this.avgBitrate=_.readUint32(),this.size-=13,this.parseRemainingDescriptors(_)},p.DecoderSpecificInfo=function(_){p.Descriptor.call(this,s,_)},p.DecoderSpecificInfo.prototype=new p.Descriptor,p.SLConfigDescriptor=function(_){p.Descriptor.call(this,c,_)},p.SLConfigDescriptor.prototype=new p.Descriptor,this};t.MPEG4DescriptorParser=h;var l={ERR_INVALID_DATA:-1,ERR_NOT_ENOUGH_DATA:0,OK:1,BASIC_BOXES:["mdat","idat","free","skip","meco","strk"],FULL_BOXES:["hmhd","nmhd","iods","xml ","bxml","ipro","mere"],CONTAINER_BOXES:[["moov",["trak","pssh"]],["trak"],["edts"],["mdia"],["minf"],["dinf"],["stbl",["sgpd","sbgp"]],["mvex",["trex"]],["moof",["traf"]],["traf",["trun","sgpd","sbgp"]],["vttc"],["tref"],["iref"],["mfra",["tfra"]],["meco"],["hnti"],["hinf"],["strk"],["strd"],["sinf"],["rinf"],["schi"],["trgr"],["udta",["kind"]],["iprp",["ipma"]],["ipco"],["grpl"],["j2kH"],["etyp",["tyco"]]],boxCodes:[],fullBoxCodes:[],containerBoxCodes:[],sampleEntryCodes:{},sampleGroupEntryCodes:[],trackGroupTypes:[],UUIDBoxes:{},UUIDs:[],initialize:function(){l.FullBox.prototype=new l.Box,l.ContainerBox.prototype=new l.Box,l.SampleEntry.prototype=new l.Box,l.TrackGroupTypeBox.prototype=new l.FullBox,l.BASIC_BOXES.forEach(function(e){l.createBoxCtor(e)}),l.FULL_BOXES.forEach(function(e){l.createFullBoxCtor(e)}),l.CONTAINER_BOXES.forEach(function(e){l.createContainerBoxCtor(e[0],null,e[1])})},Box:function(e,n,s){this.type=e,this.size=n,this.uuid=s},FullBox:function(e,n,s){l.Box.call(this,e,n,s),this.flags=0,this.version=0},ContainerBox:function(e,n,s){l.Box.call(this,e,n,s),this.boxes=[]},SampleEntry:function(e,n,s,c){l.ContainerBox.call(this,e,n),this.hdr_size=s,this.start=c},SampleGroupEntry:function(e){this.grouping_type=e},TrackGroupTypeBox:function(e,n){l.FullBox.call(this,e,n)},createBoxCtor:function(e,n){l.boxCodes.push(e),l[e+"Box"]=function(s){l.Box.call(this,e,s)},l[e+"Box"].prototype=new l.Box,n&&(l[e+"Box"].prototype.parse=n)},createFullBoxCtor:function(e,n){l[e+"Box"]=function(s){l.FullBox.call(this,e,s)},l[e+"Box"].prototype=new l.FullBox,l[e+"Box"].prototype.parse=function(s){this.parseFullHeader(s),n&&n.call(this,s)}},addSubBoxArrays:function(e){if(e){this.subBoxNames=e;for(var n=e.length,s=0;s<n;s++)this[e[s]+"s"]=[]}},createContainerBoxCtor:function(e,n,s){l[e+"Box"]=function(c){l.ContainerBox.call(this,e,c),l.addSubBoxArrays.call(this,s)},l[e+"Box"].prototype=new l.ContainerBox,n&&(l[e+"Box"].prototype.parse=n)},createMediaSampleEntryCtor:function(e,n,s){l.sampleEntryCodes[e]=[],l[e+"SampleEntry"]=function(c,f){l.SampleEntry.call(this,c,f),l.addSubBoxArrays.call(this,s)},l[e+"SampleEntry"].prototype=new l.SampleEntry,n&&(l[e+"SampleEntry"].prototype.parse=n)},createSampleEntryCtor:function(e,n,s,c){l.sampleEntryCodes[e].push(n),l[n+"SampleEntry"]=function(f){l[e+"SampleEntry"].call(this,n,f),l.addSubBoxArrays.call(this,c)},l[n+"SampleEntry"].prototype=new l[e+"SampleEntry"],s&&(l[n+"SampleEntry"].prototype.parse=s)},createEncryptedSampleEntryCtor:function(e,n,s){l.createSampleEntryCtor.call(this,e,n,s,["sinf"])},createSampleGroupCtor:function(e,n){l[e+"SampleGroupEntry"]=function(s){l.SampleGroupEntry.call(this,e,s)},l[e+"SampleGroupEntry"].prototype=new l.SampleGroupEntry,n&&(l[e+"SampleGroupEntry"].prototype.parse=n)},createTrackGroupCtor:function(e,n){l[e+"TrackGroupTypeBox"]=function(s){l.TrackGroupTypeBox.call(this,e,s)},l[e+"TrackGroupTypeBox"].prototype=new l.TrackGroupTypeBox,n&&(l[e+"TrackGroupTypeBox"].prototype.parse=n)},createUUIDBox:function(e,n,s,c){l.UUIDs.push(e),l.UUIDBoxes[e]=function(f){n?l.FullBox.call(this,"uuid",f,e):s?l.ContainerBox.call(this,"uuid",f,e):l.Box.call(this,"uuid",f,e)},l.UUIDBoxes[e].prototype=n?new l.FullBox:s?new l.ContainerBox:new l.Box,c&&(n?l.UUIDBoxes[e].prototype.parse=function(f){this.parseFullHeader(f),c&&c.call(this,f)}:l.UUIDBoxes[e].prototype.parse=c)}};l.initialize(),l.TKHD_FLAG_ENABLED=1,l.TKHD_FLAG_IN_MOVIE=2,l.TKHD_FLAG_IN_PREVIEW=4,l.TFHD_FLAG_BASE_DATA_OFFSET=1,l.TFHD_FLAG_SAMPLE_DESC=2,l.TFHD_FLAG_SAMPLE_DUR=8,l.TFHD_FLAG_SAMPLE_SIZE=16,l.TFHD_FLAG_SAMPLE_FLAGS=32,l.TFHD_FLAG_DUR_EMPTY=65536,l.TFHD_FLAG_DEFAULT_BASE_IS_MOOF=131072,l.TRUN_FLAGS_DATA_OFFSET=1,l.TRUN_FLAGS_FIRST_FLAG=4,l.TRUN_FLAGS_DURATION=256,l.TRUN_FLAGS_SIZE=512,l.TRUN_FLAGS_FLAGS=1024,l.TRUN_FLAGS_CTS_OFFSET=2048,l.Box.prototype.add=function(e){return this.addBox(new l[e+"Box"])},l.Box.prototype.addBox=function(e){return this.boxes.push(e),this[e.type+"s"]?this[e.type+"s"].push(e):this[e.type]=e,e},l.Box.prototype.set=function(e,n){return this[e]=n,this},l.Box.prototype.addEntry=function(e,n){var s=n||"entries";return this[s]||(this[s]=[]),this[s].push(e),this},t.BoxParser=l,l.parseUUID=function(e){return l.parseHex16(e)},l.parseHex16=function(e){for(var n="",s=0;s<16;s++){var c=e.readUint8().toString(16);n+=c.length===1?"0"+c:c}return n},l.parseOneBox=function(e,n,s){var c,f=e.getPosition(),m=0,p,_;if(e.getEndPosition()-f<8)return r.debug("BoxParser","Not enough data in stream to parse the type and size of the box"),{code:l.ERR_NOT_ENOUGH_DATA};if(s&&s<8)return r.debug("BoxParser","Not enough bytes left in the parent box to parse a new box"),{code:l.ERR_NOT_ENOUGH_DATA};var S=e.readUint32(),x=e.readString(4),w=x;if(r.debug("BoxParser","Found box of type '"+x+"' and size "+S+" at position "+f),m=8,x=="uuid"){if(e.getEndPosition()-e.getPosition()<16||s-m<16)return e.seek(f),r.debug("BoxParser","Not enough bytes left in the parent box to parse a UUID box"),{code:l.ERR_NOT_ENOUGH_DATA};_=l.parseUUID(e),m+=16,w=_}if(S==1){if(e.getEndPosition()-e.getPosition()<8||s&&s-m<8)return e.seek(f),r.warn("BoxParser",'Not enough data in stream to parse the extended size of the "'+x+'" box'),{code:l.ERR_NOT_ENOUGH_DATA};S=e.readUint64(),m+=8}else if(S===0){if(s)S=s;else if(x!=="mdat")return r.error("BoxParser","Unlimited box size not supported for type: '"+x+"'"),c=new l.Box(x,S),{code:l.OK,box:c,size:c.size}}return S!==0&&S<m?(r.error("BoxParser","Box of type "+x+" has an invalid size "+S+" (too small to be a box)"),{code:l.ERR_NOT_ENOUGH_DATA,type:x,size:S,hdr_size:m,start:f}):S!==0&&s&&S>s?(r.error("BoxParser","Box of type '"+x+"' has a size "+S+" greater than its container size "+s),{code:l.ERR_NOT_ENOUGH_DATA,type:x,size:S,hdr_size:m,start:f}):S!==0&&f+S>e.getEndPosition()?(e.seek(f),r.info("BoxParser","Not enough data in stream to parse the entire '"+x+"' box"),{code:l.ERR_NOT_ENOUGH_DATA,type:x,size:S,hdr_size:m,start:f}):n?{code:l.OK,type:x,size:S,hdr_size:m,start:f}:(l[x+"Box"]?c=new l[x+"Box"](S):x!=="uuid"?(r.warn("BoxParser","Unknown box type: '"+x+"'"),c=new l.Box(x,S),c.has_unparsed_data=!0):l.UUIDBoxes[_]?c=new l.UUIDBoxes[_](S):(r.warn("BoxParser","Unknown uuid type: '"+_+"'"),c=new l.Box(x,S),c.uuid=_,c.has_unparsed_data=!0),c.hdr_size=m,c.start=f,c.write===l.Box.prototype.write&&c.type!=="mdat"&&(r.info("BoxParser","'"+w+"' box writing not yet implemented, keeping unparsed data in memory for later write"),c.parseDataAndRewind(e)),c.parse(e),p=e.getPosition()-(c.start+c.size),p<0?(r.warn("BoxParser","Parsing of box '"+w+"' did not read the entire indicated box data size (missing "+-p+" bytes), seeking forward"),e.seek(c.start+c.size)):p>0&&(r.error("BoxParser","Parsing of box '"+w+"' read "+p+" more bytes than the indicated box data size, seeking backwards"),c.size!==0&&e.seek(c.start+c.size)),{code:l.OK,box:c,size:c.size})},l.Box.prototype.parse=function(e){this.type!="mdat"?this.data=e.readUint8Array(this.size-this.hdr_size):this.size===0?e.seek(e.getEndPosition()):e.seek(this.start+this.size)},l.Box.prototype.parseDataAndRewind=function(e){this.data=e.readUint8Array(this.size-this.hdr_size),e.position-=this.size-this.hdr_size},l.FullBox.prototype.parseDataAndRewind=function(e){this.parseFullHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size),this.hdr_size-=4,e.position-=this.size-this.hdr_size},l.FullBox.prototype.parseFullHeader=function(e){this.version=e.readUint8(),this.flags=e.readUint24(),this.hdr_size+=4},l.FullBox.prototype.parse=function(e){this.parseFullHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size)},l.ContainerBox.prototype.parse=function(e){for(var n,s;e.getPosition()<this.start+this.size;)if(n=l.parseOneBox(e,!1,this.size-(e.getPosition()-this.start)),n.code===l.OK)if(s=n.box,this.boxes.push(s),this.subBoxNames&&this.subBoxNames.indexOf(s.type)!=-1)this[this.subBoxNames[this.subBoxNames.indexOf(s.type)]+"s"].push(s);else{var c=s.type!=="uuid"?s.type:s.uuid;this[c]?r.warn("Box of type "+c+" already stored in field of this type"):this[c]=s}else return},l.Box.prototype.parseLanguage=function(e){this.language=e.readUint16();var n=[];n[0]=this.language>>10&31,n[1]=this.language>>5&31,n[2]=this.language&31,this.languageString=String.fromCharCode(n[0]+96,n[1]+96,n[2]+96)},l.SAMPLE_ENTRY_TYPE_VISUAL="Visual",l.SAMPLE_ENTRY_TYPE_AUDIO="Audio",l.SAMPLE_ENTRY_TYPE_HINT="Hint",l.SAMPLE_ENTRY_TYPE_METADATA="Metadata",l.SAMPLE_ENTRY_TYPE_SUBTITLE="Subtitle",l.SAMPLE_ENTRY_TYPE_SYSTEM="System",l.SAMPLE_ENTRY_TYPE_TEXT="Text",l.SampleEntry.prototype.parseHeader=function(e){e.readUint8Array(6),this.data_reference_index=e.readUint16(),this.hdr_size+=8},l.SampleEntry.prototype.parse=function(e){this.parseHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size)},l.SampleEntry.prototype.parseDataAndRewind=function(e){this.parseHeader(e),this.data=e.readUint8Array(this.size-this.hdr_size),this.hdr_size-=8,e.position-=this.size-this.hdr_size},l.SampleEntry.prototype.parseFooter=function(e){l.ContainerBox.prototype.parse.call(this,e)},l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_HINT),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_METADATA),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SYSTEM),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_TEXT),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,function(e){var n;this.parseHeader(e),e.readUint16(),e.readUint16(),e.readUint32Array(3),this.width=e.readUint16(),this.height=e.readUint16(),this.horizresolution=e.readUint32(),this.vertresolution=e.readUint32(),e.readUint32(),this.frame_count=e.readUint16(),n=Math.min(31,e.readUint8()),this.compressorname=e.readString(n),n<31&&e.readString(31-n),this.depth=e.readUint16(),e.readUint16(),this.parseFooter(e)}),l.createMediaSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,function(e){this.parseHeader(e),e.readUint32Array(2),this.channel_count=e.readUint16(),this.samplesize=e.readUint16(),e.readUint16(),e.readUint16(),this.samplerate=e.readUint32()/65536,this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"avc1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"avc2"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"avc3"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"avc4"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"av01"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"dav1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"hvc1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"hev1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"hvt1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"lhe1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"dvh1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"dvhe"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vvc1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vvi1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vvs1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vvcN"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vp08"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"vp09"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"avs3"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"j2ki"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"mjp2"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"mjpg"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"uncv"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"mp4a"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"ac-3"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"ac-4"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"ec-3"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"Opus"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"mha1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"mha2"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"mhm1"),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"mhm2"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_VISUAL,"encv"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_AUDIO,"enca"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE,"encu"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SYSTEM,"encs"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_TEXT,"enct"),l.createEncryptedSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_METADATA,"encm"),l.createBoxCtor("a1lx",function(e){var n=e.readUint8()&1,s=((n&1)+1)*16;this.layer_size=[];for(var c=0;c<3;c++)s==16?this.layer_size[c]=e.readUint16():this.layer_size[c]=e.readUint32()}),l.createBoxCtor("a1op",function(e){this.op_index=e.readUint8()}),l.createFullBoxCtor("auxC",function(e){this.aux_type=e.readCString();var n=this.size-this.hdr_size-(this.aux_type.length+1);this.aux_subtype=e.readUint8Array(n)}),l.createBoxCtor("av1C",function(e){var n=e.readUint8();if(n>>7&!1){r.error("av1C marker problem");return}if(this.version=n&127,this.version!==1){r.error("av1C version "+this.version+" not supported");return}if(n=e.readUint8(),this.seq_profile=n>>5&7,this.seq_level_idx_0=n&31,n=e.readUint8(),this.seq_tier_0=n>>7&1,this.high_bitdepth=n>>6&1,this.twelve_bit=n>>5&1,this.monochrome=n>>4&1,this.chroma_subsampling_x=n>>3&1,this.chroma_subsampling_y=n>>2&1,this.chroma_sample_position=n&3,n=e.readUint8(),this.reserved_1=n>>5&7,this.reserved_1!==0){r.error("av1C reserved_1 parsing problem");return}if(this.initial_presentation_delay_present=n>>4&1,this.initial_presentation_delay_present===1)this.initial_presentation_delay_minus_one=n&15;else if(this.reserved_2=n&15,this.reserved_2!==0){r.error("av1C reserved_2 parsing problem");return}var s=this.size-this.hdr_size-4;this.configOBUs=e.readUint8Array(s)}),l.createBoxCtor("avcC",function(e){var n,s;for(this.configurationVersion=e.readUint8(),this.AVCProfileIndication=e.readUint8(),this.profile_compatibility=e.readUint8(),this.AVCLevelIndication=e.readUint8(),this.lengthSizeMinusOne=e.readUint8()&3,this.nb_SPS_nalus=e.readUint8()&31,s=this.size-this.hdr_size-6,this.SPS=[],n=0;n<this.nb_SPS_nalus;n++)this.SPS[n]={},this.SPS[n].length=e.readUint16(),this.SPS[n].nalu=e.readUint8Array(this.SPS[n].length),s-=2+this.SPS[n].length;for(this.nb_PPS_nalus=e.readUint8(),s--,this.PPS=[],n=0;n<this.nb_PPS_nalus;n++)this.PPS[n]={},this.PPS[n].length=e.readUint16(),this.PPS[n].nalu=e.readUint8Array(this.PPS[n].length),s-=2+this.PPS[n].length;s>0&&(this.ext=e.readUint8Array(s))}),l.createBoxCtor("btrt",function(e){this.bufferSizeDB=e.readUint32(),this.maxBitrate=e.readUint32(),this.avgBitrate=e.readUint32()}),l.createFullBoxCtor("ccst",function(e){var n=e.readUint8();this.all_ref_pics_intra=(n&128)==128,this.intra_pred_used=(n&64)==64,this.max_ref_per_pic=(n&63)>>2,e.readUint24()}),l.createBoxCtor("cdef",function(e){var n;for(this.channel_count=e.readUint16(),this.channel_indexes=[],this.channel_types=[],this.channel_associations=[],n=0;n<this.channel_count;n++)this.channel_indexes.push(e.readUint16()),this.channel_types.push(e.readUint16()),this.channel_associations.push(e.readUint16())}),l.createBoxCtor("clap",function(e){this.cleanApertureWidthN=e.readUint32(),this.cleanApertureWidthD=e.readUint32(),this.cleanApertureHeightN=e.readUint32(),this.cleanApertureHeightD=e.readUint32(),this.horizOffN=e.readUint32(),this.horizOffD=e.readUint32(),this.vertOffN=e.readUint32(),this.vertOffD=e.readUint32()}),l.createBoxCtor("clli",function(e){this.max_content_light_level=e.readUint16(),this.max_pic_average_light_level=e.readUint16()}),l.createFullBoxCtor("cmex",function(e){this.flags&1&&(this.pos_x=e.readInt32()),this.flags&2&&(this.pos_y=e.readInt32()),this.flags&4&&(this.pos_z=e.readInt32()),this.flags&8&&(this.version==0?this.flags&16?(this.quat_x=e.readInt32(),this.quat_y=e.readInt32(),this.quat_z=e.readInt32()):(this.quat_x=e.readInt16(),this.quat_y=e.readInt16(),this.quat_z=e.readInt16()):this.version==1),this.flags&32&&(this.id=e.readUint32())}),l.createFullBoxCtor("cmin",function(e){this.focal_length_x=e.readInt32(),this.principal_point_x=e.readInt32(),this.principal_point_y=e.readInt32(),this.flags&1&&(this.focal_length_y=e.readInt32(),this.skew_factor=e.readInt32())}),l.createBoxCtor("cmpd",function(e){for(this.component_count=e.readUint16(),this.component_types=[],this.component_type_urls=[],i=0;i<this.component_count;i++){var n=e.readUint16();this.component_types.push(n),n>=32768&&this.component_type_urls.push(e.readCString())}}),l.createFullBoxCtor("co64",function(e){var n,s;if(n=e.readUint32(),this.chunk_offsets=[],this.version===0)for(s=0;s<n;s++)this.chunk_offsets.push(e.readUint64())}),l.createFullBoxCtor("CoLL",function(e){this.maxCLL=e.readUint16(),this.maxFALL=e.readUint16()}),l.createBoxCtor("colr",function(e){if(this.colour_type=e.readString(4),this.colour_type==="nclx"){this.colour_primaries=e.readUint16(),this.transfer_characteristics=e.readUint16(),this.matrix_coefficients=e.readUint16();var n=e.readUint8();this.full_range_flag=n>>7}else this.colour_type==="rICC"?this.ICC_profile=e.readUint8Array(this.size-4):this.colour_type==="prof"&&(this.ICC_profile=e.readUint8Array(this.size-4))}),l.createFullBoxCtor("cprt",function(e){this.parseLanguage(e),this.notice=e.readCString()}),l.createFullBoxCtor("cslg",function(e){this.version===0&&(this.compositionToDTSShift=e.readInt32(),this.leastDecodeToDisplayDelta=e.readInt32(),this.greatestDecodeToDisplayDelta=e.readInt32(),this.compositionStartTime=e.readInt32(),this.compositionEndTime=e.readInt32())}),l.createFullBoxCtor("ctts",function(e){var n,s;if(n=e.readUint32(),this.sample_counts=[],this.sample_offsets=[],this.version===0)for(s=0;s<n;s++){this.sample_counts.push(e.readUint32());var c=e.readInt32();c<0&&r.warn("BoxParser","ctts box uses negative values without using version 1"),this.sample_offsets.push(c)}else if(this.version==1)for(s=0;s<n;s++)this.sample_counts.push(e.readUint32()),this.sample_offsets.push(e.readInt32())}),l.createBoxCtor("dac3",function(e){var n=e.readUint8(),s=e.readUint8(),c=e.readUint8();this.fscod=n>>6,this.bsid=n>>1&31,this.bsmod=(n&1)<<2|s>>6&3,this.acmod=s>>3&7,this.lfeon=s>>2&1,this.bit_rate_code=s&3|c>>5&7}),l.createBoxCtor("dec3",function(e){var n=e.readUint16();this.data_rate=n>>3,this.num_ind_sub=n&7,this.ind_subs=[];for(var s=0;s<this.num_ind_sub+1;s++){var c={};this.ind_subs.push(c);var f=e.readUint8(),m=e.readUint8(),p=e.readUint8();c.fscod=f>>6,c.bsid=f>>1&31,c.bsmod=(f&1)<<4|m>>4&15,c.acmod=m>>1&7,c.lfeon=m&1,c.num_dep_sub=p>>1&15,c.num_dep_sub>0&&(c.chan_loc=(p&1)<<8|e.readUint8())}}),l.createFullBoxCtor("dfLa",function(e){var n=127,s=128,c=[],f=["STREAMINFO","PADDING","APPLICATION","SEEKTABLE","VORBIS_COMMENT","CUESHEET","PICTURE","RESERVED"];this.parseFullHeader(e);do{var m=e.readUint8(),p=Math.min(m&n,f.length-1);if(p?e.readUint8Array(e.readUint24()):(e.readUint8Array(13),this.samplerate=e.readUint32()>>12,e.readUint8Array(20)),c.push(f[p]),m&s)break}while(!0);this.numMetadataBlocks=c.length+" ("+c.join(", ")+")"}),l.createBoxCtor("dimm",function(e){this.bytessent=e.readUint64()}),l.createBoxCtor("dmax",function(e){this.time=e.readUint32()}),l.createBoxCtor("dmed",function(e){this.bytessent=e.readUint64()}),l.createBoxCtor("dOps",function(e){if(this.Version=e.readUint8(),this.OutputChannelCount=e.readUint8(),this.PreSkip=e.readUint16(),this.InputSampleRate=e.readUint32(),this.OutputGain=e.readInt16(),this.ChannelMappingFamily=e.readUint8(),this.ChannelMappingFamily!==0){this.StreamCount=e.readUint8(),this.CoupledCount=e.readUint8(),this.ChannelMapping=[];for(var n=0;n<this.OutputChannelCount;n++)this.ChannelMapping[n]=e.readUint8()}}),l.createFullBoxCtor("dref",function(e){var n,s;this.entries=[];for(var c=e.readUint32(),f=0;f<c;f++)if(n=l.parseOneBox(e,!1,this.size-(e.getPosition()-this.start)),n.code===l.OK)s=n.box,this.entries.push(s);else return}),l.createBoxCtor("drep",function(e){this.bytessent=e.readUint64()}),l.createFullBoxCtor("elng",function(e){this.extended_language=e.readString(this.size-this.hdr_size)}),l.createFullBoxCtor("elst",function(e){this.entries=[];for(var n=e.readUint32(),s=0;s<n;s++){var c={};this.entries.push(c),this.version===1?(c.segment_duration=e.readUint64(),c.media_time=e.readInt64()):(c.segment_duration=e.readUint32(),c.media_time=e.readInt32()),c.media_rate_integer=e.readInt16(),c.media_rate_fraction=e.readInt16()}}),l.createFullBoxCtor("emsg",function(e){this.version==1?(this.timescale=e.readUint32(),this.presentation_time=e.readUint64(),this.event_duration=e.readUint32(),this.id=e.readUint32(),this.scheme_id_uri=e.readCString(),this.value=e.readCString()):(this.scheme_id_uri=e.readCString(),this.value=e.readCString(),this.timescale=e.readUint32(),this.presentation_time_delta=e.readUint32(),this.event_duration=e.readUint32(),this.id=e.readUint32());var n=this.size-this.hdr_size-(4*4+(this.scheme_id_uri.length+1)+(this.value.length+1));this.version==1&&(n-=4),this.message_data=e.readUint8Array(n)}),l.createEntityToGroupCtor=function(e,n){l[e+"Box"]=function(s){l.FullBox.call(this,e,s)},l[e+"Box"].prototype=new l.FullBox,l[e+"Box"].prototype.parse=function(s){if(this.parseFullHeader(s),n)n.call(this,s);else for(this.group_id=s.readUint32(),this.num_entities_in_group=s.readUint32(),this.entity_ids=[],i=0;i<this.num_entities_in_group;i++){var c=s.readUint32();this.entity_ids.push(c)}}},l.createEntityToGroupCtor("aebr"),l.createEntityToGroupCtor("afbr"),l.createEntityToGroupCtor("albc"),l.createEntityToGroupCtor("altr"),l.createEntityToGroupCtor("brst"),l.createEntityToGroupCtor("dobr"),l.createEntityToGroupCtor("eqiv"),l.createEntityToGroupCtor("favc"),l.createEntityToGroupCtor("fobr"),l.createEntityToGroupCtor("iaug"),l.createEntityToGroupCtor("pano"),l.createEntityToGroupCtor("slid"),l.createEntityToGroupCtor("ster"),l.createEntityToGroupCtor("tsyn"),l.createEntityToGroupCtor("wbbr"),l.createEntityToGroupCtor("prgr"),l.createFullBoxCtor("esds",function(e){var n=e.readUint8Array(this.size-this.hdr_size);if(this.data=n,typeof h<"u"){var s=new h;this.esd=s.parseOneDescriptor(new o(n.buffer,0,o.BIG_ENDIAN))}}),l.createBoxCtor("fiel",function(e){this.fieldCount=e.readUint8(),this.fieldOrdering=e.readUint8()}),l.createBoxCtor("frma",function(e){this.data_format=e.readString(4)}),l.createBoxCtor("ftyp",function(e){var n=this.size-this.hdr_size;this.major_brand=e.readString(4),this.minor_version=e.readUint32(),n-=8,this.compatible_brands=[];for(var s=0;n>=4;)this.compatible_brands[s]=e.readString(4),n-=4,s++}),l.createFullBoxCtor("hdlr",function(e){this.version===0&&(e.readUint32(),this.handler=e.readString(4),e.readUint32Array(3),this.name=e.readString(this.size-this.hdr_size-20),this.name[this.name.length-1]==="\0"&&(this.name=this.name.slice(0,-1)))}),l.createBoxCtor("hvcC",function(e){var n,s,c,f;this.configurationVersion=e.readUint8(),f=e.readUint8(),this.general_profile_space=f>>6,this.general_tier_flag=(f&32)>>5,this.general_profile_idc=f&31,this.general_profile_compatibility=e.readUint32(),this.general_constraint_indicator=e.readUint8Array(6),this.general_level_idc=e.readUint8(),this.min_spatial_segmentation_idc=e.readUint16()&4095,this.parallelismType=e.readUint8()&3,this.chroma_format_idc=e.readUint8()&3,this.bit_depth_luma_minus8=e.readUint8()&7,this.bit_depth_chroma_minus8=e.readUint8()&7,this.avgFrameRate=e.readUint16(),f=e.readUint8(),this.constantFrameRate=f>>6,this.numTemporalLayers=(f&13)>>3,this.temporalIdNested=(f&4)>>2,this.lengthSizeMinusOne=f&3,this.nalu_arrays=[];var m=e.readUint8();for(n=0;n<m;n++){var p=[];this.nalu_arrays.push(p),f=e.readUint8(),p.completeness=(f&128)>>7,p.nalu_type=f&63;var _=e.readUint16();for(s=0;s<_;s++){var S={};p.push(S),c=e.readUint16(),S.data=e.readUint8Array(c)}}}),l.createFullBoxCtor("iinf",function(e){var n;this.version===0?this.entry_count=e.readUint16():this.entry_count=e.readUint32(),this.item_infos=[];for(var s=0;s<this.entry_count;s++)if(n=l.parseOneBox(e,!1,this.size-(e.getPosition()-this.start)),n.code===l.OK)n.box.type!=="infe"&&r.error("BoxParser","Expected 'infe' box, got "+n.box.type),this.item_infos[s]=n.box;else return}),l.createFullBoxCtor("iloc",function(e){var n;n=e.readUint8(),this.offset_size=n>>4&15,this.length_size=n&15,n=e.readUint8(),this.base_offset_size=n>>4&15,this.version===1||this.version===2?this.index_size=n&15:this.index_size=0,this.items=[];var s=0;if(this.version<2)s=e.readUint16();else if(this.version===2)s=e.readUint32();else throw"version of iloc box not supported";for(var c=0;c<s;c++){var f={};if(this.items.push(f),this.version<2)f.item_ID=e.readUint16();else if(this.version===2)f.item_ID=e.readUint16();else throw"version of iloc box not supported";switch(this.version===1||this.version===2?f.construction_method=e.readUint16()&15:f.construction_method=0,f.data_reference_index=e.readUint16(),this.base_offset_size){case 0:f.base_offset=0;break;case 4:f.base_offset=e.readUint32();break;case 8:f.base_offset=e.readUint64();break;default:throw"Error reading base offset size"}var m=e.readUint16();f.extents=[];for(var p=0;p<m;p++){var _={};if(f.extents.push(_),this.version===1||this.version===2)switch(this.index_size){case 0:_.extent_index=0;break;case 4:_.extent_index=e.readUint32();break;case 8:_.extent_index=e.readUint64();break;default:throw"Error reading extent index"}switch(this.offset_size){case 0:_.extent_offset=0;break;case 4:_.extent_offset=e.readUint32();break;case 8:_.extent_offset=e.readUint64();break;default:throw"Error reading extent index"}switch(this.length_size){case 0:_.extent_length=0;break;case 4:_.extent_length=e.readUint32();break;case 8:_.extent_length=e.readUint64();break;default:throw"Error reading extent index"}}}}),l.createBoxCtor("imir",function(e){var n=e.readUint8();this.reserved=n>>7,this.axis=n&1}),l.createFullBoxCtor("infe",function(e){if((this.version===0||this.version===1)&&(this.item_ID=e.readUint16(),this.item_protection_index=e.readUint16(),this.item_name=e.readCString(),this.content_type=e.readCString(),this.content_encoding=e.readCString()),this.version===1){this.extension_type=e.readString(4),r.warn("BoxParser","Cannot parse extension type"),e.seek(this.start+this.size);return}this.version>=2&&(this.version===2?this.item_ID=e.readUint16():this.version===3&&(this.item_ID=e.readUint32()),this.item_protection_index=e.readUint16(),this.item_type=e.readString(4),this.item_name=e.readCString(),this.item_type==="mime"?(this.content_type=e.readCString(),this.content_encoding=e.readCString()):this.item_type==="uri "&&(this.item_uri_type=e.readCString()))}),l.createFullBoxCtor("ipma",function(e){var n,s;for(entry_count=e.readUint32(),this.associations=[],n=0;n<entry_count;n++){var c={};this.associations.push(c),this.version<1?c.id=e.readUint16():c.id=e.readUint32();var f=e.readUint8();for(c.props=[],s=0;s<f;s++){var m=e.readUint8(),p={};c.props.push(p),p.essential=(m&128)>>7===1,this.flags&1?p.property_index=(m&127)<<8|e.readUint8():p.property_index=m&127}}}),l.createFullBoxCtor("iref",function(e){var n,s;for(this.references=[];e.getPosition()<this.start+this.size;)if(n=l.parseOneBox(e,!0,this.size-(e.getPosition()-this.start)),n.code===l.OK)this.version===0?s=new l.SingleItemTypeReferenceBox(n.type,n.size,n.hdr_size,n.start):s=new l.SingleItemTypeReferenceBoxLarge(n.type,n.size,n.hdr_size,n.start),s.write===l.Box.prototype.write&&s.type!=="mdat"&&(r.warn("BoxParser",s.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),s.parseDataAndRewind(e)),s.parse(e),this.references.push(s);else return}),l.createBoxCtor("irot",function(e){this.angle=e.readUint8()&3}),l.createFullBoxCtor("ispe",function(e){this.image_width=e.readUint32(),this.image_height=e.readUint32()}),l.createFullBoxCtor("kind",function(e){this.schemeURI=e.readCString(),this.value=e.readCString()}),l.createFullBoxCtor("leva",function(e){var n=e.readUint8();this.levels=[];for(var s=0;s<n;s++){var c={};this.levels[s]=c,c.track_ID=e.readUint32();var f=e.readUint8();switch(c.padding_flag=f>>7,c.assignment_type=f&127,c.assignment_type){case 0:c.grouping_type=e.readString(4);break;case 1:c.grouping_type=e.readString(4),c.grouping_type_parameter=e.readUint32();break;case 2:break;case 3:break;case 4:c.sub_track_id=e.readUint32();break;default:r.warn("BoxParser","Unknown leva assignement type")}}}),l.createBoxCtor("lsel",function(e){this.layer_id=e.readUint16()}),l.createBoxCtor("maxr",function(e){this.period=e.readUint32(),this.bytes=e.readUint32()}),l.createBoxCtor("mdcv",function(e){this.display_primaries=[],this.display_primaries[0]={},this.display_primaries[0].x=e.readUint16(),this.display_primaries[0].y=e.readUint16(),this.display_primaries[1]={},this.display_primaries[1].x=e.readUint16(),this.display_primaries[1].y=e.readUint16(),this.display_primaries[2]={},this.display_primaries[2].x=e.readUint16(),this.display_primaries[2].y=e.readUint16(),this.white_point={},this.white_point.x=e.readUint16(),this.white_point.y=e.readUint16(),this.max_display_mastering_luminance=e.readUint32(),this.min_display_mastering_luminance=e.readUint32()}),l.createFullBoxCtor("mdhd",function(e){this.version==1?(this.creation_time=e.readUint64(),this.modification_time=e.readUint64(),this.timescale=e.readUint32(),this.duration=e.readUint64()):(this.creation_time=e.readUint32(),this.modification_time=e.readUint32(),this.timescale=e.readUint32(),this.duration=e.readUint32()),this.parseLanguage(e),e.readUint16()}),l.createFullBoxCtor("mehd",function(e){this.flags&1&&(r.warn("BoxParser","mehd box incorrectly uses flags set to 1, converting version to 1"),this.version=1),this.version==1?this.fragment_duration=e.readUint64():this.fragment_duration=e.readUint32()}),l.createFullBoxCtor("meta",function(e){this.boxes=[],l.ContainerBox.prototype.parse.call(this,e)}),l.createFullBoxCtor("mfhd",function(e){this.sequence_number=e.readUint32()}),l.createFullBoxCtor("mfro",function(e){this._size=e.readUint32()}),l.createFullBoxCtor("mvhd",function(e){this.version==1?(this.creation_time=e.readUint64(),this.modification_time=e.readUint64(),this.timescale=e.readUint32(),this.duration=e.readUint64()):(this.creation_time=e.readUint32(),this.modification_time=e.readUint32(),this.timescale=e.readUint32(),this.duration=e.readUint32()),this.rate=e.readUint32(),this.volume=e.readUint16()>>8,e.readUint16(),e.readUint32Array(2),this.matrix=e.readUint32Array(9),e.readUint32Array(6),this.next_track_id=e.readUint32()}),l.createBoxCtor("npck",function(e){this.packetssent=e.readUint32()}),l.createBoxCtor("nump",function(e){this.packetssent=e.readUint64()}),l.createFullBoxCtor("padb",function(e){var n=e.readUint32();this.padbits=[];for(var s=0;s<Math.floor((n+1)/2);s++)this.padbits=e.readUint8()}),l.createBoxCtor("pasp",function(e){this.hSpacing=e.readUint32(),this.vSpacing=e.readUint32()}),l.createBoxCtor("payl",function(e){this.text=e.readString(this.size-this.hdr_size)}),l.createBoxCtor("payt",function(e){this.payloadID=e.readUint32();var n=e.readUint8();this.rtpmap_string=e.readString(n)}),l.createFullBoxCtor("pdin",function(e){var n=(this.size-this.hdr_size)/8;this.rate=[],this.initial_delay=[];for(var s=0;s<n;s++)this.rate[s]=e.readUint32(),this.initial_delay[s]=e.readUint32()}),l.createFullBoxCtor("pitm",function(e){this.version===0?this.item_id=e.readUint16():this.item_id=e.readUint32()}),l.createFullBoxCtor("pixi",function(e){var n;for(this.num_channels=e.readUint8(),this.bits_per_channels=[],n=0;n<this.num_channels;n++)this.bits_per_channels[n]=e.readUint8()}),l.createBoxCtor("pmax",function(e){this.bytes=e.readUint32()}),l.createFullBoxCtor("prdi",function(e){if(this.step_count=e.readUint16(),this.item_count=[],this.flags&2)for(var n=0;n<this.step_count;n++)this.item_count[n]=e.readUint16()}),l.createFullBoxCtor("prft",function(e){this.ref_track_id=e.readUint32(),this.ntp_timestamp=e.readUint64(),this.version===0?this.media_time=e.readUint32():this.media_time=e.readUint64()}),l.createFullBoxCtor("pssh",function(e){if(this.system_id=l.parseHex16(e),this.version>0){var n=e.readUint32();this.kid=[];for(var s=0;s<n;s++)this.kid[s]=l.parseHex16(e)}var c=e.readUint32();c>0&&(this.data=e.readUint8Array(c))}),l.createFullBoxCtor("clef",function(e){this.width=e.readUint32(),this.height=e.readUint32()}),l.createFullBoxCtor("enof",function(e){this.width=e.readUint32(),this.height=e.readUint32()}),l.createFullBoxCtor("prof",function(e){this.width=e.readUint32(),this.height=e.readUint32()}),l.createContainerBoxCtor("tapt",null,["clef","prof","enof"]),l.createBoxCtor("rtp ",function(e){this.descriptionformat=e.readString(4),this.sdptext=e.readString(this.size-this.hdr_size-4)}),l.createFullBoxCtor("saio",function(e){this.flags&1&&(this.aux_info_type=e.readUint32(),this.aux_info_type_parameter=e.readUint32());var n=e.readUint32();this.offset=[];for(var s=0;s<n;s++)this.version===0?this.offset[s]=e.readUint32():this.offset[s]=e.readUint64()}),l.createFullBoxCtor("saiz",function(e){this.flags&1&&(this.aux_info_type=e.readUint32(),this.aux_info_type_parameter=e.readUint32()),this.default_sample_info_size=e.readUint8();var n=e.readUint32();if(this.sample_info_size=[],this.default_sample_info_size===0)for(var s=0;s<n;s++)this.sample_info_size[s]=e.readUint8()}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_METADATA,"mett",function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.mime_format=e.readCString(),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_METADATA,"metx",function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.namespace=e.readCString(),this.schema_location=e.readCString(),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE,"sbtt",function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.mime_format=e.readCString(),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE,"stpp",function(e){this.parseHeader(e),this.namespace=e.readCString(),this.schema_location=e.readCString(),this.auxiliary_mime_types=e.readCString(),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE,"stxt",function(e){this.parseHeader(e),this.content_encoding=e.readCString(),this.mime_format=e.readCString(),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_SUBTITLE,"tx3g",function(e){this.parseHeader(e),this.displayFlags=e.readUint32(),this.horizontal_justification=e.readInt8(),this.vertical_justification=e.readInt8(),this.bg_color_rgba=e.readUint8Array(4),this.box_record=e.readInt16Array(4),this.style_record=e.readUint8Array(12),this.parseFooter(e)}),l.createSampleEntryCtor(l.SAMPLE_ENTRY_TYPE_METADATA,"wvtt",function(e){this.parseHeader(e),this.parseFooter(e)}),l.createSampleGroupCtor("alst",function(e){var n,s=e.readUint16();for(this.first_output_sample=e.readUint16(),this.sample_offset=[],n=0;n<s;n++)this.sample_offset[n]=e.readUint32();var c=this.description_length-4-4*s;for(this.num_output_samples=[],this.num_total_samples=[],n=0;n<c/4;n++)this.num_output_samples[n]=e.readUint16(),this.num_total_samples[n]=e.readUint16()}),l.createSampleGroupCtor("avll",function(e){this.layerNumber=e.readUint8(),this.accurateStatisticsFlag=e.readUint8(),this.avgBitRate=e.readUint16(),this.avgFrameRate=e.readUint16()}),l.createSampleGroupCtor("avss",function(e){this.subSequenceIdentifier=e.readUint16(),this.layerNumber=e.readUint8();var n=e.readUint8();this.durationFlag=n>>7,this.avgRateFlag=n>>6&1,this.durationFlag&&(this.duration=e.readUint32()),this.avgRateFlag&&(this.accurateStatisticsFlag=e.readUint8(),this.avgBitRate=e.readUint16(),this.avgFrameRate=e.readUint16()),this.dependency=[];for(var s=e.readUint8(),c=0;c<s;c++){var f={};this.dependency.push(f),f.subSeqDirectionFlag=e.readUint8(),f.layerNumber=e.readUint8(),f.subSequenceIdentifier=e.readUint16()}}),l.createSampleGroupCtor("dtrt",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("mvif",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("prol",function(e){this.roll_distance=e.readInt16()}),l.createSampleGroupCtor("rap ",function(e){var n=e.readUint8();this.num_leading_samples_known=n>>7,this.num_leading_samples=n&127}),l.createSampleGroupCtor("rash",function(e){if(this.operation_point_count=e.readUint16(),this.description_length!==2+(this.operation_point_count===1?2:this.operation_point_count*6)+9)r.warn("BoxParser","Mismatch in "+this.grouping_type+" sample group length"),this.data=e.readUint8Array(this.description_length-2);else{if(this.operation_point_count===1)this.target_rate_share=e.readUint16();else{this.target_rate_share=[],this.available_bitrate=[];for(var n=0;n<this.operation_point_count;n++)this.available_bitrate[n]=e.readUint32(),this.target_rate_share[n]=e.readUint16()}this.maximum_bitrate=e.readUint32(),this.minimum_bitrate=e.readUint32(),this.discard_priority=e.readUint8()}}),l.createSampleGroupCtor("roll",function(e){this.roll_distance=e.readInt16()}),l.SampleGroupEntry.prototype.parse=function(e){r.warn("BoxParser","Unknown Sample Group type: "+this.grouping_type),this.data=e.readUint8Array(this.description_length)},l.createSampleGroupCtor("scif",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("scnm",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("seig",function(e){this.reserved=e.readUint8();var n=e.readUint8();this.crypt_byte_block=n>>4,this.skip_byte_block=n&15,this.isProtected=e.readUint8(),this.Per_Sample_IV_Size=e.readUint8(),this.KID=l.parseHex16(e),this.constant_IV_size=0,this.constant_IV=0,this.isProtected===1&&this.Per_Sample_IV_Size===0&&(this.constant_IV_size=e.readUint8(),this.constant_IV=e.readUint8Array(this.constant_IV_size))}),l.createSampleGroupCtor("stsa",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("sync",function(e){var n=e.readUint8();this.NAL_unit_type=n&63}),l.createSampleGroupCtor("tele",function(e){var n=e.readUint8();this.level_independently_decodable=n>>7}),l.createSampleGroupCtor("tsas",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("tscl",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createSampleGroupCtor("vipr",function(e){r.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),l.createFullBoxCtor("sbgp",function(e){this.grouping_type=e.readString(4),this.version===1?this.grouping_type_parameter=e.readUint32():this.grouping_type_parameter=0,this.entries=[];for(var n=e.readUint32(),s=0;s<n;s++){var c={};this.entries.push(c),c.sample_count=e.readInt32(),c.group_description_index=e.readInt32()}}),l.createFullBoxCtor("schm",function(e){this.scheme_type=e.readString(4),this.scheme_version=e.readUint32(),this.flags&1&&(this.scheme_uri=e.readString(this.size-this.hdr_size-8))}),l.createBoxCtor("sdp ",function(e){this.sdptext=e.readString(this.size-this.hdr_size)}),l.createFullBoxCtor("sdtp",function(e){var n,s=this.size-this.hdr_size;this.is_leading=[],this.sample_depends_on=[],this.sample_is_depended_on=[],this.sample_has_redundancy=[];for(var c=0;c<s;c++)n=e.readUint8(),this.is_leading[c]=n>>6,this.sample_depends_on[c]=n>>4&3,this.sample_is_depended_on[c]=n>>2&3,this.sample_has_redundancy[c]=n&3}),l.createFullBoxCtor("senc"),l.createFullBoxCtor("sgpd",function(e){this.grouping_type=e.readString(4),r.debug("BoxParser","Found Sample Groups of type "+this.grouping_type),this.version===1?this.default_length=e.readUint32():this.default_length=0,this.version>=2&&(this.default_group_description_index=e.readUint32()),this.entries=[];for(var n=e.readUint32(),s=0;s<n;s++){var c;l[this.grouping_type+"SampleGroupEntry"]?c=new l[this.grouping_type+"SampleGroupEntry"](this.grouping_type):c=new l.SampleGroupEntry(this.grouping_type),this.entries.push(c),this.version===1?this.default_length===0?c.description_length=e.readUint32():c.description_length=this.default_length:c.description_length=this.default_length,c.write===l.SampleGroupEntry.prototype.write&&(r.info("BoxParser","SampleGroup for type "+this.grouping_type+" writing not yet implemented, keeping unparsed data in memory for later write"),c.data=e.readUint8Array(c.description_length),e.position-=c.description_length),c.parse(e)}}),l.createFullBoxCtor("sidx",function(e){this.reference_ID=e.readUint32(),this.timescale=e.readUint32(),this.version===0?(this.earliest_presentation_time=e.readUint32(),this.first_offset=e.readUint32()):(this.earliest_presentation_time=e.readUint64(),this.first_offset=e.readUint64()),e.readUint16(),this.references=[];for(var n=e.readUint16(),s=0;s<n;s++){var c={};this.references.push(c);var f=e.readUint32();c.reference_type=f>>31&1,c.referenced_size=f&2147483647,c.subsegment_duration=e.readUint32(),f=e.readUint32(),c.starts_with_SAP=f>>31&1,c.SAP_type=f>>28&7,c.SAP_delta_time=f&268435455}}),l.SingleItemTypeReferenceBox=function(e,n,s,c){l.Box.call(this,e,n),this.hdr_size=s,this.start=c},l.SingleItemTypeReferenceBox.prototype=new l.Box,l.SingleItemTypeReferenceBox.prototype.parse=function(e){this.from_item_ID=e.readUint16();var n=e.readUint16();this.references=[];for(var s=0;s<n;s++)this.references[s]={},this.references[s].to_item_ID=e.readUint16()},l.SingleItemTypeReferenceBoxLarge=function(e,n,s,c){l.Box.call(this,e,n),this.hdr_size=s,this.start=c},l.SingleItemTypeReferenceBoxLarge.prototype=new l.Box,l.SingleItemTypeReferenceBoxLarge.prototype.parse=function(e){this.from_item_ID=e.readUint32();var n=e.readUint16();this.references=[];for(var s=0;s<n;s++)this.references[s]={},this.references[s].to_item_ID=e.readUint32()},l.createFullBoxCtor("SmDm",function(e){this.primaryRChromaticity_x=e.readUint16(),this.primaryRChromaticity_y=e.readUint16(),this.primaryGChromaticity_x=e.readUint16(),this.primaryGChromaticity_y=e.readUint16(),this.primaryBChromaticity_x=e.readUint16(),this.primaryBChromaticity_y=e.readUint16(),this.whitePointChromaticity_x=e.readUint16(),this.whitePointChromaticity_y=e.readUint16(),this.luminanceMax=e.readUint32(),this.luminanceMin=e.readUint32()}),l.createFullBoxCtor("smhd",function(e){this.balance=e.readUint16(),e.readUint16()}),l.createFullBoxCtor("ssix",function(e){this.subsegments=[];for(var n=e.readUint32(),s=0;s<n;s++){var c={};this.subsegments.push(c),c.ranges=[];for(var f=e.readUint32(),m=0;m<f;m++){var p={};c.ranges.push(p),p.level=e.readUint8(),p.range_size=e.readUint24()}}}),l.createFullBoxCtor("stco",function(e){var n;if(n=e.readUint32(),this.chunk_offsets=[],this.version===0)for(var s=0;s<n;s++)this.chunk_offsets.push(e.readUint32())}),l.createFullBoxCtor("stdp",function(e){var n=(this.size-this.hdr_size)/2;this.priority=[];for(var s=0;s<n;s++)this.priority[s]=e.readUint16()}),l.createFullBoxCtor("sthd"),l.createFullBoxCtor("stri",function(e){this.switch_group=e.readUint16(),this.alternate_group=e.readUint16(),this.sub_track_id=e.readUint32();var n=(this.size-this.hdr_size-8)/4;this.attribute_list=[];for(var s=0;s<n;s++)this.attribute_list[s]=e.readUint32()}),l.createFullBoxCtor("stsc",function(e){var n,s;if(n=e.readUint32(),this.first_chunk=[],this.samples_per_chunk=[],this.sample_description_index=[],this.version===0)for(s=0;s<n;s++)this.first_chunk.push(e.readUint32()),this.samples_per_chunk.push(e.readUint32()),this.sample_description_index.push(e.readUint32())}),l.createFullBoxCtor("stsd",function(e){var n,s,c,f;for(this.entries=[],c=e.readUint32(),n=1;n<=c;n++)if(s=l.parseOneBox(e,!0,this.size-(e.getPosition()-this.start)),s.code===l.OK)l[s.type+"SampleEntry"]?(f=new l[s.type+"SampleEntry"](s.size),f.hdr_size=s.hdr_size,f.start=s.start):(r.warn("BoxParser","Unknown sample entry type: "+s.type),f=new l.SampleEntry(s.type,s.size,s.hdr_size,s.start)),f.write===l.SampleEntry.prototype.write&&(r.info("BoxParser","SampleEntry "+f.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),f.parseDataAndRewind(e)),f.parse(e),this.entries.push(f);else return}),l.createFullBoxCtor("stsg",function(e){this.grouping_type=e.readUint32();var n=e.readUint16();this.group_description_index=[];for(var s=0;s<n;s++)this.group_description_index[s]=e.readUint32()}),l.createFullBoxCtor("stsh",function(e){var n,s;if(n=e.readUint32(),this.shadowed_sample_numbers=[],this.sync_sample_numbers=[],this.version===0)for(s=0;s<n;s++)this.shadowed_sample_numbers.push(e.readUint32()),this.sync_sample_numbers.push(e.readUint32())}),l.createFullBoxCtor("stss",function(e){var n,s;if(s=e.readUint32(),this.version===0)for(this.sample_numbers=[],n=0;n<s;n++)this.sample_numbers.push(e.readUint32())}),l.createFullBoxCtor("stsz",function(e){var n;if(this.sample_sizes=[],this.version===0)for(this.sample_size=e.readUint32(),this.sample_count=e.readUint32(),n=0;n<this.sample_count;n++)this.sample_size===0?this.sample_sizes.push(e.readUint32()):this.sample_sizes[n]=this.sample_size}),l.createFullBoxCtor("stts",function(e){var n,s,c;if(n=e.readUint32(),this.sample_counts=[],this.sample_deltas=[],this.version===0)for(s=0;s<n;s++)this.sample_counts.push(e.readUint32()),c=e.readInt32(),c<0&&(r.warn("BoxParser","File uses negative stts sample delta, using value 1 instead, sync may be lost!"),c=1),this.sample_deltas.push(c)}),l.createFullBoxCtor("stvi",function(e){var n=e.readUint32();this.single_view_allowed=n&3,this.stereo_scheme=e.readUint32();var s=e.readUint32();this.stereo_indication_type=e.readString(s);var c,f;for(this.boxes=[];e.getPosition()<this.start+this.size;)if(c=l.parseOneBox(e,!1,this.size-(e.getPosition()-this.start)),c.code===l.OK)f=c.box,this.boxes.push(f),this[f.type]=f;else return}),l.createBoxCtor("styp",function(e){l.ftypBox.prototype.parse.call(this,e)}),l.createFullBoxCtor("stz2",function(e){var n,s;if(this.sample_sizes=[],this.version===0)if(this.reserved=e.readUint24(),this.field_size=e.readUint8(),s=e.readUint32(),this.field_size===4)for(n=0;n<s;n+=2){var c=e.readUint8();this.sample_sizes[n]=c>>4&15,this.sample_sizes[n+1]=c&15}else if(this.field_size===8)for(n=0;n<s;n++)this.sample_sizes[n]=e.readUint8();else if(this.field_size===16)for(n=0;n<s;n++)this.sample_sizes[n]=e.readUint16();else r.error("BoxParser","Error in length field in stz2 box")}),l.createFullBoxCtor("subs",function(e){var n,s,c,f;for(c=e.readUint32(),this.entries=[],n=0;n<c;n++){var m={};if(this.entries[n]=m,m.sample_delta=e.readUint32(),m.subsamples=[],f=e.readUint16(),f>0)for(s=0;s<f;s++){var p={};m.subsamples.push(p),this.version==1?p.size=e.readUint32():p.size=e.readUint16(),p.priority=e.readUint8(),p.discardable=e.readUint8(),p.codec_specific_parameters=e.readUint32()}}}),l.createFullBoxCtor("tenc",function(e){if(e.readUint8(),this.version===0)e.readUint8();else{var n=e.readUint8();this.default_crypt_byte_block=n>>4&15,this.default_skip_byte_block=n&15}this.default_isProtected=e.readUint8(),this.default_Per_Sample_IV_Size=e.readUint8(),this.default_KID=l.parseHex16(e),this.default_isProtected===1&&this.default_Per_Sample_IV_Size===0&&(this.default_constant_IV_size=e.readUint8(),this.default_constant_IV=e.readUint8Array(this.default_constant_IV_size))}),l.createFullBoxCtor("tfdt",function(e){this.version==1?this.baseMediaDecodeTime=e.readUint64():this.baseMediaDecodeTime=e.readUint32()}),l.createFullBoxCtor("tfhd",function(e){var n=0;this.track_id=e.readUint32(),this.size-this.hdr_size>n&&this.flags&l.TFHD_FLAG_BASE_DATA_OFFSET?(this.base_data_offset=e.readUint64(),n+=8):this.base_data_offset=0,this.size-this.hdr_size>n&&this.flags&l.TFHD_FLAG_SAMPLE_DESC?(this.default_sample_description_index=e.readUint32(),n+=4):this.default_sample_description_index=0,this.size-this.hdr_size>n&&this.flags&l.TFHD_FLAG_SAMPLE_DUR?(this.default_sample_duration=e.readUint32(),n+=4):this.default_sample_duration=0,this.size-this.hdr_size>n&&this.flags&l.TFHD_FLAG_SAMPLE_SIZE?(this.default_sample_size=e.readUint32(),n+=4):this.default_sample_size=0,this.size-this.hdr_size>n&&this.flags&l.TFHD_FLAG_SAMPLE_FLAGS?(this.default_sample_flags=e.readUint32(),n+=4):this.default_sample_flags=0}),l.createFullBoxCtor("tfra",function(e){this.track_ID=e.readUint32(),e.readUint24();var n=e.readUint8();this.length_size_of_traf_num=n>>4&3,this.length_size_of_trun_num=n>>2&3,this.length_size_of_sample_num=n&3,this.entries=[];for(var s=e.readUint32(),c=0;c<s;c++)this.version===1?(this.time=e.readUint64(),this.moof_offset=e.readUint64()):(this.time=e.readUint32(),this.moof_offset=e.readUint32()),this.traf_number=e["readUint"+8*(this.length_size_of_traf_num+1)](),this.trun_number=e["readUint"+8*(this.length_size_of_trun_num+1)](),this.sample_number=e["readUint"+8*(this.length_size_of_sample_num+1)]()}),l.createFullBoxCtor("tkhd",function(e){this.version==1?(this.creation_time=e.readUint64(),this.modification_time=e.readUint64(),this.track_id=e.readUint32(),e.readUint32(),this.duration=e.readUint64()):(this.creation_time=e.readUint32(),this.modification_time=e.readUint32(),this.track_id=e.readUint32(),e.readUint32(),this.duration=e.readUint32()),e.readUint32Array(2),this.layer=e.readInt16(),this.alternate_group=e.readInt16(),this.volume=e.readInt16()>>8,e.readUint16(),this.matrix=e.readInt32Array(9),this.width=e.readUint32(),this.height=e.readUint32()}),l.createBoxCtor("tmax",function(e){this.time=e.readUint32()}),l.createBoxCtor("tmin",function(e){this.time=e.readUint32()}),l.createBoxCtor("totl",function(e){this.bytessent=e.readUint32()}),l.createBoxCtor("tpay",function(e){this.bytessent=e.readUint32()}),l.createBoxCtor("tpyl",function(e){this.bytessent=e.readUint64()}),l.TrackGroupTypeBox.prototype.parse=function(e){this.parseFullHeader(e),this.track_group_id=e.readUint32()},l.createTrackGroupCtor("msrc"),l.TrackReferenceTypeBox=function(e,n,s,c){l.Box.call(this,e,n),this.hdr_size=s,this.start=c},l.TrackReferenceTypeBox.prototype=new l.Box,l.TrackReferenceTypeBox.prototype.parse=function(e){this.track_ids=e.readUint32Array((this.size-this.hdr_size)/4)},l.trefBox.prototype.parse=function(e){for(var n,s;e.getPosition()<this.start+this.size;)if(n=l.parseOneBox(e,!0,this.size-(e.getPosition()-this.start)),n.code===l.OK)s=new l.TrackReferenceTypeBox(n.type,n.size,n.hdr_size,n.start),s.write===l.Box.prototype.write&&s.type!=="mdat"&&(r.info("BoxParser","TrackReference "+s.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),s.parseDataAndRewind(e)),s.parse(e),this.boxes.push(s);else return},l.createFullBoxCtor("trep",function(e){for(this.track_ID=e.readUint32(),this.boxes=[];e.getPosition()<this.start+this.size;)if(ret=l.parseOneBox(e,!1,this.size-(e.getPosition()-this.start)),ret.code===l.OK)box=ret.box,this.boxes.push(box);else return}),l.createFullBoxCtor("trex",function(e){this.track_id=e.readUint32(),this.default_sample_description_index=e.readUint32(),this.default_sample_duration=e.readUint32(),this.default_sample_size=e.readUint32(),this.default_sample_flags=e.readUint32()}),l.createBoxCtor("trpy",function(e){this.bytessent=e.readUint64()}),l.createFullBoxCtor("trun",function(e){var n=0;if(this.sample_count=e.readUint32(),n+=4,this.size-this.hdr_size>n&&this.flags&l.TRUN_FLAGS_DATA_OFFSET?(this.data_offset=e.readInt32(),n+=4):this.data_offset=0,this.size-this.hdr_size>n&&this.flags&l.TRUN_FLAGS_FIRST_FLAG?(this.first_sample_flags=e.readUint32(),n+=4):this.first_sample_flags=0,this.sample_duration=[],this.sample_size=[],this.sample_flags=[],this.sample_composition_time_offset=[],this.size-this.hdr_size>n)for(var s=0;s<this.sample_count;s++)this.flags&l.TRUN_FLAGS_DURATION&&(this.sample_duration[s]=e.readUint32()),this.flags&l.TRUN_FLAGS_SIZE&&(this.sample_size[s]=e.readUint32()),this.flags&l.TRUN_FLAGS_FLAGS&&(this.sample_flags[s]=e.readUint32()),this.flags&l.TRUN_FLAGS_CTS_OFFSET&&(this.version===0?this.sample_composition_time_offset[s]=e.readUint32():this.sample_composition_time_offset[s]=e.readInt32())}),l.createFullBoxCtor("tsel",function(e){this.switch_group=e.readUint32();var n=(this.size-this.hdr_size-4)/4;this.attribute_list=[];for(var s=0;s<n;s++)this.attribute_list[s]=e.readUint32()}),l.createFullBoxCtor("txtC",function(e){this.config=e.readCString()}),l.createBoxCtor("tyco",function(e){var n=(this.size-this.hdr_size)/4;this.compatible_brands=[];for(var s=0;s<n;s++)this.compatible_brands[s]=e.readString(4)}),l.createFullBoxCtor("udes",function(e){this.lang=e.readCString(),this.name=e.readCString(),this.description=e.readCString(),this.tags=e.readCString()}),l.createFullBoxCtor("uncC",function(e){var n;for(this.profile=e.readUint32(),this.component_count=e.readUint16(),this.component_index=[],this.component_bit_depth_minus_one=[],this.component_format=[],this.component_align_size=[],n=0;n<this.component_count;n++)this.component_index.push(e.readUint16()),this.component_bit_depth_minus_one.push(e.readUint8()),this.component_format.push(e.readUint8()),this.component_align_size.push(e.readUint8());this.sampling_type=e.readUint8(),this.interleave_type=e.readUint8(),this.block_size=e.readUint8();var s=e.readUint8();this.component_little_endian=s>>7&1,this.block_pad_lsb=s>>6&1,this.block_little_endian=s>>5&1,this.block_reversed=s>>4&1,this.pad_unknown=s>>3&1,this.pixel_size=e.readUint8(),this.row_align_size=e.readUint32(),this.tile_align_size=e.readUint32(),this.num_tile_cols_minus_one=e.readUint32(),this.num_tile_rows_minus_one=e.readUint32()}),l.createFullBoxCtor("url ",function(e){this.flags!==1&&(this.location=e.readCString())}),l.createFullBoxCtor("urn ",function(e){this.name=e.readCString(),this.size-this.hdr_size-this.name.length-1>0&&(this.location=e.readCString())}),l.createUUIDBox("a5d40b30e81411ddba2f0800200c9a66",!0,!1,function(e){this.LiveServerManifest=e.readString(this.size-this.hdr_size).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}),l.createUUIDBox("d08a4f1810f34a82b6c832d8aba183d3",!0,!1,function(e){this.system_id=l.parseHex16(e);var n=e.readUint32();n>0&&(this.data=e.readUint8Array(n))}),l.createUUIDBox("a2394f525a9b4f14a2446c427c648df4",!0,!1),l.createUUIDBox("8974dbce7be74c5184f97148f9882554",!0,!1,function(e){this.default_AlgorithmID=e.readUint24(),this.default_IV_size=e.readUint8(),this.default_KID=l.parseHex16(e)}),l.createUUIDBox("d4807ef2ca3946958e5426cb9e46a79f",!0,!1,function(e){this.fragment_count=e.readUint8(),this.entries=[];for(var n=0;n<this.fragment_count;n++){var s={},c=0,f=0;this.version===1?(c=e.readUint64(),f=e.readUint64()):(c=e.readUint32(),f=e.readUint32()),s.absolute_time=c,s.absolute_duration=f,this.entries.push(s)}}),l.createUUIDBox("6d1d9b0542d544e680e2141daff757b2",!0,!1,function(e){this.version===1?(this.absolute_time=e.readUint64(),this.duration=e.readUint64()):(this.absolute_time=e.readUint32(),this.duration=e.readUint32())}),l.createFullBoxCtor("vmhd",function(e){this.graphicsmode=e.readUint16(),this.opcolor=e.readUint16Array(3)}),l.createFullBoxCtor("vpcC",function(e){var n;this.version===1?(this.profile=e.readUint8(),this.level=e.readUint8(),n=e.readUint8(),this.bitDepth=n>>4,this.chromaSubsampling=n>>1&7,this.videoFullRangeFlag=n&1,this.colourPrimaries=e.readUint8(),this.transferCharacteristics=e.readUint8(),this.matrixCoefficients=e.readUint8(),this.codecIntializationDataSize=e.readUint16(),this.codecIntializationData=e.readUint8Array(this.codecIntializationDataSize)):(this.profile=e.readUint8(),this.level=e.readUint8(),n=e.readUint8(),this.bitDepth=n>>4&15,this.colorSpace=n&15,n=e.readUint8(),this.chromaSubsampling=n>>4&15,this.transferFunction=n>>1&7,this.videoFullRangeFlag=n&1,this.codecIntializationDataSize=e.readUint16(),this.codecIntializationData=e.readUint8Array(this.codecIntializationDataSize))}),l.createBoxCtor("vttC",function(e){this.text=e.readString(this.size-this.hdr_size)}),l.createFullBoxCtor("vvcC",function(e){var n,s,c={held_bits:void 0,num_held_bits:0,stream_read_1_bytes:function(E){this.held_bits=E.readUint8(),this.num_held_bits=8},stream_read_2_bytes:function(E){this.held_bits=E.readUint16(),this.num_held_bits=16},extract_bits:function(E){var T=this.held_bits>>this.num_held_bits-E&(1<<E)-1;return this.num_held_bits-=E,T}};if(c.stream_read_1_bytes(e),c.extract_bits(5),this.lengthSizeMinusOne=c.extract_bits(2),this.ptl_present_flag=c.extract_bits(1),this.ptl_present_flag){c.stream_read_2_bytes(e),this.ols_idx=c.extract_bits(9),this.num_sublayers=c.extract_bits(3),this.constant_frame_rate=c.extract_bits(2),this.chroma_format_idc=c.extract_bits(2),c.stream_read_1_bytes(e),this.bit_depth_minus8=c.extract_bits(3),c.extract_bits(5);{if(c.stream_read_2_bytes(e),c.extract_bits(2),this.num_bytes_constraint_info=c.extract_bits(6),this.general_profile_idc=c.extract_bits(7),this.general_tier_flag=c.extract_bits(1),this.general_level_idc=e.readUint8(),c.stream_read_1_bytes(e),this.ptl_frame_only_constraint_flag=c.extract_bits(1),this.ptl_multilayer_enabled_flag=c.extract_bits(1),this.general_constraint_info=new Uint8Array(this.num_bytes_constraint_info),this.num_bytes_constraint_info){for(n=0;n<this.num_bytes_constraint_info-1;n++){var f=c.extract_bits(6);c.stream_read_1_bytes(e);var m=c.extract_bits(2);this.general_constraint_info[n]=f<<2|m}this.general_constraint_info[this.num_bytes_constraint_info-1]=c.extract_bits(6)}else c.extract_bits(6);if(this.num_sublayers>1){for(c.stream_read_1_bytes(e),this.ptl_sublayer_present_mask=0,s=this.num_sublayers-2;s>=0;--s){var p=c.extract_bits(1);this.ptl_sublayer_present_mask|=p<<s}for(s=this.num_sublayers;s<=8&&this.num_sublayers>1;++s)c.extract_bits(1);for(this.sublayer_level_idc=[],s=this.num_sublayers-2;s>=0;--s)this.ptl_sublayer_present_mask&1<<s&&(this.sublayer_level_idc[s]=e.readUint8())}if(this.ptl_num_sub_profiles=e.readUint8(),this.general_sub_profile_idc=[],this.ptl_num_sub_profiles)for(n=0;n<this.ptl_num_sub_profiles;n++)this.general_sub_profile_idc.push(e.readUint32())}this.max_picture_width=e.readUint16(),this.max_picture_height=e.readUint16(),this.avg_frame_rate=e.readUint16()}var _=12,S=13;this.nalu_arrays=[];var x=e.readUint8();for(n=0;n<x;n++){var w=[];this.nalu_arrays.push(w),c.stream_read_1_bytes(e),w.completeness=c.extract_bits(1),c.extract_bits(2),w.nalu_type=c.extract_bits(5);var U=1;for(w.nalu_type!=S&&w.nalu_type!=_&&(U=e.readUint16()),s=0;s<U;s++){var A=e.readUint16();w.push({data:e.readUint8Array(A),length:A})}}}),l.createFullBoxCtor("vvnC",function(e){var n=strm.readUint8();this.lengthSizeMinusOne=n&3}),l.SampleEntry.prototype.isVideo=function(){return!1},l.SampleEntry.prototype.isAudio=function(){return!1},l.SampleEntry.prototype.isSubtitle=function(){return!1},l.SampleEntry.prototype.isMetadata=function(){return!1},l.SampleEntry.prototype.isHint=function(){return!1},l.SampleEntry.prototype.getCodec=function(){return this.type.replace(".","")},l.SampleEntry.prototype.getWidth=function(){return""},l.SampleEntry.prototype.getHeight=function(){return""},l.SampleEntry.prototype.getChannelCount=function(){return""},l.SampleEntry.prototype.getSampleRate=function(){return""},l.SampleEntry.prototype.getSampleSize=function(){return""},l.VisualSampleEntry.prototype.isVideo=function(){return!0},l.VisualSampleEntry.prototype.getWidth=function(){return this.width},l.VisualSampleEntry.prototype.getHeight=function(){return this.height},l.AudioSampleEntry.prototype.isAudio=function(){return!0},l.AudioSampleEntry.prototype.getChannelCount=function(){return this.channel_count},l.AudioSampleEntry.prototype.getSampleRate=function(){return this.samplerate},l.AudioSampleEntry.prototype.getSampleSize=function(){return this.samplesize},l.SubtitleSampleEntry.prototype.isSubtitle=function(){return!0},l.MetadataSampleEntry.prototype.isMetadata=function(){return!0},l.decimalToHex=function(e,n){var s=Number(e).toString(16);for(n=typeof n>"u"||n===null?n=2:n;s.length<n;)s="0"+s;return s},l.avc1SampleEntry.prototype.getCodec=l.avc2SampleEntry.prototype.getCodec=l.avc3SampleEntry.prototype.getCodec=l.avc4SampleEntry.prototype.getCodec=function(){var e=l.SampleEntry.prototype.getCodec.call(this);return this.avcC?e+"."+l.decimalToHex(this.avcC.AVCProfileIndication)+l.decimalToHex(this.avcC.profile_compatibility)+l.decimalToHex(this.avcC.AVCLevelIndication):e},l.hev1SampleEntry.prototype.getCodec=l.hvc1SampleEntry.prototype.getCodec=function(){var e,n=l.SampleEntry.prototype.getCodec.call(this);if(this.hvcC){switch(n+=".",this.hvcC.general_profile_space){case 0:n+="";break;case 1:n+="A";break;case 2:n+="B";break;case 3:n+="C";break}n+=this.hvcC.general_profile_idc,n+=".";var s=this.hvcC.general_profile_compatibility,c=0;for(e=0;e<32&&(c|=s&1,e!=31);e++)c<<=1,s>>=1;n+=l.decimalToHex(c,0),n+=".",this.hvcC.general_tier_flag===0?n+="L":n+="H",n+=this.hvcC.general_level_idc;var f=!1,m="";for(e=5;e>=0;e--)(this.hvcC.general_constraint_indicator[e]||f)&&(m="."+l.decimalToHex(this.hvcC.general_constraint_indicator[e],0)+m,f=!0);n+=m}return n},l.vvc1SampleEntry.prototype.getCodec=l.vvi1SampleEntry.prototype.getCodec=function(){var e,n=l.SampleEntry.prototype.getCodec.call(this);if(this.vvcC){n+="."+this.vvcC.general_profile_idc,this.vvcC.general_tier_flag?n+=".H":n+=".L",n+=this.vvcC.general_level_idc;var s="";if(this.vvcC.general_constraint_info){var c=[],f=0;f|=this.vvcC.ptl_frame_only_constraint<<7,f|=this.vvcC.ptl_multilayer_enabled<<6;var m;for(e=0;e<this.vvcC.general_constraint_info.length;++e)f|=this.vvcC.general_constraint_info[e]>>2&63,c.push(f),f&&(m=e),f=this.vvcC.general_constraint_info[e]>>2&3;if(m===void 0)s=".CA";else{s=".C";var p="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",_=0,S=0;for(e=0;e<=m;++e)for(_=_<<8|c[e],S+=8;S>=5;){var x=_>>S-5&31;s+=p[x],S-=5,_&=(1<<S)-1}S&&(_<<=5-S,s+=p[_&31])}}n+=s}return n},l.mp4aSampleEntry.prototype.getCodec=function(){var e=l.SampleEntry.prototype.getCodec.call(this);if(this.esds&&this.esds.esd){var n=this.esds.esd.getOTI(),s=this.esds.esd.getAudioConfig();return e+"."+l.decimalToHex(n)+(s?"."+s:"")}else return e},l.stxtSampleEntry.prototype.getCodec=function(){var e=l.SampleEntry.prototype.getCodec.call(this);return this.mime_format?e+"."+this.mime_format:e},l.vp08SampleEntry.prototype.getCodec=l.vp09SampleEntry.prototype.getCodec=function(){var e=l.SampleEntry.prototype.getCodec.call(this),n=this.vpcC.level;n==0&&(n="00");var s=this.vpcC.bitDepth;return s==8&&(s="08"),e+".0"+this.vpcC.profile+"."+n+"."+s},l.av01SampleEntry.prototype.getCodec=function(){var e=l.SampleEntry.prototype.getCodec.call(this),n=this.av1C.seq_level_idx_0;n<10&&(n="0"+n);var s;return this.av1C.seq_profile===2&&this.av1C.high_bitdepth===1?s=this.av1C.twelve_bit===1?"12":"10":this.av1C.seq_profile<=2&&(s=this.av1C.high_bitdepth===1?"10":"08"),e+"."+this.av1C.seq_profile+"."+n+(this.av1C.seq_tier_0?"H":"M")+"."+s},l.Box.prototype.writeHeader=function(e,n){this.size+=8,this.size>u&&(this.size+=8),this.type==="uuid"&&(this.size+=16),r.debug("BoxWriter","Writing box "+this.type+" of size: "+this.size+" at position "+e.getPosition()+(n||"")),this.size>u?e.writeUint32(1):(this.sizePosition=e.getPosition(),e.writeUint32(this.size)),e.writeString(this.type,null,4),this.type==="uuid"&&e.writeUint8Array(this.uuid),this.size>u&&e.writeUint64(this.size)},l.FullBox.prototype.writeHeader=function(e){this.size+=4,l.Box.prototype.writeHeader.call(this,e," v="+this.version+" f="+this.flags),e.writeUint8(this.version),e.writeUint24(this.flags)},l.Box.prototype.write=function(e){this.type==="mdat"?this.data&&(this.size=this.data.length,this.writeHeader(e),e.writeUint8Array(this.data)):(this.size=this.data?this.data.length:0,this.writeHeader(e),this.data&&e.writeUint8Array(this.data))},l.ContainerBox.prototype.write=function(e){this.size=0,this.writeHeader(e);for(var n=0;n<this.boxes.length;n++)this.boxes[n]&&(this.boxes[n].write(e),this.size+=this.boxes[n].size);r.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},l.TrackReferenceTypeBox.prototype.write=function(e){this.size=this.track_ids.length*4,this.writeHeader(e),e.writeUint32Array(this.track_ids)},l.avcCBox.prototype.write=function(e){var n;for(this.size=7,n=0;n<this.SPS.length;n++)this.size+=2+this.SPS[n].length;for(n=0;n<this.PPS.length;n++)this.size+=2+this.PPS[n].length;for(this.ext&&(this.size+=this.ext.length),this.writeHeader(e),e.writeUint8(this.configurationVersion),e.writeUint8(this.AVCProfileIndication),e.writeUint8(this.profile_compatibility),e.writeUint8(this.AVCLevelIndication),e.writeUint8(this.lengthSizeMinusOne+252),e.writeUint8(this.SPS.length+224),n=0;n<this.SPS.length;n++)e.writeUint16(this.SPS[n].length),e.writeUint8Array(this.SPS[n].nalu);for(e.writeUint8(this.PPS.length),n=0;n<this.PPS.length;n++)e.writeUint16(this.PPS[n].length),e.writeUint8Array(this.PPS[n].nalu);this.ext&&e.writeUint8Array(this.ext)},l.co64Box.prototype.write=function(e){var n;for(this.version=0,this.flags=0,this.size=4+8*this.chunk_offsets.length,this.writeHeader(e),e.writeUint32(this.chunk_offsets.length),n=0;n<this.chunk_offsets.length;n++)e.writeUint64(this.chunk_offsets[n])},l.cslgBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4*5,this.writeHeader(e),e.writeInt32(this.compositionToDTSShift),e.writeInt32(this.leastDecodeToDisplayDelta),e.writeInt32(this.greatestDecodeToDisplayDelta),e.writeInt32(this.compositionStartTime),e.writeInt32(this.compositionEndTime)},l.cttsBox.prototype.write=function(e){var n;for(this.version=0,this.flags=0,this.size=4+8*this.sample_counts.length,this.writeHeader(e),e.writeUint32(this.sample_counts.length),n=0;n<this.sample_counts.length;n++)e.writeUint32(this.sample_counts[n]),this.version===1?e.writeInt32(this.sample_offsets[n]):e.writeUint32(this.sample_offsets[n])},l.drefBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4,this.writeHeader(e),e.writeUint32(this.entries.length);for(var n=0;n<this.entries.length;n++)this.entries[n].write(e),this.size+=this.entries[n].size;r.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},l.elngBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=this.extended_language.length,this.writeHeader(e),e.writeString(this.extended_language)},l.elstBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4+12*this.entries.length,this.writeHeader(e),e.writeUint32(this.entries.length);for(var n=0;n<this.entries.length;n++){var s=this.entries[n];e.writeUint32(s.segment_duration),e.writeInt32(s.media_time),e.writeInt16(s.media_rate_integer),e.writeInt16(s.media_rate_fraction)}},l.emsgBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4*4+this.message_data.length+(this.scheme_id_uri.length+1)+(this.value.length+1),this.writeHeader(e),e.writeCString(this.scheme_id_uri),e.writeCString(this.value),e.writeUint32(this.timescale),e.writeUint32(this.presentation_time_delta),e.writeUint32(this.event_duration),e.writeUint32(this.id),e.writeUint8Array(this.message_data)},l.ftypBox.prototype.write=function(e){this.size=8+4*this.compatible_brands.length,this.writeHeader(e),e.writeString(this.major_brand,null,4),e.writeUint32(this.minor_version);for(var n=0;n<this.compatible_brands.length;n++)e.writeString(this.compatible_brands[n],null,4)},l.hdlrBox.prototype.write=function(e){this.size=5*4+this.name.length+1,this.version=0,this.flags=0,this.writeHeader(e),e.writeUint32(0),e.writeString(this.handler,null,4),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeCString(this.name)},l.hvcCBox.prototype.write=function(e){var n,s;for(this.size=23,n=0;n<this.nalu_arrays.length;n++)for(this.size+=3,s=0;s<this.nalu_arrays[n].length;s++)this.size+=2+this.nalu_arrays[n][s].data.length;for(this.writeHeader(e),e.writeUint8(this.configurationVersion),e.writeUint8(this.general_profile_space<<6+this.general_tier_flag<<5+this.general_profile_idc),e.writeUint32(this.general_profile_compatibility),e.writeUint8Array(this.general_constraint_indicator),e.writeUint8(this.general_level_idc),e.writeUint16(this.min_spatial_segmentation_idc+(15<<24)),e.writeUint8(this.parallelismType+252),e.writeUint8(this.chroma_format_idc+252),e.writeUint8(this.bit_depth_luma_minus8+248),e.writeUint8(this.bit_depth_chroma_minus8+248),e.writeUint16(this.avgFrameRate),e.writeUint8((this.constantFrameRate<<6)+(this.numTemporalLayers<<3)+(this.temporalIdNested<<2)+this.lengthSizeMinusOne),e.writeUint8(this.nalu_arrays.length),n=0;n<this.nalu_arrays.length;n++)for(e.writeUint8((this.nalu_arrays[n].completeness<<7)+this.nalu_arrays[n].nalu_type),e.writeUint16(this.nalu_arrays[n].length),s=0;s<this.nalu_arrays[n].length;s++)e.writeUint16(this.nalu_arrays[n][s].data.length),e.writeUint8Array(this.nalu_arrays[n][s].data)},l.kindBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=this.schemeURI.length+1+(this.value.length+1),this.writeHeader(e),e.writeCString(this.schemeURI),e.writeCString(this.value)},l.mdhdBox.prototype.write=function(e){this.size=4*4+2*2,this.flags=0,this.version=0,this.writeHeader(e),e.writeUint32(this.creation_time),e.writeUint32(this.modification_time),e.writeUint32(this.timescale),e.writeUint32(this.duration),e.writeUint16(this.language),e.writeUint16(0)},l.mehdBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4,this.writeHeader(e),e.writeUint32(this.fragment_duration)},l.mfhdBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4,this.writeHeader(e),e.writeUint32(this.sequence_number)},l.mvhdBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=23*4+2*2,this.writeHeader(e),e.writeUint32(this.creation_time),e.writeUint32(this.modification_time),e.writeUint32(this.timescale),e.writeUint32(this.duration),e.writeUint32(this.rate),e.writeUint16(this.volume<<8),e.writeUint16(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32Array(this.matrix),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(this.next_track_id)},l.SampleEntry.prototype.writeHeader=function(e){this.size=8,l.Box.prototype.writeHeader.call(this,e),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint8(0),e.writeUint16(this.data_reference_index)},l.SampleEntry.prototype.writeFooter=function(e){for(var n=0;n<this.boxes.length;n++)this.boxes[n].write(e),this.size+=this.boxes[n].size;r.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},l.SampleEntry.prototype.write=function(e){this.writeHeader(e),e.writeUint8Array(this.data),this.size+=this.data.length,r.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},l.VisualSampleEntry.prototype.write=function(e){this.writeHeader(e),this.size+=2*7+6*4+32,e.writeUint16(0),e.writeUint16(0),e.writeUint32(0),e.writeUint32(0),e.writeUint32(0),e.writeUint16(this.width),e.writeUint16(this.height),e.writeUint32(this.horizresolution),e.writeUint32(this.vertresolution),e.writeUint32(0),e.writeUint16(this.frame_count),e.writeUint8(Math.min(31,this.compressorname.length)),e.writeString(this.compressorname,null,31),e.writeUint16(this.depth),e.writeInt16(-1),this.writeFooter(e)},l.AudioSampleEntry.prototype.write=function(e){this.writeHeader(e),this.size+=2*4+3*4,e.writeUint32(0),e.writeUint32(0),e.writeUint16(this.channel_count),e.writeUint16(this.samplesize),e.writeUint16(0),e.writeUint16(0),e.writeUint32(this.samplerate<<16),this.writeFooter(e)},l.stppSampleEntry.prototype.write=function(e){this.writeHeader(e),this.size+=this.namespace.length+1+this.schema_location.length+1+this.auxiliary_mime_types.length+1,e.writeCString(this.namespace),e.writeCString(this.schema_location),e.writeCString(this.auxiliary_mime_types),this.writeFooter(e)},l.SampleGroupEntry.prototype.write=function(e){e.writeUint8Array(this.data)},l.sbgpBox.prototype.write=function(e){this.version=1,this.flags=0,this.size=12+8*this.entries.length,this.writeHeader(e),e.writeString(this.grouping_type,null,4),e.writeUint32(this.grouping_type_parameter),e.writeUint32(this.entries.length);for(var n=0;n<this.entries.length;n++){var s=this.entries[n];e.writeInt32(s.sample_count),e.writeInt32(s.group_description_index)}},l.sgpdBox.prototype.write=function(e){var n,s;for(this.flags=0,this.size=12,n=0;n<this.entries.length;n++)s=this.entries[n],this.version===1&&(this.default_length===0&&(this.size+=4),this.size+=s.data.length);for(this.writeHeader(e),e.writeString(this.grouping_type,null,4),this.version===1&&e.writeUint32(this.default_length),this.version>=2&&e.writeUint32(this.default_sample_description_index),e.writeUint32(this.entries.length),n=0;n<this.entries.length;n++)s=this.entries[n],this.version===1&&this.default_length===0&&e.writeUint32(s.description_length),s.write(e)},l.sidxBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4*4+2+2+12*this.references.length,this.writeHeader(e),e.writeUint32(this.reference_ID),e.writeUint32(this.timescale),e.writeUint32(this.earliest_presentation_time),e.writeUint32(this.first_offset),e.writeUint16(0),e.writeUint16(this.references.length);for(var n=0;n<this.references.length;n++){var s=this.references[n];e.writeUint32(s.reference_type<<31|s.referenced_size),e.writeUint32(s.subsegment_duration),e.writeUint32(s.starts_with_SAP<<31|s.SAP_type<<28|s.SAP_delta_time)}},l.smhdBox.prototype.write=function(e){this.version=0,this.flags=1,this.size=4,this.writeHeader(e),e.writeUint16(this.balance),e.writeUint16(0)},l.stcoBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4+4*this.chunk_offsets.length,this.writeHeader(e),e.writeUint32(this.chunk_offsets.length),e.writeUint32Array(this.chunk_offsets)},l.stscBox.prototype.write=function(e){var n;for(this.version=0,this.flags=0,this.size=4+12*this.first_chunk.length,this.writeHeader(e),e.writeUint32(this.first_chunk.length),n=0;n<this.first_chunk.length;n++)e.writeUint32(this.first_chunk[n]),e.writeUint32(this.samples_per_chunk[n]),e.writeUint32(this.sample_description_index[n])},l.stsdBox.prototype.write=function(e){var n;for(this.version=0,this.flags=0,this.size=0,this.writeHeader(e),e.writeUint32(this.entries.length),this.size+=4,n=0;n<this.entries.length;n++)this.entries[n].write(e),this.size+=this.entries[n].size;r.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),e.adjustUint32(this.sizePosition,this.size)},l.stshBox.prototype.write=function(e){var n;for(this.version=0,this.flags=0,this.size=4+8*this.shadowed_sample_numbers.length,this.writeHeader(e),e.writeUint32(this.shadowed_sample_numbers.length),n=0;n<this.shadowed_sample_numbers.length;n++)e.writeUint32(this.shadowed_sample_numbers[n]),e.writeUint32(this.sync_sample_numbers[n])},l.stssBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4+4*this.sample_numbers.length,this.writeHeader(e),e.writeUint32(this.sample_numbers.length),e.writeUint32Array(this.sample_numbers)},l.stszBox.prototype.write=function(e){var n,s=!0;if(this.version=0,this.flags=0,this.sample_sizes.length>0)for(n=0;n+1<this.sample_sizes.length;)if(this.sample_sizes[n+1]!==this.sample_sizes[0]){s=!1;break}else n++;else s=!1;this.size=8,s||(this.size+=4*this.sample_sizes.length),this.writeHeader(e),s?e.writeUint32(this.sample_sizes[0]):e.writeUint32(0),e.writeUint32(this.sample_sizes.length),s||e.writeUint32Array(this.sample_sizes)},l.sttsBox.prototype.write=function(e){var n;for(this.version=0,this.flags=0,this.size=4+8*this.sample_counts.length,this.writeHeader(e),e.writeUint32(this.sample_counts.length),n=0;n<this.sample_counts.length;n++)e.writeUint32(this.sample_counts[n]),e.writeUint32(this.sample_deltas[n])},l.tfdtBox.prototype.write=function(e){var n=Math.pow(2,32)-1;this.version=this.baseMediaDecodeTime>n?1:0,this.flags=0,this.size=4,this.version===1&&(this.size+=4),this.writeHeader(e),this.version===1?e.writeUint64(this.baseMediaDecodeTime):e.writeUint32(this.baseMediaDecodeTime)},l.tfhdBox.prototype.write=function(e){this.version=0,this.size=4,this.flags&l.TFHD_FLAG_BASE_DATA_OFFSET&&(this.size+=8),this.flags&l.TFHD_FLAG_SAMPLE_DESC&&(this.size+=4),this.flags&l.TFHD_FLAG_SAMPLE_DUR&&(this.size+=4),this.flags&l.TFHD_FLAG_SAMPLE_SIZE&&(this.size+=4),this.flags&l.TFHD_FLAG_SAMPLE_FLAGS&&(this.size+=4),this.writeHeader(e),e.writeUint32(this.track_id),this.flags&l.TFHD_FLAG_BASE_DATA_OFFSET&&e.writeUint64(this.base_data_offset),this.flags&l.TFHD_FLAG_SAMPLE_DESC&&e.writeUint32(this.default_sample_description_index),this.flags&l.TFHD_FLAG_SAMPLE_DUR&&e.writeUint32(this.default_sample_duration),this.flags&l.TFHD_FLAG_SAMPLE_SIZE&&e.writeUint32(this.default_sample_size),this.flags&l.TFHD_FLAG_SAMPLE_FLAGS&&e.writeUint32(this.default_sample_flags)},l.tkhdBox.prototype.write=function(e){this.version=0,this.size=4*18+2*4,this.writeHeader(e),e.writeUint32(this.creation_time),e.writeUint32(this.modification_time),e.writeUint32(this.track_id),e.writeUint32(0),e.writeUint32(this.duration),e.writeUint32(0),e.writeUint32(0),e.writeInt16(this.layer),e.writeInt16(this.alternate_group),e.writeInt16(this.volume<<8),e.writeUint16(0),e.writeInt32Array(this.matrix),e.writeUint32(this.width),e.writeUint32(this.height)},l.trexBox.prototype.write=function(e){this.version=0,this.flags=0,this.size=4*5,this.writeHeader(e),e.writeUint32(this.track_id),e.writeUint32(this.default_sample_description_index),e.writeUint32(this.default_sample_duration),e.writeUint32(this.default_sample_size),e.writeUint32(this.default_sample_flags)},l.trunBox.prototype.write=function(e){this.version=0,this.size=4,this.flags&l.TRUN_FLAGS_DATA_OFFSET&&(this.size+=4),this.flags&l.TRUN_FLAGS_FIRST_FLAG&&(this.size+=4),this.flags&l.TRUN_FLAGS_DURATION&&(this.size+=4*this.sample_duration.length),this.flags&l.TRUN_FLAGS_SIZE&&(this.size+=4*this.sample_size.length),this.flags&l.TRUN_FLAGS_FLAGS&&(this.size+=4*this.sample_flags.length),this.flags&l.TRUN_FLAGS_CTS_OFFSET&&(this.size+=4*this.sample_composition_time_offset.length),this.writeHeader(e),e.writeUint32(this.sample_count),this.flags&l.TRUN_FLAGS_DATA_OFFSET&&(this.data_offset_position=e.getPosition(),e.writeInt32(this.data_offset)),this.flags&l.TRUN_FLAGS_FIRST_FLAG&&e.writeUint32(this.first_sample_flags);for(var n=0;n<this.sample_count;n++)this.flags&l.TRUN_FLAGS_DURATION&&e.writeUint32(this.sample_duration[n]),this.flags&l.TRUN_FLAGS_SIZE&&e.writeUint32(this.sample_size[n]),this.flags&l.TRUN_FLAGS_FLAGS&&e.writeUint32(this.sample_flags[n]),this.flags&l.TRUN_FLAGS_CTS_OFFSET&&(this.version===0?e.writeUint32(this.sample_composition_time_offset[n]):e.writeInt32(this.sample_composition_time_offset[n]))},l["url Box"].prototype.write=function(e){this.version=0,this.location?(this.flags=0,this.size=this.location.length+1):(this.flags=1,this.size=0),this.writeHeader(e),this.location&&e.writeCString(this.location)},l["urn Box"].prototype.write=function(e){this.version=0,this.flags=0,this.size=this.name.length+1+(this.location?this.location.length+1:0),this.writeHeader(e),e.writeCString(this.name),this.location&&e.writeCString(this.location)},l.vmhdBox.prototype.write=function(e){this.version=0,this.flags=1,this.size=8,this.writeHeader(e),e.writeUint16(this.graphicsmode),e.writeUint16Array(this.opcolor)},l.cttsBox.prototype.unpack=function(e){var n,s,c;for(c=0,n=0;n<this.sample_counts.length;n++)for(s=0;s<this.sample_counts[n];s++)e[c].pts=e[c].dts+this.sample_offsets[n],c++},l.sttsBox.prototype.unpack=function(e){var n,s,c;for(c=0,n=0;n<this.sample_counts.length;n++)for(s=0;s<this.sample_counts[n];s++)c===0?e[c].dts=0:e[c].dts=e[c-1].dts+this.sample_deltas[n],c++},l.stcoBox.prototype.unpack=function(e){var n;for(n=0;n<this.chunk_offsets.length;n++)e[n].offset=this.chunk_offsets[n]},l.stscBox.prototype.unpack=function(e){var n,s,c,f,m;for(f=0,m=0,n=0;n<this.first_chunk.length;n++)for(s=0;s<(n+1<this.first_chunk.length?this.first_chunk[n+1]:1/0);s++)for(m++,c=0;c<this.samples_per_chunk[n];c++){if(e[f])e[f].description_index=this.sample_description_index[n],e[f].chunk_index=m;else return;f++}},l.stszBox.prototype.unpack=function(e){var n;for(n=0;n<this.sample_sizes.length;n++)e[n].size=this.sample_sizes[n]},l.DIFF_BOXES_PROP_NAMES=["boxes","entries","references","subsamples","items","item_infos","extents","associations","subsegments","ranges","seekLists","seekPoints","esd","levels"],l.DIFF_PRIMITIVE_ARRAY_PROP_NAMES=["compatible_brands","matrix","opcolor","sample_counts","sample_counts","sample_deltas","first_chunk","samples_per_chunk","sample_sizes","chunk_offsets","sample_offsets","sample_description_index","sample_duration"],l.boxEqualFields=function(e,n){if(e&&!n)return!1;var s;for(s in e)if(!(l.DIFF_BOXES_PROP_NAMES.indexOf(s)>-1)){if(e[s]instanceof l.Box||n[s]instanceof l.Box||typeof e[s]>"u"||typeof n[s]>"u"||typeof e[s]=="function"||typeof n[s]=="function"||e.subBoxNames&&e.subBoxNames.indexOf(s.slice(0,4))>-1||n.subBoxNames&&n.subBoxNames.indexOf(s.slice(0,4))>-1||s==="data"||s==="start"||s==="size"||s==="creation_time"||s==="modification_time"||l.DIFF_PRIMITIVE_ARRAY_PROP_NAMES.indexOf(s)>-1)continue;if(e[s]!==n[s])return!1}return!0},l.boxEqual=function(e,n){if(!l.boxEqualFields(e,n))return!1;for(var s=0;s<l.DIFF_BOXES_PROP_NAMES.length;s++){var c=l.DIFF_BOXES_PROP_NAMES[s];if(e[c]&&n[c]&&!l.boxEqual(e[c],n[c]))return!1}return!0};var g=function(){};g.prototype.parseSample=function(e){var n={},s;n.resources=[];var c=new a(e.data.buffer);if(!e.subsamples||e.subsamples.length===0)n.documentString=c.readString(e.data.length);else if(n.documentString=c.readString(e.subsamples[0].size),e.subsamples.length>1)for(s=1;s<e.subsamples.length;s++)n.resources[s]=c.readUint8Array(e.subsamples[s].size);return typeof DOMParser<"u"&&(n.document=new DOMParser().parseFromString(n.documentString,"application/xml")),n};var y=function(){};y.prototype.parseSample=function(e){var n,s=new a(e.data.buffer);return n=s.readString(e.data.length),n},y.prototype.parseConfig=function(e){var n,s=new a(e.buffer);return s.readUint32(),n=s.readCString(),n},t.XMLSubtitlein4Parser=g,t.Textin4Parser=y;var v=function(e){this.stream=e||new d,this.boxes=[],this.mdats=[],this.moofs=[],this.isProgressive=!1,this.moovStartFound=!1,this.onMoovStart=null,this.moovStartSent=!1,this.onReady=null,this.readySent=!1,this.onSegment=null,this.onSamples=null,this.onError=null,this.sampleListBuilt=!1,this.fragmentedTracks=[],this.extractedTracks=[],this.isFragmentationInitialized=!1,this.sampleProcessingStarted=!1,this.nextMoofNumber=0,this.itemListBuilt=!1,this.onSidx=null,this.sidxSent=!1};v.prototype.setSegmentOptions=function(e,n,s){var c=this.getTrackById(e);if(c){var f={};this.fragmentedTracks.push(f),f.id=e,f.user=n,f.trak=c,c.nextSample=0,f.segmentStream=null,f.nb_samples=1e3,f.rapAlignement=!0,s&&(s.nbSamples&&(f.nb_samples=s.nbSamples),s.rapAlignement&&(f.rapAlignement=s.rapAlignement))}},v.prototype.unsetSegmentOptions=function(e){for(var n=-1,s=0;s<this.fragmentedTracks.length;s++){var c=this.fragmentedTracks[s];c.id==e&&(n=s)}n>-1&&this.fragmentedTracks.splice(n,1)},v.prototype.setExtractionOptions=function(e,n,s){var c=this.getTrackById(e);if(c){var f={};this.extractedTracks.push(f),f.id=e,f.user=n,f.trak=c,c.nextSample=0,f.nb_samples=1e3,f.samples=[],s&&s.nbSamples&&(f.nb_samples=s.nbSamples)}},v.prototype.unsetExtractionOptions=function(e){for(var n=-1,s=0;s<this.extractedTracks.length;s++){var c=this.extractedTracks[s];c.id==e&&(n=s)}n>-1&&this.extractedTracks.splice(n,1)},v.prototype.parse=function(){var e,n,s=!1;if(!(this.restoreParsePosition&&!this.restoreParsePosition()))for(;;)if(this.hasIncompleteMdat&&this.hasIncompleteMdat()){if(this.processIncompleteMdat())continue;return}else if(this.saveParsePosition&&this.saveParsePosition(),e=l.parseOneBox(this.stream,s),e.code===l.ERR_NOT_ENOUGH_DATA)if(this.processIncompleteBox){if(this.processIncompleteBox(e))continue;return}else return;else{var c;switch(n=e.box,c=n.type!=="uuid"?n.type:n.uuid,this.boxes.push(n),c){case"mdat":this.mdats.push(n);break;case"moof":this.moofs.push(n);break;case"moov":this.moovStartFound=!0,this.mdats.length===0&&(this.isProgressive=!0);default:this[c]!==void 0&&r.warn("ISOFile","Duplicate Box of type: "+c+", overriding previous occurrence"),this[c]=n;break}this.updateUsedBytes&&this.updateUsedBytes(n,e)}},v.prototype.checkBuffer=function(e){if(e==null)throw"Buffer must be defined and non empty";if(e.fileStart===void 0)throw"Buffer must have a fileStart property";return e.byteLength===0?(r.warn("ISOFile","Ignoring empty buffer (fileStart: "+e.fileStart+")"),this.stream.logBufferLevel(),!1):(r.info("ISOFile","Processing buffer (fileStart: "+e.fileStart+")"),e.usedBytes=0,this.stream.insertBuffer(e),this.stream.logBufferLevel(),this.stream.initialized()?!0:(r.warn("ISOFile","Not ready to start parsing"),!1))},v.prototype.appendBuffer=function(e,n){var s;if(this.checkBuffer(e))return this.parse(),this.moovStartFound&&!this.moovStartSent&&(this.moovStartSent=!0,this.onMoovStart&&this.onMoovStart()),this.moov?(this.sampleListBuilt||(this.buildSampleLists(),this.sampleListBuilt=!0),this.updateSampleLists(),this.onReady&&!this.readySent&&(this.readySent=!0,this.onReady(this.getInfo())),this.processSamples(n),this.nextSeekPosition?(s=this.nextSeekPosition,this.nextSeekPosition=void 0):s=this.nextParsePosition,this.stream.getEndFilePositionAfter&&(s=this.stream.getEndFilePositionAfter(s))):this.nextParsePosition?s=this.nextParsePosition:s=0,this.sidx&&this.onSidx&&!this.sidxSent&&(this.onSidx(this.sidx),this.sidxSent=!0),this.meta&&(this.flattenItemInfo&&!this.itemListBuilt&&(this.flattenItemInfo(),this.itemListBuilt=!0),this.processItems&&this.processItems(this.onItem)),this.stream.cleanBuffers&&(r.info("ISOFile","Done processing buffer (fileStart: "+e.fileStart+") - next buffer to fetch should have a fileStart position of "+s),this.stream.logBufferLevel(),this.stream.cleanBuffers(),this.stream.logBufferLevel(!0),r.info("ISOFile","Sample data size in memory: "+this.getAllocatedSampleDataSize())),s},v.prototype.getInfo=function(){var e,n,s={},c,f,m,p,_=new Date("1904-01-01T00:00:00Z").getTime();if(this.moov)for(s.hasMoov=!0,s.duration=this.moov.mvhd.duration,s.timescale=this.moov.mvhd.timescale,s.isFragmented=this.moov.mvex!=null,s.isFragmented&&this.moov.mvex.mehd&&(s.fragment_duration=this.moov.mvex.mehd.fragment_duration),s.isProgressive=this.isProgressive,s.hasIOD=this.moov.iods!=null,s.brands=[],s.brands.push(this.ftyp.major_brand),s.brands=s.brands.concat(this.ftyp.compatible_brands),s.created=new Date(_+this.moov.mvhd.creation_time*1e3),s.modified=new Date(_+this.moov.mvhd.modification_time*1e3),s.tracks=[],s.audioTracks=[],s.videoTracks=[],s.subtitleTracks=[],s.metadataTracks=[],s.hintTracks=[],s.otherTracks=[],e=0;e<this.moov.traks.length;e++){if(c=this.moov.traks[e],p=c.mdia.minf.stbl.stsd.entries[0],f={},s.tracks.push(f),f.id=c.tkhd.track_id,f.name=c.mdia.hdlr.name,f.references=[],c.tref)for(n=0;n<c.tref.boxes.length;n++)m={},f.references.push(m),m.type=c.tref.boxes[n].type,m.track_ids=c.tref.boxes[n].track_ids;c.edts&&(f.edits=c.edts.elst.entries),f.created=new Date(_+c.tkhd.creation_time*1e3),f.modified=new Date(_+c.tkhd.modification_time*1e3),f.movie_duration=c.tkhd.duration,f.movie_timescale=s.timescale,f.layer=c.tkhd.layer,f.alternate_group=c.tkhd.alternate_group,f.volume=c.tkhd.volume,f.matrix=c.tkhd.matrix,f.track_width=c.tkhd.width/65536,f.track_height=c.tkhd.height/65536,f.timescale=c.mdia.mdhd.timescale,f.cts_shift=c.mdia.minf.stbl.cslg,f.duration=c.mdia.mdhd.duration,f.samples_duration=c.samples_duration,f.codec=p.getCodec(),f.kind=c.udta&&c.udta.kinds.length?c.udta.kinds[0]:{schemeURI:"",value:""},f.language=c.mdia.elng?c.mdia.elng.extended_language:c.mdia.mdhd.languageString,f.nb_samples=c.samples.length,f.size=c.samples_size,f.bitrate=f.size*8*f.timescale/f.samples_duration,p.isAudio()?(f.type="audio",s.audioTracks.push(f),f.audio={},f.audio.sample_rate=p.getSampleRate(),f.audio.channel_count=p.getChannelCount(),f.audio.sample_size=p.getSampleSize()):p.isVideo()?(f.type="video",s.videoTracks.push(f),f.video={},f.video.width=p.getWidth(),f.video.height=p.getHeight()):p.isSubtitle()?(f.type="subtitles",s.subtitleTracks.push(f)):p.isHint()?(f.type="metadata",s.hintTracks.push(f)):p.isMetadata()?(f.type="metadata",s.metadataTracks.push(f)):(f.type="metadata",s.otherTracks.push(f))}else s.hasMoov=!1;if(s.mime="",s.hasMoov&&s.tracks){for(s.videoTracks&&s.videoTracks.length>0?s.mime+='video/mp4; codecs="':s.audioTracks&&s.audioTracks.length>0?s.mime+='audio/mp4; codecs="':s.mime+='application/mp4; codecs="',e=0;e<s.tracks.length;e++)e!==0&&(s.mime+=","),s.mime+=s.tracks[e].codec;s.mime+='"; profiles="',s.mime+=this.ftyp.compatible_brands.join(),s.mime+='"'}return s},v.prototype.setNextSeekPositionFromSample=function(e){e&&(this.nextSeekPosition?this.nextSeekPosition=Math.min(e.offset+e.alreadyRead,this.nextSeekPosition):this.nextSeekPosition=e.offset+e.alreadyRead)},v.prototype.processSamples=function(e){var n,s;if(this.sampleProcessingStarted){if(this.isFragmentationInitialized&&this.onSegment!==null)for(n=0;n<this.fragmentedTracks.length;n++){var c=this.fragmentedTracks[n];for(s=c.trak;s.nextSample<s.samples.length&&this.sampleProcessingStarted;){r.debug("ISOFile","Creating media fragment on track #"+c.id+" for sample "+s.nextSample);var f=this.createFragment(c.id,s.nextSample,c.segmentStream);if(f)c.segmentStream=f,s.nextSample++;else break;if((s.nextSample%c.nb_samples===0||e||s.nextSample>=s.samples.length)&&(r.info("ISOFile","Sending fragmented data on track #"+c.id+" for samples ["+Math.max(0,s.nextSample-c.nb_samples)+","+(s.nextSample-1)+"]"),r.info("ISOFile","Sample data size in memory: "+this.getAllocatedSampleDataSize()),this.onSegment&&this.onSegment(c.id,c.user,c.segmentStream.buffer,s.nextSample,e||s.nextSample>=s.samples.length),c.segmentStream=null,c!==this.fragmentedTracks[n]))break}}if(this.onSamples!==null)for(n=0;n<this.extractedTracks.length;n++){var m=this.extractedTracks[n];for(s=m.trak;s.nextSample<s.samples.length&&this.sampleProcessingStarted;){r.debug("ISOFile","Exporting on track #"+m.id+" sample #"+s.nextSample);var p=this.getSample(s,s.nextSample);if(p)s.nextSample++,m.samples.push(p);else{this.setNextSeekPositionFromSample(s.samples[s.nextSample]);break}if((s.nextSample%m.nb_samples===0||s.nextSample>=s.samples.length)&&(r.debug("ISOFile","Sending samples on track #"+m.id+" for sample "+s.nextSample),this.onSamples&&this.onSamples(m.id,m.user,m.samples),m.samples=[],m!==this.extractedTracks[n]))break}}}},v.prototype.getBox=function(e){var n=this.getBoxes(e,!0);return n.length?n[0]:null},v.prototype.getBoxes=function(e,n){var s=[];return v._sweep.call(this,e,s,n),s},v._sweep=function(e,n,s){this.type&&this.type==e&&n.push(this);for(var c in this.boxes){if(n.length&&s)return;v._sweep.call(this.boxes[c],e,n,s)}},v.prototype.getTrackSamplesInfo=function(e){var n=this.getTrackById(e);if(n)return n.samples},v.prototype.getTrackSample=function(e,n){var s=this.getTrackById(e),c=this.getSample(s,n);return c},v.prototype.releaseUsedSamples=function(e,n){var s=0,c=this.getTrackById(e);c.lastValidSample||(c.lastValidSample=0);for(var f=c.lastValidSample;f<n;f++)s+=this.releaseSample(c,f);r.info("ISOFile","Track #"+e+" released samples up to "+n+" (released size: "+s+", remaining: "+this.samplesDataSize+")"),c.lastValidSample=n},v.prototype.start=function(){this.sampleProcessingStarted=!0,this.processSamples(!1)},v.prototype.stop=function(){this.sampleProcessingStarted=!1},v.prototype.flush=function(){r.info("ISOFile","Flushing remaining samples"),this.updateSampleLists(),this.processSamples(!0),this.stream.cleanBuffers(),this.stream.logBufferLevel(!0)},v.prototype.seekTrack=function(e,n,s){var c,f,m=1/0,p=0,_=0,S;if(s.samples.length===0)return r.info("ISOFile","No sample in track, cannot seek! Using time "+r.getDurationString(0,1)+" and offset: 0"),{offset:0,time:0};for(c=0;c<s.samples.length;c++){if(f=s.samples[c],c===0)_=0,S=f.timescale;else if(f.cts>e*f.timescale){_=c-1;break}n&&f.is_sync&&(p=c)}for(n&&(_=p),e=s.samples[_].cts,s.nextSample=_;s.samples[_].alreadyRead===s.samples[_].size&&s.samples[_+1];)_++;return m=s.samples[_].offset+s.samples[_].alreadyRead,r.info("ISOFile","Seeking to "+(n?"RAP":"")+" sample #"+s.nextSample+" on track "+s.tkhd.track_id+", time "+r.getDurationString(e,S)+" and offset: "+m),{offset:m,time:e/S}},v.prototype.getTrackDuration=function(e){var n;return e.samples?(n=e.samples[e.samples.length-1],(n.cts+n.duration)/n.timescale):1/0},v.prototype.seek=function(e,n){var s=this.moov,c,f,m,p={offset:1/0,time:1/0};if(this.moov){for(m=0;m<s.traks.length;m++)c=s.traks[m],!(e>this.getTrackDuration(c))&&(f=this.seekTrack(e,n,c),f.offset<p.offset&&(p.offset=f.offset),f.time<p.time&&(p.time=f.time));return r.info("ISOFile","Seeking at time "+r.getDurationString(p.time,1)+" needs a buffer with a fileStart position of "+p.offset),p.offset===1/0?p={offset:this.nextParsePosition,time:0}:p.offset=this.stream.getEndFilePositionAfter(p.offset),r.info("ISOFile","Adjusted seek position (after checking data already in buffer): "+p.offset),p}else throw"Cannot seek: moov not received!"},v.prototype.equal=function(e){for(var n=0;n<this.boxes.length&&n<e.boxes.length;){var s=this.boxes[n],c=e.boxes[n];if(!l.boxEqual(s,c))return!1;n++}return!0},t.ISOFile=v,v.prototype.lastBoxStartPosition=0,v.prototype.parsingMdat=null,v.prototype.nextParsePosition=0,v.prototype.discardMdatData=!1,v.prototype.processIncompleteBox=function(e){var n,s,c;return e.type==="mdat"?(n=new l[e.type+"Box"](e.size),this.parsingMdat=n,this.boxes.push(n),this.mdats.push(n),n.start=e.start,n.hdr_size=e.hdr_size,this.stream.addUsedBytes(n.hdr_size),this.lastBoxStartPosition=n.start+n.size,c=this.stream.seek(n.start+n.size,!1,this.discardMdatData),c?(this.parsingMdat=null,!0):(this.moovStartFound?this.nextParsePosition=this.stream.findEndContiguousBuf():this.nextParsePosition=n.start+n.size,!1)):(e.type==="moov"&&(this.moovStartFound=!0,this.mdats.length===0&&(this.isProgressive=!0)),s=this.stream.mergeNextBuffer?this.stream.mergeNextBuffer():!1,s?(this.nextParsePosition=this.stream.getEndPosition(),!0):(e.type?this.moovStartFound?this.nextParsePosition=this.stream.getEndPosition():this.nextParsePosition=this.stream.getPosition()+e.size:this.nextParsePosition=this.stream.getEndPosition(),!1))},v.prototype.hasIncompleteMdat=function(){return this.parsingMdat!==null},v.prototype.processIncompleteMdat=function(){var e,n;return e=this.parsingMdat,n=this.stream.seek(e.start+e.size,!1,this.discardMdatData),n?(r.debug("ISOFile","Found 'mdat' end in buffered data"),this.parsingMdat=null,!0):(this.nextParsePosition=this.stream.findEndContiguousBuf(),!1)},v.prototype.restoreParsePosition=function(){return this.stream.seek(this.lastBoxStartPosition,!0,this.discardMdatData)},v.prototype.saveParsePosition=function(){this.lastBoxStartPosition=this.stream.getPosition()},v.prototype.updateUsedBytes=function(e,n){this.stream.addUsedBytes&&(e.type==="mdat"?(this.stream.addUsedBytes(e.hdr_size),this.discardMdatData&&this.stream.addUsedBytes(e.size-e.hdr_size)):this.stream.addUsedBytes(e.size))},v.prototype.add=l.Box.prototype.add,v.prototype.addBox=l.Box.prototype.addBox,v.prototype.init=function(e){var n=e||{};this.add("ftyp").set("major_brand",n.brands&&n.brands[0]||"iso4").set("minor_version",0).set("compatible_brands",n.brands||["iso4"]);var s=this.add("moov");return s.add("mvhd").set("timescale",n.timescale||600).set("rate",n.rate||65536).set("creation_time",0).set("modification_time",0).set("duration",n.duration||0).set("volume",n.width?0:256).set("matrix",[65536,0,0,0,65536,0,0,0,1073741824]).set("next_track_id",1),s.add("mvex"),this},v.prototype.addTrack=function(e){this.moov||this.init(e);var n=e||{};n.width=n.width||320,n.height=n.height||320,n.id=n.id||this.moov.mvhd.next_track_id,n.type=n.type||"avc1";var s=this.moov.add("trak");this.moov.mvhd.next_track_id=n.id+1,s.add("tkhd").set("flags",l.TKHD_FLAG_ENABLED|l.TKHD_FLAG_IN_MOVIE|l.TKHD_FLAG_IN_PREVIEW).set("creation_time",0).set("modification_time",0).set("track_id",n.id).set("duration",n.duration||0).set("layer",n.layer||0).set("alternate_group",0).set("volume",1).set("matrix",[0,0,0,0,0,0,0,0,0]).set("width",n.width<<16).set("height",n.height<<16);var c=s.add("mdia");c.add("mdhd").set("creation_time",0).set("modification_time",0).set("timescale",n.timescale||1).set("duration",n.media_duration||0).set("language",n.language||"und"),c.add("hdlr").set("handler",n.hdlr||"vide").set("name",n.name||"Track created with MP4Box.js"),c.add("elng").set("extended_language",n.language||"fr-FR");var f=c.add("minf");if(l[n.type+"SampleEntry"]!==void 0){var m=new l[n.type+"SampleEntry"];m.data_reference_index=1;var p="";for(var _ in l.sampleEntryCodes)for(var S=l.sampleEntryCodes[_],x=0;x<S.length;x++)if(S.indexOf(n.type)>-1){p=_;break}switch(p){case"Visual":if(f.add("vmhd").set("graphicsmode",0).set("opcolor",[0,0,0]),m.set("width",n.width).set("height",n.height).set("horizresolution",72<<16).set("vertresolution",72<<16).set("frame_count",1).set("compressorname",n.type+" Compressor").set("depth",24),n.avcDecoderConfigRecord){var w=new l.avcCBox;w.parse(new a(n.avcDecoderConfigRecord)),m.addBox(w)}else if(n.hevcDecoderConfigRecord){var U=new l.hvcCBox;U.parse(new a(n.hevcDecoderConfigRecord)),m.addBox(U)}break;case"Audio":f.add("smhd").set("balance",n.balance||0),m.set("channel_count",n.channel_count||2).set("samplesize",n.samplesize||16).set("samplerate",n.samplerate||65536);break;case"Hint":f.add("hmhd");break;case"Subtitle":switch(f.add("sthd"),n.type){case"stpp":m.set("namespace",n.namespace||"nonamespace").set("schema_location",n.schema_location||"").set("auxiliary_mime_types",n.auxiliary_mime_types||"");break}break;case"Metadata":f.add("nmhd");break;case"System":f.add("nmhd");break;default:f.add("nmhd");break}n.description&&m.addBox(n.description),n.description_boxes&&n.description_boxes.forEach(function(E){m.addBox(E)}),f.add("dinf").add("dref").addEntry(new l["url Box"]().set("flags",1));var A=f.add("stbl");return A.add("stsd").addEntry(m),A.add("stts").set("sample_counts",[]).set("sample_deltas",[]),A.add("stsc").set("first_chunk",[]).set("samples_per_chunk",[]).set("sample_description_index",[]),A.add("stco").set("chunk_offsets",[]),A.add("stsz").set("sample_sizes",[]),this.moov.mvex.add("trex").set("track_id",n.id).set("default_sample_description_index",n.default_sample_description_index||1).set("default_sample_duration",n.default_sample_duration||0).set("default_sample_size",n.default_sample_size||0).set("default_sample_flags",n.default_sample_flags||0),this.buildTrakSampleLists(s),n.id}},l.Box.prototype.computeSize=function(e){var n=e||new o;n.endianness=o.BIG_ENDIAN,this.write(n)},v.prototype.addSample=function(e,n,s){var c=s||{},f={},m=this.getTrackById(e);if(m!==null){f.number=m.samples.length,f.track_id=m.tkhd.track_id,f.timescale=m.mdia.mdhd.timescale,f.description_index=c.sample_description_index?c.sample_description_index-1:0,f.description=m.mdia.minf.stbl.stsd.entries[f.description_index],f.data=n,f.size=n.byteLength,f.alreadyRead=f.size,f.duration=c.duration||1,f.cts=c.cts||0,f.dts=c.dts||0,f.is_sync=c.is_sync||!1,f.is_leading=c.is_leading||0,f.depends_on=c.depends_on||0,f.is_depended_on=c.is_depended_on||0,f.has_redundancy=c.has_redundancy||0,f.degradation_priority=c.degradation_priority||0,f.offset=0,f.subsamples=c.subsamples,m.samples.push(f),m.samples_size+=f.size,m.samples_duration+=f.duration,m.first_dts===void 0&&(m.first_dts=c.dts),this.processSamples();var p=this.createSingleSampleMoof(f);return this.addBox(p),p.computeSize(),p.trafs[0].truns[0].data_offset=p.size+8,this.add("mdat").data=new Uint8Array(n),f}},v.prototype.createSingleSampleMoof=function(e){var n=0;e.is_sync?n=1<<25:n=65536;var s=new l.moofBox;s.add("mfhd").set("sequence_number",this.nextMoofNumber),this.nextMoofNumber++;var c=s.add("traf"),f=this.getTrackById(e.track_id);return c.add("tfhd").set("track_id",e.track_id).set("flags",l.TFHD_FLAG_DEFAULT_BASE_IS_MOOF),c.add("tfdt").set("baseMediaDecodeTime",e.dts-(f.first_dts||0)),c.add("trun").set("flags",l.TRUN_FLAGS_DATA_OFFSET|l.TRUN_FLAGS_DURATION|l.TRUN_FLAGS_SIZE|l.TRUN_FLAGS_FLAGS|l.TRUN_FLAGS_CTS_OFFSET).set("data_offset",0).set("first_sample_flags",0).set("sample_count",1).set("sample_duration",[e.duration]).set("sample_size",[e.size]).set("sample_flags",[n]).set("sample_composition_time_offset",[e.cts-e.dts]),s},v.prototype.lastMoofIndex=0,v.prototype.samplesDataSize=0,v.prototype.resetTables=function(){var e,n,s,c,f,m,p,_;for(this.initial_duration=this.moov.mvhd.duration,this.moov.mvhd.duration=0,e=0;e<this.moov.traks.length;e++){n=this.moov.traks[e],n.tkhd.duration=0,n.mdia.mdhd.duration=0,s=n.mdia.minf.stbl.stco||n.mdia.minf.stbl.co64,s.chunk_offsets=[],c=n.mdia.minf.stbl.stsc,c.first_chunk=[],c.samples_per_chunk=[],c.sample_description_index=[],f=n.mdia.minf.stbl.stsz||n.mdia.minf.stbl.stz2,f.sample_sizes=[],m=n.mdia.minf.stbl.stts,m.sample_counts=[],m.sample_deltas=[],p=n.mdia.minf.stbl.ctts,p&&(p.sample_counts=[],p.sample_offsets=[]),_=n.mdia.minf.stbl.stss;var S=n.mdia.minf.stbl.boxes.indexOf(_);S!=-1&&(n.mdia.minf.stbl.boxes[S]=null)}},v.initSampleGroups=function(e,n,s,c,f){var m,p,_,S;function x(w,U,A){this.grouping_type=w,this.grouping_type_parameter=U,this.sbgp=A,this.last_sample_in_run=-1,this.entry_index=-1}for(n&&(n.sample_groups_info=[]),e.sample_groups_info||(e.sample_groups_info=[]),p=0;p<s.length;p++){for(S=s[p].grouping_type+"/"+s[p].grouping_type_parameter,_=new x(s[p].grouping_type,s[p].grouping_type_parameter,s[p]),n&&(n.sample_groups_info[S]=_),e.sample_groups_info[S]||(e.sample_groups_info[S]=_),m=0;m<c.length;m++)c[m].grouping_type===s[p].grouping_type&&(_.description=c[m],_.description.used=!0);if(f)for(m=0;m<f.length;m++)f[m].grouping_type===s[p].grouping_type&&(_.fragment_description=f[m],_.fragment_description.used=!0,_.is_fragment=!0)}if(n){if(f)for(p=0;p<f.length;p++)!f[p].used&&f[p].version>=2&&(S=f[p].grouping_type+"/0",_=new x(f[p].grouping_type,0),_.is_fragment=!0,n.sample_groups_info[S]||(n.sample_groups_info[S]=_))}else for(p=0;p<c.length;p++)!c[p].used&&c[p].version>=2&&(S=c[p].grouping_type+"/0",_=new x(c[p].grouping_type,0),e.sample_groups_info[S]||(e.sample_groups_info[S]=_))},v.setSampleGroupProperties=function(e,n,s,c){var f,m;n.sample_groups=[];for(f in c)if(n.sample_groups[f]={},n.sample_groups[f].grouping_type=c[f].grouping_type,n.sample_groups[f].grouping_type_parameter=c[f].grouping_type_parameter,s>=c[f].last_sample_in_run&&(c[f].last_sample_in_run<0&&(c[f].last_sample_in_run=0),c[f].entry_index++,c[f].entry_index<=c[f].sbgp.entries.length-1&&(c[f].last_sample_in_run+=c[f].sbgp.entries[c[f].entry_index].sample_count)),c[f].entry_index<=c[f].sbgp.entries.length-1?n.sample_groups[f].group_description_index=c[f].sbgp.entries[c[f].entry_index].group_description_index:n.sample_groups[f].group_description_index=-1,n.sample_groups[f].group_description_index!==0){var p;c[f].fragment_description?p=c[f].fragment_description:p=c[f].description,n.sample_groups[f].group_description_index>0?(n.sample_groups[f].group_description_index>65535?m=(n.sample_groups[f].group_description_index>>16)-1:m=n.sample_groups[f].group_description_index-1,p&&m>=0&&(n.sample_groups[f].description=p.entries[m])):p&&p.version>=2&&p.default_group_description_index>0&&(n.sample_groups[f].description=p.entries[p.default_group_description_index-1])}},v.process_sdtp=function(e,n,s){n&&(e?(n.is_leading=e.is_leading[s],n.depends_on=e.sample_depends_on[s],n.is_depended_on=e.sample_is_depended_on[s],n.has_redundancy=e.sample_has_redundancy[s]):(n.is_leading=0,n.depends_on=0,n.is_depended_on=0,n.has_redundancy=0))},v.prototype.buildSampleLists=function(){var e,n;for(e=0;e<this.moov.traks.length;e++)n=this.moov.traks[e],this.buildTrakSampleLists(n)},v.prototype.buildTrakSampleLists=function(e){var n,s,c,f,m,p,_,S,x,w,U,A,E,T,P,z,R,D,B,F,M,I,L,O;if(e.samples=[],e.samples_duration=0,e.samples_size=0,s=e.mdia.minf.stbl.stco||e.mdia.minf.stbl.co64,c=e.mdia.minf.stbl.stsc,f=e.mdia.minf.stbl.stsz||e.mdia.minf.stbl.stz2,m=e.mdia.minf.stbl.stts,p=e.mdia.minf.stbl.ctts,_=e.mdia.minf.stbl.stss,S=e.mdia.minf.stbl.stsd,x=e.mdia.minf.stbl.subs,A=e.mdia.minf.stbl.stdp,w=e.mdia.minf.stbl.sbgps,U=e.mdia.minf.stbl.sgpds,D=-1,B=-1,F=-1,M=-1,I=0,L=0,O=0,v.initSampleGroups(e,null,w,U),!(typeof f>"u")){for(n=0;n<f.sample_sizes.length;n++){var k={};k.number=n,k.track_id=e.tkhd.track_id,k.timescale=e.mdia.mdhd.timescale,k.alreadyRead=0,e.samples[n]=k,k.size=f.sample_sizes[n],e.samples_size+=k.size,n===0?(T=1,E=0,k.chunk_index=T,k.chunk_run_index=E,R=c.samples_per_chunk[E],z=0,E+1<c.first_chunk.length?P=c.first_chunk[E+1]-1:P=1/0):n<R?(k.chunk_index=T,k.chunk_run_index=E):(T++,k.chunk_index=T,z=0,T<=P||(E++,E+1<c.first_chunk.length?P=c.first_chunk[E+1]-1:P=1/0),k.chunk_run_index=E,R+=c.samples_per_chunk[E]),k.description_index=c.sample_description_index[k.chunk_run_index]-1,k.description=S.entries[k.description_index],k.offset=s.chunk_offsets[k.chunk_index-1]+z,z+=k.size,n>D&&(B++,D<0&&(D=0),D+=m.sample_counts[B]),n>0?(e.samples[n-1].duration=m.sample_deltas[B],e.samples_duration+=e.samples[n-1].duration,k.dts=e.samples[n-1].dts+e.samples[n-1].duration):k.dts=0,p?(n>=F&&(M++,F<0&&(F=0),F+=p.sample_counts[M]),k.cts=e.samples[n].dts+p.sample_offsets[M]):k.cts=k.dts,_?(n==_.sample_numbers[I]-1?(k.is_sync=!0,I++):(k.is_sync=!1,k.degradation_priority=0),x&&x.entries[L].sample_delta+O==n+1&&(k.subsamples=x.entries[L].subsamples,O+=x.entries[L].sample_delta,L++)):k.is_sync=!0,v.process_sdtp(e.mdia.minf.stbl.sdtp,k,k.number),A?k.degradation_priority=A.priority[n]:k.degradation_priority=0,x&&x.entries[L].sample_delta+O==n&&(k.subsamples=x.entries[L].subsamples,O+=x.entries[L].sample_delta),(w.length>0||U.length>0)&&v.setSampleGroupProperties(e,k,n,e.sample_groups_info)}n>0&&(e.samples[n-1].duration=Math.max(e.mdia.mdhd.duration-e.samples[n-1].dts,0),e.samples_duration+=e.samples[n-1].duration)}},v.prototype.updateSampleLists=function(){var e,n,s,c,f,m,p,_,S,x,w,U,A,E,T;if(this.moov!==void 0){for(;this.lastMoofIndex<this.moofs.length;)if(S=this.moofs[this.lastMoofIndex],this.lastMoofIndex++,S.type=="moof")for(x=S,e=0;e<x.trafs.length;e++){for(w=x.trafs[e],U=this.getTrackById(w.tfhd.track_id),A=this.getTrexById(w.tfhd.track_id),w.tfhd.flags&l.TFHD_FLAG_SAMPLE_DESC?c=w.tfhd.default_sample_description_index:c=A?A.default_sample_description_index:1,w.tfhd.flags&l.TFHD_FLAG_SAMPLE_DUR?f=w.tfhd.default_sample_duration:f=A?A.default_sample_duration:0,w.tfhd.flags&l.TFHD_FLAG_SAMPLE_SIZE?m=w.tfhd.default_sample_size:m=A?A.default_sample_size:0,w.tfhd.flags&l.TFHD_FLAG_SAMPLE_FLAGS?p=w.tfhd.default_sample_flags:p=A?A.default_sample_flags:0,w.sample_number=0,w.sbgps.length>0&&v.initSampleGroups(U,w,w.sbgps,U.mdia.minf.stbl.sgpds,w.sgpds),n=0;n<w.truns.length;n++){var P=w.truns[n];for(s=0;s<P.sample_count;s++){E={},E.moof_number=this.lastMoofIndex,E.number_in_traf=w.sample_number,w.sample_number++,E.number=U.samples.length,w.first_sample_index=U.samples.length,U.samples.push(E),E.track_id=U.tkhd.track_id,E.timescale=U.mdia.mdhd.timescale,E.description_index=c-1,E.description=U.mdia.minf.stbl.stsd.entries[E.description_index],E.size=m,P.flags&l.TRUN_FLAGS_SIZE&&(E.size=P.sample_size[s]),U.samples_size+=E.size,E.duration=f,P.flags&l.TRUN_FLAGS_DURATION&&(E.duration=P.sample_duration[s]),U.samples_duration+=E.duration,U.first_traf_merged||s>0?E.dts=U.samples[U.samples.length-2].dts+U.samples[U.samples.length-2].duration:(w.tfdt?E.dts=w.tfdt.baseMediaDecodeTime:E.dts=0,U.first_traf_merged=!0),E.cts=E.dts,P.flags&l.TRUN_FLAGS_CTS_OFFSET&&(E.cts=E.dts+P.sample_composition_time_offset[s]),T=p,P.flags&l.TRUN_FLAGS_FLAGS?T=P.sample_flags[s]:s===0&&P.flags&l.TRUN_FLAGS_FIRST_FLAG&&(T=P.first_sample_flags),E.is_sync=!(T>>16&1),E.is_leading=T>>26&3,E.depends_on=T>>24&3,E.is_depended_on=T>>22&3,E.has_redundancy=T>>20&3,E.degradation_priority=T&65535;var z=!!(w.tfhd.flags&l.TFHD_FLAG_BASE_DATA_OFFSET),R=!!(w.tfhd.flags&l.TFHD_FLAG_DEFAULT_BASE_IS_MOOF),D=!!(P.flags&l.TRUN_FLAGS_DATA_OFFSET),B=0;z?B=w.tfhd.base_data_offset:R||n===0?B=x.start:B=_,n===0&&s===0?D?E.offset=B+P.data_offset:E.offset=B:E.offset=_,_=E.offset+E.size,(w.sbgps.length>0||w.sgpds.length>0||U.mdia.minf.stbl.sbgps.length>0||U.mdia.minf.stbl.sgpds.length>0)&&v.setSampleGroupProperties(U,E,E.number_in_traf,w.sample_groups_info)}}if(w.subs){U.has_fragment_subsamples=!0;var F=w.first_sample_index;for(n=0;n<w.subs.entries.length;n++)F+=w.subs.entries[n].sample_delta,E=U.samples[F-1],E.subsamples=w.subs.entries[n].subsamples}}}},v.prototype.getSample=function(e,n){var s,c=e.samples[n];if(!this.moov)return null;if(!c.data)c.data=new Uint8Array(c.size),c.alreadyRead=0,this.samplesDataSize+=c.size,r.debug("ISOFile","Allocating sample #"+n+" on track #"+e.tkhd.track_id+" of size "+c.size+" (total: "+this.samplesDataSize+")");else if(c.alreadyRead==c.size)return c;for(;;){var f=this.stream.findPosition(!0,c.offset+c.alreadyRead,!1);if(f>-1){s=this.stream.buffers[f];var m=s.byteLength-(c.offset+c.alreadyRead-s.fileStart);if(c.size-c.alreadyRead<=m)return r.debug("ISOFile","Getting sample #"+n+" data (alreadyRead: "+c.alreadyRead+" offset: "+(c.offset+c.alreadyRead-s.fileStart)+" read size: "+(c.size-c.alreadyRead)+" full size: "+c.size+")"),o.memcpy(c.data.buffer,c.alreadyRead,s,c.offset+c.alreadyRead-s.fileStart,c.size-c.alreadyRead),s.usedBytes+=c.size-c.alreadyRead,this.stream.logBufferLevel(),c.alreadyRead=c.size,c;if(m===0)return null;r.debug("ISOFile","Getting sample #"+n+" partial data (alreadyRead: "+c.alreadyRead+" offset: "+(c.offset+c.alreadyRead-s.fileStart)+" read size: "+m+" full size: "+c.size+")"),o.memcpy(c.data.buffer,c.alreadyRead,s,c.offset+c.alreadyRead-s.fileStart,m),c.alreadyRead+=m,s.usedBytes+=m,this.stream.logBufferLevel()}else return null}},v.prototype.releaseSample=function(e,n){var s=e.samples[n];return s.data?(this.samplesDataSize-=s.size,s.data=null,s.alreadyRead=0,s.size):0},v.prototype.getAllocatedSampleDataSize=function(){return this.samplesDataSize},v.prototype.getCodecs=function(){var e,n="";for(e=0;e<this.moov.traks.length;e++){var s=this.moov.traks[e];e>0&&(n+=","),n+=s.mdia.minf.stbl.stsd.entries[0].getCodec()}return n},v.prototype.getTrexById=function(e){var n;if(!this.moov||!this.moov.mvex)return null;for(n=0;n<this.moov.mvex.trexs.length;n++){var s=this.moov.mvex.trexs[n];if(s.track_id==e)return s}return null},v.prototype.getTrackById=function(e){if(this.moov===void 0)return null;for(var n=0;n<this.moov.traks.length;n++){var s=this.moov.traks[n];if(s.tkhd.track_id==e)return s}return null},v.prototype.items=[],v.prototype.itemsDataSize=0,v.prototype.flattenItemInfo=function(){var e=this.items,n,s,c,f=this.meta;if(f!=null&&f.hdlr!==void 0&&f.iinf!==void 0){for(n=0;n<f.iinf.item_infos.length;n++)c={},c.id=f.iinf.item_infos[n].item_ID,e[c.id]=c,c.ref_to=[],c.name=f.iinf.item_infos[n].item_name,f.iinf.item_infos[n].protection_index>0&&(c.protection=f.ipro.protections[f.iinf.item_infos[n].protection_index-1]),f.iinf.item_infos[n].item_type?c.type=f.iinf.item_infos[n].item_type:c.type="mime",c.content_type=f.iinf.item_infos[n].content_type,c.content_encoding=f.iinf.item_infos[n].content_encoding;if(f.iloc)for(n=0;n<f.iloc.items.length;n++){var m=f.iloc.items[n];switch(c=e[m.item_ID],m.data_reference_index!==0&&(r.warn("Item storage with reference to other files: not supported"),c.source=f.dinf.boxes[m.data_reference_index-1]),m.construction_method){case 0:break;case 1:r.warn("Item storage with construction_method : not supported");break;case 2:r.warn("Item storage with construction_method : not supported");break}for(c.extents=[],c.size=0,s=0;s<m.extents.length;s++)c.extents[s]={},c.extents[s].offset=m.extents[s].extent_offset+m.base_offset,c.extents[s].length=m.extents[s].extent_length,c.extents[s].alreadyRead=0,c.size+=c.extents[s].length}if(f.pitm&&(e[f.pitm.item_id].primary=!0),f.iref)for(n=0;n<f.iref.references.length;n++){var p=f.iref.references[n];for(s=0;s<p.references.length;s++)e[p.from_item_ID].ref_to.push({type:p.type,id:p.references[s]})}if(f.iprp)for(var _=0;_<f.iprp.ipmas.length;_++){var S=f.iprp.ipmas[_];for(n=0;n<S.associations.length;n++){var x=S.associations[n];for(c=e[x.id],c.properties===void 0&&(c.properties={},c.properties.boxes=[]),s=0;s<x.props.length;s++){var w=x.props[s];if(w.property_index>0&&w.property_index-1<f.iprp.ipco.boxes.length){var U=f.iprp.ipco.boxes[w.property_index-1];c.properties[U.type]=U,c.properties.boxes.push(U)}}}}}},v.prototype.getItem=function(e){var n,s;if(!this.meta)return null;if(s=this.items[e],!s.data&&s.size)s.data=new Uint8Array(s.size),s.alreadyRead=0,this.itemsDataSize+=s.size,r.debug("ISOFile","Allocating item #"+e+" of size "+s.size+" (total: "+this.itemsDataSize+")");else if(s.alreadyRead===s.size)return s;for(var c=0;c<s.extents.length;c++){var f=s.extents[c];if(f.alreadyRead!==f.length){var m=this.stream.findPosition(!0,f.offset+f.alreadyRead,!1);if(m>-1){n=this.stream.buffers[m];var p=n.byteLength-(f.offset+f.alreadyRead-n.fileStart);if(f.length-f.alreadyRead<=p)r.debug("ISOFile","Getting item #"+e+" extent #"+c+" data (alreadyRead: "+f.alreadyRead+" offset: "+(f.offset+f.alreadyRead-n.fileStart)+" read size: "+(f.length-f.alreadyRead)+" full extent size: "+f.length+" full item size: "+s.size+")"),o.memcpy(s.data.buffer,s.alreadyRead,n,f.offset+f.alreadyRead-n.fileStart,f.length-f.alreadyRead),n.usedBytes+=f.length-f.alreadyRead,this.stream.logBufferLevel(),s.alreadyRead+=f.length-f.alreadyRead,f.alreadyRead=f.length;else return r.debug("ISOFile","Getting item #"+e+" extent #"+c+" partial data (alreadyRead: "+f.alreadyRead+" offset: "+(f.offset+f.alreadyRead-n.fileStart)+" read size: "+p+" full extent size: "+f.length+" full item size: "+s.size+")"),o.memcpy(s.data.buffer,s.alreadyRead,n,f.offset+f.alreadyRead-n.fileStart,p),f.alreadyRead+=p,s.alreadyRead+=p,n.usedBytes+=p,this.stream.logBufferLevel(),null}else return null}}return s.alreadyRead===s.size?s:null},v.prototype.releaseItem=function(e){var n=this.items[e];if(n.data){this.itemsDataSize-=n.size,n.data=null,n.alreadyRead=0;for(var s=0;s<n.extents.length;s++){var c=n.extents[s];c.alreadyRead=0}return n.size}else return 0},v.prototype.processItems=function(e){for(var n in this.items){var s=this.items[n];this.getItem(s.id),e&&!s.sent&&(e(s),s.sent=!0,s.data=null)}},v.prototype.hasItem=function(e){for(var n in this.items){var s=this.items[n];if(s.name===e)return s.id}return-1},v.prototype.getMetaHandler=function(){return this.meta?this.meta.hdlr.handler:null},v.prototype.getPrimaryItem=function(){return!this.meta||!this.meta.pitm?null:this.getItem(this.meta.pitm.item_id)},v.prototype.itemToFragmentedTrackFile=function(e){var n=e||{},s=null;if(n.itemId?s=this.getItem(n.itemId):s=this.getPrimaryItem(),s==null)return null;var c=new v;c.discardMdatData=!1;var f={type:s.type,description_boxes:s.properties.boxes};s.properties.ispe&&(f.width=s.properties.ispe.image_width,f.height=s.properties.ispe.image_height);var m=c.addTrack(f);return m?(c.addSample(m,s.data),c):null},v.prototype.write=function(e){for(var n=0;n<this.boxes.length;n++)this.boxes[n].write(e)},v.prototype.createFragment=function(e,n,s){var c=this.getTrackById(e),f=this.getSample(c,n);if(f==null)return this.setNextSeekPositionFromSample(c.samples[n]),null;var m=s||new o;m.endianness=o.BIG_ENDIAN;var p=this.createSingleSampleMoof(f);p.write(m),p.trafs[0].truns[0].data_offset=p.size+8,r.debug("MP4Box","Adjusting data_offset with new value "+p.trafs[0].truns[0].data_offset),m.adjustUint32(p.trafs[0].truns[0].data_offset_position,p.trafs[0].truns[0].data_offset);var _=new l.mdatBox;return _.data=f.data,_.write(m),m},v.writeInitializationSegment=function(e,n,s,c){var f;r.debug("ISOFile","Generating initialization segment");var m=new o;m.endianness=o.BIG_ENDIAN,e.write(m);var p=n.add("mvex");for(s&&p.add("mehd").set("fragment_duration",s),f=0;f<n.traks.length;f++)p.add("trex").set("track_id",n.traks[f].tkhd.track_id).set("default_sample_description_index",1).set("default_sample_duration",c).set("default_sample_size",0).set("default_sample_flags",65536);return n.write(m),m.buffer},v.prototype.save=function(e){var n=new o;n.endianness=o.BIG_ENDIAN,this.write(n),n.save(e)},v.prototype.getBuffer=function(){var e=new o;return e.endianness=o.BIG_ENDIAN,this.write(e),e.buffer},v.prototype.initializeSegmentation=function(){var e,n,s,c;for(this.onSegment===null&&r.warn("MP4Box","No segmentation callback set!"),this.isFragmentationInitialized||(this.isFragmentationInitialized=!0,this.nextMoofNumber=0,this.resetTables()),n=[],e=0;e<this.fragmentedTracks.length;e++){var f=new l.moovBox;f.mvhd=this.moov.mvhd,f.boxes.push(f.mvhd),s=this.getTrackById(this.fragmentedTracks[e].id),f.boxes.push(s),f.traks.push(s),c={},c.id=s.tkhd.track_id,c.user=this.fragmentedTracks[e].user,c.buffer=v.writeInitializationSegment(this.ftyp,f,this.moov.mvex&&this.moov.mvex.mehd?this.moov.mvex.mehd.fragment_duration:void 0,this.moov.traks[e].samples.length>0?this.moov.traks[e].samples[0].duration:0),n.push(c)}return n},l.Box.prototype.printHeader=function(e){this.size+=8,this.size>u&&(this.size+=8),this.type==="uuid"&&(this.size+=16),e.log(e.indent+"size:"+this.size),e.log(e.indent+"type:"+this.type)},l.FullBox.prototype.printHeader=function(e){this.size+=4,l.Box.prototype.printHeader.call(this,e),e.log(e.indent+"version:"+this.version),e.log(e.indent+"flags:"+this.flags)},l.Box.prototype.print=function(e){this.printHeader(e)},l.ContainerBox.prototype.print=function(e){this.printHeader(e);for(var n=0;n<this.boxes.length;n++)if(this.boxes[n]){var s=e.indent;e.indent+=" ",this.boxes[n].print(e),e.indent=s}},v.prototype.print=function(e){e.indent="";for(var n=0;n<this.boxes.length;n++)this.boxes[n]&&this.boxes[n].print(e)},l.mvhdBox.prototype.print=function(e){l.FullBox.prototype.printHeader.call(this,e),e.log(e.indent+"creation_time: "+this.creation_time),e.log(e.indent+"modification_time: "+this.modification_time),e.log(e.indent+"timescale: "+this.timescale),e.log(e.indent+"duration: "+this.duration),e.log(e.indent+"rate: "+this.rate),e.log(e.indent+"volume: "+(this.volume>>8)),e.log(e.indent+"matrix: "+this.matrix.join(", ")),e.log(e.indent+"next_track_id: "+this.next_track_id)},l.tkhdBox.prototype.print=function(e){l.FullBox.prototype.printHeader.call(this,e),e.log(e.indent+"creation_time: "+this.creation_time),e.log(e.indent+"modification_time: "+this.modification_time),e.log(e.indent+"track_id: "+this.track_id),e.log(e.indent+"duration: "+this.duration),e.log(e.indent+"volume: "+(this.volume>>8)),e.log(e.indent+"matrix: "+this.matrix.join(", ")),e.log(e.indent+"layer: "+this.layer),e.log(e.indent+"alternate_group: "+this.alternate_group),e.log(e.indent+"width: "+this.width),e.log(e.indent+"height: "+this.height)};var b={};b.createFile=function(e,n){var s=e!==void 0?e:!0,c=new v(n);return c.discardMdatData=!s,c},t.createFile=b.createFile})(zi);const uc={sampleRate:48e3,channelCount:2,codec:"mp4a.40.2"};var gs,tn,Yn,rs,Ki,qa,up,pw;const Cu=class{constructor(t,r={}){ei(this,up),gt(this,"ready"),ei(this,gs,{duration:0,width:0,height:0}),ei(this,tn,new Float32Array),ei(this,Yn,new Float32Array),ei(this,rs,0),ei(this,Ki,0),ei(this,qa,void 0),ii(this,qa,{loop:!1,volume:1,...r}),this.ready=wB(this,up,pw).call(this,t).then(()=>({width:0,height:0,duration:r.loop?1/0:ke(this,gs).duration}))}getPCMData(){return[ke(this,tn),ke(this,Yn)]}async tick(t){if(t<ke(this,rs))throw Error("time not allow rollback");if(!ke(this,qa).loop&&t>=ke(this,gs).duration)return{audio:[],state:"done"};const r=t-ke(this,rs);ii(this,rs,t);const a=Math.ceil(r*(uc.sampleRate/1e6)),o=ke(this,Ki)+a,u=ke(this,qa).loop?[P_(ke(this,tn),ke(this,Ki),o),P_(ke(this,Yn),ke(this,Ki),o)]:[ke(this,tn).slice(ke(this,Ki),o),ke(this,Yn).slice(ke(this,Ki),o)];return ii(this,Ki,o),{audio:u,state:"success"}}destroy(){ii(this,tn,new Float32Array(0)),ii(this,Yn,new Float32Array(0)),wn.info("---- audioclip destroy ----")}};let PB=Cu;gs=new WeakMap,tn=new WeakMap,Yn=new WeakMap,rs=new WeakMap,Ki=new WeakMap,qa=new WeakMap,up=new WeakSet,pw=async function(t){Cu.ctx==null&&(Cu.ctx=new AudioContext({sampleRate:uc.sampleRate}));const r=performance.now(),a=t instanceof ReadableStream?await IB(t,Cu.ctx):t;wn.info("Audio clip decoded complete:",performance.now()-r);const o=ke(this,qa).volume;if(o!==1)for(const u of a)for(let d=0;d<u.length;d+=1)u[d]*=o;ke(this,gs).duration=a[0].length/uc.sampleRate*1e6,ii(this,tn,a[0]),ii(this,Yn,a[1]??ke(this,tn)),wn.info("Audio clip convert to AudioData, time:",performance.now()-r)},gt(PB,"ctx",null);async function IB(t,r){const a=await new Response(t).arrayBuffer();return CB(await r.decodeAudioData(a))}var is;class BB{constructor(){gt(this,"readable"),gt(this,"writable"),ei(this,is,0);const r=zi.createFile();let a=0,o=!1;this.readable=new ReadableStream({start:u=>{r.onReady=d=>{var h,l;const g=(h=d.videoTracks[0])==null?void 0:h.id;g!=null&&r.setExtractionOptions(g,"video",{nbSamples:100});const y=(l=d.audioTracks[0])==null?void 0:l.id;y!=null&&r.setExtractionOptions(y,"audio",{nbSamples:100}),u.enqueue({chunkType:"ready",data:{info:d,file:r}}),r.start()},r.onSamples=(d,h,l)=>{u.enqueue({chunkType:"samples",data:{id:d,type:h,samples:l}}),a=u.desiredSize??0},r.onFlush=()=>{u.close()}},pull:u=>{a=u.desiredSize??0},cancel:()=>{r.stop(),o=!0}},{highWaterMark:50}),this.writable=new WritableStream({write:async u=>{if(o){this.writable.abort();return}const d=u.buffer;for(d.fileStart=ke(this,is),ii(this,is,ke(this,is)+d.byteLength),r.appendBuffer(d);a<0;)await AB(50)},close:()=>{var u;r.flush(),r.stop(),(u=r.onFlush)==null||u.call(r)}})}}is=new WeakMap;function kB(t,r,a){let o=0,u=0;const d=t.boxes,h=[],l=()=>{if(d.length<4||u>=d.length)return null;if(h.length===0)for(let e=1;;e+=1){const n=t.getTrackById(e);if(n==null)break;h.push({track:n,id:e})}const b=new zi.DataStream;b.endianness=zi.DataStream.BIG_ENDIAN;for(let e=u;e<d.length;e++)d[e].write(b),delete d[e];return h.forEach(({track:e,id:n})=>{t.releaseUsedSamples(n,e.samples.length),e.samples=[]}),t.mdats=[],t.moofs=[],u=d.length,new Uint8Array(b.buffer)};let g=!1,y=!1,v=null;return{stream:new ReadableStream({start(b){o=self.setInterval(()=>{const e=l();e!=null&&!y&&b.enqueue(e)},r),v=()=>{clearInterval(o),t.flush();const e=l();e!=null&&!y&&b.enqueue(e),y||b.close()},g&&v()},cancel(){y=!0,clearInterval(o),a==null||a()}}),stop:()=>{g||(g=!0,v==null||v())}}}function DB(t){let r=0;const a=t.boxes,o=[];let u=0;async function d(){const s=n(a,r);r=a.length,o.forEach(({track:c,id:f})=>{const m=c.samples.at(-1);m!=null&&(u=Math.max(u,m.cts+m.duration)),t.releaseUsedSamples(f,c.samples.length),c.samples=[]}),t.mdats=[],t.moofs=[],s!=null&&await(v==null?void 0:v.write(s))}let h=[];function l(){if(h.length>0)return!0;const s=a.findIndex(c=>c.type==="moov");if(s===-1)return!1;if(h=a.slice(0,s+1),r=s+1,o.length===0)for(let c=1;;c+=1){const f=t.getTrackById(c);if(f==null)break;o.push({track:f,id:c})}return!0}let g=0,y=null,v=null;const b=(async()=>{y=await(await navigator.storage.getDirectory()).getFileHandle(Math.random().toString(),{create:!0}),v=await y.createWritable(),g=self.setInterval(()=>{l()&&d()},100)})();let e=!1;return async()=>{if(e)throw Error("File exported");if(e=!0,await b,clearInterval(g),!l()||y==null)return null;t.flush(),await d(),await(v==null?void 0:v.close());const s=h.find(p=>p.type==="moov");if(s==null)return null;s.mvhd.duration=u;const c=await(await navigator.storage.getDirectory()).getFileHandle(Math.random().toString(),{create:!0}),f=await c.createWritable(),m=n(h,0);return await f.write(m),await f.write(await y.getFile()),await f.close(),await c.getFile()};function n(s,c){if(c>=s.length)return null;const f=new zi.DataStream;f.endianness=zi.DataStream.BIG_ENDIAN;for(let m=c;m<s.length;m++)s[m]!==null&&(s[m].write(f),delete s[m]);return new Uint8Array(f.buffer)}}function LB(t){for(const r of t.mdia.minf.stbl.stsd.entries){const a=r.avcC??r.hvcC??r.vpcC;if(a!=null){const o=new zi.DataStream(void 0,0,zi.DataStream.BIG_ENDIAN);return a.write(o),new Uint8Array(o.buffer.slice(8))}}throw Error("avcC, hvcC or VPX not found")}function zB(t,r){const a=r.videoTracks[0],o={};if(a!=null){const d=LB(t.getTrackById(a.id)).buffer,{descKey:h,type:l}=a.codec.startsWith("avc1")?{descKey:"avcDecoderConfigRecord",type:"avc1"}:a.codec.startsWith("hvc1")?{descKey:"hevcDecoderConfigRecord",type:"hvc1"}:{descKey:"",type:""};h!==""&&(o.videoTrackConf={timescale:a.timescale,duration:a.duration,width:a.video.width,height:a.video.height,brands:r.brands,type:l,[h]:d}),o.videoDecoderConf={codec:a.codec,codedHeight:a.video.height,codedWidth:a.video.width,description:d}}const u=r.audioTracks[0];return u!=null&&(o.audioTrackConf={timescale:u.timescale,samplerate:u.audio.sample_rate,channel_count:u.audio.channel_count,hdlr:"soun",type:u.codec.startsWith("mp4a")?"mp4a":u.codec,description:MB(t)},o.audioDecoderConf={codec:u.codec.startsWith("mp4a")?uc.codec:u.codec,numberOfChannels:u.audio.channel_count,sampleRate:u.audio.sample_rate}),o}async function RB(t,r){let a=0,o=0,u=0,d=0,h=0,l=0,g=null,y=null;for(const v of t)await new Promise(async b=>{let e=null;TB(v.pipeThrough(new BB),{onDone:b,onChunk:async({chunkType:n,data:s})=>{if(n==="ready"){const{videoTrackConf:c,audioTrackConf:f}=zB(s.file,s.info);e=s.file,a===0&&c!=null&&(a=r.addTrack(c)),d===0&&f!=null&&(d=r.addTrack(f))}else if(n==="samples"){const{id:c,type:f,samples:m}=s,p=f==="video"?a:d,_=f==="video"?o:h,S=f==="video"?u:l;m.forEach(w=>{r.addSample(p,w.data,{duration:w.duration,dts:w.dts+_,cts:w.cts+S,is_sync:w.is_sync})}),e==null||e.releaseUsedSamples(c,m.length);const x=m.at(-1);if(x==null)return;f==="video"?g=x:f==="audio"&&(y=x)}}})}),g!=null&&(o+=g.dts,u+=g.cts),y!=null&&(h+=y.dts,l+=y.cts)}async function FB(t){const r=zi.createFile(),a=DB(r);await RB([t],r);const o=await a();if(o==null)throw Error("Can not generate file from stream");return o}function MB(t,r="mp4a"){var a;const o=(a=t.moov)==null?void 0:a.traks.map(u=>u.mdia.minf.stbl.stsd.entries).flat().find(({type:u})=>u===r);return o==null?void 0:o.esds}const xr=class{constructor(t,r,a,o,u){gt(this,"x",0),gt(this,"y",0),gt(this,"w",0),gt(this,"h",0),gt(this,"angle",0),gt(this,"master",null),this.x=t??0,this.y=r??0,this.w=a??0,this.h=o??0,this.master=u??null}get center(){const{x:t,y:r,w:a,h:o}=this;return{x:t+a/2,y:r+o/2}}get ctrls(){const{w:t,h:r}=this,a=xr.CTRL_SIZE,o=a/2,u=t/2,d=r/2,h=a*1.5,l=h/2;return{t:new xr(-o,-d-o,a,a,this),b:new xr(-o,d-o,a,a,this),l:new xr(-u-o,-o,a,a,this),r:new xr(u-o,-o,a,a,this),lt:new xr(-u-o,-d-o,a,a,this),lb:new xr(-u-o,d-o,a,a,this),rt:new xr(u-o,-d-o,a,a,this),rb:new xr(u-o,d-o,a,a,this),rotate:new xr(-l,-d-a*2-l,h,h,this)}}clone(){const{x:t,y:r,w:a,h:o,master:u}=this;return new xr(t,r,a,o,u)}checkHit(t,r){let{angle:a,center:o,x:u,y:d,w:h,h:l,master:g}=this;const y=(g==null?void 0:g.center)??o,v=(g==null?void 0:g.angle)??a;g==null&&(u=u-y.x,d=d-y.y);const b=t-y.x,e=r-y.y;let n=b,s=e;return v!==0&&(n=b*Math.cos(v)+e*Math.sin(v),s=e*Math.cos(v)-b*Math.sin(v)),!(n<u||n>u+h||s<d||s>d+l)}};let mw=xr;gt(mw,"CTRL_SIZE",16);var ns,$n;class OB{constructor(r){gt(this,"rect",new mw),gt(this,"visible",!0),gt(this,"zIndex",0),gt(this,"opacity",1),gt(this,"flip",null),ei(this,ns,null),ei(this,$n,null),gt(this,"audioNode",null),gt(this,"initReady",Promise.resolve()),this.name=r}render(r){const{rect:{center:a,angle:o}}=this;r.setTransform(this.flip==="horizontal"?-1:1,0,0,this.flip==="vertical"?-1:1,a.x,a.y),r.rotate((this.flip==null?1:-1)*o),r.globalAlpha=this.opacity}setAnimation(r,a){ii(this,ns,Object.entries(r).map(([o,u])=>{const d={from:0,to:100}[o]??Number(o.slice(0,-1));if(isNaN(d)||d>100||d<0)throw Error("keyFrame must between 0~100");return[d/100,u]})),ii(this,$n,Object.assign({},ke(this,$n),{duration:a.duration*1e6,delay:(a.delay??0)*1e6,iterCount:a.iterCount??1/0}))}animate(r){if(ke(this,ns)==null||ke(this,$n)==null||r<ke(this,$n).delay)return;const a=NB(r,ke(this,ns),ke(this,$n));for(const o in a)switch(o){case"opacity":this.opacity=a[o];break;case"x":case"y":case"w":case"h":case"angle":this.rect[o]=a[o];break}}}ns=new WeakMap,$n=new WeakMap;function NB(t,r,a){if(t/a.duration>=a.iterCount)return{};const o=t%a.duration,u=t===a.duration?1:o/a.duration,d=r.findIndex(e=>e[0]>=u);if(d===-1)return{};const h=r[d-1],l=r[d],g=l[1];if(h==null)return g;const y=h[1],v={},b=(u-h[0])/(l[0]-h[0]);for(const e in g){const n=e;y[n]!=null&&(v[n]=(g[n]-y[n])*b+y[n])}return v}class HB extends OB{render(r){super.render(r),r.fillStyle="#fff",r.font="300px Noto Sans SC",r.fillText(String(~~performance.now()/1e3),-500,100)}destroy(){}}let Ci=null;const io=new op,Ai={init:GB,start:jB,delete:(t,r)=>{io.delete(t,r)},getAVCanvas:$B,exportVideo:YB,getDuration:()=>io.getDuration()};function GB(t){return Ci!=null||(Ci=new pB(t,{bgColor:"#333",resolution:{width:1280,height:720}}),Ci.spriteManager.addSprite(new HB("ts"))),Ci}function $B(){if(Ci==null)throw Error("uninitialized");return Ci}async function jB(){if(Ci==null)throw Error("uninitialized");const r=Ci.captureStream().getVideoTracks()[0];if(r==null)throw Error("AVCanvas not video track");const a=new MediaStreamTrackProcessor({track:r}).readable,o=new VideoEncoder({error:console.error,output:(h,l)=>{l!=null&&io.meta==null&&(io.meta=l),io.append(h)}});o.configure({codec:"avc1.4D0032",framerate:30,bitrate:4e6,width:1280,height:720,latencyMode:"quality",alpha:"discard",avc:{format:"avc"}});const u=new VB(30),d=WB(a,{onChunk:async h=>{const l=u.transfrom(h);l!=null&&(o.encode(l.vf,l.opts),l.vf.close())}});return{pause:()=>{u.pause()},play:()=>{u.play()},stop:d}}var ao,oo,so,rn,lo;class VB{constructor(r){$i(this,ao,performance.now());$i(this,oo,xe(this,ao));$i(this,so,0);$i(this,rn,!1);$i(this,lo,0);this.expectFPS=r}play(){xe(this,rn)&&(Qr(this,rn,!1),Qr(this,ao,xe(this,ao)+(performance.now()-xe(this,lo))),Qr(this,oo,xe(this,oo)+(performance.now()-xe(this,lo))))}pause(){xe(this,rn)||(Qr(this,rn,!0),Qr(this,lo,performance.now()))}transfrom(r){const a=performance.now(),o=a-xe(this,ao);if(xe(this,rn)||xe(this,so)/o*1e3>this.expectFPS){r.close();return}const u=new VideoFrame(r,{timestamp:o*1e3,duration:(a-xe(this,oo))*1e3});return Qr(this,oo,a),Qr(this,so,xe(this,so)+1),r.close(),{vf:u,opts:{keyFrame:xe(this,so)%30===0}}}}ao=new WeakMap,oo=new WeakMap,so=new WeakMap,rn=new WeakMap,lo=new WeakMap;function WB(t,r){let a=!1;async function o(){var d;const u=t.getReader();for(;!a;){const{value:h,done:l}=await u.read();if(l){(d=r.onDone)==null||d.call(r);return}await r.onChunk(h)}u.releaseLock(),await t.cancel()}return o().catch(console.error),()=>{a=!0}}async function YB(t,r){const a=io.slice(t,r),o=_B(a),{stream:u,stop:d}=kB(o,500);return d(),{url:URL.createObjectURL(await FB(u)),duration:a.getDuration()}}let qB=0;function gw(t,r){const a=`atom${++qB}`,o={toString:()=>a};return typeof t=="function"?o.read=t:(o.init=t,o.read=u=>u(o),o.write=(u,d,h)=>d(o,typeof h=="function"?h(u(o)):h)),r&&(o.write=r),o}const I_=t=>"init"in t,B_=t=>!!t.write,cc=new WeakMap,KB=(t,r)=>{cc.set(t,r),t.catch(()=>{}).finally(()=>cc.delete(t))},k_=(t,r)=>{const a=cc.get(t);a&&(cc.delete(t),a(r))},D_=(t,r)=>{t.status="fulfilled",t.value=r},L_=(t,r)=>{t.status="rejected",t.reason=r},XB=t=>typeof(t==null?void 0:t.then)=="function",tu=(t,r)=>"v"in t&&"v"in r&&Object.is(t.v,r.v),z_=(t,r)=>"e"in t&&"e"in r&&Object.is(t.e,r.e),$o=t=>"v"in t&&t.v instanceof Promise,QB=(t,r)=>"v"in t&&"v"in r&&t.v.orig&&t.v.orig===r.v.orig,ru=t=>{if("e"in t)throw t.e;return t.v},ZB=()=>{const t=new WeakMap,r=new WeakMap,a=new Map;let o,u;const d=A=>t.get(A),h=(A,E)=>{const T=t.get(A);if(t.set(A,E),a.has(A)||a.set(A,T),T&&$o(T)){const P="v"in E?E.v instanceof Promise?E.v:Promise.resolve(E.v):Promise.reject(E.e);k_(T.v,P)}},l=(A,E,T)=>{const P=new Map;let z=!1;T.forEach((R,D)=>{!R&&D===A&&(R=E),R&&(P.set(D,R),E.d.get(D)!==R&&(z=!0))}),(z||E.d.size!==P.size)&&(E.d=P)},g=(A,E,T)=>{const P=d(A),z={d:(P==null?void 0:P.d)||new Map,v:E};if(T&&l(A,z,T),P&&tu(P,z)&&P.d===z.d)return P;if(P&&$o(P)&&$o(z)&&QB(P,z)){if(P.d===z.d)return P;z.v=P.v}return h(A,z),z},y=(A,E,T,P)=>{if(XB(E)){let z;const R=new Promise((D,B)=>{let F=!1;E.then(M=>{if(!F){F=!0;const I=d(A),L=g(A,R,T);D_(R,M),D(M),r.has(A)&&(I==null?void 0:I.d)!==L.d&&x(A,L,I==null?void 0:I.d)}},M=>{if(!F){F=!0;const I=d(A),L=g(A,R,T);L_(R,M),B(M),r.has(A)&&(I==null?void 0:I.d)!==L.d&&x(A,L,I==null?void 0:I.d)}}),z=M=>{F||(F=!0,M.then(I=>D_(R,I),I=>L_(R,I)),D(M))}});return R.orig=E,R.status="pending",KB(R,D=>{D&&z(D),P==null||P()}),g(A,R,T)}return g(A,E,T)},v=(A,E,T)=>{const P=d(A),z={d:(P==null?void 0:P.d)||new Map,e:E};return T&&l(A,z,T),P&&z_(P,z)&&P.d===z.d?P:(h(A,z),z)},b=(A,E)=>{const T=d(A);if(!E&&T&&(r.has(A)||Array.from(T.d).every(([M,I])=>M===A||b(M)===I)))return T;const P=new Map;let z=!0;const R=M=>{if(M===A){const L=d(M);if(L)return P.set(M,L),ru(L);if(I_(M))return P.set(M,void 0),M.init;throw new Error("no atom init")}const I=b(M);return P.set(M,I),ru(I)};let D,B;const F={get signal(){return D||(D=new AbortController),D.signal},get setSelf(){return!B&&B_(A)&&(B=(...M)=>{if(!z)return p(A,...M)}),B}};try{const M=A.read(R,F);return y(A,M,P,()=>D==null?void 0:D.abort())}catch(M){return v(A,M,P)}finally{z=!1}},e=A=>ru(b(A)),n=A=>{let E=r.get(A);return E||(E=_(A)),E},s=(A,E)=>!E.l.size&&(!E.t.size||E.t.size===1&&E.t.has(A)),c=A=>{const E=r.get(A);E&&s(A,E)&&S(A)},f=A=>{const E=new Map,T=new WeakMap,P=D=>{var B;const F=new Set((B=r.get(D))==null?void 0:B.t);return a.forEach((M,I)=>{var L;(L=d(I))!=null&&L.d.has(D)&&F.add(I)}),F},z=D=>{P(D).forEach(B=>{B!==D&&(E.set(B,(E.get(B)||new Set).add(D)),T.set(B,(T.get(B)||0)+1),z(B))})};z(A);const R=D=>{P(D).forEach(B=>{var F;if(B!==D){let M=T.get(B);if(M&&T.set(B,--M),!M){let I=!!((F=E.get(B))!=null&&F.size);if(I){const L=d(B),O=b(B,!0);I=!L||!tu(L,O)}I||E.forEach(L=>L.delete(B))}R(B)}})};R(A)},m=(A,...E)=>{let T=!0;const P=D=>ru(b(D)),z=(D,...B)=>{let F;if(D===A){if(!I_(D))throw new Error("atom not writable");const M=d(D),I=y(D,B[0]);(!M||!tu(M,I))&&f(D)}else F=m(D,...B);if(!T){const M=w()}return F},R=A.write(P,z,...E);return T=!1,R},p=(A,...E)=>{const T=m(A,...E),P=w();return T},_=(A,E,T)=>{var P;const z=T||[];(P=d(A))==null||P.d.forEach((D,B)=>{const F=r.get(B);F?F.t.add(A):B!==A&&_(B,A,z)}),b(A);const R={t:new Set(E&&[E]),l:new Set};if(r.set(A,R),B_(A)&&A.onMount){const{onMount:D}=A;z.push(()=>{const B=D((...F)=>p(A,...F));B&&(R.u=B)})}return T||z.forEach(D=>D()),R},S=A=>{var E;const T=(E=r.get(A))==null?void 0:E.u;T&&T(),r.delete(A);const P=d(A);P&&($o(P)&&k_(P.v),P.d.forEach((z,R)=>{if(R!==A){const D=r.get(R);D&&(D.t.delete(A),s(R,D)&&S(R))}}))},x=(A,E,T)=>{const P=new Set(E.d.keys());T==null||T.forEach((z,R)=>{if(P.has(R)){P.delete(R);return}const D=r.get(R);D&&(D.t.delete(A),s(R,D)&&S(R))}),P.forEach(z=>{const R=r.get(z);R?R.t.add(A):r.has(A)&&_(z,A)})},w=()=>{let A;for(;a.size;){const E=Array.from(a);a.clear(),E.forEach(([T,P])=>{const z=d(T);if(z){const R=r.get(T);R&&z.d!==(P==null?void 0:P.d)&&x(T,z,P==null?void 0:P.d),R&&!(P&&!$o(P)&&(tu(P,z)||z_(P,z)))&&R.l.forEach(D=>D())}})}};return{get:e,set:p,sub:(A,E)=>{const T=n(A),P=w(),z=T.l;return z.add(E),()=>{z.delete(E),c(A)}}}};let _f;const JB=()=>(_f||(_f=ZB()),_f),ek=C.createContext(void 0),vw=t=>{const r=C.useContext(ek);return(t==null?void 0:t.store)||r||JB()},tk=t=>typeof(t==null?void 0:t.then)=="function",rk=ue.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(r=>{t.status="fulfilled",t.value=r},r=>{t.status="rejected",t.reason=r}),t)});function ik(t,r){const a=vw(r),[[o,u,d],h]=C.useReducer(y=>{const v=a.get(t);return Object.is(y[0],v)&&y[1]===a&&y[2]===t?y:[v,a,t]},void 0,()=>[a.get(t),a,t]);let l=o;(u!==a||d!==t)&&(h(),l=a.get(t));const g=r==null?void 0:r.delay;return C.useEffect(()=>{const y=a.sub(t,()=>{if(typeof g=="number"){setTimeout(h,g);return}h()});return h(),y},[a,t,g]),C.useDebugValue(l),tk(l)?rk(l):l}function nk(t,r){const a=vw(r);return C.useCallback((...u)=>a.set(t,...u),[a,t])}function ad(t,r){return[ik(t,r),nk(t,r)]}const _w=gw([]),yw=gw([]);function ak(){const t=C.useRef(null),r=C.useRef(null),[a,o]=C.useState(!1),[u,d]=C.useState(0),[h,l]=C.useState([0,0]),g=String(u),[y,v]=ad(_w);return C.useEffect(()=>{t.current!=null&&Ai.init(t.current)},[]),C.useEffect(()=>{const b=setInterval(()=>{const e=Math.round(Ai.getDuration()/1e6);d(e),a&&l([0,e])},1e3);return()=>{clearInterval(b)}},[a]),j.jsxs(j.Fragment,{children:[j.jsx("div",{className:"cvs-container relative",ref:t}),j.jsxs("div",{className:"time-range-wrap flex",children:[j.jsx("div",{className:"flex-1",children:j.jsx(MI,{range:!0,min:0,max:u,step:.01,value:h,disabled:a||u===0,onChange:b=>l(b)})}),j.jsx("span",{id:"time-value-str",className:"ml-4 text-right",children:g})]}),j.jsxs("div",{className:"flex",children:[j.jsxs("div",{children:[j.jsx("button",{onClick:async()=>{var b,e;r.current==null?r.current=await Ai.start():a?(b=r.current)==null||b.pause():(e=r.current)==null||e.play(),o(!a)},children:a?"暂停":"录制"})," ","|"," ",j.jsx("button",{disabled:a,onClick:()=>{Ai.delete(h[0]*1e6,h[1]*1e6)},children:"删除片段"})]}),j.jsxs("div",{className:"ml-auto",children:[j.jsx("button",{className:"hidden",disabled:u===0,children:"截图"}),j.jsx("button",{className:"hidden",disabled:u===0,children:"生成动图"}),j.jsx("button",{disabled:u===0,onClick:async()=>{const[b,e]=h,n=await Ai.exportVideo(b*1e6,e*1e6);v(y.concat({type:"video",url:n.url,duration:Math.floor(n.duration/1e6),createTime:xC(Date.now(),"MM-dd HH:mm:ss")}))},children:"生成视频"})]})]})]})}function ok(){const[t,r]=ad(yw);return j.jsxs("div",{className:"add-sprite",children:[j.jsx("div",{className:"font-bold",children:"添加素材"}),j.jsxs("div",{className:"flex",children:[j.jsx("button",{className:"border border-solid border-black mr-4 px-2",onClick:async()=>{const a=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0}),o=t.filter(y=>y.name.includes("屏幕")).length,u=Ai.getAVCanvas(),d=new C_(`屏幕${o||""}`,a,{audioCtx:u.spriteManager.audioCtx});await u.spriteManager.addSprite(d);const{w:h,h:l}=d.rect,g=h/l;g>1280/720?(d.rect.x=0,d.rect.w=1280,d.rect.h=d.rect.w/g,d.rect.y=(720-d.rect.h)/2):(d.rect.y=0,d.rect.h=720,d.rect.w=d.rect.h*g,d.rect.x=(1280-d.rect.w)/2),r(t.concat(d))},children:"捕获屏幕"}),j.jsx("button",{className:"border border-solid border-black px-2",onClick:async()=>{const a=await navigator.mediaDevices.getUserMedia({video:{width:900,height:600},audio:!0}),o=t.filter(l=>l.name.includes("演讲者")).length,u=Ai.getAVCanvas(),d=new C_(`演讲者${o||""}`,a,{audioCtx:u.spriteManager.audioCtx});await u.spriteManager.addSprite(d);const h=1280*.015;d.rect.w=450,d.rect.h=300,d.rect.x=1280-d.rect.w-h,d.rect.y=720-d.rect.h-h,r(t.concat(d))},children:"演讲者"})]})]})}function sk(){const[t,r]=ad(_w),[a,o]=C.useState(null),u=(d,h=!1)=>d.type==="video"?j.jsx("video",{src:d.url,controls:h}):j.jsx("div",{});return C.useEffect(()=>{const d=({key:h})=>{h==="Escape"&&a!=null&&o(null)};return document.addEventListener("keydown",d),()=>{document.removeEventListener("keydown",d)}},[a]),j.jsxs(j.Fragment,{children:[t.map((d,h)=>j.jsxs("div",{children:[j.jsx(lk,{onDelete:()=>{const l=[...t];l.splice(h,1),r(l)},onDownload:()=>{uk(d.url,d.createTime)},onPreview:()=>{o(d)},children:u(d)}),j.jsxs("div",{className:"text-center",children:[d.type," ",d.duration,"s"]}),j.jsx("div",{className:"text-center",children:d.createTime})]},d.url)),a&&j.jsx("div",{onClick:()=>o(null),className:"fixed z-50 top-0 left-0 w-full h-full bg-[#0009]",children:j.jsx("div",{onClick:d=>d.stopPropagation(),className:"absolute w-[900px] h-[500px] top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:u(a,!0)})})]})}const lk=function({children:r,onDelete:a,onPreview:o,onDownload:u}){const d="m-auto border rounded-full inline-block h-[40px] w-[40px]";return j.jsxs("div",{className:"relative text-white group text-xs",children:[j.jsxs("div",{className:"absolute w-full h-full bg-[#00000066] hidden group-hover:flex items-center content-center z-10 px-8",children:[j.jsx("button",{onClick:o,className:d,children:"预览"}),j.jsx("button",{onClick:u,className:d,children:"下载"}),j.jsx("button",{onClick:a,className:d,children:"删除"})]}),r]})};function uk(t,r){const a=document.createElement("a");document.body.appendChild(a),a.setAttribute("href",t),a.setAttribute("download",`bloom-shadow-${r}.mp4`),a.setAttribute("target","_self"),a.click(),a.remove()}function cp(t,r){return cp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,u){return o.__proto__=u,o},cp(t,r)}function bw(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,cp(t,r)}function re(){return re=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])}return t},re.apply(this,arguments)}function Hs(t){"@babel/helpers - typeof";return Hs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Hs(t)}function ck(t,r){if(Hs(t)!=="object"||t===null)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var o=a.call(t,r||"default");if(Hs(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function dk(t){var r=ck(t,"string");return Hs(r)==="symbol"?r:String(r)}function fk(t,r,a){return r=dk(r),r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function R_(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);r&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),a.push.apply(a,o)}return a}function F_(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?R_(Object(a),!0).forEach(function(o){fk(t,o,a[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):R_(Object(a)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(a,o))})}return t}function Kt(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var M_=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),yf=function(){return Math.random().toString(36).substring(7).split("").join(".")},O_={INIT:"@@redux/INIT"+yf(),REPLACE:"@@redux/REPLACE"+yf(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+yf()}};function hk(t){if(typeof t!="object"||t===null)return!1;for(var r=t;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(t)===r}function Sw(t,r,a){var o;if(typeof r=="function"&&typeof a=="function"||typeof a=="function"&&typeof arguments[3]=="function")throw new Error(Kt(0));if(typeof r=="function"&&typeof a>"u"&&(a=r,r=void 0),typeof a<"u"){if(typeof a!="function")throw new Error(Kt(1));return a(Sw)(t,r)}if(typeof t!="function")throw new Error(Kt(2));var u=t,d=r,h=[],l=h,g=!1;function y(){l===h&&(l=h.slice())}function v(){if(g)throw new Error(Kt(3));return d}function b(c){if(typeof c!="function")throw new Error(Kt(4));if(g)throw new Error(Kt(5));var f=!0;return y(),l.push(c),function(){if(f){if(g)throw new Error(Kt(6));f=!1,y();var p=l.indexOf(c);l.splice(p,1),h=null}}}function e(c){if(!hk(c))throw new Error(Kt(7));if(typeof c.type>"u")throw new Error(Kt(8));if(g)throw new Error(Kt(9));try{g=!0,d=u(d,c)}finally{g=!1}for(var f=h=l,m=0;m<f.length;m++){var p=f[m];p()}return c}function n(c){if(typeof c!="function")throw new Error(Kt(10));u=c,e({type:O_.REPLACE})}function s(){var c,f=b;return c={subscribe:function(p){if(typeof p!="object"||p===null)throw new Error(Kt(11));function _(){p.next&&p.next(v())}_();var S=f(_);return{unsubscribe:S}}},c[M_]=function(){return this},c}return e({type:O_.INIT}),o={dispatch:e,subscribe:b,getState:v,replaceReducer:n},o[M_]=s,o}function N_(t,r){return function(){return r(t.apply(this,arguments))}}function H_(t,r){if(typeof t=="function")return N_(t,r);if(typeof t!="object"||t===null)throw new Error(Kt(16));var a={};for(var o in t){var u=t[o];typeof u=="function"&&(a[o]=N_(u,r))}return a}function ww(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return r.length===0?function(o){return o}:r.length===1?r[0]:r.reduce(function(o,u){return function(){return o(u.apply(void 0,arguments))}})}function pk(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return function(o){return function(){var u=o.apply(void 0,arguments),d=function(){throw new Error(Kt(15))},h={getState:u.getState,dispatch:function(){return d.apply(void 0,arguments)}},l=r.map(function(g){return g(h)});return d=ww.apply(void 0,l)(u.dispatch),F_(F_({},u),{},{dispatch:d})}}}var xw=ue.createContext(null);function mk(t){t()}var Ew=mk,gk=function(r){return Ew=r},vk=function(){return Ew};function _k(){var t=vk(),r=null,a=null;return{clear:function(){r=null,a=null},notify:function(){t(function(){for(var u=r;u;)u.callback(),u=u.next})},get:function(){for(var u=[],d=r;d;)u.push(d),d=d.next;return u},subscribe:function(u){var d=!0,h=a={callback:u,next:null,prev:a};return h.prev?h.prev.next=h:r=h,function(){!d||r===null||(d=!1,h.next?h.next.prev=h.prev:a=h.prev,h.prev?h.prev.next=h.next:r=h.next)}}}}var G_={notify:function(){},get:function(){return[]}};function Uw(t,r){var a,o=G_;function u(b){return g(),o.subscribe(b)}function d(){o.notify()}function h(){v.onStateChange&&v.onStateChange()}function l(){return!!a}function g(){a||(a=r?r.addNestedSub(h):t.subscribe(h),o=_k())}function y(){a&&(a(),a=void 0,o.clear(),o=G_)}var v={addNestedSub:u,notifyNestedSubs:d,handleChangeWrapper:h,isSubscribed:l,trySubscribe:g,tryUnsubscribe:y,getListeners:function(){return o}};return v}var Cw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?C.useLayoutEffect:C.useEffect;function yk(t){var r=t.store,a=t.context,o=t.children,u=C.useMemo(function(){var l=Uw(r);return{store:r,subscription:l}},[r]),d=C.useMemo(function(){return r.getState()},[r]);Cw(function(){var l=u.subscription;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),d!==r.getState()&&l.notifyNestedSubs(),function(){l.tryUnsubscribe(),l.onStateChange=null}},[u,d]);var h=a||xw;return ue.createElement(h.Provider,{value:u},o)}function ln(){return ln=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])}return t},ln.apply(this,arguments)}function dc(t,r){if(t==null)return{};var a={},o=Object.keys(t),u,d;for(d=0;d<o.length;d++)u=o[d],!(r.indexOf(u)>=0)&&(a[u]=t[u]);return a}var Rm=vm,bk={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Sk={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},wk={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Aw={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Fm={};Fm[Rm.ForwardRef]=wk;Fm[Rm.Memo]=Aw;function $_(t){return Rm.isMemo(t)?Aw:Fm[t.$$typeof]||bk}var xk=Object.defineProperty,Ek=Object.getOwnPropertyNames,j_=Object.getOwnPropertySymbols,Uk=Object.getOwnPropertyDescriptor,Ck=Object.getPrototypeOf,V_=Object.prototype;function Tw(t,r,a){if(typeof r!="string"){if(V_){var o=Ck(r);o&&o!==V_&&Tw(t,o,a)}var u=Ek(r);j_&&(u=u.concat(j_(r)));for(var d=$_(t),h=$_(r),l=0;l<u.length;++l){var g=u[l];if(!Sk[g]&&!(a&&a[g])&&!(h&&h[g])&&!(d&&d[g])){var y=Uk(r,g);try{xk(t,g,y)}catch{}}}}return t}var Ak=Tw;const W_=Ys(Ak);var Pw={exports:{}},Le={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var od=60103,sd=60106,nl=60107,al=60108,ol=60114,sl=60109,ll=60110,ul=60112,cl=60113,Mm=60120,dl=60115,fl=60116,Iw=60121,Bw=60122,kw=60117,Dw=60129,Lw=60131;if(typeof Symbol=="function"&&Symbol.for){var xt=Symbol.for;od=xt("react.element"),sd=xt("react.portal"),nl=xt("react.fragment"),al=xt("react.strict_mode"),ol=xt("react.profiler"),sl=xt("react.provider"),ll=xt("react.context"),ul=xt("react.forward_ref"),cl=xt("react.suspense"),Mm=xt("react.suspense_list"),dl=xt("react.memo"),fl=xt("react.lazy"),Iw=xt("react.block"),Bw=xt("react.server.block"),kw=xt("react.fundamental"),Dw=xt("react.debug_trace_mode"),Lw=xt("react.legacy_hidden")}function Wr(t){if(typeof t=="object"&&t!==null){var r=t.$$typeof;switch(r){case od:switch(t=t.type,t){case nl:case ol:case al:case cl:case Mm:return t;default:switch(t=t&&t.$$typeof,t){case ll:case ul:case fl:case dl:case sl:return t;default:return r}}case sd:return r}}}var Tk=sl,Pk=od,Ik=ul,Bk=nl,kk=fl,Dk=dl,Lk=sd,zk=ol,Rk=al,Fk=cl;Le.ContextConsumer=ll;Le.ContextProvider=Tk;Le.Element=Pk;Le.ForwardRef=Ik;Le.Fragment=Bk;Le.Lazy=kk;Le.Memo=Dk;Le.Portal=Lk;Le.Profiler=zk;Le.StrictMode=Rk;Le.Suspense=Fk;Le.isAsyncMode=function(){return!1};Le.isConcurrentMode=function(){return!1};Le.isContextConsumer=function(t){return Wr(t)===ll};Le.isContextProvider=function(t){return Wr(t)===sl};Le.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===od};Le.isForwardRef=function(t){return Wr(t)===ul};Le.isFragment=function(t){return Wr(t)===nl};Le.isLazy=function(t){return Wr(t)===fl};Le.isMemo=function(t){return Wr(t)===dl};Le.isPortal=function(t){return Wr(t)===sd};Le.isProfiler=function(t){return Wr(t)===ol};Le.isStrictMode=function(t){return Wr(t)===al};Le.isSuspense=function(t){return Wr(t)===cl};Le.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===nl||t===ol||t===Dw||t===al||t===cl||t===Mm||t===Lw||typeof t=="object"&&t!==null&&(t.$$typeof===fl||t.$$typeof===dl||t.$$typeof===sl||t.$$typeof===ll||t.$$typeof===ul||t.$$typeof===kw||t.$$typeof===Iw||t[0]===Bw)};Le.typeOf=Wr;Pw.exports=Le;var Mk=Pw.exports,Ok=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],Nk=["reactReduxForwardedRef"],Hk=[],Gk=[null,null];function $k(t,r){var a=t[1];return[r.payload,a+1]}function Y_(t,r,a){Cw(function(){return t.apply(void 0,r)},a)}function jk(t,r,a,o,u,d,h){t.current=o,r.current=u,a.current=!1,d.current&&(d.current=null,h())}function Vk(t,r,a,o,u,d,h,l,g,y){if(t){var v=!1,b=null,e=function(){if(!v){var c=r.getState(),f,m;try{f=o(c,u.current)}catch(p){m=p,b=p}m||(b=null),f===d.current?h.current||g():(d.current=f,l.current=f,h.current=!0,y({type:"STORE_UPDATED",payload:{error:m}}))}};a.onStateChange=e,a.trySubscribe(),e();var n=function(){if(v=!0,a.tryUnsubscribe(),a.onStateChange=null,b)throw b};return n}}var Wk=function(){return[null,0]};function Yk(t,r){r===void 0&&(r={});var a=r,o=a.getDisplayName,u=o===void 0?function(_){return"ConnectAdvanced("+_+")"}:o,d=a.methodName,h=d===void 0?"connectAdvanced":d,l=a.renderCountProp,g=l===void 0?void 0:l,y=a.shouldHandleStateChanges,v=y===void 0?!0:y,b=a.storeKey,e=b===void 0?"store":b;a.withRef;var n=a.forwardRef,s=n===void 0?!1:n,c=a.context,f=c===void 0?xw:c,m=dc(a,Ok),p=f;return function(S){var x=S.displayName||S.name||"Component",w=u(x),U=ln({},m,{getDisplayName:u,methodName:h,renderCountProp:g,shouldHandleStateChanges:v,storeKey:e,displayName:w,wrappedComponentName:x,WrappedComponent:S}),A=m.pure;function E(D){return t(D.dispatch,U)}var T=A?C.useMemo:function(D){return D()};function P(D){var B=C.useMemo(function(){var Q=D.reactReduxForwardedRef,te=dc(D,Nk);return[D.context,Q,te]},[D]),F=B[0],M=B[1],I=B[2],L=C.useMemo(function(){return F&&F.Consumer&&Mk.isContextConsumer(ue.createElement(F.Consumer,null))?F:p},[F,p]),O=C.useContext(L),k=!!D.store&&!!D.store.getState&&!!D.store.dispatch;O&&O.store;var $=k?D.store:O.store,J=C.useMemo(function(){return E($)},[$]),ae=C.useMemo(function(){if(!v)return Gk;var Q=Uw($,k?null:O.subscription),te=Q.notifyNestedSubs.bind(Q);return[Q,te]},[$,k,O]),ce=ae[0],X=ae[1],ee=C.useMemo(function(){return k?O:ln({},O,{subscription:ce})},[k,O,ce]),be=C.useReducer($k,Hk,Wk),de=be[0],_e=de[0],Ee=be[1];if(_e&&_e.error)throw _e.error;var Xe=C.useRef(),ge=C.useRef(I),ze=C.useRef(),fe=C.useRef(!1),Be=T(function(){return ze.current&&I===ge.current?ze.current:J($.getState(),I)},[$,_e,I]);Y_(jk,[ge,Xe,fe,I,Be,ze,X]),Y_(Vk,[v,$,ce,J,ge,Xe,fe,ze,X,Ee],[$,ce,J]);var ye=C.useMemo(function(){return ue.createElement(S,ln({},Be,{ref:M}))},[M,S,Be]),ie=C.useMemo(function(){return v?ue.createElement(L.Provider,{value:ee},ye):ye},[L,ye,ee]);return ie}var z=A?ue.memo(P):P;if(z.WrappedComponent=S,z.displayName=P.displayName=w,s){var R=ue.forwardRef(function(B,F){return ue.createElement(z,ln({},B,{reactReduxForwardedRef:F}))});return R.displayName=w,R.WrappedComponent=S,W_(R,S)}return W_(z,S)}}function q_(t,r){return t===r?t!==0||r!==0||1/t===1/r:t!==t&&r!==r}function bf(t,r){if(q_(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),o=Object.keys(r);if(a.length!==o.length)return!1;for(var u=0;u<a.length;u++)if(!Object.prototype.hasOwnProperty.call(r,a[u])||!q_(t[a[u]],r[a[u]]))return!1;return!0}function qk(t,r){var a={},o=function(h){var l=t[h];typeof l=="function"&&(a[h]=function(){return r(l.apply(void 0,arguments))})};for(var u in t)o(u);return a}function Om(t){return function(a,o){var u=t(a,o);function d(){return u}return d.dependsOnOwnProps=!1,d}}function K_(t){return t.dependsOnOwnProps!==null&&t.dependsOnOwnProps!==void 0?!!t.dependsOnOwnProps:t.length!==1}function zw(t,r){return function(o,u){u.displayName;var d=function(l,g){return d.dependsOnOwnProps?d.mapToProps(l,g):d.mapToProps(l)};return d.dependsOnOwnProps=!0,d.mapToProps=function(l,g){d.mapToProps=t,d.dependsOnOwnProps=K_(t);var y=d(l,g);return typeof y=="function"&&(d.mapToProps=y,d.dependsOnOwnProps=K_(y),y=d(l,g)),y},d}}function Kk(t){return typeof t=="function"?zw(t):void 0}function Xk(t){return t?void 0:Om(function(r){return{dispatch:r}})}function Qk(t){return t&&typeof t=="object"?Om(function(r){return qk(t,r)}):void 0}const Zk=[Kk,Xk,Qk];function Jk(t){return typeof t=="function"?zw(t):void 0}function eD(t){return t?void 0:Om(function(){return{}})}const tD=[Jk,eD];function rD(t,r,a){return ln({},a,t,r)}function iD(t){return function(a,o){o.displayName;var u=o.pure,d=o.areMergedPropsEqual,h=!1,l;return function(y,v,b){var e=t(y,v,b);return h?(!u||!d(e,l))&&(l=e):(h=!0,l=e),l}}}function nD(t){return typeof t=="function"?iD(t):void 0}function aD(t){return t?void 0:function(){return rD}}const oD=[nD,aD];var sD=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function lD(t,r,a,o){return function(d,h){return a(t(d,h),r(o,h),h)}}function uD(t,r,a,o,u){var d=u.areStatesEqual,h=u.areOwnPropsEqual,l=u.areStatePropsEqual,g=!1,y,v,b,e,n;function s(_,S){return y=_,v=S,b=t(y,v),e=r(o,v),n=a(b,e,v),g=!0,n}function c(){return b=t(y,v),r.dependsOnOwnProps&&(e=r(o,v)),n=a(b,e,v),n}function f(){return t.dependsOnOwnProps&&(b=t(y,v)),r.dependsOnOwnProps&&(e=r(o,v)),n=a(b,e,v),n}function m(){var _=t(y,v),S=!l(_,b);return b=_,S&&(n=a(b,e,v)),n}function p(_,S){var x=!h(S,v),w=!d(_,y,S,v);return y=_,v=S,x&&w?c():x?f():w?m():n}return function(S,x){return g?p(S,x):s(S,x)}}function cD(t,r){var a=r.initMapStateToProps,o=r.initMapDispatchToProps,u=r.initMergeProps,d=dc(r,sD),h=a(t,d),l=o(t,d),g=u(t,d),y=d.pure?uD:lD;return y(h,l,g,t,d)}var dD=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function Sf(t,r,a){for(var o=r.length-1;o>=0;o--){var u=r[o](t);if(u)return u}return function(d,h){throw new Error("Invalid value of type "+typeof t+" for "+a+" argument when connecting component "+h.wrappedComponentName+".")}}function fD(t,r){return t===r}function hD(t){var r=t===void 0?{}:t,a=r.connectHOC,o=a===void 0?Yk:a,u=r.mapStateToPropsFactories,d=u===void 0?tD:u,h=r.mapDispatchToPropsFactories,l=h===void 0?Zk:h,g=r.mergePropsFactories,y=g===void 0?oD:g,v=r.selectorFactory,b=v===void 0?cD:v;return function(n,s,c,f){f===void 0&&(f={});var m=f,p=m.pure,_=p===void 0?!0:p,S=m.areStatesEqual,x=S===void 0?fD:S,w=m.areOwnPropsEqual,U=w===void 0?bf:w,A=m.areStatePropsEqual,E=A===void 0?bf:A,T=m.areMergedPropsEqual,P=T===void 0?bf:T,z=dc(m,dD),R=Sf(n,d,"mapStateToProps"),D=Sf(s,l,"mapDispatchToProps"),B=Sf(c,y,"mergeProps");return o(b,ln({methodName:"connect",getDisplayName:function(M){return"Connect("+M+")"},shouldHandleStateChanges:!!n,initMapStateToProps:R,initMapDispatchToProps:D,initMergeProps:B,pure:_,areStatesEqual:x,areOwnPropsEqual:U,areStatePropsEqual:E,areMergedPropsEqual:P},z))}}const Rw=hD();gk(Js.unstable_batchedUpdates);function pD(t,r){if(t.length!==r.length)return!1;for(var a=0;a<t.length;a++)if(t[a]!==r[a])return!1;return!0}function Fw(t,r){var a=C.useState(function(){return{inputs:r,result:t()}})[0],o=C.useRef(!0),u=C.useRef(a),d=o.current||!!(r&&u.current.inputs&&pD(r,u.current.inputs)),h=d?u.current:{inputs:r,result:t()};return C.useEffect(function(){o.current=!1,u.current=h},[h]),h.result}function mD(t,r){return Fw(function(){return t},r)}var Se=Fw,K=mD,gD=!0,wf="Invariant failed";function vD(t,r){if(!t){if(gD)throw new Error(wf);var a=typeof r=="function"?r():r,o=a?"".concat(wf,": ").concat(a):wf;throw new Error(o)}}var Hr=function(r){var a=r.top,o=r.right,u=r.bottom,d=r.left,h=o-d,l=u-a,g={top:a,right:o,bottom:u,left:d,width:h,height:l,x:d,y:a,center:{x:(o+d)/2,y:(u+a)/2}};return g},Nm=function(r,a){return{top:r.top-a.top,left:r.left-a.left,bottom:r.bottom+a.bottom,right:r.right+a.right}},X_=function(r,a){return{top:r.top+a.top,left:r.left+a.left,bottom:r.bottom-a.bottom,right:r.right-a.right}},_D=function(r,a){return{top:r.top+a.y,left:r.left+a.x,bottom:r.bottom+a.y,right:r.right+a.x}},xf={top:0,right:0,bottom:0,left:0},Hm=function(r){var a=r.borderBox,o=r.margin,u=o===void 0?xf:o,d=r.border,h=d===void 0?xf:d,l=r.padding,g=l===void 0?xf:l,y=Hr(Nm(a,u)),v=Hr(X_(a,h)),b=Hr(X_(v,g));return{marginBox:y,borderBox:Hr(a),paddingBox:v,contentBox:b,margin:u,border:h,padding:g}},br=function(r){var a=r.slice(0,-2),o=r.slice(-2);if(o!=="px")return 0;var u=Number(a);return isNaN(u)&&vD(!1),u},yD=function(){return{x:window.pageXOffset,y:window.pageYOffset}},fc=function(r,a){var o=r.borderBox,u=r.border,d=r.margin,h=r.padding,l=_D(o,a);return Hm({borderBox:l,border:u,margin:d,padding:h})},hc=function(r,a){return a===void 0&&(a=yD()),fc(r,a)},Mw=function(r,a){var o={top:br(a.marginTop),right:br(a.marginRight),bottom:br(a.marginBottom),left:br(a.marginLeft)},u={top:br(a.paddingTop),right:br(a.paddingRight),bottom:br(a.paddingBottom),left:br(a.paddingLeft)},d={top:br(a.borderTopWidth),right:br(a.borderRightWidth),bottom:br(a.borderBottomWidth),left:br(a.borderLeftWidth)};return Hm({borderBox:r,margin:o,padding:u,border:d})},Ow=function(r){var a=r.getBoundingClientRect(),o=window.getComputedStyle(r);return Mw(a,o)},Q_=Number.isNaN||function(r){return typeof r=="number"&&r!==r};function bD(t,r){return!!(t===r||Q_(t)&&Q_(r))}function SD(t,r){if(t.length!==r.length)return!1;for(var a=0;a<t.length;a++)if(!bD(t[a],r[a]))return!1;return!0}function _t(t,r){r===void 0&&(r=SD);var a,o=[],u,d=!1;function h(){for(var l=[],g=0;g<arguments.length;g++)l[g]=arguments[g];return d&&a===this&&r(l,o)||(u=t.apply(this,l),d=!0,a=this,o=l),u}return h}var wD=function(r){var a=[],o=null,u=function(){for(var h=arguments.length,l=new Array(h),g=0;g<h;g++)l[g]=arguments[g];a=l,!o&&(o=requestAnimationFrame(function(){o=null,r.apply(void 0,a)}))};return u.cancel=function(){o&&(cancelAnimationFrame(o),o=null)},u};const Gs=wD;function Nw(t,r){}Nw.bind(null,"warn");Nw.bind(null,"error");function vn(){}function xD(t,r){return re({},t,{},r)}function Ar(t,r,a){var o=r.map(function(u){var d=xD(a,u.options);return t.addEventListener(u.eventName,u.fn,d),function(){t.removeEventListener(u.eventName,u.fn,d)}});return function(){o.forEach(function(d){d()})}}var ED="Invariant failed";function pc(t){this.message=t}pc.prototype.toString=function(){return this.message};function H(t,r){if(!t)throw new pc(ED)}var UD=function(t){bw(r,t);function r(){for(var o,u=arguments.length,d=new Array(u),h=0;h<u;h++)d[h]=arguments[h];return o=t.call.apply(t,[this].concat(d))||this,o.callbacks=null,o.unbind=vn,o.onWindowError=function(l){var g=o.getCallbacks();g.isDragging()&&g.tryAbort();var y=l.error;y instanceof pc&&l.preventDefault()},o.getCallbacks=function(){if(!o.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return o.callbacks},o.setCallbacks=function(l){o.callbacks=l},o}var a=r.prototype;return a.componentDidMount=function(){this.unbind=Ar(window,[{eventName:"error",fn:this.onWindowError}])},a.componentDidCatch=function(u){if(u instanceof pc){this.setState({});return}throw u},a.componentWillUnmount=function(){this.unbind()},a.render=function(){return this.props.children(this.setCallbacks)},r}(ue.Component),CD=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,mc=function(r){return r+1},AD=function(r){return`
  You have lifted an item in position `+mc(r.source.index)+`
`},Hw=function(r,a){var o=r.droppableId===a.droppableId,u=mc(r.index),d=mc(a.index);return o?`
      You have moved the item from position `+u+`
      to position `+d+`
    `:`
    You have moved the item from position `+u+`
    in list `+r.droppableId+`
    to list `+a.droppableId+`
    in position `+d+`
  `},Gw=function(r,a,o){var u=a.droppableId===o.droppableId;return u?`
      The item `+r+`
      has been combined with `+o.draggableId:`
      The item `+r+`
      in list `+a.droppableId+`
      has been combined with `+o.draggableId+`
      in list `+o.droppableId+`
    `},TD=function(r){var a=r.destination;if(a)return Hw(r.source,a);var o=r.combine;return o?Gw(r.draggableId,r.source,o):"You are over an area that cannot be dropped on"},Z_=function(r){return`
  The item has returned to its starting position
  of `+mc(r.index)+`
`},PD=function(r){if(r.reason==="CANCEL")return`
      Movement cancelled.
      `+Z_(r.source)+`
    `;var a=r.destination,o=r.combine;return a?`
      You have dropped the item.
      `+Hw(r.source,a)+`
    `:o?`
      You have dropped the item.
      `+Gw(r.draggableId,r.source,o)+`
    `:`
    The item has been dropped while not over a drop area.
    `+Z_(r.source)+`
  `},Au={dragHandleUsageInstructions:CD,onDragStart:AD,onDragUpdate:TD,onDragEnd:PD},yt={x:0,y:0},Ut=function(r,a){return{x:r.x+a.x,y:r.y+a.y}},ur=function(r,a){return{x:r.x-a.x,y:r.y-a.y}},_n=function(r,a){return r.x===a.x&&r.y===a.y},Ao=function(r){return{x:r.x!==0?-r.x:0,y:r.y!==0?-r.y:0}},da=function(r,a,o){var u;return o===void 0&&(o=0),u={},u[r]=a,u[r==="x"?"y":"x"]=o,u},$s=function(r,a){return Math.sqrt(Math.pow(a.x-r.x,2)+Math.pow(a.y-r.y,2))},J_=function(r,a){return Math.min.apply(Math,a.map(function(o){return $s(r,o)}))},$w=function(r){return function(a){return{x:r(a.x),y:r(a.y)}}},ID=function(t,r){var a=Hr({top:Math.max(r.top,t.top),right:Math.min(r.right,t.right),bottom:Math.min(r.bottom,t.bottom),left:Math.max(r.left,t.left)});return a.width<=0||a.height<=0?null:a},hl=function(r,a){return{top:r.top+a.y,left:r.left+a.x,bottom:r.bottom+a.y,right:r.right+a.x}},ey=function(r){return[{x:r.left,y:r.top},{x:r.right,y:r.top},{x:r.left,y:r.bottom},{x:r.right,y:r.bottom}]},BD={top:0,right:0,bottom:0,left:0},kD=function(r,a){return a?hl(r,a.scroll.diff.displacement):r},DD=function(r,a,o){if(o&&o.increasedBy){var u;return re({},r,(u={},u[a.end]=r[a.end]+o.increasedBy[a.line],u))}return r},LD=function(r,a){return a&&a.shouldClipSubject?ID(a.pageMarginBox,r):Hr(r)},bo=function(t){var r=t.page,a=t.withPlaceholder,o=t.axis,u=t.frame,d=kD(r.marginBox,u),h=DD(d,o,a),l=LD(h,u);return{page:r,withPlaceholder:a,active:l}},Gm=function(t,r){t.frame||H(!1);var a=t.frame,o=ur(r,a.scroll.initial),u=Ao(o),d=re({},a,{scroll:{initial:a.scroll.initial,current:r,diff:{value:o,displacement:u},max:a.scroll.max}}),h=bo({page:t.subject.page,withPlaceholder:t.subject.withPlaceholder,axis:t.axis,frame:d}),l=re({},t,{frame:d,subject:h});return l};function gc(t){return Object.values?Object.values(t):Object.keys(t).map(function(r){return t[r]})}function $m(t,r){if(t.findIndex)return t.findIndex(r);for(var a=0;a<t.length;a++)if(r(t[a]))return a;return-1}function An(t,r){if(t.find)return t.find(r);var a=$m(t,r);if(a!==-1)return t[a]}function jw(t){return Array.prototype.slice.call(t)}var Vw=_t(function(t){return t.reduce(function(r,a){return r[a.descriptor.id]=a,r},{})}),Ww=_t(function(t){return t.reduce(function(r,a){return r[a.descriptor.id]=a,r},{})}),ld=_t(function(t){return gc(t)}),zD=_t(function(t){return gc(t)}),To=_t(function(t,r){var a=zD(r).filter(function(o){return t===o.descriptor.droppableId}).sort(function(o,u){return o.descriptor.index-u.descriptor.index});return a});function jm(t){return t.at&&t.at.type==="REORDER"?t.at.destination:null}function ud(t){return t.at&&t.at.type==="COMBINE"?t.at.combine:null}var cd=_t(function(t,r){return r.filter(function(a){return a.descriptor.id!==t.descriptor.id})}),RD=function(t){var r=t.isMovingForward,a=t.draggable,o=t.destination,u=t.insideDestination,d=t.previousImpact;if(!o.isCombineEnabled)return null;var h=jm(d);if(!h)return null;function l(c){var f={type:"COMBINE",combine:{draggableId:c,droppableId:o.descriptor.id}};return re({},d,{at:f})}var g=d.displaced.all,y=g.length?g[0]:null;if(r)return y?l(y):null;var v=cd(a,u);if(!y){if(!v.length)return null;var b=v[v.length-1];return l(b.descriptor.id)}var e=$m(v,function(c){return c.descriptor.id===y});e===-1&&H(!1);var n=e-1;if(n<0)return null;var s=v[n];return l(s.descriptor.id)},Po=function(t,r){return t.descriptor.droppableId===r.descriptor.id},Yw={point:yt,value:0},js={invisible:{},visible:{},all:[]},FD={displaced:js,displacedBy:Yw,at:null},Pr=function(t,r){return function(a){return t<=a&&a<=r}},qw=function(t){var r=Pr(t.top,t.bottom),a=Pr(t.left,t.right);return function(o){var u=r(o.top)&&r(o.bottom)&&a(o.left)&&a(o.right);if(u)return!0;var d=r(o.top)||r(o.bottom),h=a(o.left)||a(o.right),l=d&&h;if(l)return!0;var g=o.top<t.top&&o.bottom>t.bottom,y=o.left<t.left&&o.right>t.right,v=g&&y;if(v)return!0;var b=g&&h||y&&d;return b}},MD=function(t){var r=Pr(t.top,t.bottom),a=Pr(t.left,t.right);return function(o){var u=r(o.top)&&r(o.bottom)&&a(o.left)&&a(o.right);return u}},Vm={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},Kw={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},OD=function(t){return function(r){var a=Pr(r.top,r.bottom),o=Pr(r.left,r.right);return function(u){return t===Vm?a(u.top)&&a(u.bottom):o(u.left)&&o(u.right)}}},ND=function(r,a){var o=a.frame?a.frame.scroll.diff.displacement:yt;return hl(r,o)},HD=function(r,a,o){return a.subject.active?o(a.subject.active)(r):!1},GD=function(r,a,o){return o(a)(r)},Wm=function(r){var a=r.target,o=r.destination,u=r.viewport,d=r.withDroppableDisplacement,h=r.isVisibleThroughFrameFn,l=d?ND(a,o):a;return HD(l,o,h)&&GD(l,u,h)},$D=function(r){return Wm(re({},r,{isVisibleThroughFrameFn:qw}))},Xw=function(r){return Wm(re({},r,{isVisibleThroughFrameFn:MD}))},jD=function(r){return Wm(re({},r,{isVisibleThroughFrameFn:OD(r.destination.axis)}))},VD=function(r,a,o){if(typeof o=="boolean")return o;if(!a)return!0;var u=a.invisible,d=a.visible;if(u[r])return!1;var h=d[r];return h?h.shouldAnimate:!0};function WD(t,r){var a=t.page.marginBox,o={top:r.point.y,right:0,bottom:0,left:r.point.x};return Hr(Nm(a,o))}function Vs(t){var r=t.afterDragging,a=t.destination,o=t.displacedBy,u=t.viewport,d=t.forceShouldAnimate,h=t.last;return r.reduce(function(g,y){var v=WD(y,o),b=y.descriptor.id;g.all.push(b);var e=$D({target:v,destination:a,viewport:u,withDroppableDisplacement:!0});if(!e)return g.invisible[y.descriptor.id]=!0,g;var n=VD(b,h,d),s={draggableId:b,shouldAnimate:n};return g.visible[b]=s,g},{all:[],visible:{},invisible:{}})}function YD(t,r){if(!t.length)return 0;var a=t[t.length-1].descriptor.index;return r.inHomeList?a:a+1}function ty(t){var r=t.insideDestination,a=t.inHomeList,o=t.displacedBy,u=t.destination,d=YD(r,{inHomeList:a});return{displaced:js,displacedBy:o,at:{type:"REORDER",destination:{droppableId:u.descriptor.id,index:d}}}}function vc(t){var r=t.draggable,a=t.insideDestination,o=t.destination,u=t.viewport,d=t.displacedBy,h=t.last,l=t.index,g=t.forceShouldAnimate,y=Po(r,o);if(l==null)return ty({insideDestination:a,inHomeList:y,displacedBy:d,destination:o});var v=An(a,function(c){return c.descriptor.index===l});if(!v)return ty({insideDestination:a,inHomeList:y,displacedBy:d,destination:o});var b=cd(r,a),e=a.indexOf(v),n=b.slice(e),s=Vs({afterDragging:n,destination:o,displacedBy:d,last:h,viewport:u.frame,forceShouldAnimate:g});return{displaced:s,displacedBy:d,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:l}}}}function xn(t,r){return!!r.effected[t]}var qD=function(t){var r=t.isMovingForward,a=t.destination,o=t.draggables,u=t.combine,d=t.afterCritical;if(!a.isCombineEnabled)return null;var h=u.draggableId,l=o[h],g=l.descriptor.index,y=xn(h,d);return y?r?g:g-1:r?g+1:g},KD=function(t){var r=t.isMovingForward,a=t.isInHomeList,o=t.insideDestination,u=t.location;if(!o.length)return null;var d=u.index,h=r?d+1:d-1,l=o[0].descriptor.index,g=o[o.length-1].descriptor.index,y=a?g:g+1;return h<l||h>y?null:h},XD=function(t){var r=t.isMovingForward,a=t.isInHomeList,o=t.draggable,u=t.draggables,d=t.destination,h=t.insideDestination,l=t.previousImpact,g=t.viewport,y=t.afterCritical,v=l.at;if(v||H(!1),v.type==="REORDER"){var b=KD({isMovingForward:r,isInHomeList:a,location:v.destination,insideDestination:h});return b==null?null:vc({draggable:o,insideDestination:h,destination:d,viewport:g,last:l.displaced,displacedBy:l.displacedBy,index:b})}var e=qD({isMovingForward:r,destination:d,displaced:l.displaced,draggables:u,combine:v.combine,afterCritical:y});return e==null?null:vc({draggable:o,insideDestination:h,destination:d,viewport:g,last:l.displaced,displacedBy:l.displacedBy,index:e})},QD=function(t){var r=t.displaced,a=t.afterCritical,o=t.combineWith,u=t.displacedBy,d=!!(r.visible[o]||r.invisible[o]);return xn(o,a)?d?yt:Ao(u.point):d?u.point:yt},ZD=function(t){var r=t.afterCritical,a=t.impact,o=t.draggables,u=ud(a);u||H(!1);var d=u.draggableId,h=o[d].page.borderBox.center,l=QD({displaced:a.displaced,afterCritical:r,combineWith:d,displacedBy:a.displacedBy});return Ut(h,l)},Qw=function(r,a){return a.margin[r.start]+a.borderBox[r.size]/2},JD=function(r,a){return a.margin[r.end]+a.borderBox[r.size]/2},Ym=function(r,a,o){return a[r.crossAxisStart]+o.margin[r.crossAxisStart]+o.borderBox[r.crossAxisSize]/2},ry=function(r){var a=r.axis,o=r.moveRelativeTo,u=r.isMoving;return da(a.line,o.marginBox[a.end]+Qw(a,u),Ym(a,o.marginBox,u))},iy=function(r){var a=r.axis,o=r.moveRelativeTo,u=r.isMoving;return da(a.line,o.marginBox[a.start]-JD(a,u),Ym(a,o.marginBox,u))},e3=function(r){var a=r.axis,o=r.moveInto,u=r.isMoving;return da(a.line,o.contentBox[a.start]+Qw(a,u),Ym(a,o.contentBox,u))},t3=function(t){var r=t.impact,a=t.draggable,o=t.draggables,u=t.droppable,d=t.afterCritical,h=To(u.descriptor.id,o),l=a.page,g=u.axis;if(!h.length)return e3({axis:g,moveInto:u.page,isMoving:l});var y=r.displaced,v=r.displacedBy,b=y.all[0];if(b){var e=o[b];if(xn(b,d))return iy({axis:g,moveRelativeTo:e.page,isMoving:l});var n=fc(e.page,v.point);return iy({axis:g,moveRelativeTo:n,isMoving:l})}var s=h[h.length-1];if(s.descriptor.id===a.descriptor.id)return l.borderBox.center;if(xn(s.descriptor.id,d)){var c=fc(s.page,Ao(d.displacedBy.point));return ry({axis:g,moveRelativeTo:c,isMoving:l})}return ry({axis:g,moveRelativeTo:s.page,isMoving:l})},dp=function(t,r){var a=t.frame;return a?Ut(r,a.scroll.diff.displacement):r},r3=function(r){var a=r.impact,o=r.draggable,u=r.droppable,d=r.draggables,h=r.afterCritical,l=o.page.borderBox.center,g=a.at;return!u||!g?l:g.type==="REORDER"?t3({impact:a,draggable:o,draggables:d,droppable:u,afterCritical:h}):ZD({impact:a,draggables:d,afterCritical:h})},dd=function(t){var r=r3(t),a=t.droppable,o=a?dp(a,r):r;return o},Zw=function(t,r){var a=ur(r,t.scroll.initial),o=Ao(a),u=Hr({top:r.y,bottom:r.y+t.frame.height,left:r.x,right:r.x+t.frame.width}),d={frame:u,scroll:{initial:t.scroll.initial,max:t.scroll.max,current:r,diff:{value:a,displacement:o}}};return d};function ny(t,r){return t.map(function(a){return r[a]})}function i3(t,r){for(var a=0;a<r.length;a++){var o=r[a].visible[t];if(o)return o}return null}var n3=function(t){var r=t.impact,a=t.viewport,o=t.destination,u=t.draggables,d=t.maxScrollChange,h=Zw(a,Ut(a.scroll.current,d)),l=o.frame?Gm(o,Ut(o.frame.scroll.current,d)):o,g=r.displaced,y=Vs({afterDragging:ny(g.all,u),destination:o,displacedBy:r.displacedBy,viewport:h.frame,last:g,forceShouldAnimate:!1}),v=Vs({afterDragging:ny(g.all,u),destination:l,displacedBy:r.displacedBy,viewport:a.frame,last:g,forceShouldAnimate:!1}),b={},e={},n=[g,y,v];g.all.forEach(function(c){var f=i3(c,n);if(f){e[c]=f;return}b[c]=!0});var s=re({},r,{displaced:{all:g.all,invisible:b,visible:e}});return s},a3=function(t,r){return Ut(t.scroll.diff.displacement,r)},qm=function(t){var r=t.pageBorderBoxCenter,a=t.draggable,o=t.viewport,u=a3(o,r),d=ur(u,a.page.borderBox.center);return Ut(a.client.borderBox.center,d)},Jw=function(t){var r=t.draggable,a=t.destination,o=t.newPageBorderBoxCenter,u=t.viewport,d=t.withDroppableDisplacement,h=t.onlyOnMainAxis,l=h===void 0?!1:h,g=ur(o,r.page.borderBox.center),y=hl(r.page.borderBox,g),v={target:y,destination:a,withDroppableDisplacement:d,viewport:u};return l?jD(v):Xw(v)},o3=function(t){var r=t.isMovingForward,a=t.draggable,o=t.destination,u=t.draggables,d=t.previousImpact,h=t.viewport,l=t.previousPageBorderBoxCenter,g=t.previousClientSelection,y=t.afterCritical;if(!o.isEnabled)return null;var v=To(o.descriptor.id,u),b=Po(a,o),e=RD({isMovingForward:r,draggable:a,destination:o,insideDestination:v,previousImpact:d})||XD({isMovingForward:r,isInHomeList:b,draggable:a,draggables:u,destination:o,insideDestination:v,previousImpact:d,viewport:h,afterCritical:y});if(!e)return null;var n=dd({impact:e,draggable:a,droppable:o,draggables:u,afterCritical:y}),s=Jw({draggable:a,destination:o,newPageBorderBoxCenter:n,viewport:h.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(s){var c=qm({pageBorderBoxCenter:n,draggable:a,viewport:h});return{clientSelection:c,impact:e,scrollJumpRequest:null}}var f=ur(n,l),m=n3({impact:e,viewport:h,destination:o,draggables:u,maxScrollChange:f});return{clientSelection:g,impact:m,scrollJumpRequest:f}},Ot=function(r){var a=r.subject.active;return a||H(!1),a},s3=function(t){var r=t.isMovingForward,a=t.pageBorderBoxCenter,o=t.source,u=t.droppables,d=t.viewport,h=o.subject.active;if(!h)return null;var l=o.axis,g=Pr(h[l.start],h[l.end]),y=ld(u).filter(function(b){return b!==o}).filter(function(b){return b.isEnabled}).filter(function(b){return!!b.subject.active}).filter(function(b){return qw(d.frame)(Ot(b))}).filter(function(b){var e=Ot(b);return r?h[l.crossAxisEnd]<e[l.crossAxisEnd]:e[l.crossAxisStart]<h[l.crossAxisStart]}).filter(function(b){var e=Ot(b),n=Pr(e[l.start],e[l.end]);return g(e[l.start])||g(e[l.end])||n(h[l.start])||n(h[l.end])}).sort(function(b,e){var n=Ot(b)[l.crossAxisStart],s=Ot(e)[l.crossAxisStart];return r?n-s:s-n}).filter(function(b,e,n){return Ot(b)[l.crossAxisStart]===Ot(n[0])[l.crossAxisStart]});if(!y.length)return null;if(y.length===1)return y[0];var v=y.filter(function(b){var e=Pr(Ot(b)[l.start],Ot(b)[l.end]);return e(a[l.line])});return v.length===1?v[0]:v.length>1?v.sort(function(b,e){return Ot(b)[l.start]-Ot(e)[l.start]})[0]:y.sort(function(b,e){var n=J_(a,ey(Ot(b))),s=J_(a,ey(Ot(e)));return n!==s?n-s:Ot(b)[l.start]-Ot(e)[l.start]})[0]},ay=function(r,a){var o=r.page.borderBox.center;return xn(r.descriptor.id,a)?ur(o,a.displacedBy.point):o},l3=function(r,a){var o=r.page.borderBox;return xn(r.descriptor.id,a)?hl(o,Ao(a.displacedBy.point)):o},u3=function(t){var r=t.pageBorderBoxCenter,a=t.viewport,o=t.destination,u=t.insideDestination,d=t.afterCritical,h=u.filter(function(l){return Xw({target:l3(l,d),destination:o,viewport:a.frame,withDroppableDisplacement:!0})}).sort(function(l,g){var y=$s(r,dp(o,ay(l,d))),v=$s(r,dp(o,ay(g,d)));return y<v?-1:v<y?1:l.descriptor.index-g.descriptor.index});return h[0]||null},pl=_t(function(r,a){var o=a[r.line];return{value:o,point:da(r.line,o)}}),c3=function(r,a,o){var u=r.axis;if(r.descriptor.mode==="virtual")return da(u.line,a[u.line]);var d=r.subject.page.contentBox[u.size],h=To(r.descriptor.id,o),l=h.reduce(function(v,b){return v+b.client.marginBox[u.size]},0),g=l+a[u.line],y=g-d;return y<=0?null:da(u.line,y)},e1=function(r,a){return re({},r,{scroll:re({},r.scroll,{max:a})})},t1=function(r,a,o){var u=r.frame;Po(a,r)&&H(!1),r.subject.withPlaceholder&&H(!1);var d=pl(r.axis,a.displaceBy).point,h=c3(r,d,o),l={placeholderSize:d,increasedBy:h,oldFrameMaxScroll:r.frame?r.frame.scroll.max:null};if(!u){var g=bo({page:r.subject.page,withPlaceholder:l,axis:r.axis,frame:r.frame});return re({},r,{subject:g})}var y=h?Ut(u.scroll.max,h):u.scroll.max,v=e1(u,y),b=bo({page:r.subject.page,withPlaceholder:l,axis:r.axis,frame:v});return re({},r,{subject:b,frame:v})},d3=function(r){var a=r.subject.withPlaceholder;a||H(!1);var o=r.frame;if(!o){var u=bo({page:r.subject.page,axis:r.axis,frame:null,withPlaceholder:null});return re({},r,{subject:u})}var d=a.oldFrameMaxScroll;d||H(!1);var h=e1(o,d),l=bo({page:r.subject.page,axis:r.axis,frame:h,withPlaceholder:null});return re({},r,{subject:l,frame:h})},f3=function(t){var r=t.previousPageBorderBoxCenter,a=t.moveRelativeTo,o=t.insideDestination,u=t.draggable,d=t.draggables,h=t.destination,l=t.viewport,g=t.afterCritical;if(!a){if(o.length)return null;var y={displaced:js,displacedBy:Yw,at:{type:"REORDER",destination:{droppableId:h.descriptor.id,index:0}}},v=dd({impact:y,draggable:u,droppable:h,draggables:d,afterCritical:g}),b=Po(u,h)?h:t1(h,u,d),e=Jw({draggable:u,destination:b,newPageBorderBoxCenter:v,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return e?y:null}var n=r[h.axis.line]<=a.page.borderBox.center[h.axis.line],s=function(){var f=a.descriptor.index;return a.descriptor.id===u.descriptor.id||n?f:f+1}(),c=pl(h.axis,u.displaceBy);return vc({draggable:u,insideDestination:o,destination:h,viewport:l,displacedBy:c,last:js,index:s})},h3=function(t){var r=t.isMovingForward,a=t.previousPageBorderBoxCenter,o=t.draggable,u=t.isOver,d=t.draggables,h=t.droppables,l=t.viewport,g=t.afterCritical,y=s3({isMovingForward:r,pageBorderBoxCenter:a,source:u,droppables:h,viewport:l});if(!y)return null;var v=To(y.descriptor.id,d),b=u3({pageBorderBoxCenter:a,viewport:l,destination:y,insideDestination:v,afterCritical:g}),e=f3({previousPageBorderBoxCenter:a,destination:y,draggable:o,draggables:d,moveRelativeTo:b,insideDestination:v,viewport:l,afterCritical:g});if(!e)return null;var n=dd({impact:e,draggable:o,droppable:y,draggables:d,afterCritical:g}),s=qm({pageBorderBoxCenter:n,draggable:o,viewport:l});return{clientSelection:s,impact:e,scrollJumpRequest:null}},dr=function(t){var r=t.at;return r?r.type==="REORDER"?r.destination.droppableId:r.combine.droppableId:null},p3=function(r,a){var o=dr(r);return o?a[o]:null},m3=function(t){var r=t.state,a=t.type,o=p3(r.impact,r.dimensions.droppables),u=!!o,d=r.dimensions.droppables[r.critical.droppable.id],h=o||d,l=h.axis.direction,g=l==="vertical"&&(a==="MOVE_UP"||a==="MOVE_DOWN")||l==="horizontal"&&(a==="MOVE_LEFT"||a==="MOVE_RIGHT");if(g&&!u)return null;var y=a==="MOVE_DOWN"||a==="MOVE_RIGHT",v=r.dimensions.draggables[r.critical.draggable.id],b=r.current.page.borderBoxCenter,e=r.dimensions,n=e.draggables,s=e.droppables;return g?o3({isMovingForward:y,previousPageBorderBoxCenter:b,draggable:v,destination:h,draggables:n,viewport:r.viewport,previousClientSelection:r.current.client.selection,previousImpact:r.impact,afterCritical:r.afterCritical}):h3({isMovingForward:y,previousPageBorderBoxCenter:b,draggable:v,isOver:h,draggables:n,droppables:s,viewport:r.viewport,afterCritical:r.afterCritical})};function jn(t){return t.phase==="DRAGGING"||t.phase==="COLLECTING"}function r1(t){var r=Pr(t.top,t.bottom),a=Pr(t.left,t.right);return function(u){return r(u.y)&&a(u.x)}}function g3(t,r){return t.left<r.right&&t.right>r.left&&t.top<r.bottom&&t.bottom>r.top}function v3(t){var r=t.pageBorderBox,a=t.draggable,o=t.candidates,u=a.page.borderBox.center,d=o.map(function(h){var l=h.axis,g=da(h.axis.line,r.center[l.line],h.page.borderBox.center[l.crossAxisLine]);return{id:h.descriptor.id,distance:$s(u,g)}}).sort(function(h,l){return l.distance-h.distance});return d[0]?d[0].id:null}function _3(t){var r=t.pageBorderBox,a=t.draggable,o=t.droppables,u=ld(o).filter(function(d){if(!d.isEnabled)return!1;var h=d.subject.active;if(!h||!g3(r,h))return!1;if(r1(h)(r.center))return!0;var l=d.axis,g=h.center[l.crossAxisLine],y=r[l.crossAxisStart],v=r[l.crossAxisEnd],b=Pr(h[l.crossAxisStart],h[l.crossAxisEnd]),e=b(y),n=b(v);return!e&&!n?!0:e?y<g:v>g});return u.length?u.length===1?u[0].descriptor.id:v3({pageBorderBox:r,draggable:a,candidates:u}):null}var i1=function(r,a){return Hr(hl(r,a))},y3=function(t,r){var a=t.frame;return a?i1(r,a.scroll.diff.value):r};function n1(t){var r=t.displaced,a=t.id;return!!(r.visible[a]||r.invisible[a])}function b3(t){var r=t.draggable,a=t.closest,o=t.inHomeList;return a?o&&a.descriptor.index>r.descriptor.index?a.descriptor.index-1:a.descriptor.index:null}var S3=function(t){var r=t.pageBorderBoxWithDroppableScroll,a=t.draggable,o=t.destination,u=t.insideDestination,d=t.last,h=t.viewport,l=t.afterCritical,g=o.axis,y=pl(o.axis,a.displaceBy),v=y.value,b=r[g.start],e=r[g.end],n=cd(a,u),s=An(n,function(f){var m=f.descriptor.id,p=f.page.borderBox.center[g.line],_=xn(m,l),S=n1({displaced:d,id:m});return _?S?e<=p:b<p-v:S?e<=p+v:b<p}),c=b3({draggable:a,closest:s,inHomeList:Po(a,o)});return vc({draggable:a,insideDestination:u,destination:o,viewport:h,last:d,displacedBy:y,index:c})},w3=4,x3=function(t){var r=t.draggable,a=t.pageBorderBoxWithDroppableScroll,o=t.previousImpact,u=t.destination,d=t.insideDestination,h=t.afterCritical;if(!u.isCombineEnabled)return null;var l=u.axis,g=pl(u.axis,r.displaceBy),y=g.value,v=a[l.start],b=a[l.end],e=cd(r,d),n=An(e,function(c){var f=c.descriptor.id,m=c.page.borderBox,p=m[l.size],_=p/w3,S=xn(f,h),x=n1({displaced:o.displaced,id:f});return S?x?b>m[l.start]+_&&b<m[l.end]-_:v>m[l.start]-y+_&&v<m[l.end]-y-_:x?b>m[l.start]+y+_&&b<m[l.end]+y-_:v>m[l.start]+_&&v<m[l.end]-_});if(!n)return null;var s={displacedBy:g,displaced:o.displaced,at:{type:"COMBINE",combine:{draggableId:n.descriptor.id,droppableId:u.descriptor.id}}};return s},a1=function(t){var r=t.pageOffset,a=t.draggable,o=t.draggables,u=t.droppables,d=t.previousImpact,h=t.viewport,l=t.afterCritical,g=i1(a.page.borderBox,r),y=_3({pageBorderBox:g,draggable:a,droppables:u});if(!y)return FD;var v=u[y],b=To(v.descriptor.id,o),e=y3(v,g);return x3({pageBorderBoxWithDroppableScroll:e,draggable:a,previousImpact:d,destination:v,insideDestination:b,afterCritical:l})||S3({pageBorderBoxWithDroppableScroll:e,draggable:a,destination:v,insideDestination:b,last:d.displaced,viewport:h,afterCritical:l})},Km=function(t,r){var a;return re({},t,(a={},a[r.descriptor.id]=r,a))},E3=function(r){var a=r.previousImpact,o=r.impact,u=r.droppables,d=dr(a),h=dr(o);if(!d||d===h)return u;var l=u[d];if(!l.subject.withPlaceholder)return u;var g=d3(l);return Km(u,g)},U3=function(t){var r=t.draggable,a=t.draggables,o=t.droppables,u=t.previousImpact,d=t.impact,h=E3({previousImpact:u,impact:d,droppables:o}),l=dr(d);if(!l)return h;var g=o[l];if(Po(r,g)||g.subject.withPlaceholder)return h;var y=t1(g,r,a);return Km(h,y)},vs=function(t){var r=t.state,a=t.clientSelection,o=t.dimensions,u=t.viewport,d=t.impact,h=t.scrollJumpRequest,l=u||r.viewport,g=o||r.dimensions,y=a||r.current.client.selection,v=ur(y,r.initial.client.selection),b={offset:v,selection:y,borderBoxCenter:Ut(r.initial.client.borderBoxCenter,v)},e={selection:Ut(b.selection,l.scroll.current),borderBoxCenter:Ut(b.borderBoxCenter,l.scroll.current),offset:Ut(b.offset,l.scroll.diff.value)},n={client:b,page:e};if(r.phase==="COLLECTING")return re({phase:"COLLECTING"},r,{dimensions:g,viewport:l,current:n});var s=g.draggables[r.critical.draggable.id],c=d||a1({pageOffset:e.offset,draggable:s,draggables:g.draggables,droppables:g.droppables,previousImpact:r.impact,viewport:l,afterCritical:r.afterCritical}),f=U3({draggable:s,impact:c,previousImpact:r.impact,draggables:g.draggables,droppables:g.droppables}),m=re({},r,{current:n,dimensions:{draggables:g.draggables,droppables:f},impact:c,viewport:l,scrollJumpRequest:h||null,forceShouldAnimate:h?!1:null});return m};function C3(t,r){return t.map(function(a){return r[a]})}var o1=function(t){var r=t.impact,a=t.viewport,o=t.draggables,u=t.destination,d=t.forceShouldAnimate,h=r.displaced,l=C3(h.all,o),g=Vs({afterDragging:l,destination:u,displacedBy:r.displacedBy,viewport:a.frame,forceShouldAnimate:d,last:h});return re({},r,{displaced:g})},s1=function(t){var r=t.impact,a=t.draggable,o=t.droppable,u=t.draggables,d=t.viewport,h=t.afterCritical,l=dd({impact:r,draggable:a,draggables:u,droppable:o,afterCritical:h});return qm({pageBorderBoxCenter:l,draggable:a,viewport:d})},l1=function(t){var r=t.state,a=t.dimensions,o=t.viewport;r.movementMode!=="SNAP"&&H(!1);var u=r.impact,d=o||r.viewport,h=a||r.dimensions,l=h.draggables,g=h.droppables,y=l[r.critical.draggable.id],v=dr(u);v||H(!1);var b=g[v],e=o1({impact:u,viewport:d,destination:b,draggables:l}),n=s1({impact:e,draggable:y,droppable:b,draggables:l,viewport:d,afterCritical:r.afterCritical});return vs({impact:e,clientSelection:n,state:r,dimensions:h,viewport:d})},A3=function(t){return{index:t.index,droppableId:t.droppableId}},u1=function(t){var r=t.draggable,a=t.home,o=t.draggables,u=t.viewport,d=pl(a.axis,r.displaceBy),h=To(a.descriptor.id,o),l=h.indexOf(r);l===-1&&H(!1);var g=h.slice(l+1),y=g.reduce(function(n,s){return n[s.descriptor.id]=!0,n},{}),v={inVirtualList:a.descriptor.mode==="virtual",displacedBy:d,effected:y},b=Vs({afterDragging:g,destination:a,displacedBy:d,last:null,viewport:u.frame,forceShouldAnimate:!1}),e={displaced:b,displacedBy:d,at:{type:"REORDER",destination:A3(r.descriptor)}};return{impact:e,afterCritical:v}},T3=function(t,r){return{draggables:t.draggables,droppables:Km(t.droppables,r)}},P3=function(t){var r=t.draggable,a=t.offset,o=t.initialWindowScroll,u=fc(r.client,a),d=hc(u,o),h=re({},r,{placeholder:re({},r.placeholder,{client:u}),client:u,page:d});return h},I3=function(t){var r=t.frame;return r||H(!1),r},B3=function(t){var r=t.additions,a=t.updatedDroppables,o=t.viewport,u=o.scroll.diff.value;return r.map(function(d){var h=d.descriptor.droppableId,l=a[h],g=I3(l),y=g.scroll.diff.value,v=Ut(u,y),b=P3({draggable:d,offset:v,initialWindowScroll:o.scroll.initial});return b})},k3=function(t){var r=t.state,a=t.published,o=a.modified.map(function(_){var S=r.dimensions.droppables[_.droppableId],x=Gm(S,_.scroll);return x}),u=re({},r.dimensions.droppables,{},Vw(o)),d=Ww(B3({additions:a.additions,updatedDroppables:u,viewport:r.viewport})),h=re({},r.dimensions.draggables,{},d);a.removals.forEach(function(_){delete h[_]});var l={droppables:u,draggables:h},g=dr(r.impact),y=g?l.droppables[g]:null,v=l.draggables[r.critical.draggable.id],b=l.droppables[r.critical.droppable.id],e=u1({draggable:v,home:b,draggables:h,viewport:r.viewport}),n=e.impact,s=e.afterCritical,c=y&&y.isCombineEnabled?r.impact:n,f=a1({pageOffset:r.current.page.offset,draggable:l.draggables[r.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:c,viewport:r.viewport,afterCritical:s}),m=re({phase:"DRAGGING"},r,{phase:"DRAGGING",impact:f,onLiftImpact:n,dimensions:l,afterCritical:s,forceShouldAnimate:!1});if(r.phase==="COLLECTING")return m;var p=re({phase:"DROP_PENDING"},m,{phase:"DROP_PENDING",reason:r.reason,isWaiting:!1});return p},fp=function(r){return r.movementMode==="SNAP"},Ef=function(r,a,o){var u=T3(r.dimensions,a);return!fp(r)||o?vs({state:r,dimensions:u}):l1({state:r,dimensions:u})};function Uf(t){return t.isDragging&&t.movementMode==="SNAP"?re({phase:"DRAGGING"},t,{scrollJumpRequest:null}):t}var oy={phase:"IDLE",completed:null,shouldFlush:!1},D3=function(t,r){if(t===void 0&&(t=oy),r.type==="FLUSH")return re({},oy,{shouldFlush:!0});if(r.type==="INITIAL_PUBLISH"){t.phase!=="IDLE"&&H(!1);var a=r.payload,o=a.critical,u=a.clientSelection,d=a.viewport,h=a.dimensions,l=a.movementMode,g=h.draggables[o.draggable.id],y=h.droppables[o.droppable.id],v={selection:u,borderBoxCenter:g.client.borderBox.center,offset:yt},b={client:v,page:{selection:Ut(v.selection,d.scroll.initial),borderBoxCenter:Ut(v.selection,d.scroll.initial),offset:Ut(v.selection,d.scroll.diff.value)}},e=ld(h.droppables).every(function(Ee){return!Ee.isFixedOnPage}),n=u1({draggable:g,home:y,draggables:h.draggables,viewport:d}),s=n.impact,c=n.afterCritical,f={phase:"DRAGGING",isDragging:!0,critical:o,movementMode:l,dimensions:h,initial:b,current:b,isWindowScrollAllowed:e,impact:s,afterCritical:c,onLiftImpact:s,viewport:d,scrollJumpRequest:null,forceShouldAnimate:null};return f}if(r.type==="COLLECTION_STARTING"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&H(!1);var m=re({phase:"COLLECTING"},t,{phase:"COLLECTING"});return m}if(r.type==="PUBLISH_WHILE_DRAGGING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"||H(!1),k3({state:t,published:r.payload});if(r.type==="MOVE"){if(t.phase==="DROP_PENDING")return t;jn(t)||H(!1);var p=r.payload.client;return _n(p,t.current.client.selection)?t:vs({state:t,clientSelection:p,impact:fp(t)?t.impact:null})}if(r.type==="UPDATE_DROPPABLE_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="COLLECTING")return Uf(t);jn(t)||H(!1);var _=r.payload,S=_.id,x=_.newScroll,w=t.dimensions.droppables[S];if(!w)return t;var U=Gm(w,x);return Ef(t,U,!1)}if(r.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(t.phase==="DROP_PENDING")return t;jn(t)||H(!1);var A=r.payload,E=A.id,T=A.isEnabled,P=t.dimensions.droppables[E];P||H(!1),P.isEnabled===T&&H(!1);var z=re({},P,{isEnabled:T});return Ef(t,z,!0)}if(r.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(t.phase==="DROP_PENDING")return t;jn(t)||H(!1);var R=r.payload,D=R.id,B=R.isCombineEnabled,F=t.dimensions.droppables[D];F||H(!1),F.isCombineEnabled===B&&H(!1);var M=re({},F,{isCombineEnabled:B});return Ef(t,M,!0)}if(r.type==="MOVE_BY_WINDOW_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="DROP_ANIMATING")return t;jn(t)||H(!1),t.isWindowScrollAllowed||H(!1);var I=r.payload.newScroll;if(_n(t.viewport.scroll.current,I))return Uf(t);var L=Zw(t.viewport,I);return fp(t)?l1({state:t,viewport:L}):vs({state:t,viewport:L})}if(r.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!jn(t))return t;var O=r.payload.maxScroll;if(_n(O,t.viewport.scroll.max))return t;var k=re({},t.viewport,{scroll:re({},t.viewport.scroll,{max:O})});return re({phase:"DRAGGING"},t,{viewport:k})}if(r.type==="MOVE_UP"||r.type==="MOVE_DOWN"||r.type==="MOVE_LEFT"||r.type==="MOVE_RIGHT"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&H(!1);var $=m3({state:t,type:r.type});return $?vs({state:t,impact:$.impact,clientSelection:$.clientSelection,scrollJumpRequest:$.scrollJumpRequest}):t}if(r.type==="DROP_PENDING"){var J=r.payload.reason;t.phase!=="COLLECTING"&&H(!1);var ae=re({phase:"DROP_PENDING"},t,{phase:"DROP_PENDING",isWaiting:!0,reason:J});return ae}if(r.type==="DROP_ANIMATE"){var ce=r.payload,X=ce.completed,ee=ce.dropDuration,be=ce.newHomeClientOffset;t.phase==="DRAGGING"||t.phase==="DROP_PENDING"||H(!1);var de={phase:"DROP_ANIMATING",completed:X,dropDuration:ee,newHomeClientOffset:be,dimensions:t.dimensions};return de}if(r.type==="DROP_COMPLETE"){var _e=r.payload.completed;return{phase:"IDLE",completed:_e,shouldFlush:!1}}return t},L3=function(r){return{type:"BEFORE_INITIAL_CAPTURE",payload:r}},z3=function(r){return{type:"LIFT",payload:r}},R3=function(r){return{type:"INITIAL_PUBLISH",payload:r}},F3=function(r){return{type:"PUBLISH_WHILE_DRAGGING",payload:r}},M3=function(){return{type:"COLLECTION_STARTING",payload:null}},O3=function(r){return{type:"UPDATE_DROPPABLE_SCROLL",payload:r}},N3=function(r){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:r}},H3=function(r){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:r}},c1=function(r){return{type:"MOVE",payload:r}},G3=function(r){return{type:"MOVE_BY_WINDOW_SCROLL",payload:r}},$3=function(r){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:r}},j3=function(){return{type:"MOVE_UP",payload:null}},V3=function(){return{type:"MOVE_DOWN",payload:null}},W3=function(){return{type:"MOVE_RIGHT",payload:null}},Y3=function(){return{type:"MOVE_LEFT",payload:null}},Xm=function(){return{type:"FLUSH",payload:null}},q3=function(r){return{type:"DROP_ANIMATE",payload:r}},Qm=function(r){return{type:"DROP_COMPLETE",payload:r}},d1=function(r){return{type:"DROP",payload:r}},K3=function(r){return{type:"DROP_PENDING",payload:r}},f1=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},X3=function(t){return function(r){var a=r.getState,o=r.dispatch;return function(u){return function(d){if(d.type!=="LIFT"){u(d);return}var h=d.payload,l=h.id,g=h.clientSelection,y=h.movementMode,v=a();v.phase==="DROP_ANIMATING"&&o(Qm({completed:v.completed})),a().phase!=="IDLE"&&H(!1),o(Xm()),o(L3({draggableId:l,movementMode:y}));var b={shouldPublishImmediately:y==="SNAP"},e={draggableId:l,scrollOptions:b},n=t.startPublishing(e),s=n.critical,c=n.dimensions,f=n.viewport;o(R3({critical:s,dimensions:c,clientSelection:g,movementMode:y,viewport:f}))}}}},Q3=function(t){return function(){return function(r){return function(a){a.type==="INITIAL_PUBLISH"&&t.dragging(),a.type==="DROP_ANIMATE"&&t.dropping(a.payload.completed.result.reason),(a.type==="FLUSH"||a.type==="DROP_COMPLETE")&&t.resting(),r(a)}}}},Zm={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Ws={opacity:{drop:0,combining:.7},scale:{drop:.75}},Jm={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Fn=Jm.outOfTheWay+"s "+Zm.outOfTheWay,_s={fluid:"opacity "+Fn,snap:"transform "+Fn+", opacity "+Fn,drop:function(r){var a=r+"s "+Zm.drop;return"transform "+a+", opacity "+a},outOfTheWay:"transform "+Fn,placeholder:"height "+Fn+", width "+Fn+", margin "+Fn},sy=function(r){return _n(r,yt)?null:"translate("+r.x+"px, "+r.y+"px)"},hp={moveTo:sy,drop:function(r,a){var o=sy(r);return o?a?o+" scale("+Ws.scale.drop+")":o:null}},pp=Jm.minDropTime,h1=Jm.maxDropTime,Z3=h1-pp,ly=1500,J3=.6,eL=function(t){var r=t.current,a=t.destination,o=t.reason,u=$s(r,a);if(u<=0)return pp;if(u>=ly)return h1;var d=u/ly,h=pp+Z3*d,l=o==="CANCEL"?h*J3:h;return Number(l.toFixed(2))},tL=function(t){var r=t.impact,a=t.draggable,o=t.dimensions,u=t.viewport,d=t.afterCritical,h=o.draggables,l=o.droppables,g=dr(r),y=g?l[g]:null,v=l[a.descriptor.droppableId],b=s1({impact:r,draggable:a,draggables:h,afterCritical:d,droppable:y||v,viewport:u}),e=ur(b,a.client.borderBox.center);return e},rL=function(t){var r=t.draggables,a=t.reason,o=t.lastImpact,u=t.home,d=t.viewport,h=t.onLiftImpact;if(!o.at||a!=="DROP"){var l=o1({draggables:r,impact:h,destination:u,viewport:d,forceShouldAnimate:!0});return{impact:l,didDropInsideDroppable:!1}}if(o.at.type==="REORDER")return{impact:o,didDropInsideDroppable:!0};var g=re({},o,{displaced:js});return{impact:g,didDropInsideDroppable:!0}},iL=function(t){var r=t.getState,a=t.dispatch;return function(o){return function(u){if(u.type!=="DROP"){o(u);return}var d=r(),h=u.payload.reason;if(d.phase==="COLLECTING"){a(K3({reason:h}));return}if(d.phase!=="IDLE"){var l=d.phase==="DROP_PENDING"&&d.isWaiting;l&&H(!1),d.phase==="DRAGGING"||d.phase==="DROP_PENDING"||H(!1);var g=d.critical,y=d.dimensions,v=y.draggables[d.critical.draggable.id],b=rL({reason:h,lastImpact:d.impact,afterCritical:d.afterCritical,onLiftImpact:d.onLiftImpact,home:d.dimensions.droppables[d.critical.droppable.id],viewport:d.viewport,draggables:d.dimensions.draggables}),e=b.impact,n=b.didDropInsideDroppable,s=n?jm(e):null,c=n?ud(e):null,f={index:g.draggable.index,droppableId:g.droppable.id},m={draggableId:v.descriptor.id,type:v.descriptor.type,source:f,reason:h,mode:d.movementMode,destination:s,combine:c},p=tL({impact:e,draggable:v,dimensions:y,viewport:d.viewport,afterCritical:d.afterCritical}),_={critical:d.critical,afterCritical:d.afterCritical,result:m,impact:e},S=!_n(d.current.client.offset,p)||!!m.combine;if(!S){a(Qm({completed:_}));return}var x=eL({current:d.current.client.offset,destination:p,reason:h}),w={newHomeClientOffset:p,dropDuration:x,completed:_};a(q3(w))}}}},p1=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function nL(t){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(a){a.target!==window&&a.target!==window.document||t()}}}function aL(t){var r=t.onWindowScroll;function a(){r(p1())}var o=Gs(a),u=nL(o),d=vn;function h(){return d!==vn}function l(){h()&&H(!1),d=Ar(window,[u])}function g(){h()||H(!1),o.cancel(),d(),d=vn}return{start:l,stop:g,isActive:h}}var oL=function(r){return r.type==="DROP_COMPLETE"||r.type==="DROP_ANIMATE"||r.type==="FLUSH"},sL=function(t){var r=aL({onWindowScroll:function(o){t.dispatch(G3({newScroll:o}))}});return function(a){return function(o){!r.isActive()&&o.type==="INITIAL_PUBLISH"&&r.start(),r.isActive()&&oL(o)&&r.stop(),a(o)}}},lL=function(t){var r=!1,a=!1,o=setTimeout(function(){a=!0}),u=function(h){r||a||(r=!0,t(h),clearTimeout(o))};return u.wasCalled=function(){return r},u},uL=function(){var t=[],r=function(d){var h=$m(t,function(y){return y.timerId===d});h===-1&&H(!1);var l=t.splice(h,1),g=l[0];g.callback()},a=function(d){var h=setTimeout(function(){return r(h)}),l={timerId:h,callback:d};t.push(l)},o=function(){if(t.length){var d=[].concat(t);t.length=0,d.forEach(function(h){clearTimeout(h.timerId),h.callback()})}};return{add:a,flush:o}},cL=function(r,a){return r==null&&a==null?!0:r==null||a==null?!1:r.droppableId===a.droppableId&&r.index===a.index},dL=function(r,a){return r==null&&a==null?!0:r==null||a==null?!1:r.draggableId===a.draggableId&&r.droppableId===a.droppableId},fL=function(r,a){if(r===a)return!0;var o=r.draggable.id===a.draggable.id&&r.draggable.droppableId===a.draggable.droppableId&&r.draggable.type===a.draggable.type&&r.draggable.index===a.draggable.index,u=r.droppable.id===a.droppable.id&&r.droppable.type===a.droppable.type;return o&&u},jo=function(r,a){a()},iu=function(r,a){return{draggableId:r.draggable.id,type:r.droppable.type,source:{droppableId:r.droppable.id,index:r.draggable.index},mode:a}},Cf=function(r,a,o,u){if(!r){o(u(a));return}var d=lL(o),h={announce:d};r(a,h),d.wasCalled()||o(u(a))},hL=function(t,r){var a=uL(),o=null,u=function(e,n){o&&H(!1),jo("onBeforeCapture",function(){var s=t().onBeforeCapture;if(s){var c={draggableId:e,mode:n};s(c)}})},d=function(e,n){o&&H(!1),jo("onBeforeDragStart",function(){var s=t().onBeforeDragStart;s&&s(iu(e,n))})},h=function(e,n){o&&H(!1);var s=iu(e,n);o={mode:n,lastCritical:e,lastLocation:s.source,lastCombine:null},a.add(function(){jo("onDragStart",function(){return Cf(t().onDragStart,s,r,Au.onDragStart)})})},l=function(e,n){var s=jm(n),c=ud(n);o||H(!1);var f=!fL(e,o.lastCritical);f&&(o.lastCritical=e);var m=!cL(o.lastLocation,s);m&&(o.lastLocation=s);var p=!dL(o.lastCombine,c);if(p&&(o.lastCombine=c),!(!f&&!m&&!p)){var _=re({},iu(e,o.mode),{combine:c,destination:s});a.add(function(){jo("onDragUpdate",function(){return Cf(t().onDragUpdate,_,r,Au.onDragUpdate)})})}},g=function(){o||H(!1),a.flush()},y=function(e){o||H(!1),o=null,jo("onDragEnd",function(){return Cf(t().onDragEnd,e,r,Au.onDragEnd)})},v=function(){if(o){var e=re({},iu(o.lastCritical,o.mode),{combine:null,destination:null,reason:"CANCEL"});y(e)}};return{beforeCapture:u,beforeStart:d,start:h,update:l,flush:g,drop:y,abort:v}},pL=function(t,r){var a=hL(t,r);return function(o){return function(u){return function(d){if(d.type==="BEFORE_INITIAL_CAPTURE"){a.beforeCapture(d.payload.draggableId,d.payload.movementMode);return}if(d.type==="INITIAL_PUBLISH"){var h=d.payload.critical;a.beforeStart(h,d.payload.movementMode),u(d),a.start(h,d.payload.movementMode);return}if(d.type==="DROP_COMPLETE"){var l=d.payload.completed.result;a.flush(),u(d),a.drop(l);return}if(u(d),d.type==="FLUSH"){a.abort();return}var g=o.getState();g.phase==="DRAGGING"&&a.update(g.critical,g.impact)}}}},mL=function(t){return function(r){return function(a){if(a.type!=="DROP_ANIMATION_FINISHED"){r(a);return}var o=t.getState();o.phase!=="DROP_ANIMATING"&&H(!1),t.dispatch(Qm({completed:o.completed}))}}},gL=function(t){var r=null,a=null;function o(){a&&(cancelAnimationFrame(a),a=null),r&&(r(),r=null)}return function(u){return function(d){if((d.type==="FLUSH"||d.type==="DROP_COMPLETE"||d.type==="DROP_ANIMATION_FINISHED")&&o(),u(d),d.type==="DROP_ANIMATE"){var h={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var g=t.getState();g.phase==="DROP_ANIMATING"&&t.dispatch(f1())}};a=requestAnimationFrame(function(){a=null,r=Ar(window,[h])})}}}},vL=function(t){return function(){return function(r){return function(a){(a.type==="DROP_COMPLETE"||a.type==="FLUSH"||a.type==="DROP_ANIMATE")&&t.stopPublishing(),r(a)}}}},_L=function(t){var r=!1;return function(){return function(a){return function(o){if(o.type==="INITIAL_PUBLISH"){r=!0,t.tryRecordFocus(o.payload.critical.draggable.id),a(o),t.tryRestoreFocusRecorded();return}if(a(o),!!r){if(o.type==="FLUSH"){r=!1,t.tryRestoreFocusRecorded();return}if(o.type==="DROP_COMPLETE"){r=!1;var u=o.payload.completed.result;u.combine&&t.tryShiftRecord(u.draggableId,u.combine.draggableId),t.tryRestoreFocusRecorded()}}}}}},yL=function(r){return r.type==="DROP_COMPLETE"||r.type==="DROP_ANIMATE"||r.type==="FLUSH"},bL=function(t){return function(r){return function(a){return function(o){if(yL(o)){t.stop(),a(o);return}if(o.type==="INITIAL_PUBLISH"){a(o);var u=r.getState();u.phase!=="DRAGGING"&&H(!1),t.start(u);return}a(o),t.scroll(r.getState())}}}},SL=function(t){return function(r){return function(a){if(r(a),a.type==="PUBLISH_WHILE_DRAGGING"){var o=t.getState();o.phase==="DROP_PENDING"&&(o.isWaiting||t.dispatch(d1({reason:o.reason})))}}}},wL=ww,xL=function(t){var r=t.dimensionMarshal,a=t.focusMarshal,o=t.styleMarshal,u=t.getResponders,d=t.announce,h=t.autoScroller;return Sw(D3,wL(pk(Q3(o),vL(r),X3(r),iL,mL,gL,SL,bL(h),sL,_L(a),pL(u,d))))},Af=function(){return{additions:{},removals:{},modified:{}}};function EL(t){var r=t.registry,a=t.callbacks,o=Af(),u=null,d=function(){u||(a.collectionStarting(),u=requestAnimationFrame(function(){u=null;var v=o,b=v.additions,e=v.removals,n=v.modified,s=Object.keys(b).map(function(m){return r.draggable.getById(m).getDimension(yt)}).sort(function(m,p){return m.descriptor.index-p.descriptor.index}),c=Object.keys(n).map(function(m){var p=r.droppable.getById(m),_=p.callbacks.getScrollWhileDragging();return{droppableId:m,scroll:_}}),f={additions:s,removals:Object.keys(e),modified:c};o=Af(),a.publish(f)}))},h=function(v){var b=v.descriptor.id;o.additions[b]=v,o.modified[v.descriptor.droppableId]=!0,o.removals[b]&&delete o.removals[b],d()},l=function(v){var b=v.descriptor;o.removals[b.id]=!0,o.modified[b.droppableId]=!0,o.additions[b.id]&&delete o.additions[b.id],d()},g=function(){u&&(cancelAnimationFrame(u),u=null,o=Af())};return{add:h,remove:l,stop:g}}var m1=function(t){var r=t.scrollHeight,a=t.scrollWidth,o=t.height,u=t.width,d=ur({x:a,y:r},{x:u,y:o}),h={x:Math.max(0,d.x),y:Math.max(0,d.y)};return h},g1=function(){var t=document.documentElement;return t||H(!1),t},v1=function(){var t=g1(),r=m1({scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth,width:t.clientWidth,height:t.clientHeight});return r},UL=function(){var t=p1(),r=v1(),a=t.y,o=t.x,u=g1(),d=u.clientWidth,h=u.clientHeight,l=o+d,g=a+h,y=Hr({top:a,left:o,right:l,bottom:g}),v={frame:y,scroll:{initial:t,current:t,max:r,diff:{value:yt,displacement:yt}}};return v},CL=function(t){var r=t.critical,a=t.scrollOptions,o=t.registry,u=UL(),d=u.scroll.current,h=r.droppable,l=o.droppable.getAllByType(h.type).map(function(b){return b.callbacks.getDimensionAndWatchScroll(d,a)}),g=o.draggable.getAllByType(r.draggable.type).map(function(b){return b.getDimension(d)}),y={draggables:Ww(g),droppables:Vw(l)},v={dimensions:y,critical:r,viewport:u};return v};function uy(t,r,a){if(a.descriptor.id===r.id||a.descriptor.type!==r.type)return!1;var o=t.droppable.getById(a.descriptor.droppableId);return o.descriptor.mode==="virtual"}var AL=function(t,r){var a=null,o=EL({callbacks:{publish:r.publishWhileDragging,collectionStarting:r.collectionStarting},registry:t}),u=function(n,s){t.droppable.exists(n)||H(!1),a&&r.updateDroppableIsEnabled({id:n,isEnabled:s})},d=function(n,s){a&&(t.droppable.exists(n)||H(!1),r.updateDroppableIsCombineEnabled({id:n,isCombineEnabled:s}))},h=function(n,s){a&&(t.droppable.exists(n)||H(!1),r.updateDroppableScroll({id:n,newScroll:s}))},l=function(n,s){a&&t.droppable.getById(n).callbacks.scroll(s)},g=function(){if(a){o.stop();var n=a.critical.droppable;t.droppable.getAllByType(n.type).forEach(function(s){return s.callbacks.dragStopped()}),a.unsubscribe(),a=null}},y=function(n){a||H(!1);var s=a.critical.draggable;n.type==="ADDITION"&&uy(t,s,n.value)&&o.add(n.value),n.type==="REMOVAL"&&uy(t,s,n.value)&&o.remove(n.value)},v=function(n){a&&H(!1);var s=t.draggable.getById(n.draggableId),c=t.droppable.getById(s.descriptor.droppableId),f={draggable:s.descriptor,droppable:c.descriptor},m=t.subscribe(y);return a={critical:f,unsubscribe:m},CL({critical:f,registry:t,scrollOptions:n.scrollOptions})},b={updateDroppableIsEnabled:u,updateDroppableIsCombineEnabled:d,scrollDroppable:l,updateDroppableScroll:h,startPublishing:v,stopPublishing:g};return b},_1=function(t,r){return t.phase==="IDLE"?!0:t.phase!=="DROP_ANIMATING"||t.completed.result.draggableId===r?!1:t.completed.result.reason==="DROP"},TL=function(t){window.scrollBy(t.x,t.y)},PL=_t(function(t){return ld(t).filter(function(r){return!(!r.isEnabled||!r.frame)})}),IL=function(r,a){var o=An(PL(a),function(u){return u.frame||H(!1),r1(u.frame.pageMarginBox)(r)});return o},BL=function(t){var r=t.center,a=t.destination,o=t.droppables;if(a){var u=o[a];return u.frame?u:null}var d=IL(r,o);return d},yn={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(r){return Math.pow(r,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},kL=function(t,r){var a=t[r.size]*yn.startFromPercentage,o=t[r.size]*yn.maxScrollAtPercentage,u={startScrollingFrom:a,maxScrollValueAt:o};return u},y1=function(t){var r=t.startOfRange,a=t.endOfRange,o=t.current,u=a-r;if(u===0)return 0;var d=o-r,h=d/u;return h},eg=1,DL=function(t,r){if(t>r.startScrollingFrom)return 0;if(t<=r.maxScrollValueAt)return yn.maxPixelScroll;if(t===r.startScrollingFrom)return eg;var a=y1({startOfRange:r.maxScrollValueAt,endOfRange:r.startScrollingFrom,current:t}),o=1-a,u=yn.maxPixelScroll*yn.ease(o);return Math.ceil(u)},cy=yn.durationDampening.accelerateAt,dy=yn.durationDampening.stopDampeningAt,LL=function(t,r){var a=r,o=dy,u=Date.now(),d=u-a;if(d>=dy)return t;if(d<cy)return eg;var h=y1({startOfRange:cy,endOfRange:o,current:d}),l=t*yn.ease(h);return Math.ceil(l)},fy=function(t){var r=t.distanceToEdge,a=t.thresholds,o=t.dragStartTime,u=t.shouldUseTimeDampening,d=DL(r,a);return d===0?0:u?Math.max(LL(d,o),eg):d},hy=function(t){var r=t.container,a=t.distanceToEdges,o=t.dragStartTime,u=t.axis,d=t.shouldUseTimeDampening,h=kL(r,u),l=a[u.end]<a[u.start];return l?fy({distanceToEdge:a[u.end],thresholds:h,dragStartTime:o,shouldUseTimeDampening:d}):-1*fy({distanceToEdge:a[u.start],thresholds:h,dragStartTime:o,shouldUseTimeDampening:d})},zL=function(t){var r=t.container,a=t.subject,o=t.proposedScroll,u=a.height>r.height,d=a.width>r.width;return!d&&!u?o:d&&u?null:{x:d?0:o.x,y:u?0:o.y}},RL=$w(function(t){return t===0?0:t}),b1=function(t){var r=t.dragStartTime,a=t.container,o=t.subject,u=t.center,d=t.shouldUseTimeDampening,h={top:u.y-a.top,right:a.right-u.x,bottom:a.bottom-u.y,left:u.x-a.left},l=hy({container:a,distanceToEdges:h,dragStartTime:r,axis:Vm,shouldUseTimeDampening:d}),g=hy({container:a,distanceToEdges:h,dragStartTime:r,axis:Kw,shouldUseTimeDampening:d}),y=RL({x:g,y:l});if(_n(y,yt))return null;var v=zL({container:a,subject:o,proposedScroll:y});return v?_n(v,yt)?null:v:null},FL=$w(function(t){return t===0?0:t>0?1:-1}),tg=function(){var t=function(a,o){return a<0?a:a>o?a-o:0};return function(r){var a=r.current,o=r.max,u=r.change,d=Ut(a,u),h={x:t(d.x,o.x),y:t(d.y,o.y)};return _n(h,yt)?null:h}}(),S1=function(r){var a=r.max,o=r.current,u=r.change,d={x:Math.max(o.x,a.x),y:Math.max(o.y,a.y)},h=FL(u),l=tg({max:d,current:o,change:h});return!l||h.x!==0&&l.x===0||h.y!==0&&l.y===0},rg=function(r,a){return S1({current:r.scroll.current,max:r.scroll.max,change:a})},ML=function(r,a){if(!rg(r,a))return null;var o=r.scroll.max,u=r.scroll.current;return tg({current:u,max:o,change:a})},ig=function(r,a){var o=r.frame;return o?S1({current:o.scroll.current,max:o.scroll.max,change:a}):!1},OL=function(r,a){var o=r.frame;return!o||!ig(r,a)?null:tg({current:o.scroll.current,max:o.scroll.max,change:a})},NL=function(t){var r=t.viewport,a=t.subject,o=t.center,u=t.dragStartTime,d=t.shouldUseTimeDampening,h=b1({dragStartTime:u,container:r.frame,subject:a,center:o,shouldUseTimeDampening:d});return h&&rg(r,h)?h:null},HL=function(t){var r=t.droppable,a=t.subject,o=t.center,u=t.dragStartTime,d=t.shouldUseTimeDampening,h=r.frame;if(!h)return null;var l=b1({dragStartTime:u,container:h.pageMarginBox,subject:a,center:o,shouldUseTimeDampening:d});return l&&ig(r,l)?l:null},py=function(t){var r=t.state,a=t.dragStartTime,o=t.shouldUseTimeDampening,u=t.scrollWindow,d=t.scrollDroppable,h=r.current.page.borderBoxCenter,l=r.dimensions.draggables[r.critical.draggable.id],g=l.page.marginBox;if(r.isWindowScrollAllowed){var y=r.viewport,v=NL({dragStartTime:a,viewport:y,subject:g,center:h,shouldUseTimeDampening:o});if(v){u(v);return}}var b=BL({center:h,destination:dr(r.impact),droppables:r.dimensions.droppables});if(b){var e=HL({dragStartTime:a,droppable:b,subject:g,center:h,shouldUseTimeDampening:o});e&&d(b.descriptor.id,e)}},GL=function(t){var r=t.scrollWindow,a=t.scrollDroppable,o=Gs(r),u=Gs(a),d=null,h=function(v){d||H(!1);var b=d,e=b.shouldUseTimeDampening,n=b.dragStartTime;py({state:v,scrollWindow:o,scrollDroppable:u,dragStartTime:n,shouldUseTimeDampening:e})},l=function(v){d&&H(!1);var b=Date.now(),e=!1,n=function(){e=!0};py({state:v,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:n,scrollDroppable:n}),d={dragStartTime:b,shouldUseTimeDampening:e},e&&h(v)},g=function(){d&&(o.cancel(),u.cancel(),d=null)};return{start:l,stop:g,scroll:h}},$L=function(t){var r=t.move,a=t.scrollDroppable,o=t.scrollWindow,u=function(y,v){var b=Ut(y.current.client.selection,v);r({client:b})},d=function(y,v){if(!ig(y,v))return v;var b=OL(y,v);if(!b)return a(y.descriptor.id,v),null;var e=ur(v,b);a(y.descriptor.id,e);var n=ur(v,e);return n},h=function(y,v,b){if(!y||!rg(v,b))return b;var e=ML(v,b);if(!e)return o(b),null;var n=ur(b,e);o(n);var s=ur(b,n);return s},l=function(y){var v=y.scrollJumpRequest;if(v){var b=dr(y.impact);b||H(!1);var e=d(y.dimensions.droppables[b],v);if(e){var n=y.viewport,s=h(y.isWindowScrollAllowed,n,e);s&&u(y,s)}}};return l},jL=function(t){var r=t.scrollDroppable,a=t.scrollWindow,o=t.move,u=GL({scrollWindow:a,scrollDroppable:r}),d=$L({move:o,scrollWindow:a,scrollDroppable:r}),h=function(y){if(y.phase==="DRAGGING"){if(y.movementMode==="FLUID"){u.scroll(y);return}y.scrollJumpRequest&&d(y)}},l={scroll:h,start:u.start,stop:u.stop};return l},So="data-rbd",wo=function(){var t=So+"-drag-handle";return{base:t,draggableId:t+"-draggable-id",contextId:t+"-context-id"}}(),mp=function(){var t=So+"-draggable";return{base:t,contextId:t+"-context-id",id:t+"-id"}}(),VL=function(){var t=So+"-droppable";return{base:t,contextId:t+"-context-id",id:t+"-id"}}(),my={contextId:So+"-scroll-container-context-id"},WL=function(r){return function(a){return"["+a+'="'+r+'"]'}},Vo=function(r,a){return r.map(function(o){var u=o.styles[a];return u?o.selector+" { "+u+" }":""}).join(" ")},YL="pointer-events: none;",qL=function(t){var r=WL(t),a=function(){var l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:r(wo.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:YL,dropAnimating:l}}}(),o=function(){var l=`
      transition: `+_s.outOfTheWay+`;
    `;return{selector:r(mp.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}}(),u={selector:r(VL.contextId),styles:{always:"overflow-anchor: none;"}},d={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},h=[o,a,u,d];return{always:Vo(h,"always"),resting:Vo(h,"resting"),dragging:Vo(h,"dragging"),dropAnimating:Vo(h,"dropAnimating"),userCancel:Vo(h,"userCancel")}},fr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?C.useLayoutEffect:C.useEffect,Tf=function(){var r=document.querySelector("head");return r||H(!1),r},gy=function(r){var a=document.createElement("style");return r&&a.setAttribute("nonce",r),a.type="text/css",a};function KL(t,r){var a=Se(function(){return qL(t)},[t]),o=C.useRef(null),u=C.useRef(null),d=K(_t(function(b){var e=u.current;e||H(!1),e.textContent=b}),[]),h=K(function(b){var e=o.current;e||H(!1),e.textContent=b},[]);fr(function(){!o.current&&!u.current||H(!1);var b=gy(r),e=gy(r);return o.current=b,u.current=e,b.setAttribute(So+"-always",t),e.setAttribute(So+"-dynamic",t),Tf().appendChild(b),Tf().appendChild(e),h(a.always),d(a.resting),function(){var n=function(c){var f=c.current;f||H(!1),Tf().removeChild(f),c.current=null};n(o),n(u)}},[r,h,d,a.always,a.resting,t]);var l=K(function(){return d(a.dragging)},[d,a.dragging]),g=K(function(b){if(b==="DROP"){d(a.dropAnimating);return}d(a.userCancel)},[d,a.dropAnimating,a.userCancel]),y=K(function(){u.current&&d(a.resting)},[d,a.resting]),v=Se(function(){return{dragging:l,dropping:g,resting:y}},[l,g,y]);return v}var w1=function(t){return t&&t.ownerDocument?t.ownerDocument.defaultView:window};function fd(t){return t instanceof w1(t).HTMLElement}function XL(t,r){var a="["+wo.contextId+'="'+t+'"]',o=jw(document.querySelectorAll(a));if(!o.length)return null;var u=An(o,function(d){return d.getAttribute(wo.draggableId)===r});return!u||!fd(u)?null:u}function QL(t){var r=C.useRef({}),a=C.useRef(null),o=C.useRef(null),u=C.useRef(!1),d=K(function(e,n){var s={id:e,focus:n};return r.current[e]=s,function(){var f=r.current,m=f[e];m!==s&&delete f[e]}},[]),h=K(function(e){var n=XL(t,e);n&&n!==document.activeElement&&n.focus()},[t]),l=K(function(e,n){a.current===e&&(a.current=n)},[]),g=K(function(){o.current||u.current&&(o.current=requestAnimationFrame(function(){o.current=null;var e=a.current;e&&h(e)}))},[h]),y=K(function(e){a.current=null;var n=document.activeElement;n&&n.getAttribute(wo.draggableId)===e&&(a.current=e)},[]);fr(function(){return u.current=!0,function(){u.current=!1;var e=o.current;e&&cancelAnimationFrame(e)}},[]);var v=Se(function(){return{register:d,tryRecordFocus:y,tryRestoreFocusRecorded:g,tryShiftRecord:l}},[d,y,g,l]);return v}function ZL(){var t={draggables:{},droppables:{}},r=[];function a(b){return r.push(b),function(){var n=r.indexOf(b);n!==-1&&r.splice(n,1)}}function o(b){r.length&&r.forEach(function(e){return e(b)})}function u(b){return t.draggables[b]||null}function d(b){var e=u(b);return e||H(!1),e}var h={register:function(e){t.draggables[e.descriptor.id]=e,o({type:"ADDITION",value:e})},update:function(e,n){var s=t.draggables[n.descriptor.id];s&&s.uniqueId===e.uniqueId&&(delete t.draggables[n.descriptor.id],t.draggables[e.descriptor.id]=e)},unregister:function(e){var n=e.descriptor.id,s=u(n);s&&e.uniqueId===s.uniqueId&&(delete t.draggables[n],o({type:"REMOVAL",value:e}))},getById:d,findById:u,exists:function(e){return!!u(e)},getAllByType:function(e){return gc(t.draggables).filter(function(n){return n.descriptor.type===e})}};function l(b){return t.droppables[b]||null}function g(b){var e=l(b);return e||H(!1),e}var y={register:function(e){t.droppables[e.descriptor.id]=e},unregister:function(e){var n=l(e.descriptor.id);n&&e.uniqueId===n.uniqueId&&delete t.droppables[e.descriptor.id]},getById:g,findById:l,exists:function(e){return!!l(e)},getAllByType:function(e){return gc(t.droppables).filter(function(n){return n.descriptor.type===e})}};function v(){t.draggables={},t.droppables={},r.length=0}return{draggable:h,droppable:y,subscribe:a,clean:v}}function JL(){var t=Se(ZL,[]);return C.useEffect(function(){return function(){requestAnimationFrame(t.clean)}},[t]),t}var ng=ue.createContext(null),_c=function(){var t=document.body;return t||H(!1),t},ez={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},tz=function(r){return"rbd-announcement-"+r};function rz(t){var r=Se(function(){return tz(t)},[t]),a=C.useRef(null);C.useEffect(function(){var d=document.createElement("div");return a.current=d,d.id=r,d.setAttribute("aria-live","assertive"),d.setAttribute("aria-atomic","true"),re(d.style,ez),_c().appendChild(d),function(){setTimeout(function(){var g=_c();g.contains(d)&&g.removeChild(d),d===a.current&&(a.current=null)})}},[r]);var o=K(function(u){var d=a.current;if(d){d.textContent=u;return}},[]);return o}var iz=0,nz={separator:"::"};function ag(t,r){return r===void 0&&(r=nz),Se(function(){return""+t+r.separator+iz++},[r.separator,t])}function az(t){var r=t.contextId,a=t.uniqueId;return"rbd-hidden-text-"+r+"-"+a}function oz(t){var r=t.contextId,a=t.text,o=ag("hidden-text",{separator:"-"}),u=Se(function(){return az({contextId:r,uniqueId:o})},[o,r]);return C.useEffect(function(){var h=document.createElement("div");return h.id=u,h.textContent=a,h.style.display="none",_c().appendChild(h),function(){var g=_c();g.contains(h)&&g.removeChild(h)}},[u,a]),u}var hd=ue.createContext(null);function x1(t){var r=C.useRef(t);return C.useEffect(function(){r.current=t}),r}function sz(){var t=null;function r(){return!!t}function a(h){return h===t}function o(h){t&&H(!1);var l={abandon:h};return t=l,l}function u(){t||H(!1),t=null}function d(){t&&(t.abandon(),u())}return{isClaimed:r,isActive:a,claim:o,release:u,tryAbandon:d}}var lz=9,uz=13,og=27,E1=32,cz=33,dz=34,fz=35,hz=36,pz=37,mz=38,gz=39,vz=40,nu,_z=(nu={},nu[uz]=!0,nu[lz]=!0,nu),U1=function(t){_z[t.keyCode]&&t.preventDefault()},pd=function(){var t="visibilitychange";if(typeof document>"u")return t;var r=[t,"ms"+t,"webkit"+t,"moz"+t,"o"+t],a=An(r,function(o){return"on"+o in document});return a||t}(),C1=0,vy=5;function yz(t,r){return Math.abs(r.x-t.x)>=vy||Math.abs(r.y-t.y)>=vy}var _y={type:"IDLE"};function bz(t){var r=t.cancel,a=t.completed,o=t.getPhase,u=t.setPhase;return[{eventName:"mousemove",fn:function(h){var l=h.button,g=h.clientX,y=h.clientY;if(l===C1){var v={x:g,y},b=o();if(b.type==="DRAGGING"){h.preventDefault(),b.actions.move(v);return}b.type!=="PENDING"&&H(!1);var e=b.point;if(yz(e,v)){h.preventDefault();var n=b.actions.fluidLift(v);u({type:"DRAGGING",actions:n})}}}},{eventName:"mouseup",fn:function(h){var l=o();if(l.type!=="DRAGGING"){r();return}h.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),a()}},{eventName:"mousedown",fn:function(h){o().type==="DRAGGING"&&h.preventDefault(),r()}},{eventName:"keydown",fn:function(h){var l=o();if(l.type==="PENDING"){r();return}if(h.keyCode===og){h.preventDefault(),r();return}U1(h)}},{eventName:"resize",fn:r},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){o().type==="PENDING"&&r()}},{eventName:"webkitmouseforcedown",fn:function(h){var l=o();if(l.type==="IDLE"&&H(!1),l.actions.shouldRespectForcePress()){r();return}h.preventDefault()}},{eventName:pd,fn:r}]}function Sz(t){var r=C.useRef(_y),a=C.useRef(vn),o=Se(function(){return{eventName:"mousedown",fn:function(b){if(!b.defaultPrevented&&b.button===C1&&!(b.ctrlKey||b.metaKey||b.shiftKey||b.altKey)){var e=t.findClosestDraggableId(b);if(e){var n=t.tryGetLock(e,h,{sourceEvent:b});if(n){b.preventDefault();var s={x:b.clientX,y:b.clientY};a.current(),y(n,s)}}}}}},[t]),u=Se(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(b){if(!b.defaultPrevented){var e=t.findClosestDraggableId(b);if(e){var n=t.findOptionsForDraggable(e);n&&(n.shouldRespectForcePress||t.canGetLock(e)&&b.preventDefault())}}}}},[t]),d=K(function(){var b={passive:!1,capture:!0};a.current=Ar(window,[u,o],b)},[u,o]),h=K(function(){var v=r.current;v.type!=="IDLE"&&(r.current=_y,a.current(),d())},[d]),l=K(function(){var v=r.current;h(),v.type==="DRAGGING"&&v.actions.cancel({shouldBlockNextClick:!0}),v.type==="PENDING"&&v.actions.abort()},[h]),g=K(function(){var b={capture:!0,passive:!1},e=bz({cancel:l,completed:h,getPhase:function(){return r.current},setPhase:function(s){r.current=s}});a.current=Ar(window,e,b)},[l,h]),y=K(function(b,e){r.current.type!=="IDLE"&&H(!1),r.current={type:"PENDING",point:e,actions:b},g()},[g]);fr(function(){return d(),function(){a.current()}},[d])}var Ca;function wz(){}var xz=(Ca={},Ca[dz]=!0,Ca[cz]=!0,Ca[hz]=!0,Ca[fz]=!0,Ca);function Ez(t,r){function a(){r(),t.cancel()}function o(){r(),t.drop()}return[{eventName:"keydown",fn:function(d){if(d.keyCode===og){d.preventDefault(),a();return}if(d.keyCode===E1){d.preventDefault(),o();return}if(d.keyCode===vz){d.preventDefault(),t.moveDown();return}if(d.keyCode===mz){d.preventDefault(),t.moveUp();return}if(d.keyCode===gz){d.preventDefault(),t.moveRight();return}if(d.keyCode===pz){d.preventDefault(),t.moveLeft();return}if(xz[d.keyCode]){d.preventDefault();return}U1(d)}},{eventName:"mousedown",fn:a},{eventName:"mouseup",fn:a},{eventName:"click",fn:a},{eventName:"touchstart",fn:a},{eventName:"resize",fn:a},{eventName:"wheel",fn:a,options:{passive:!0}},{eventName:pd,fn:a}]}function Uz(t){var r=C.useRef(wz),a=Se(function(){return{eventName:"keydown",fn:function(d){if(d.defaultPrevented||d.keyCode!==E1)return;var h=t.findClosestDraggableId(d);if(!h)return;var l=t.tryGetLock(h,v,{sourceEvent:d});if(!l)return;d.preventDefault();var g=!0,y=l.snapLift();r.current();function v(){g||H(!1),g=!1,r.current(),o()}r.current=Ar(window,Ez(y,v),{capture:!0,passive:!1})}}},[t]),o=K(function(){var d={passive:!1,capture:!0};r.current=Ar(window,[a],d)},[a]);fr(function(){return o(),function(){r.current()}},[o])}var Pf={type:"IDLE"},Cz=120,Az=.15;function Tz(t){var r=t.cancel,a=t.getPhase;return[{eventName:"orientationchange",fn:r},{eventName:"resize",fn:r},{eventName:"contextmenu",fn:function(u){u.preventDefault()}},{eventName:"keydown",fn:function(u){if(a().type!=="DRAGGING"){r();return}u.keyCode===og&&u.preventDefault(),r()}},{eventName:pd,fn:r}]}function Pz(t){var r=t.cancel,a=t.completed,o=t.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(d){var h=o();if(h.type!=="DRAGGING"){r();return}h.hasMoved=!0;var l=d.touches[0],g=l.clientX,y=l.clientY,v={x:g,y};d.preventDefault(),h.actions.move(v)}},{eventName:"touchend",fn:function(d){var h=o();if(h.type!=="DRAGGING"){r();return}d.preventDefault(),h.actions.drop({shouldBlockNextClick:!0}),a()}},{eventName:"touchcancel",fn:function(d){if(o().type!=="DRAGGING"){r();return}d.preventDefault(),r()}},{eventName:"touchforcechange",fn:function(d){var h=o();h.type==="IDLE"&&H(!1);var l=d.touches[0];if(l){var g=l.force>=Az;if(g){var y=h.actions.shouldRespectForcePress();if(h.type==="PENDING"){y&&r();return}if(y){if(h.hasMoved){d.preventDefault();return}r();return}d.preventDefault()}}}},{eventName:pd,fn:r}]}function Iz(t){var r=C.useRef(Pf),a=C.useRef(vn),o=K(function(){return r.current},[]),u=K(function(n){r.current=n},[]),d=Se(function(){return{eventName:"touchstart",fn:function(n){if(!n.defaultPrevented){var s=t.findClosestDraggableId(n);if(s){var c=t.tryGetLock(s,l,{sourceEvent:n});if(c){var f=n.touches[0],m=f.clientX,p=f.clientY,_={x:m,y:p};a.current(),b(c,_)}}}}}},[t]),h=K(function(){var n={capture:!0,passive:!1};a.current=Ar(window,[d],n)},[d]),l=K(function(){var e=r.current;e.type!=="IDLE"&&(e.type==="PENDING"&&clearTimeout(e.longPressTimerId),u(Pf),a.current(),h())},[h,u]),g=K(function(){var e=r.current;l(),e.type==="DRAGGING"&&e.actions.cancel({shouldBlockNextClick:!0}),e.type==="PENDING"&&e.actions.abort()},[l]),y=K(function(){var n={capture:!0,passive:!1},s={cancel:g,completed:l,getPhase:o},c=Ar(window,Pz(s),n),f=Ar(window,Tz(s),n);a.current=function(){c(),f()}},[g,o,l]),v=K(function(){var n=o();n.type!=="PENDING"&&H(!1);var s=n.actions.fluidLift(n.point);u({type:"DRAGGING",actions:s,hasMoved:!1})},[o,u]),b=K(function(n,s){o().type!=="IDLE"&&H(!1);var c=setTimeout(v,Cz);u({type:"PENDING",point:s,actions:n,longPressTimerId:c}),y()},[y,o,u,v]);fr(function(){return h(),function(){a.current();var s=o();s.type==="PENDING"&&(clearTimeout(s.longPressTimerId),u(Pf))}},[o,h,u]),fr(function(){var n=Ar(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return n},[])}var Bz={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function A1(t,r){if(r==null)return!1;var a=!!Bz[r.tagName.toLowerCase()];if(a)return!0;var o=r.getAttribute("contenteditable");return o==="true"||o===""?!0:r===t?!1:A1(t,r.parentElement)}function kz(t,r){var a=r.target;return fd(a)?A1(t,a):!1}var Dz=function(t){return Hr(t.getBoundingClientRect()).center};function Lz(t){return t instanceof w1(t).Element}var zz=function(){var t="matches";if(typeof document>"u")return t;var r=[t,"msMatchesSelector","webkitMatchesSelector"],a=An(r,function(o){return o in Element.prototype});return a||t}();function T1(t,r){return t==null?null:t[zz](r)?t:T1(t.parentElement,r)}function Rz(t,r){return t.closest?t.closest(r):T1(t,r)}function Fz(t){return"["+wo.contextId+'="'+t+'"]'}function Mz(t,r){var a=r.target;if(!Lz(a))return null;var o=Fz(t),u=Rz(a,o);return!u||!fd(u)?null:u}function Oz(t,r){var a=Mz(t,r);return a?a.getAttribute(wo.draggableId):null}function Nz(t,r){var a="["+mp.contextId+'="'+t+'"]',o=jw(document.querySelectorAll(a)),u=An(o,function(d){return d.getAttribute(mp.id)===r});return!u||!fd(u)?null:u}function Hz(t){t.preventDefault()}function au(t){var r=t.expected,a=t.phase,o=t.isLockActive;return t.shouldWarn,!(!o()||r!==a)}function P1(t){var r=t.lockAPI,a=t.store,o=t.registry,u=t.draggableId;if(r.isClaimed())return!1;var d=o.draggable.findById(u);return!(!d||!d.options.isEnabled||!_1(a.getState(),u))}function Gz(t){var r=t.lockAPI,a=t.contextId,o=t.store,u=t.registry,d=t.draggableId,h=t.forceSensorStop,l=t.sourceEvent,g=P1({lockAPI:r,store:o,registry:u,draggableId:d});if(!g)return null;var y=u.draggable.getById(d),v=Nz(a,y.descriptor.id);if(!v||l&&!y.options.canDragInteractiveElements&&kz(v,l))return null;var b=r.claim(h||vn),e="PRE_DRAG";function n(){return y.options.shouldRespectForcePress}function s(){return r.isActive(b)}function c(w,U){au({expected:w,phase:e,isLockActive:s,shouldWarn:!0})&&o.dispatch(U())}var f=c.bind(null,"DRAGGING");function m(w){function U(){r.release(),e="COMPLETED"}e!=="PRE_DRAG"&&(U(),e!=="PRE_DRAG"&&H(!1)),o.dispatch(z3(w.liftActionArgs)),e="DRAGGING";function A(E,T){if(T===void 0&&(T={shouldBlockNextClick:!1}),w.cleanup(),T.shouldBlockNextClick){var P=Ar(window,[{eventName:"click",fn:Hz,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(P)}U(),o.dispatch(d1({reason:E}))}return re({isActive:function(){return au({expected:"DRAGGING",phase:e,isLockActive:s,shouldWarn:!1})},shouldRespectForcePress:n,drop:function(T){return A("DROP",T)},cancel:function(T){return A("CANCEL",T)}},w.actions)}function p(w){var U=Gs(function(E){f(function(){return c1({client:E})})}),A=m({liftActionArgs:{id:d,clientSelection:w,movementMode:"FLUID"},cleanup:function(){return U.cancel()},actions:{move:U}});return re({},A,{move:U})}function _(){var w={moveUp:function(){return f(j3)},moveRight:function(){return f(W3)},moveDown:function(){return f(V3)},moveLeft:function(){return f(Y3)}};return m({liftActionArgs:{id:d,clientSelection:Dz(v),movementMode:"SNAP"},cleanup:vn,actions:w})}function S(){var w=au({expected:"PRE_DRAG",phase:e,isLockActive:s,shouldWarn:!0});w&&r.release()}var x={isActive:function(){return au({expected:"PRE_DRAG",phase:e,isLockActive:s,shouldWarn:!1})},shouldRespectForcePress:n,fluidLift:p,snapLift:_,abort:S};return x}var $z=[Sz,Uz,Iz];function jz(t){var r=t.contextId,a=t.store,o=t.registry,u=t.customSensors,d=t.enableDefaultSensors,h=[].concat(d?$z:[],u||[]),l=C.useState(function(){return sz()})[0],g=K(function(p,_){p.isDragging&&!_.isDragging&&l.tryAbandon()},[l]);fr(function(){var p=a.getState(),_=a.subscribe(function(){var S=a.getState();g(p,S),p=S});return _},[l,a,g]),fr(function(){return l.tryAbandon},[l.tryAbandon]);for(var y=K(function(m){return P1({lockAPI:l,registry:o,store:a,draggableId:m})},[l,o,a]),v=K(function(m,p,_){return Gz({lockAPI:l,registry:o,contextId:r,store:a,draggableId:m,forceSensorStop:p,sourceEvent:_&&_.sourceEvent?_.sourceEvent:null})},[r,l,o,a]),b=K(function(m){return Oz(r,m)},[r]),e=K(function(m){var p=o.draggable.findById(m);return p?p.options:null},[o.draggable]),n=K(function(){l.isClaimed()&&(l.tryAbandon(),a.getState().phase!=="IDLE"&&a.dispatch(Xm()))},[l,a]),s=K(l.isClaimed,[l]),c=Se(function(){return{canGetLock:y,tryGetLock:v,findClosestDraggableId:b,findOptionsForDraggable:e,tryReleaseLock:n,isLockClaimed:s}},[y,v,b,e,n,s]),f=0;f<h.length;f++)h[f](c)}var Vz=function(r){return{onBeforeCapture:r.onBeforeCapture,onBeforeDragStart:r.onBeforeDragStart,onDragStart:r.onDragStart,onDragEnd:r.onDragEnd,onDragUpdate:r.onDragUpdate}};function Wo(t){return t.current||H(!1),t.current}function Wz(t){var r=t.contextId,a=t.setCallbacks,o=t.sensors,u=t.nonce,d=t.dragHandleUsageInstructions,h=C.useRef(null),l=x1(t),g=K(function(){return Vz(l.current)},[l]),y=rz(r),v=oz({contextId:r,text:d}),b=KL(r,u),e=K(function(E){Wo(h).dispatch(E)},[]),n=Se(function(){return H_({publishWhileDragging:F3,updateDroppableScroll:O3,updateDroppableIsEnabled:N3,updateDroppableIsCombineEnabled:H3,collectionStarting:M3},e)},[e]),s=JL(),c=Se(function(){return AL(s,n)},[s,n]),f=Se(function(){return jL(re({scrollWindow:TL,scrollDroppable:c.scrollDroppable},H_({move:c1},e)))},[c.scrollDroppable,e]),m=QL(r),p=Se(function(){return xL({announce:y,autoScroller:f,dimensionMarshal:c,focusMarshal:m,getResponders:g,styleMarshal:b})},[y,f,c,m,g,b]);h.current=p;var _=K(function(){var E=Wo(h),T=E.getState();T.phase!=="IDLE"&&E.dispatch(Xm())},[]),S=K(function(){var E=Wo(h).getState();return E.isDragging||E.phase==="DROP_ANIMATING"},[]),x=Se(function(){return{isDragging:S,tryAbort:_}},[S,_]);a(x);var w=K(function(E){return _1(Wo(h).getState(),E)},[]),U=K(function(){return jn(Wo(h).getState())},[]),A=Se(function(){return{marshal:c,focus:m,contextId:r,canLift:w,isMovementAllowed:U,dragHandleUsageInstructionsId:v,registry:s}},[r,c,v,m,w,U,s]);return jz({contextId:r,store:p,registry:s,customSensors:o,enableDefaultSensors:t.enableDefaultSensors!==!1}),C.useEffect(function(){return _},[_]),ue.createElement(hd.Provider,{value:A},ue.createElement(yk,{context:ng,store:p},t.children))}var Yz=0;function qz(){return Se(function(){return""+Yz++},[])}function Kz(t){var r=qz(),a=t.dragHandleUsageInstructions||Au.dragHandleUsageInstructions;return ue.createElement(UD,null,function(o){return ue.createElement(Wz,{nonce:t.nonce,contextId:r,setCallbacks:o,dragHandleUsageInstructions:a,enableDefaultSensors:t.enableDefaultSensors,sensors:t.sensors,onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragUpdate:t.onDragUpdate,onDragEnd:t.onDragEnd},t.children)})}var I1=function(r){return function(a){return r===a}},Xz=I1("scroll"),Qz=I1("auto"),yy=function(r,a){return a(r.overflowX)||a(r.overflowY)},Zz=function(r){var a=window.getComputedStyle(r),o={overflowX:a.overflowX,overflowY:a.overflowY};return yy(o,Xz)||yy(o,Qz)},Jz=function(){return!1},eR=function t(r){return r==null?null:r===document.body?Jz()?r:null:r===document.documentElement?null:Zz(r)?r:t(r.parentElement)},gp=function(t){return{x:t.scrollLeft,y:t.scrollTop}},tR=function t(r){if(!r)return!1;var a=window.getComputedStyle(r);return a.position==="fixed"?!0:t(r.parentElement)},rR=function(t){var r=eR(t),a=tR(t);return{closestScrollable:r,isFixedOnPage:a}},iR=function(t){var r=t.descriptor,a=t.isEnabled,o=t.isCombineEnabled,u=t.isFixedOnPage,d=t.direction,h=t.client,l=t.page,g=t.closest,y=function(){if(!g)return null;var n=g.scrollSize,s=g.client,c=m1({scrollHeight:n.scrollHeight,scrollWidth:n.scrollWidth,height:s.paddingBox.height,width:s.paddingBox.width});return{pageMarginBox:g.page.marginBox,frameClient:s,scrollSize:n,shouldClipSubject:g.shouldClipSubject,scroll:{initial:g.scroll,current:g.scroll,max:c,diff:{value:yt,displacement:yt}}}}(),v=d==="vertical"?Vm:Kw,b=bo({page:l,withPlaceholder:null,axis:v,frame:y}),e={descriptor:r,isCombineEnabled:o,isFixedOnPage:u,axis:v,isEnabled:a,client:h,page:l,frame:y,subject:b};return e},nR=function(r,a){var o=Ow(r);if(!a||r!==a)return o;var u=o.paddingBox.top-a.scrollTop,d=o.paddingBox.left-a.scrollLeft,h=u+a.scrollHeight,l=d+a.scrollWidth,g={top:u,right:l,bottom:h,left:d},y=Nm(g,o.border),v=Hm({borderBox:y,margin:o.margin,border:o.border,padding:o.padding});return v},aR=function(t){var r=t.ref,a=t.descriptor,o=t.env,u=t.windowScroll,d=t.direction,h=t.isDropDisabled,l=t.isCombineEnabled,g=t.shouldClipSubject,y=o.closestScrollable,v=nR(r,y),b=hc(v,u),e=function(){if(!y)return null;var s=Ow(y),c={scrollHeight:y.scrollHeight,scrollWidth:y.scrollWidth};return{client:s,page:hc(s,u),scroll:gp(y),scrollSize:c,shouldClipSubject:g}}(),n=iR({descriptor:a,isEnabled:!h,isCombineEnabled:l,isFixedOnPage:o.isFixedOnPage,direction:d,client:v,page:b,closest:e});return n},oR={passive:!1},sR={passive:!0},by=function(t){return t.shouldPublishImmediately?oR:sR};function yc(t){var r=C.useContext(t);return r||H(!1),r}var ou=function(r){return r&&r.env.closestScrollable||null};function lR(t){var r=C.useRef(null),a=yc(hd),o=ag("droppable"),u=a.registry,d=a.marshal,h=x1(t),l=Se(function(){return{id:t.droppableId,type:t.type,mode:t.mode}},[t.droppableId,t.mode,t.type]),g=C.useRef(l),y=Se(function(){return _t(function(S,x){r.current||H(!1);var w={x:S,y:x};d.updateDroppableScroll(l.id,w)})},[l.id,d]),v=K(function(){var S=r.current;return!S||!S.env.closestScrollable?yt:gp(S.env.closestScrollable)},[]),b=K(function(){var S=v();y(S.x,S.y)},[v,y]),e=Se(function(){return Gs(b)},[b]),n=K(function(){var S=r.current,x=ou(S);S&&x||H(!1);var w=S.scrollOptions;if(w.shouldPublishImmediately){b();return}e()},[e,b]),s=K(function(S,x){r.current&&H(!1);var w=h.current,U=w.getDroppableRef();U||H(!1);var A=rR(U),E={ref:U,descriptor:l,env:A,scrollOptions:x};r.current=E;var T=aR({ref:U,descriptor:l,env:A,windowScroll:S,direction:w.direction,isDropDisabled:w.isDropDisabled,isCombineEnabled:w.isCombineEnabled,shouldClipSubject:!w.ignoreContainerClipping}),P=A.closestScrollable;return P&&(P.setAttribute(my.contextId,a.contextId),P.addEventListener("scroll",n,by(E.scrollOptions))),T},[a.contextId,l,n,h]),c=K(function(){var S=r.current,x=ou(S);return S&&x||H(!1),gp(x)},[]),f=K(function(){var S=r.current;S||H(!1);var x=ou(S);r.current=null,x&&(e.cancel(),x.removeAttribute(my.contextId),x.removeEventListener("scroll",n,by(S.scrollOptions)))},[n,e]),m=K(function(S){var x=r.current;x||H(!1);var w=ou(x);w||H(!1),w.scrollTop+=S.y,w.scrollLeft+=S.x},[]),p=Se(function(){return{getDimensionAndWatchScroll:s,getScrollWhileDragging:c,dragStopped:f,scroll:m}},[f,s,c,m]),_=Se(function(){return{uniqueId:o,descriptor:l,callbacks:p}},[p,l,o]);fr(function(){return g.current=_.descriptor,u.droppable.register(_),function(){r.current&&f(),u.droppable.unregister(_)}},[p,l,f,_,d,u.droppable]),fr(function(){r.current&&d.updateDroppableIsEnabled(g.current.id,!t.isDropDisabled)},[t.isDropDisabled,d]),fr(function(){r.current&&d.updateDroppableIsCombineEnabled(g.current.id,t.isCombineEnabled)},[t.isCombineEnabled,d])}function If(){}var Sy={width:0,height:0,margin:BD},uR=function(r){var a=r.isAnimatingOpenOnMount,o=r.placeholder,u=r.animate;return a||u==="close"?Sy:{height:o.client.borderBox.height,width:o.client.borderBox.width,margin:o.client.margin}},cR=function(r){var a=r.isAnimatingOpenOnMount,o=r.placeholder,u=r.animate,d=uR({isAnimatingOpenOnMount:a,placeholder:o,animate:u});return{display:o.display,boxSizing:"border-box",width:d.width,height:d.height,marginTop:d.margin.top,marginRight:d.margin.right,marginBottom:d.margin.bottom,marginLeft:d.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:u!=="none"?_s.placeholder:null}};function dR(t){var r=C.useRef(null),a=K(function(){r.current&&(clearTimeout(r.current),r.current=null)},[]),o=t.animate,u=t.onTransitionEnd,d=t.onClose,h=t.contextId,l=C.useState(t.animate==="open"),g=l[0],y=l[1];C.useEffect(function(){return g?o!=="open"?(a(),y(!1),If):r.current?If:(r.current=setTimeout(function(){r.current=null,y(!1)}),a):If},[o,g,a]);var v=K(function(e){e.propertyName==="height"&&(u(),o==="close"&&d())},[o,d,u]),b=cR({isAnimatingOpenOnMount:g,animate:t.animate,placeholder:t.placeholder});return ue.createElement(t.placeholder.tagName,{style:b,"data-rbd-placeholder-context-id":h,onTransitionEnd:v,ref:t.innerRef})}var fR=ue.memo(dR),sg=ue.createContext(null),hR=function(t){bw(r,t);function r(){for(var o,u=arguments.length,d=new Array(u),h=0;h<u;h++)d[h]=arguments[h];return o=t.call.apply(t,[this].concat(d))||this,o.state={isVisible:!!o.props.on,data:o.props.on,animate:o.props.shouldAnimate&&o.props.on?"open":"none"},o.onClose=function(){o.state.animate==="close"&&o.setState({isVisible:!1})},o}r.getDerivedStateFromProps=function(u,d){return u.shouldAnimate?u.on?{isVisible:!0,data:u.on,animate:"open"}:d.isVisible?{isVisible:!0,data:d.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!u.on,data:u.on,animate:"none"}};var a=r.prototype;return a.render=function(){if(!this.state.isVisible)return null;var u={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(u)},r}(ue.PureComponent),wy={dragging:5e3,dropAnimating:4500},pR=function(r,a){return a?_s.drop(a.duration):r?_s.snap:_s.fluid},mR=function(r,a){return r?a?Ws.opacity.drop:Ws.opacity.combining:null},gR=function(r){return r.forceShouldAnimate!=null?r.forceShouldAnimate:r.mode==="SNAP"};function vR(t){var r=t.dimension,a=r.client,o=t.offset,u=t.combineWith,d=t.dropping,h=!!u,l=gR(t),g=!!d,y=g?hp.drop(o,h):hp.moveTo(o),v={position:"fixed",top:a.marginBox.top,left:a.marginBox.left,boxSizing:"border-box",width:a.borderBox.width,height:a.borderBox.height,transition:pR(l,d),transform:y,opacity:mR(h,g),zIndex:g?wy.dropAnimating:wy.dragging,pointerEvents:"none"};return v}function _R(t){return{transform:hp.moveTo(t.offset),transition:t.shouldAnimateDisplacement?null:"none"}}function yR(t){return t.type==="DRAGGING"?vR(t):_R(t)}function bR(t,r,a){a===void 0&&(a=yt);var o=window.getComputedStyle(r),u=r.getBoundingClientRect(),d=Mw(u,o),h=hc(d,a),l={client:d,tagName:r.tagName.toLowerCase(),display:o.display},g={x:d.marginBox.width,y:d.marginBox.height},y={descriptor:t,placeholder:l,displaceBy:g,client:d,page:h};return y}function SR(t){var r=ag("draggable"),a=t.descriptor,o=t.registry,u=t.getDraggableRef,d=t.canDragInteractiveElements,h=t.shouldRespectForcePress,l=t.isEnabled,g=Se(function(){return{canDragInteractiveElements:d,shouldRespectForcePress:h,isEnabled:l}},[d,l,h]),y=K(function(n){var s=u();return s||H(!1),bR(a,s,n)},[a,u]),v=Se(function(){return{uniqueId:r,descriptor:a,options:g,getDimension:y}},[a,y,g,r]),b=C.useRef(v),e=C.useRef(!0);fr(function(){return o.draggable.register(b.current),function(){return o.draggable.unregister(b.current)}},[o.draggable]),fr(function(){if(e.current){e.current=!1;return}var n=b.current;b.current=v,o.draggable.update(v,n)},[v,o.draggable])}function wR(t){t.preventDefault()}function xR(t){var r=C.useRef(null),a=K(function(E){r.current=E},[]),o=K(function(){return r.current},[]),u=yc(hd),d=u.contextId,h=u.dragHandleUsageInstructionsId,l=u.registry,g=yc(sg),y=g.type,v=g.droppableId,b=Se(function(){return{id:t.draggableId,index:t.index,type:y,droppableId:v}},[t.draggableId,t.index,y,v]),e=t.children,n=t.draggableId,s=t.isEnabled,c=t.shouldRespectForcePress,f=t.canDragInteractiveElements,m=t.isClone,p=t.mapped,_=t.dropAnimationFinished;if(!m){var S=Se(function(){return{descriptor:b,registry:l,getDraggableRef:o,canDragInteractiveElements:f,shouldRespectForcePress:c,isEnabled:s}},[b,l,o,f,c,s]);SR(S)}var x=Se(function(){return s?{tabIndex:0,role:"button","aria-describedby":h,"data-rbd-drag-handle-draggable-id":n,"data-rbd-drag-handle-context-id":d,draggable:!1,onDragStart:wR}:null},[d,h,n,s]),w=K(function(E){p.type==="DRAGGING"&&p.dropping&&E.propertyName==="transform"&&_()},[_,p]),U=Se(function(){var E=yR(p),T=p.type==="DRAGGING"&&p.dropping?w:null,P={innerRef:a,draggableProps:{"data-rbd-draggable-context-id":d,"data-rbd-draggable-id":n,style:E,onTransitionEnd:T},dragHandleProps:x};return P},[d,x,n,p,w,a]),A=Se(function(){return{draggableId:b.id,type:b.type,source:{index:b.index,droppableId:b.droppableId}}},[b.droppableId,b.id,b.index,b.type]);return e(U,p.snapshot,A)}var B1=function(t,r){return t===r},k1=function(t){var r=t.combine,a=t.destination;return a?a.droppableId:r?r.droppableId:null},ER=function(r){return r.combine?r.combine.draggableId:null},UR=function(r){return r.at&&r.at.type==="COMBINE"?r.at.combine.draggableId:null};function CR(){var t=_t(function(u,d){return{x:u,y:d}}),r=_t(function(u,d,h,l,g){return{isDragging:!0,isClone:d,isDropAnimating:!!g,dropAnimation:g,mode:u,draggingOver:h,combineWith:l,combineTargetFor:null}}),a=_t(function(u,d,h,l,g,y,v){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:g,combineWith:y,mode:d,offset:u,dimension:h,forceShouldAnimate:v,snapshot:r(d,l,g,y,null)}}}),o=function(d,h){if(d.isDragging){if(d.critical.draggable.id!==h.draggableId)return null;var l=d.current.client.offset,g=d.dimensions.draggables[h.draggableId],y=dr(d.impact),v=UR(d.impact),b=d.forceShouldAnimate;return a(t(l.x,l.y),d.movementMode,g,h.isClone,y,v,b)}if(d.phase==="DROP_ANIMATING"){var e=d.completed;if(e.result.draggableId!==h.draggableId)return null;var n=h.isClone,s=d.dimensions.draggables[h.draggableId],c=e.result,f=c.mode,m=k1(c),p=ER(c),_=d.dropDuration,S={duration:_,curve:Zm.drop,moveTo:d.newHomeClientOffset,opacity:p?Ws.opacity.drop:null,scale:p?Ws.scale.drop:null};return{mapped:{type:"DRAGGING",offset:d.newHomeClientOffset,dimension:s,dropping:S,draggingOver:m,combineWith:p,mode:f,forceShouldAnimate:null,snapshot:r(f,n,m,p,S)}}}return null};return o}function D1(t){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:t,combineWith:null}}var AR={mapped:{type:"SECONDARY",offset:yt,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:D1(null)}};function TR(){var t=_t(function(h,l){return{x:h,y:l}}),r=_t(D1),a=_t(function(h,l,g){return l===void 0&&(l=null),{mapped:{type:"SECONDARY",offset:h,combineTargetFor:l,shouldAnimateDisplacement:g,snapshot:r(l)}}}),o=function(l){return l?a(yt,l,!0):null},u=function(l,g,y,v){var b=y.displaced.visible[l],e=!!(v.inVirtualList&&v.effected[l]),n=ud(y),s=n&&n.draggableId===l?g:null;if(!b){if(!e)return o(s);if(y.displaced.invisible[l])return null;var c=Ao(v.displacedBy.point),f=t(c.x,c.y);return a(f,s,!0)}if(e)return o(s);var m=y.displacedBy.point,p=t(m.x,m.y);return a(p,s,b.shouldAnimate)},d=function(l,g){if(l.isDragging)return l.critical.draggable.id===g.draggableId?null:u(g.draggableId,l.critical.draggable.id,l.impact,l.afterCritical);if(l.phase==="DROP_ANIMATING"){var y=l.completed;return y.result.draggableId===g.draggableId?null:u(g.draggableId,y.result.draggableId,y.impact,y.afterCritical)}return null};return d}var PR=function(){var r=CR(),a=TR(),o=function(d,h){return r(d,h)||a(d,h)||AR};return o},IR={dropAnimationFinished:f1},BR=Rw(PR,IR,null,{context:ng,pure:!0,areStatePropsEqual:B1})(xR);function L1(t){var r=yc(sg),a=r.isUsingCloneFor;return a===t.draggableId&&!t.isClone?null:ue.createElement(BR,t)}function kR(t){var r=typeof t.isDragDisabled=="boolean"?!t.isDragDisabled:!0,a=!!t.disableInteractiveElementBlocking,o=!!t.shouldRespectForcePress;return ue.createElement(L1,re({},t,{isClone:!1,isEnabled:r,canDragInteractiveElements:a,shouldRespectForcePress:o}))}function DR(t){var r=C.useContext(hd);r||H(!1);var a=r.contextId,o=r.isMovementAllowed,u=C.useRef(null),d=C.useRef(null),h=t.children,l=t.droppableId,g=t.type,y=t.mode,v=t.direction,b=t.ignoreContainerClipping,e=t.isDropDisabled,n=t.isCombineEnabled,s=t.snapshot,c=t.useClone,f=t.updateViewportMaxScroll,m=t.getContainerForClone,p=K(function(){return u.current},[]),_=K(function(P){u.current=P},[]);K(function(){return d.current},[]);var S=K(function(P){d.current=P},[]),x=K(function(){o()&&f({maxScroll:v1()})},[o,f]);lR({droppableId:l,type:g,mode:y,direction:v,isDropDisabled:e,isCombineEnabled:n,ignoreContainerClipping:b,getDroppableRef:p});var w=ue.createElement(hR,{on:t.placeholder,shouldAnimate:t.shouldAnimatePlaceholder},function(P){var z=P.onClose,R=P.data,D=P.animate;return ue.createElement(fR,{placeholder:R,onClose:z,innerRef:S,animate:D,contextId:a,onTransitionEnd:x})}),U=Se(function(){return{innerRef:_,placeholder:w,droppableProps:{"data-rbd-droppable-id":l,"data-rbd-droppable-context-id":a}}},[a,l,w,_]),A=c?c.dragging.draggableId:null,E=Se(function(){return{droppableId:l,type:g,isUsingCloneFor:A}},[l,A,g]);function T(){if(!c)return null;var P=c.dragging,z=c.render,R=ue.createElement(L1,{draggableId:P.draggableId,index:P.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(D,B){return z(D,B,P)});return Fb.createPortal(R,m())}return ue.createElement(sg.Provider,{value:E},h(U,s),T())}var Bf=function(r,a){return r===a.droppable.type},xy=function(r,a){return a.draggables[r.draggable.id]},LR=function(){var r={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},a=re({},r,{shouldAnimatePlaceholder:!1}),o=_t(function(h){return{draggableId:h.id,type:h.type,source:{index:h.index,droppableId:h.droppableId}}}),u=_t(function(h,l,g,y,v,b){var e=v.descriptor.id,n=v.descriptor.droppableId===h;if(n){var s=b?{render:b,dragging:o(v.descriptor)}:null,c={isDraggingOver:g,draggingOverWith:g?e:null,draggingFromThisWith:e,isUsingPlaceholder:!0};return{placeholder:v.placeholder,shouldAnimatePlaceholder:!1,snapshot:c,useClone:s}}if(!l)return a;if(!y)return r;var f={isDraggingOver:g,draggingOverWith:e,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:v.placeholder,shouldAnimatePlaceholder:!0,snapshot:f,useClone:null}}),d=function(l,g){var y=g.droppableId,v=g.type,b=!g.isDropDisabled,e=g.renderClone;if(l.isDragging){var n=l.critical;if(!Bf(v,n))return a;var s=xy(n,l.dimensions),c=dr(l.impact)===y;return u(y,b,c,c,s,e)}if(l.phase==="DROP_ANIMATING"){var f=l.completed;if(!Bf(v,f.critical))return a;var m=xy(f.critical,l.dimensions);return u(y,b,k1(f.result)===y,dr(f.impact)===y,m,e)}if(l.phase==="IDLE"&&l.completed&&!l.shouldFlush){var p=l.completed;if(!Bf(v,p.critical))return a;var _=dr(p.impact)===y,S=!!(p.impact.at&&p.impact.at.type==="COMBINE"),x=p.critical.droppable.id===y;return _?S?r:a:x?r:a}return a};return d},zR={updateViewportMaxScroll:$3};function RR(){return document.body||H(!1),document.body}var FR={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:RR},z1=Rw(LR,zR,null,{context:ng,pure:!0,areStatePropsEqual:B1})(DR);z1.defaultProps=FR;function MR(){const[t,r]=ad(yw),a=o=>{if(!o.destination)return;const u=[...t],[d]=u.splice(o.source.index,1);u.splice(o.destination.index,0,d),u.forEach((h,l)=>{h.zIndex=l+1}),r(u),Ai.getAVCanvas().spriteManager.sortSprite()};return j.jsx("div",{className:"px-2 res-list",children:j.jsx(Kz,{onDragEnd:a,children:j.jsx(z1,{droppableId:"list-container",children:o=>j.jsxs("div",{className:"list-container",...o.droppableProps,ref:o.innerRef,children:[t.map((u,d)=>j.jsx(kR,{draggableId:u.name,index:d,children:h=>j.jsx("div",{className:"item-container",ref:h.innerRef,...h.dragHandleProps,...h.draggableProps,children:j.jsxs("div",{className:"flex",children:[j.jsx("span",{className:"flex-1",children:u.name}),j.jsx("button",{onClick:()=>{Ai.getAVCanvas().spriteManager.removeSprite(u),r(t.filter(l=>l!==u))},children:"X"})]})})},u.name)),o.placeholder]})})})})}function OR(){return j.jsxs("div",{className:"h-screen flex flex-col",children:[j.jsxs("div",{className:"flex flex-1",children:[j.jsxs("div",{className:"left flex flex-col border-solid border-2 w-[250px]",children:[j.jsx("div",{className:"flex-1",children:j.jsx(ok,{})}),j.jsxs("div",{className:"sprite-list flex-1",children:[j.jsx("div",{className:"font-bold",children:"素材列表"}),j.jsx(MR,{})]}),j.jsxs("div",{className:"tpl-list flex-1",children:[j.jsx("div",{className:"font-bold",children:"模板列表"}),j.jsx("div",{children:"开发中"})]})]}),j.jsx("div",{className:"main flex-1 border-solid border-2",children:j.jsx(ak,{})}),j.jsx("div",{className:"right border-solid border-2 w-[250px]",children:j.jsx(sk,{})})]}),j.jsxs("footer",{className:"text-center",children:[j.jsx("a",{className:"text-blue-400",href:"https://github.com/hughfenghen/bloom-shadow",children:"Bloom Shadow"})," ","Powerd by"," ",j.jsx("a",{className:"text-blue-400",href:"https://github.com/hughfenghen/WebAV",children:"WebAV"})]})]})}kf.createRoot(document.getElementById("root")).render(j.jsx(OR,{}));
